(()=>{var e={428:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AbstractArrayDeclarator:()=>AbstractArrayDeclarator,AbstractFunctionDeclarator:()=>AbstractFunctionDeclarator,AbstractPointerDeclarator:()=>AbstractPointerDeclarator,ArrayDeclarator:()=>ArrayDeclarator,AssignmentExpression:()=>AssignmentExpression,BinaryExpression:()=>BinaryExpression,BinaryOperations:()=>r,BreakStatement:()=>BreakStatement,CaseStatement:()=>CaseStatement,CastExpression:()=>CastExpression,CompoundStatement:()=>CompoundStatement,ConditionalExpression:()=>ConditionalExpression,Constant:()=>Constant,ConstantExpression:()=>ConstantExpression,ContinueStatement:()=>ContinueStatement,CustomTypeSpecifier:()=>CustomTypeSpecifier,Declaration:()=>Declaration,DeclarationSpecifiers:()=>DeclarationSpecifiers,DefaultStatement:()=>DefaultStatement,DoWhileLoop:()=>DoWhileLoop,EnumSpecifier:()=>EnumSpecifier,Enumerator:()=>Enumerator,Expression:()=>Expression,ExpressionStatement:()=>ExpressionStatement,ForLoop:()=>ForLoop,FunctionCallExpression:()=>FunctionCallExpression,FunctionDeclarator:()=>FunctionDeclarator,FunctionDefinition:()=>FunctionDefinition,GotoStatement:()=>GotoStatement,Identifier:()=>Identifier,IdentifierDeclarator:()=>IdentifierDeclarator,IfStatement:()=>IfStatement,InitDeclarator:()=>InitDeclarator,MemberAccessExpression:()=>MemberAccessExpression,NoOp:()=>NoOp,ParameterDeclaration:()=>ParameterDeclaration,ParseNode:()=>ParseNode,Pointer:()=>Pointer,PointerDeclarator:()=>PointerDeclarator,ReturnStatement:()=>ReturnStatement,SizeofExpression:()=>SizeofExpression,SpecifierQualifiers:()=>SpecifierQualifiers,Statement:()=>Statement,StringLiteral:()=>StringLiteral,StructDeclaration:()=>StructDeclaration,StructUnionSpecifier:()=>StructUnionSpecifier,SwitchStatement:()=>SwitchStatement,TypeName:()=>TypeName,UnaryExpression:()=>UnaryExpression,UnaryOperations:()=>i,WhileLoop:()=>WhileLoop});class ParseNode{constructor(e){this.loc=e}*children(){}}class Expression extends ParseNode{constructor(){super(...arguments),this._expression=!0}}class Identifier extends Expression{constructor(e,t){super(e),this.name=t,this.type="identifier"}}class Constant extends Expression{constructor(e,t,n){super(e),this.value=t,this.valueType=n,this.type="constant"}}class StringLiteral extends Expression{constructor(e,t){super(e),this.value=t,this.type="stringLiteral"}}const i=["postfixIncrement","postfixDecrement","prefixIncrement","prefixDecrement","addressOf","dereference","unaryPlus","unaryMinus","bitwiseNot","logicalNot"];class UnaryExpression extends Expression{constructor(e,t,n){super(e),this.type=t,this.body=n,this._unaryExpr=!0}*children(){yield this.body}}const r=["arraySubscript","comma","mul","div","mod","add","sub","bitwiseShiftLeft","bitwiseShiftRight","relationalLT","relationalGT","relationalLEq","relationalGEq","relationalEq","relationalNEq","bitwiseAnd","bitwiseXor","bitwiseOr","logicalAnd","logicalOr"];class BinaryExpression extends Expression{constructor(e,t,n,i){super(e),this.type=t,this.lhs=n,this.rhs=i,this._binaryExpr=!0}*children(){yield this.lhs,yield this.rhs}}class SizeofExpression extends Expression{constructor(e,t){super(e),this.body=t,this.type="sizeof"}*children(){yield this.body}}class CastExpression extends Expression{constructor(e,t,n){super(e),this.targetType=t,this.body=n,this.type="cast"}*children(){yield this.targetType,yield this.body}}class FunctionCallExpression extends Expression{constructor(e,t,n=[]){super(e),this.fn=t,this.args=n,this.type="functionCall"}*children(){yield this.fn,yield*this.args}}class MemberAccessExpression extends Expression{constructor(e,t,n,i){super(e),this.pointer=t,this.lhs=n,this.rhs=i,this.type="access"}*children(){yield this.lhs}}class ConditionalExpression extends Expression{constructor(e,t,n,i){super(e),this.condition=t,this.trueValue=n,this.falseValue=i,this.type="conditional"}*children(){yield this.condition,yield this.trueValue,yield this.falseValue}}class AssignmentExpression extends Expression{constructor(e,t,n,i){super(e),this.assignType=t,this.lhs=n,this.rhs=i,this.type="assign"}*children(){yield this.lhs,yield this.rhs}}class ConstantExpression extends Expression{constructor(e,t){super(e),this.expr=t,this.type="constantExpr"}*children(){yield this.expr}}class CustomTypeSpecifier extends ParseNode{constructor(e,t){super(e),this.name=t,this.type="customType"}}class SpecifierQualifiers extends ParseNode{constructor(e,t,n){super(e),this.specifierList=t,this.qualifierList=n,this.type="specifiersAndQualifiers"}*children(){for(const e of this.specifierList)e instanceof ParseNode&&(yield e)}}class DeclarationSpecifiers extends ParseNode{constructor(e,t,n,i,r){super(e),this.specifierList=t,this.qualifierList=n,this.storageList=i,this.fnSpecifierList=r,this.type="declarationSpecifiers"}*children(){for(const e of this.specifierList)e instanceof ParseNode&&(yield e)}}class EnumSpecifier extends ParseNode{constructor(e,t,n){super(e),this.id=t,this.body=n,this.type="enum"}*children(){this.body&&(yield*this.body)}}class Enumerator extends ParseNode{constructor(e,t,n){super(e),this.id=t,this.value=n,this.type="enumerator"}*children(){this.value&&(yield this.value)}}class Declaration extends ParseNode{constructor(e,t,n=[]){super(e),this.typeInfo=t,this.list=n,this.type="declaration"}*children(){yield this.typeInfo,yield*this.list}}class InitDeclarator extends ParseNode{constructor(e,t,n){super(e),this.body=t,this.initializer=n,this.type="initDeclarator"}*children(){yield this.body,yield*this.exploreInitializer()}*exploreInitializer(e=this.initializer){if(e instanceof AssignmentExpression)yield e;else if(Array.isArray(e))for(const t of e)yield*this.exploreInitializer(t)}}class StructUnionSpecifier extends ParseNode{constructor(e,t,n,i){super(e),this.structure=t,this.id=n,this.declarations=i,this.type="structUnionSpecifier"}*children(){this.declarations&&(yield*this.declarations)}}class StructDeclaration extends ParseNode{constructor(e,t,n=[]){super(e),this.typeInfo=t,this.list=n,this.type="structDeclaration"}*children(){yield this.typeInfo,yield*this.list}}class PointerDeclarator extends ParseNode{constructor(e,t,n){super(e),this.pointer=t,this.body=n,this.type="pointerDeclarator",this.abstractDeclarator=!1}*children(){yield this.pointer,yield this.body}}class IdentifierDeclarator extends ParseNode{constructor(e,t){super(e),this.id=t,this.type="identifierDeclarator",this.abstractDeclarator=!1}}class ArrayDeclarator extends ParseNode{constructor(e,t,n){super(e),this.body=t,this.length=n,this.type="arrayDeclarator",this.abstractDeclarator=!1}*children(){yield this.body,this.length&&(yield this.length)}}class FunctionDeclarator extends ParseNode{constructor(e,t,n,i=!1){super(e),this.body=t,this.args=n,this.variadic=i,this.type="functionDeclarator",this.abstractDeclarator=!1}*children(){yield this.body;for(const e of this.args??[])e instanceof ParseNode&&(yield e)}}class ParameterDeclaration extends ParseNode{constructor(e,t,n){super(e),this.typeInfo=t,this.declarator=n,this.type="parameterDeclaration"}*children(){yield this.typeInfo,this.declarator&&(yield this.declarator)}}class Pointer extends ParseNode{constructor(e,t,n){super(e),this.qualifierList=t,this.body=n,this.type="pointer"}*children(){this.body&&(yield this.body)}}class TypeName extends ParseNode{constructor(e,t,n){super(e),this.typeInfo=t,this.declarator=n,this.type="typeName"}*children(){yield this.typeInfo,this.declarator&&(yield this.declarator)}}class AbstractPointerDeclarator extends ParseNode{constructor(e,t,n){super(e),this.pointer=t,this.body=n,this.type="abstractPointerDeclarator",this.abstractDeclarator=!0}*children(){yield this.pointer,this.body&&(yield this.body)}}class AbstractArrayDeclarator extends ParseNode{constructor(e,t,n){super(e),this.body=t,this.length=n,this.type="abstractArrayDeclarator",this.abstractDeclarator=!0}*children(){this.body&&(yield this.body),this.length&&(yield this.length)}}class AbstractFunctionDeclarator extends ParseNode{constructor(e,t,n,i=!1){super(e),this.body=t,this.args=n,this.variadic=i,this.type="abstractFunctionDeclarator",this.abstractDeclarator=!0}*children(){this.body&&(yield this.body),this.args&&(yield*this.args)}}class Statement extends ParseNode{constructor(){super(...arguments),this._statement=!0}setLabel(e){return this.label=e,this}}class IfStatement extends Statement{constructor(e,t,n,i){super(e),this.expression=t,this.ifBody=n,this.elseBody=i,this.type="ifStatement"}*children(){yield this.expression,yield this.ifBody,this.elseBody&&(yield this.elseBody)}}class SwitchStatement extends Statement{constructor(e,t,n){super(e),this.expression=t,this.body=n,this.type="switchStatement"}*children(){yield this.expression,yield this.body}}class CaseStatement extends Statement{constructor(e,t,n){super(e),this.value=t,this.body=n,this.type="caseStatement"}*children(){yield this.value,yield this.body}}class DefaultStatement extends Statement{constructor(e,t){super(e),this.body=t,this.type="defaultStatement"}*children(){yield this.body}}class CompoundStatement extends Statement{constructor(e,t){super(e),this.body=t,this.type="compoundStatement"}*children(){yield*this.body}}class ExpressionStatement extends Statement{constructor(e,t){super(e),this.expression=t,this.type="expressionStatement"}*children(){yield this.expression}}class NoOp extends Statement{constructor(e){super(e),this.type="nopStatement"}}class ForLoop extends Statement{constructor(e,t,n,i,r){super(e),this.init=t,this.test=n,this.update=i,this.body=r,this.type="forStatement"}*children(){yield this.init,yield this.test,this.update&&(yield this.update),yield this.body}}class WhileLoop extends Statement{constructor(e,t,n){super(e),this.test=t,this.body=n,this.type="whileStatement"}*children(){yield this.test,yield this.body}}class DoWhileLoop extends Statement{constructor(e,t,n){super(e),this.body=t,this.test=n,this.type="doWhileStatement"}*children(){yield this.body,yield this.test}}class GotoStatement extends Statement{constructor(e,t){super(e),this.target=t,this.type="gotoStatement"}}class ContinueStatement extends Statement{constructor(){super(...arguments),this.type="continueStatement"}}class BreakStatement extends Statement{constructor(){super(...arguments),this.type="breakStatement"}}class ReturnStatement extends Statement{constructor(e,t){super(e),this.value=t,this.type="returnStatement"}*children(){this.value&&(yield this.value)}}class FunctionDefinition extends ParseNode{constructor(e,t,n,i){super(e),this.typeInfo=t,this.declarator=n,this.body=i,this.type="functionDefinition"}*children(){yield this.typeInfo,yield this.declarator,yield this.body}}},347:(e,t,n)=>{var i=function(){function e(e,t){var n;if(Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonParserError"}),null==e&&(e="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:e}),this.hash=t,t&&t.exception instanceof Error){var i=t.exception;this.message=i.message||e,n=i.stack}n||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):n=new Error(e).stack),n&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:n})}function t(e,t,n){n=n||0;for(var i=0;i<t;i++)this.push(e),e+=n}function i(e,t){for(t+=e=this.length-e;e<t;e++)this.push(this[e])}function r(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];"function"==typeof r?(n++,r.apply(t,e[n])):t.push(r)}return t}"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,Error.prototype):e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e.prototype.name="JisonParserError";var o={trace:function(){},JisonParserError:e,yy:{},options:{type:"lalr",hasPartialLrUpgradeOnConflict:!0,errorRecoveryTokenDiscardCount:3},symbols_:{"!":14,"!=":43,$accept:0,$end:1,"%":16,"%=":48,"&":9,"&&":44,"&=":53,"(":3,")":4,"*":10,"*=":46,"+":11,"++":35,"+=":49,",":8,"-":12,"--":36,"-=":50,"->":34,".":7,"...":76,"/":15,"/=":47,":":22,";":24,"<":17,"<<":38,"<<=":51,"<=":40,"=":23,"==":42,">":18,">=":41,">>":39,">>=":52,"?":21,BREAK:87,CASE:77,CHAR:60,CONST:73,CONSTANT_CHAR:32,CONSTANT_FLOAT:28,CONSTANT_HEX:29,CONSTANT_INT:31,CONSTANT_OCTAL:30,CONTINUE:86,DEFAULT:78,DO:83,DOUBLE:65,ELSE:80,ENUM:72,EOF:1,EXTERN:57,FLOAT:64,FOR:84,GOTO:85,IDENTIFIER:27,IF:79,IMPORT:75,INLINE:74,INT:62,LONG:63,RETURN:88,SHORT:61,SIGNED:66,SIZEOF:37,STATIC:58,STRING_LITERAL:33,STRUCT:70,SWITCH:81,TYPEDEF:56,TYPE_NAME:69,UNION:71,UNSIGNED:67,VOID:59,WHILE:82,"[":5,"]":6,"^":19,"^=":54,_BOOL:68,abstract_declarator:141,additive_expression:101,and_expression:105,argument_expression_list:96,assignment_expression:111,assignment_operator:112,ast_tree:89,block_item:149,block_item_list:148,cast_expression:99,compound_statement:147,concat_string_literals:93,conditional_expression:110,constant:91,constant_expression:114,declaration:115,declaration_specifiers:116,declarator:133,direct_abstract_declarator:142,direct_declarator:134,enum_specifier:128,enumerator:130,enumerator_list:129,equality_expression:104,error:2,exclusive_or_expression:106,expression:113,expression_statement:150,external_declaration:155,function_definition:156,function_specifier:132,identifier:90,inclusive_or_expression:107,init_declarator:118,init_declarator_list:117,initializer:143,initializer_list:144,iteration_statement:152,jump_statement:153,labeled_statement:146,logical_and_expression:108,logical_or_expression:109,multiplicative_expression:100,parameter_declaration:139,parameter_list:138,parameter_type_list:137,pointer:135,postfix_expression:95,primary_expression:94,relational_expression:103,selection_statement:151,shift_expression:102,specifier_qualifier_list:125,statement:145,storage_class_specifier:119,string_literal:92,struct_declaration:124,struct_declaration_list:123,struct_declarator:127,struct_declarator_list:126,struct_or_union:122,struct_or_union_specifier:121,translation_unit:154,type_name:140,type_qualifier:131,type_qualifier_list:136,type_specifier:120,unary_expression:97,unary_operator:98,"{":25,"|":20,"|=":55,"||":45,"}":26,"~":13},terminals_:{1:"EOF",2:"error",3:"(",4:")",5:"[",6:"]",7:".",8:",",9:"&",10:"*",11:"+",12:"-",13:"~",14:"!",15:"/",16:"%",17:"<",18:">",19:"^",20:"|",21:"?",22:":",23:"=",24:";",25:"{",26:"}",27:"IDENTIFIER",28:"CONSTANT_FLOAT",29:"CONSTANT_HEX",30:"CONSTANT_OCTAL",31:"CONSTANT_INT",32:"CONSTANT_CHAR",33:"STRING_LITERAL",34:"->",35:"++",36:"--",37:"SIZEOF",38:"<<",39:">>",40:"<=",41:">=",42:"==",43:"!=",44:"&&",45:"||",46:"*=",47:"/=",48:"%=",49:"+=",50:"-=",51:"<<=",52:">>=",53:"&=",54:"^=",55:"|=",56:"TYPEDEF",57:"EXTERN",58:"STATIC",59:"VOID",60:"CHAR",61:"SHORT",62:"INT",63:"LONG",64:"FLOAT",65:"DOUBLE",66:"SIGNED",67:"UNSIGNED",68:"_BOOL",69:"TYPE_NAME",70:"STRUCT",71:"UNION",72:"ENUM",73:"CONST",74:"INLINE",75:"IMPORT",76:"...",77:"CASE",78:"DEFAULT",79:"IF",80:"ELSE",81:"SWITCH",82:"WHILE",83:"DO",84:"FOR",85:"GOTO",86:"CONTINUE",87:"BREAK",88:"RETURN"},TERROR:2,EOF:1,originalQuoteName:null,originalParseError:null,cleanupAfterParse:null,constructParseErrorInfo:null,yyMergeLocationInfo:null,__reentrant_call_depth:0,__error_infos:[],__error_recovery_infos:[],quoteName:function(e){return'"'+e+'"'},getSymbolName:function(e){if(this.terminals_[e])return this.terminals_[e];var t=this.symbols_;for(var n in t)if(t[n]===e)return n;return null},describeSymbol:function(e){if(e!==this.EOF&&this.terminal_descriptions_&&this.terminal_descriptions_[e])return this.terminal_descriptions_[e];if(e===this.EOF)return"end of input";var t=this.getSymbolName(e);return t?this.quoteName(t):null},collect_expected_token_set:function(e,t){var n=this.TERROR,i=[],r={};if(!t&&this.state_descriptions_&&this.state_descriptions_[e])return[this.state_descriptions_[e]];for(var o in this.table[e])if((o=+o)!==n){var s=t?o:this.describeSymbol(o);s&&!r[s]&&(i.push(s),r[s]=!0)}return i},productions_:function(e){for(var t=[],n=e.pop,i=e.rule,r=0,o=n.length;r<o;r++)t.push([n[r],i[r]]);return t}({pop:r([89,89,90,t,[91,5],92,93,93,t,[94,4],t,[95,8],96,96,t,[97,6],t,[98,6],99,99,t,[100,4],t,[101,3],t,[102,3],t,[103,5],t,[104,3],105,105,106,106,107,107,108,108,109,109,110,110,111,111,t,[112,11],113,113,114,115,115,t,[116,8],117,117,118,118,t,[119,3],t,[120,13],t,[121,3],122,122,123,123,124,t,[125,4],126,126,127,t,[128,5],129,129,130,130,131,132,132,133,133,t,[134,6],t,[135,4],136,136,137,137,138,138,t,[139,3],140,140,t,[141,3],t,[142,9],t,[143,3],144,144,t,[145,6],t,[146,3],147,147,148,148,149,149,150,150,t,[151,3],t,[152,6],t,[153,5],154,154,155,155,156]),rule:r([2,t,[1,9],i,[10,4],3,1,4,3,4,3,3,2,2,i,[10,3],t,[2,4],4,t,[1,7],4,1,t,[3,3],i,[4,3],i,[3,6],i,[8,7],i,[36,3],i,[4,6],5,i,[4,3],t,[1,11],i,[59,3],i,[3,3],i,[80,3],i,[4,4],i,[32,4],t,[1,15],5,4,i,[107,4],2,3,i,[31,4],i,[114,4],5,5,6,i,[40,8],i,[17,4],i,[130,4],i,[125,3],i,[67,4],i,[21,3],i,[139,3],i,[22,4],i,[46,3],3,3,4,i,[4,4],i,[33,3],i,[83,8],i,[41,3],i,[39,5],i,[31,3],5,7,5,5,7,6,7,6,7,i,[49,3],i,[20,6],3])}),performAction:function(e,t,n,i,r,o){var a=this.yy,c=a.parser,l=a.lexer;switch(n){case 0:this.$=void 0,this._$=o[i-1];break;case 1:return this.$=void 0,this._$=c.yyMergeLocationInfo(i-1,i),r[i-1];case 2:return this.$=void 0,this._$=o[i],[];case 3:case 9:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 142:this._$=o[i],this.$=e;break;case 4:this._$=o[i],this.$=new s.Constant(this._$,e,"float");break;case 5:this._$=o[i],this.$=new s.Constant(this._$,e,"hex");break;case 6:this._$=o[i],this.$=new s.Constant(this._$,e,"oct");break;case 7:this._$=o[i],this.$=new s.Constant(this._$,e,"int");break;case 8:this._$=o[i],this.$=new s.Constant(this._$,e,"char");break;case 10:case 13:case 16:case 26:case 38:case 40:case 44:case 47:case 50:case 55:case 58:case 60:case 62:case 64:case 66:case 68:case 70:case 83:case 98:case 113:case 114:case 130:case 144:case 167:case 178:case 183:case 184:case 185:case 186:case 187:case 188:case 196:case 197:case 216:this._$=o[i],this.$=r[i];break;case 11:this._$=c.yyMergeLocationInfo(i-1,i),this.$=r[i-1]+r[i];break;case 12:this._$=o[i],this.$=new s.Identifier(this._$,e);break;case 14:this._$=o[i],this.$=new s.StringLiteral(this._$,r[i]);break;case 15:case 146:case 169:case 179:this._$=c.yyMergeLocationInfo(i-2,i),this.$=r[i-1];break;case 17:this._$=c.yyMergeLocationInfo(i-3,i),this.$=new s.BinaryExpression(this._$,"arraySubscript",r[i-3],r[i-1]);break;case 18:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.FunctionCallExpression(this._$,r[i-2]);break;case 19:this._$=c.yyMergeLocationInfo(i-3,i),this.$=new s.FunctionCallExpression(this._$,r[i-3],r[i-1]);break;case 20:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.MemberAccessExpression(this._$,!1,r[i-2],r[i]);break;case 21:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.MemberAccessExpression(this._$,!0,r[i-2],r[i]);break;case 22:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.UnaryExpression(this._$,"postfixIncrement",r[i-1]);break;case 23:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.UnaryExpression(this._$,"postfixDecrement",r[i-1]);break;case 24:case 96:case 121:case 128:case 136:case 155:case 159:case 181:case 194:case 214:this._$=o[i],this.$=[r[i]];break;case 25:case 97:case 129:case 137:case 160:case 182:this._$=c.yyMergeLocationInfo(i-2,i),this.$=(r[i-2].push(r[i]),r[i-2]);break;case 27:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.UnaryExpression(this._$,"prefixIncrement",r[i]);break;case 28:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.UnaryExpression(this._$,"prefixDecrement",r[i]);break;case 29:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.UnaryExpression(this._$,r[i-1],r[i]);break;case 30:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.SizeofExpression(this._$,r[i]);break;case 31:this._$=c.yyMergeLocationInfo(i-3,i),this.$=new s.SizeofExpression(this._$,r[i-1]);break;case 32:this._$=o[i],this.$="addressOf";break;case 33:this._$=o[i],this.$="dereference";break;case 34:this._$=o[i],this.$="unaryPlus";break;case 35:this._$=o[i],this.$="unaryMinus";break;case 36:this._$=o[i],this.$="bitwiseNot";break;case 37:this._$=o[i],this.$="logicalNot";break;case 39:this._$=c.yyMergeLocationInfo(i-3,i),this.$=new s.CastExpression(this._$,r[i-2],r[i]);break;case 41:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"mul",r[i-2],r[i]);break;case 42:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"div",r[i-2],r[i]);break;case 43:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"mod",r[i-2],r[i]);break;case 45:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"add",r[i-2],r[i]);break;case 46:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"sub",r[i-2],r[i]);break;case 48:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"bitwiseShiftLeft",r[i-2],r[i]);break;case 49:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"bitwiseShiftRight",r[i-2],r[i]);break;case 51:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"relationalLT",r[i-2],r[i]);break;case 52:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"relationalGT",r[i-2],r[i]);break;case 53:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"relationalLEq",r[i-2],r[i]);break;case 54:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"relationalGEq",r[i-2],r[i]);break;case 56:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"relationalEq",r[i-2],r[i]);break;case 57:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"relationalNEq",r[i-2],r[i]);break;case 59:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"bitwiseAnd",r[i-2],r[i]);break;case 61:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"bitwiseXor",r[i-2],r[i]);break;case 63:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"bitwiseOr",r[i-2],r[i]);break;case 65:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"logicalAnd",r[i-2],r[i]);break;case 67:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"logicalOr",r[i-2],r[i]);break;case 69:this._$=c.yyMergeLocationInfo(i-4,i),this.$=new s.ConditionalExpression(this._$,r[i-4],r[i-2],r[i]);break;case 71:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.AssignmentExpression(this._$,r[i-1],r[i-2],r[i]);break;case 72:this._$=o[i],this.$=void 0;break;case 73:this._$=o[i],this.$="mul";break;case 74:this._$=o[i],this.$="div";break;case 75:this._$=o[i],this.$="mod";break;case 76:this._$=o[i],this.$="add";break;case 77:this._$=o[i],this.$="sub";break;case 78:this._$=o[i],this.$="leftShift";break;case 79:this._$=o[i],this.$="rightShift";break;case 80:this._$=o[i],this.$="bitwiseAnd";break;case 81:this._$=o[i],this.$="bitwiseXor";break;case 82:this._$=o[i],this.$="bitwiseOr";break;case 84:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.BinaryExpression(this._$,"comma",r[i-2],r[i]);break;case 85:this._$=o[i],this.$=new s.ConstantExpression(this._$,r[i]);break;case 86:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.Declaration(this._$,r[i-1]);break;case 87:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.Declaration(this._$,r[i-2],r[i-1]);break;case 88:this._$=o[i],this.$=new s.DeclarationSpecifiers(this._$,[],[],[r[i]],[]);break;case 89:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.DeclarationSpecifiers(this._$,r[i].specifierList,r[i].qualifierList,[r[i-1],...r[i].storageList],r[i].fnSpecifierList);break;case 90:this._$=o[i],this.$=new s.DeclarationSpecifiers(this._$,[r[i]],[],[],[]);break;case 91:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.DeclarationSpecifiers(this._$,[r[i-1],...r[i].specifierList],r[i].qualifierList,r[i].storageList,r[i].fnSpecifierList);break;case 92:this._$=o[i],this.$=new s.DeclarationSpecifiers(this._$,[],[r[i]],[],[]);break;case 93:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.DeclarationSpecifiers(this._$,r[i].specifierList,[r[i-1],...r[i].qualifierList],r[i].storageList,r[i].fnSpecifierList);break;case 94:this._$=o[i],this.$=new s.DeclarationSpecifiers(this._$,[],[],[],[r[i]]);break;case 95:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.DeclarationSpecifiers(this._$,r[i].specifierList,r[i].qualifierList,r[i].storageList,[r[i-1],...r[i].fnSpecifierList]);break;case 99:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.InitDeclarator(this._$,r[i-2],r[i]);break;case 112:this._$=o[i],this.$="bool";break;case 115:this._$=o[i],this.$=new s.CustomTypeSpecifier(this._$,r[i]);break;case 116:this._$=c.yyMergeLocationInfo(i-4,i),this.$=new s.StructUnionSpecifier(this._$,r[i-4],r[i-3],r[i-1]);break;case 117:this._$=c.yyMergeLocationInfo(i-3,i),this.$=new s.StructUnionSpecifier(this._$,r[i-3],void 0,r[i-1]);break;case 118:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.StructUnionSpecifier(this._$,r[i-1],r[i]);break;case 119:this._$=o[i],this.$="struct";break;case 120:this._$=o[i],this.$="union";break;case 122:case 156:case 195:case 215:this._$=c.yyMergeLocationInfo(i-1,i),this.$=(r[i-1].push(r[i]),r[i-1]);break;case 123:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.StructDeclaration(this._$,r[i-2],r[i-1]);break;case 124:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.SpecifierQualifiers(this._$,[r[i-1],...r[i].specifierList],r[i].qualifierList);break;case 125:this._$=o[i],this.$=new s.SpecifierQualifiers(this._$,[r[i]],[]);break;case 126:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.SpecifierQualifiers(this._$,r[i].specifierList,[r[i-1],...r[i].qualifierList]);break;case 127:this._$=o[i],this.$=new s.SpecifierQualifiers(this._$,[],[r[i]]);break;case 131:this._$=c.yyMergeLocationInfo(i-3,i),this.$=new s.EnumSpecifier(this._$,void 0,r[i-1]);break;case 132:this._$=c.yyMergeLocationInfo(i-4,i),this.$=new s.EnumSpecifier(this._$,r[i-3],r[i-1]);break;case 133:this._$=c.yyMergeLocationInfo(i-4,i),this.$=new s.EnumSpecifier(this._$,void 0,r[i-2]);break;case 134:this._$=c.yyMergeLocationInfo(i-5,i),this.$=new s.EnumSpecifier(this._$,r[i-4],r[i-2]);break;case 135:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.EnumSpecifier(this._$,r[i]);break;case 138:this._$=o[i],this.$=new s.Enumerator(this._$,r[i]);break;case 139:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.Enumerator(this._$,r[i-2],r[i]);break;case 140:this._$=o[i],this.$="const";break;case 141:this._$=o[i],this.$="inline";break;case 143:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.PointerDeclarator(this._$,r[i-1],r[i]);break;case 145:this._$=o[i],this.$=new s.IdentifierDeclarator(this._$,r[i]);break;case 147:this._$=c.yyMergeLocationInfo(i-3,i),this.$=new s.ArrayDeclarator(this._$,r[i-3],r[i-1]);break;case 148:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.ArrayDeclarator(this._$,r[i-2]);break;case 149:this._$=c.yyMergeLocationInfo(i-3,i),this.$=new s.FunctionDeclarator(this._$,r[i-3],r[i-1],r[i-1].variadic);break;case 150:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.FunctionDeclarator(this._$,r[i-2]);break;case 151:this._$=o[i],this.$=new s.Pointer(this._$);break;case 152:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.Pointer(this._$,r[i]);break;case 153:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.Pointer(this._$,void 0,r[i]);break;case 154:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.Pointer(this._$,r[i-1],r[i]);break;case 157:this._$=o[i],this.$=(r[i].variadic=!1,r[i]);break;case 158:this._$=c.yyMergeLocationInfo(i-2,i),this.$=(r[i-2].variadic=!0,r[i-2]);break;case 161:case 162:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.ParameterDeclaration(this._$,r[i-1],r[i]);break;case 163:this._$=o[i],this.$=new s.ParameterDeclaration(this._$,r[i]);break;case 164:this._$=o[i],this.$=new s.TypeName(this._$,r[i]);break;case 165:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.TypeName(this._$,r[i-1],r[i]);break;case 166:this._$=o[i],this.$=new s.AbstractPointerDeclarator(this._$,r[i]);break;case 168:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.AbstractPointerDeclarator(this._$,r[i-1],r[i]);break;case 170:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.AbstractArrayDeclarator(this._$);break;case 171:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.AbstractArrayDeclarator(this._$,void 0,r[i-1]);break;case 172:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.AbstractArrayDeclarator(this._$,r[i-2]);break;case 173:this._$=c.yyMergeLocationInfo(i-3,i),this.$=new s.AbstractArrayDeclarator(this._$,r[i-3],r[i-1]);break;case 174:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.AbstractFunctionDeclarator(this._$);break;case 175:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.AbstractFunctionDeclarator(this._$,void 0,r[i-1],r[i-1].variadic);break;case 176:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.AbstractFunctionDeclarator(this._$,r[i-2]);break;case 177:this._$=c.yyMergeLocationInfo(i-3,i),this.$=new s.AbstractFunctionDeclarator(this._$,r[i-3],r[i-1],r[i-1].variadic);break;case 180:this._$=c.yyMergeLocationInfo(i-3,i),this.$=r[i-2];break;case 189:this._$=c.yyMergeLocationInfo(i-2,i),this.$=r[i].setLabel(r[i-2]);break;case 190:this._$=c.yyMergeLocationInfo(i-3,i),this.$=new s.CaseStatement(this._$,r[i-2],r[i]);break;case 191:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.DefaultStatement(this._$,r[i]);break;case 192:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.CompoundStatement(this._$,[]);break;case 193:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.CompoundStatement(this._$,r[i-1]);break;case 198:this._$=o[i],this.$=new s.NoOp(this._$);break;case 199:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.ExpressionStatement(this._$,r[i-1]);break;case 200:this._$=c.yyMergeLocationInfo(i-4,i),this.$=new s.IfStatement(this._$,r[i-2],r[i]);break;case 201:this._$=c.yyMergeLocationInfo(i-6,i),this.$=new s.IfStatement(this._$,r[i-4],r[i-2],r[i]);break;case 202:this._$=c.yyMergeLocationInfo(i-4,i),this.$=new s.SwitchStatement(this._$,r[i-2],r[i]);break;case 203:this._$=c.yyMergeLocationInfo(i-4,i),this.$=new s.WhileLoop(this._$,r[i-2],r[i]);break;case 204:this._$=c.yyMergeLocationInfo(i-6,i),this.$=new s.DoWhileLoop(this._$,r[i-5],r[i-2]);break;case 205:case 207:this._$=c.yyMergeLocationInfo(i-5,i),this.$=new s.ForLoop(this._$,r[i-3],r[i-2],void 0,r[i]);break;case 206:case 208:this._$=c.yyMergeLocationInfo(i-6,i),this.$=new s.ForLoop(this._$,r[i-4],r[i-3],r[i-2],r[i]);break;case 209:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.GotoStatement(this._$,r[i-1]);break;case 210:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.ContinueStatement(this._$);break;case 211:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.BreakStatement(this._$);break;case 212:this._$=c.yyMergeLocationInfo(i-1,i),this.$=new s.ReturnStatement(this._$);break;case 213:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.ReturnStatement(this._$,r[i-1]);break;case 217:this._$=o[i],this.$=(l.externalDeclaration(r[i]),r[i]);break;case 218:this._$=c.yyMergeLocationInfo(i-2,i),this.$=new s.FunctionDefinition(this._$,r[i-2],r[i-1],r[i])}},table:function(e){for(var t=[],n=e.len,i=e.symbol,r=e.type,o=e.state,s=e.mode,a=e.goto,c=0,l=n.length;c<l;c++){for(var h=n[c],u={},d=0;d<h;d++){var f=i.shift();switch(r.shift()){case 2:u[f]=[s.shift(),a.shift()];break;case 0:u[f]=o.shift();break;default:u[f]=[3]}}t.push(u)}return t}({len:r([34,1,32,t,[0,4],10,t,[35,4],t,[0,19],3,3,t,[0,4],5,0,2,4,7,0,10,0,7,t,[0,5],28,23,4,28,0,40,91,0,8,7,39,32,9,0,0,1,23,23,0,9,26,26,2,0,3,4,0,0,41,0,37,8,42,25,25,26,25,i,[25,3],t,[0,5],10,0,0,44,61,11,t,[0,6],12,0,14,18,20,22,25,0,0,90,i,[25,6],t,[0,4],39,38,1,0,2,t,[1,3],59,1,i,[6,3],40,i,[113,3],1,t,[0,3],i,[19,3],i,[45,3],0,0,23,0,i,[9,3],t,[0,4],4,38,2,2,0,38,t,[0,11],39,35,39,40,i,[19,3],i,[9,3],t,[0,3],61,34,33,i,[68,3],7,32,31,30,30,t,[29,4],28,28,27,27,t,[26,3],0,0,59,1,59,0,38,t,[39,3],1,70,i,[85,4],i,[46,3],30,0,0,8,4,42,i,[51,3],8,i,[85,5],i,[174,3],2,9,2,i,[99,5],1,10,11,0,26,i,[103,3],12,14,18,18,t,[20,4],22,22,25,i,[168,3],i,[67,3],i,[56,3],2,2,1,41,41,i,[49,5],39,32,1,i,[156,3],i,[77,4],0,37,0,i,[144,5],t,[59,3],39,40,40,i,[21,8],0,52,i,[47,3],59,2,59,i,[82,3],59,1,i,[60,3],i,[62,3],0,0]),symbol:r([1,t,[56,20,1],89,115,116,t,[119,4,1],128,131,132,154,155,156,1,i,[35,21],i,[34,9],155,156,3,10,24,27,90,117,118,133,134,135,3,4,5,8,i,[13,3],i,[48,20],i,[47,8],i,[35,105],25,27,90,i,[3,3],8,23,24,25,147,8,24,3,27,90,134,i,[52,4],i,[14,3],i,[59,5],27,73,131,135,136,3,10,27,90,i,[181,9],25,i,[77,21],i,[17,15],t,[120,6,1],128,131,27,90,129,130,i,[55,28],3,t,[9,6,1],25,t,[27,7,1],35,36,37,t,[90,6,1],t,[97,15,1],143,i,[40,7],t,[24,10,1],i,[42,3],i,[80,20],77,78,79,t,[81,8,1],i,[73,21],113,i,[398,9],t,[145,9,1],i,[221,4],i,[403,8],i,[246,4],6,i,[107,6],i,[146,30],114,4,i,[338,28],137,138,139,i,[317,9],4,i,[282,23],26,i,[24,18],i,[23,4],i,[142,4],126,127,i,[143,6],10,27,i,[36,18],i,[35,4],i,[26,25],8,26,8,23,26,i,[371,5],i,[343,39],144,4,6,t,[8,5,1],t,[15,10,1],26,t,[38,18,1],112,i,[37,3],21,22,24,26,45,t,[3,10,1],i,[48,11],34,35,36,i,[51,18],i,[128,7],i,[127,18],i,[25,50],99,i,[26,25],i,[151,7],44,45,i,[9,3],i,[140,3],i,[10,4],i,[162,21],t,[33,4,1],i,[163,18],92,i,[88,17],i,[339,15],i,[576,22],i,[361,6],140,i,[115,3],i,[94,4],i,[126,7],9,i,[12,18],i,[109,4],i,[14,4],i,[134,6],24,26,i,[127,6],i,[18,12],i,[147,8],i,[20,4],11,12,i,[22,20],i,[199,11],i,[25,10],i,[778,85],i,[777,7],i,[1182,9],5,i,[325,16],i,[486,46],i,[810,13],22,i,[1109,3],t,[3,3],i,[183,8],i,[46,10],i,[162,33],i,[153,3],i,[152,5],27,90,24,24,i,[64,8],i,[722,31],113,i,[963,3],6,4,4,8,i,[895,6],i,[1205,4],141,142,i,[874,23],8,24,i,[811,3],i,[810,8],i,[196,31],i,[857,3],26,i,[42,37],111,i,[38,38],113,i,[39,35],i,[74,40],4,i,[40,22],t,[96,16,1],27,90,27,90,i,[157,56],i,[794,44],i,[100,34],i,[34,33],4,8,4,i,[1252,4],i,[443,3],i,[43,32],i,[32,31],i,[31,30],i,[30,59],i,[29,115],i,[28,55],i,[27,53],i,[26,59],i,[993,52],22,i,[1053,60],i,[918,111],i,[39,43],82,i,[1204,18],i,[1449,20],i,[1438,31],150,24,8,24,t,[56,21,1],i,[33,8],i,[2155,5],i,[2486,3],142,i,[8,4],i,[2076,5],i,[102,21],i,[47,8],i,[1299,3],i,[2207,3],i,[859,3],i,[2280,38],i,[2192,4],i,[2191,4],i,[1324,11],i,[1658,12],i,[2135,22],8,22,i,[1948,9],6,8,i,[974,3],i,[1953,10],i,[1848,11],i,[587,27],4,5,i,[205,4],10,i,[2403,28],i,[197,6],i,[1916,56],i,[1934,30],i,[20,60],i,[1994,22],i,[2016,43],i,[2041,34],i,[805,50],i,[387,3],i,[391,3],i,[1924,9],i,[697,32],150,i,[41,42],i,[627,4],i,[2865,70],i,[549,3],i,[856,37],i,[1009,45],i,[1106,59],i,[59,118],i,[2030,56],i,[40,56],6,4,i,[2640,43],t,[80,9,1],i,[588,3],i,[653,60],i,[61,120],i,[2629,9],i,[475,110]]),type:r([t,[2,21],t,[0,13],1,i,[35,32],i,[15,10],t,[2,27],i,[45,12],i,[35,103],i,[3,6],i,[5,8],i,[52,15],i,[69,6],i,[76,31],i,[92,25],i,[55,46],i,[338,16],i,[314,13],t,[2,47],t,[0,40],i,[43,8],i,[73,46],i,[491,36],i,[333,19],i,[409,26],i,[142,15],i,[97,21],i,[26,38],i,[35,21],i,[253,26],i,[329,34],t,[2,67],i,[112,25],i,[25,33],i,[51,43],i,[146,46],i,[576,61],t,[2,173],i,[777,42],i,[1182,34],i,[105,50],i,[162,65],i,[428,23],i,[409,35],i,[874,32],i,[927,19],i,[1006,54],i,[42,27],i,[576,39],i,[74,74],i,[40,24],i,[1420,3],i,[1389,71],i,[794,46],i,[34,50],i,[1657,13],i,[43,29],i,[32,31],i,[31,30],i,[30,59],i,[29,115],i,[28,55],i,[27,53],i,[26,69],i,[1357,73],i,[623,63],i,[918,78],i,[922,61],i,[1438,53],i,[56,33],i,[2037,26],i,[902,45],i,[314,25],i,[1413,8],i,[97,20],i,[1822,76],i,[116,13],i,[200,38],t,[2,266],i,[865,54],i,[48,41],i,[89,45],i,[2865,60],i,[73,33],i,[2165,68],i,[1166,59],i,[59,105],i,[2030,63],i,[938,93],i,[2875,93],i,[61,121],i,[475,88]]),state:r([1,t,[6,4,1],25,31,26,10,11,2,t,[4,6,1],i,[12,5],36,5,44,39,42,37,41,40,47,i,[16,7],48,i,[8,7],49,i,[8,7],50,i,[8,7],51,54,55,44,60,65,64,63,44,66,41,40,71,25,31,68,69,70,26,72,75,73,74,97,98,107,99,89,83,81,86,t,[115,6,-1],108,101,96,88,82,80,78,77,128,i,[22,19],142,132,119,121,i,[76,7],120,122,123,117,118,t,[124,4,1],44,143,144,41,40,i,[67,6],148,i,[45,12],147,145,153,i,[43,7],149,151,152,155,154,i,[112,3],157,i,[112,4],i,[8,3],159,i,[7,3],44,160,161,162,i,[133,5],163,i,[19,5],164,i,[137,3],168,i,[137,22],170,169,171,i,[24,6],191,86,i,[8,6],193,i,[8,7],148,86,194,i,[9,6],195,86,199,i,[58,20],142,200,i,[89,3],202,26,72,201,i,[202,34],219,i,[201,5],39,42,i,[202,23],221,i,[66,22],228,t,[122,6,1],230,i,[125,21],234,44,238,41,240,239,241,i,[239,7],75,248,i,[88,20],249,i,[58,20],254,i,[79,21],255,i,[64,17],256,i,[40,21],257,i,[22,6],259,i,[23,14],260,261,262,i,[290,22],i,[312,28],263,i,[115,16],264,i,[17,15],265,269,268,241,i,[19,14],271,i,[15,13],272,i,[14,12],273,i,[13,12],274,i,[13,11],275,i,[12,11],276,i,[12,11],277,i,[12,11],278,i,[12,10],279,i,[11,10],280,i,[11,9],281,i,[10,9],282,i,[10,8],283,i,[9,8],284,i,[9,8],285,i,[454,22],286,t,[122,7,1],i,[29,21],288,i,[29,6],i,[295,20],289,i,[316,21],290,i,[22,21],291,i,[22,21],292,i,[22,21],132,295,i,[665,8],294,i,[833,8],299,44,60,300,44,i,[13,8],66,41,240,305,151,152,303,i,[378,15],i,[593,6],307,44,308,i,[854,3],i,[621,8],i,[841,15],311,i,[50,8],317,300,i,[76,8],269,i,[74,5],i,[251,22],318,i,[251,26],142,132,323,i,[23,22],324,i,[149,20],326,i,[110,8],328,151,152,i,[32,19],332,i,[75,20],333,i,[148,22],334,i,[428,28],335,i,[29,28],336,i,[206,27],337,i,[22,21],339,i,[22,21],341,i,[95,22],346,i,[124,28],348,i,[29,28],350,i,[29,28],352,i,[29,28],353,i,[29,6]]),mode:r([t,[1,46],t,[2,7],i,[27,101],i,[31,5],1,i,[27,7],i,[9,3],i,[43,8],i,[18,5],i,[12,8],t,[2,20],i,[100,22],i,[44,38],t,[1,57],i,[96,6],i,[327,43],i,[218,8],i,[369,35],i,[20,35],i,[299,11],i,[352,20],i,[317,10],i,[250,19],i,[24,7],i,[67,6],i,[289,19],i,[310,86],i,[146,12],i,[412,22],i,[440,60],i,[236,15],i,[65,20],i,[8,22],i,[34,18],i,[30,22],i,[87,7],i,[55,20],i,[271,60],i,[246,30],i,[688,75],i,[561,7],i,[502,7],t,[1,217],i,[219,219],t,[1,232],i,[680,7],i,[458,70],i,[1605,13],i,[1062,14],i,[1676,26],i,[123,26],i,[1116,48],i,[1134,38],i,[20,60],i,[1194,23],i,[1216,42],i,[1241,80],i,[2006,28],i,[690,216],t,[2,42],i,[538,11],t,[1,155]]),goto:r([3,t,[12,13,1],27,33,34,32,28,29,30,35,i,[21,20],45,43,38,46,t,[88,7],i,[31,20],t,[90,7],i,[27,20],t,[92,7],i,[27,20],t,[94,7],i,[27,20],52,46,53,46,98,56,98,57,59,58,45,46,62,144,61,t,[144,4],t,[151,4],43,151,28,45,43,46,t,[118,6],67,t,[118,21],i,[74,15],46,t,[135,6],76,t,[135,21],100,t,[90,6,1],79,46,t,[102,5,1],109,84,85,87,i,[18,7],131,57,116,i,[20,10],i,[159,20],129,130,t,[133,9,1],i,[144,3],62,143,61,t,[143,4],100,146,i,[62,6],i,[59,10],150,i,[60,20],t,[152,4],43,152,28,156,i,[25,15],158,i,[16,15],i,[88,3],t,[125,5],i,[23,15],t,[127,5],i,[20,15],166,165,138,167,138,46,i,[206,18],t,[38,15],172,t,[38,10],t,[173,10,1],t,[68,3],183,t,[68,3],184,186,26,185,26,187,t,[26,16],188,189,190,t,[26,18],192,i,[230,16],i,[17,17],i,[138,7],i,[17,10],196,i,[17,16],t,[66,7],197,66,t,[64,3],198,t,[64,6],t,[14,21],109,t,[14,21],i,[96,17],i,[272,15],t,[62,3],203,t,[62,7],t,[60,3],204,t,[60,8],t,[58,10],205,206,58,58,t,[55,4],207,208,t,[55,6],209,210,t,[55,4],t,[50,12],211,212,t,[50,6],t,[47,4],213,214,t,[47,16],t,[44,4],215,44,44,216,217,t,[44,16],i,[576,9],218,i,[576,43],38,46,t,[12,15],220,t,[12,23],i,[248,17],222,224,223,225,226,227,i,[117,9],i,[25,10],i,[96,11],229,46,231,232,i,[34,7],233,i,[33,10],i,[860,3],235,236,157,237,242,163,243,163,43,46,244,i,[160,15],246,245,247,i,[590,8],i,[50,10],251,250,253,252,i,[21,17],i,[17,52],258,i,[18,16],46,i,[109,18],i,[482,32],i,[49,34],266,224,267,270,164,243,43,i,[178,69],i,[17,193],i,[539,23],287,i,[31,30],i,[129,68],293,i,[99,8],i,[784,30],296,224,297,i,[23,20],298,242,166,243,166,46,302,167,301,167,242,304,243,43,46,i,[35,20],100,306,i,[115,16],i,[1337,3],309,i,[1293,9],310,i,[24,10],224,312,t,[67,7],197,67,313,224,314,315,316,t,[65,3],198,t,[65,6],t,[63,3],203,t,[63,7],i,[193,17],270,166,243,270,i,[124,3],i,[123,20],t,[61,3],204,t,[61,8],t,[59,10],205,206,59,59,t,[56,4],207,208,t,[56,6],209,210,t,[56,4],t,[57,4],207,208,t,[57,6],209,210,t,[57,4],t,[51,12],211,212,t,[51,6],t,[52,12],211,212,t,[52,6],t,[53,12],211,212,t,[53,6],t,[54,12],211,212,t,[54,6],t,[48,4],213,214,t,[48,16],t,[49,4],213,214,t,[49,16],t,[45,4],215,45,45,216,217,t,[45,16],t,[46,4],215,46,46,216,217,t,[46,16],i,[554,30],319,224,320,224,321,224,322,i,[492,18],i,[18,18],302,168,301,168,100,325,i,[358,16],327,i,[352,20],329,330,331,i,[738,64],i,[30,67],i,[107,11],338,i,[18,17],340,i,[18,16],342,343,t,[200,43],344,t,[200,8],345,224,i,[139,30],347,i,[32,31],349,i,[32,31],351,i,[264,60]])}),defaultActions:function(e){for(var t={},n=e.idx,i=e.goto,r=0,o=n.length;r<o;r++){t[n[r]]=i[r]}return t}({idx:r([t,[3,4,1],t,[12,19,1],t,[33,4,1],38,42,44,t,[46,5,1],55,58,64,65,69,74,77,78,80,t,[89,7,1],97,98,t,[102,6,1],109,115,116,118,119,120,t,[122,6,1],131,142,143,146,147,t,[148,4,2],155,156,158,159,t,[161,5,1],170,t,[172,11,1],189,190,191,193,194,195,199,218,219,223,231,232,233,235,236,238,239,244,245,t,[247,4,1],252,254,258,260,261,262,266,268,t,[283,4,1],288,289,t,[296,4,1],304,306,t,[308,4,1],313,314,316,317,318,325,327,t,[329,5,1],335,336,342,343,346,348,t,[350,4,1]]),goto:r([2,214,216,217,t,[100,16,1],140,141,142,119,120,1,215,86,96,145,3,t,[89,4,2],218,87,153,155,121,136,99,178,70,16,t,[32,6,1],12,13,t,[4,5,1],10,9,40,192,194,196,197,t,[183,6,1],198,83,97,148,85,38,150,159,154,156,146,117,122,128,130,124,126,131,181,t,[72,11,1],22,23,t,[27,4,1],11,193,195,199,210,211,212,147,149,161,162,116,123,133,137,139,132,179,71,18,24,20,21,15,165,41,42,43,189,191,84,209,213,158,160,174,170,129,134,180,182,17,19,31,39,190,172,176,169,175,171,69,25,202,203,173,177,205,207,201,204,206,208])}),parseError:function(e,t,n){if(!t.recoverable)throw"function"==typeof this.trace&&this.trace(e),n||(n=this.JisonParserError),new n(e,t);"function"==typeof this.trace&&this.trace(e),t.destroy()},parse:function(e){var t,n,i,r=this,o=new Array(128),s=new Array(128),a=new Array(128),c=new Array(128),l=this.table,h=0,u=0,d=(this.TERROR,this.EOF),f=(this.options.errorRecoveryTokenDiscardCount,[0,354]);i=this.__lexer__?this.__lexer__:this.__lexer__=Object.create(this.lexer);var p={parseError:void 0,quoteName:void 0,lexer:void 0,parser:void 0,pre_parse:void 0,post_parse:void 0,pre_lex:void 0,post_lex:void 0};function v(e){if("object"==typeof e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return e}function y(e,t){for(var n in t)void 0===e[n]&&Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function g(e){var t=v(e);return t&&t.range&&(t.range=t.range.slice(0)),t}function m(){var e=i.fastLex();return"number"!=typeof e&&(e=r.symbols_[e]||e),e||d}"function"!=typeof assert||assert,this.yyGetSharedState=function(){return p},y(p,this.yy),p.lexer=i,p.parser=this,"function"==typeof p.parseError?this.parseError=function(e,t,n){return n||(n=this.JisonParserError),p.parseError.call(this,e,t,n)}:this.parseError=this.originalParseError,"function"==typeof p.quoteName?this.quoteName=function(e){return p.quoteName.call(this,e)}:this.quoteName=this.originalQuoteName,this.cleanupAfterParse=function(e,t,n){var r,l;t&&((p.post_parse||this.post_parse)&&(l=this.constructParseErrorInfo(null,null,null,!1)),p.post_parse&&void 0!==(r=p.post_parse.call(this,p,e,l))&&(e=r),this.post_parse&&void 0!==(r=this.post_parse.call(this,p,e,l))&&(e=r),l&&l.destroy&&l.destroy());if(this.__reentrant_call_depth>1)return e;if(i.cleanupAfterLex&&i.cleanupAfterLex(n),p&&(p.lexer=void 0,p.parser=void 0,i.yy===p&&(i.yy=void 0)),p=void 0,this.parseError=this.originalParseError,this.quoteName=this.originalQuoteName,o.length=0,s.length=0,c.length=0,a.length=0,h=0,!n){for(var u=this.__error_infos.length-1;u>=0;u--){var d=this.__error_infos[u];d&&"function"==typeof d.destroy&&d.destroy()}this.__error_infos.length=0}return e},this.yyMergeLocationInfo=function(e,t,n,i,r){var o,s=0|e,a=0|t,l=n,u=i;if(!l&&null!=e)for(var d=s;d<=a&&!(l=c[d]);d++);if(!u&&null!=t)for(d=a;d>=s&&!(u=c[d]);d--);if(!l&&null==e){if(!r)for(d=(s||h)-1;d>=0&&!(l=c[d]);d--);return l?((o=v(l)).first_line=o.last_line,o.first_column=o.last_column,o.range&&(o.range=o.range.slice(0),o.range[0]=o.range[1]),u&&(y(o,u),o.last_line=u.last_line,o.last_column=u.last_column,o.range&&u.range&&(o.range[1]=u.range[1])),o):u?((o=v(u)).range&&(o.range=o.range.slice(0)),o):void 0}if(l||(l=u,u=null),l)return(o=v(l)).range&&(o.range=o.range.slice(0)),u&&(y(o,u),o.last_line=u.last_line,o.last_column=u.last_column,o.range&&u.range&&(o.range[1]=u.range[1])),o},this.constructParseErrorInfo=function(e,t,n,r){var l={errStr:e,exception:t,text:i.match,value:i.yytext,token:this.describeSymbol(u)||u,token_id:u,line:i.yylineno,loc:g(i.yylloc),expected:n,recoverable:r,state:b,action:_,new_state:S,symbol_stack:o,state_stack:s,value_stack:a,location_stack:c,stack_pointer:h,yy:p,lexer:i,parser:this,destroy:function(){var e=!!this.recoverable;for(var t in this)this.hasOwnProperty(t)&&"object"==typeof t&&(this[t]=void 0);this.recoverable=e}};return this.__error_infos.push(l),l};var b,_,w,x,k,E,C,S,T=function(){var e=i.lex();return"number"!=typeof e&&(e=r.symbols_[e]||e),e||d},O={$:!0,_$:void 0,yy:p},I=!1;try{if(this.__reentrant_call_depth++,i.setInput(e,p),"function"==typeof i.canIUse)i.canIUse().fastLex&&(T=m);for(t=i.yylloc,c[h]=t,a[h]=null,s[h]=0,o[h]=0,++h,n=i.yytext,this.pre_parse&&this.pre_parse.call(this,p),p.pre_parse&&p.pre_parse.call(this,p),S=s[h-1];;){if(b=S,this.defaultActions[b])_=2,S=this.defaultActions[b];else if(u||(u=T()),x=l[b]&&l[b][u]||f,S=x[1],!(_=x[0])){var A,L=this.describeSymbol(u)||u,F=this.collect_expected_token_set(b);A="number"==typeof i.yylineno?"Parse error on line "+(i.yylineno+1)+": ":"Parse error: ","function"==typeof i.showPosition&&(A+="\n"+i.showPosition(69,10)+"\n"),F.length?A+="Expecting "+F.join(", ")+", got unexpected "+L:A+="Unexpected "+L,k=this.constructParseErrorInfo(A,null,F,!1),void 0!==(w=this.parseError(k.errStr,k,this.JisonParserError))&&(I=w);break}switch(_){default:if(_ instanceof Array){k=this.constructParseErrorInfo("Parse Error: multiple actions possible at state: "+b+", token: "+u,null,null,!1),void 0!==(w=this.parseError(k.errStr,k,this.JisonParserError))&&(I=w);break}k=this.constructParseErrorInfo("Parsing halted. No viable error recovery approach available due to internal system failure.",null,null,!1),void 0!==(w=this.parseError(k.errStr,k,this.JisonParserError))&&(I=w);break;case 1:o[h]=u,a[h]=i.yytext,c[h]=g(i.yylloc),s[h]=S,++h,u=0,n=i.yytext,t=i.yylloc;continue;case 2:if(E=(C=this.productions_[S-1])[1],void 0!==(w=this.performAction.call(O,n,t,S,h-1,a,c))){I=w;break}h-=E;var P=C[0];o[h]=P,a[h]=O.$,c[h]=O._$,S=l[s[h-1]][P],s[h]=S,++h;continue;case 3:-2!==h&&(I=!0,h--,void 0!==a[h]&&(I=a[h]))}break}}catch(e){if(e instanceof this.JisonParserError)throw e;if(i&&"function"==typeof i.JisonLexerError&&e instanceof i.JisonLexerError)throw e;k=this.constructParseErrorInfo("Parsing aborted due to exception.",e,null,!1),I=!1,void 0!==(w=this.parseError(k.errStr,k,this.JisonParserError))&&(I=w)}finally{I=this.cleanupAfterParse(I,!0,!0),this.__reentrant_call_depth--}return I}};o.originalParseError=o.parseError,o.originalQuoteName=o.quoteName;const s=n(428);function a(){this.yy={}}return a.prototype=o,o.Parser=a,new a}();t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},i={exports:{}},r=function(e){return e&&e.Math==Math&&e},o=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||function(){return this}()||Function("return this")(),s=function(e){try{return!!e()}catch(e){return!0}},a=!s((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),c=a,l=Function.prototype,h=l.apply,u=l.call,d="object"==typeof Reflect&&Reflect.apply||(c?u.bind(h):function(){return u.apply(h,arguments)}),f=a,p=Function.prototype,v=p.bind,y=p.call,g=f&&v.bind(y,y),m=f?function(e){return e&&g(e)}:function(e){return e&&function(){return y.apply(e,arguments)}},b=function(e){return"function"==typeof e},_={},w=!s((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),x=a,k=Function.prototype.call,E=x?k.bind(k):function(){return k.apply(k,arguments)},C={},S={}.propertyIsEnumerable,T=Object.getOwnPropertyDescriptor,O=T&&!S.call({1:2},1);C.f=O?function(e){var t=T(this,e);return!!t&&t.enumerable}:S;var I,A,L=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},F=m,P=F({}.toString),N=F("".slice),M=function(e){return N(P(e),8,-1)},D=m,z=s,B=M,R=o.Object,j=D("".split),U=z((function(){return!R("z").propertyIsEnumerable(0)}))?function(e){return"String"==B(e)?j(e,""):R(e)}:R,$=o.TypeError,H=function(e){if(null==e)throw $("Can't call method on "+e);return e},W=U,G=H,q=function(e){return W(G(e))},V=b,X=function(e){return"object"==typeof e?null!==e:V(e)},Y={},Z=Y,K=o,Q=b,J=function(e){return Q(e)?e:void 0},ee=function(e,t){return arguments.length<2?J(Z[e])||J(K[e]):Z[e]&&Z[e][t]||K[e]&&K[e][t]},te=m({}.isPrototypeOf),ne=ee("navigator","userAgent")||"",ie=o,re=ne,oe=ie.process,se=ie.Deno,ae=oe&&oe.versions||se&&se.version,ce=ae&&ae.v8;ce&&(A=(I=ce.split("."))[0]>0&&I[0]<4?1:+(I[0]+I[1])),!A&&re&&(!(I=re.match(/Edge\/(\d+)/))||I[1]>=74)&&(I=re.match(/Chrome\/(\d+)/))&&(A=+I[1]);var le=A,he=le,ue=s,de=!!Object.getOwnPropertySymbols&&!ue((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&he&&he<41})),fe=de&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,pe=ee,ve=b,ye=te,ge=fe,me=o.Object,be=ge?function(e){return"symbol"==typeof e}:function(e){var t=pe("Symbol");return ve(t)&&ye(t.prototype,me(e))},_e=o.String,we=function(e){try{return _e(e)}catch(e){return"Object"}},xe=b,ke=we,Ee=o.TypeError,Ce=function(e){if(xe(e))return e;throw Ee(ke(e)+" is not a function")},Se=Ce,Te=function(e,t){var n=e[t];return null==n?void 0:Se(n)},Oe=E,Ie=b,Ae=X,Le=o.TypeError,Fe={exports:{}},Pe=o,Ne=Object.defineProperty,Me=function(e,t){try{Ne(Pe,e,{value:t,configurable:!0,writable:!0})}catch(n){Pe[e]=t}return t},De="__core-js_shared__",ze=o[De]||Me(De,{}),Be=ze;(Fe.exports=function(e,t){return Be[e]||(Be[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Re=H,je=o.Object,Ue=function(e){return je(Re(e))},$e=Ue,He=m({}.hasOwnProperty),We=Object.hasOwn||function(e,t){return He($e(e),t)},Ge=m,qe=0,Ve=Math.random(),Xe=Ge(1..toString),Ye=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Xe(++qe+Ve,36)},Ze=o,Ke=Fe.exports,Qe=We,Je=Ye,et=de,tt=fe,nt=Ke("wks"),it=Ze.Symbol,rt=it&&it.for,ot=tt?it:it&&it.withoutSetter||Je,st=function(e){if(!Qe(nt,e)||!et&&"string"!=typeof nt[e]){var t="Symbol."+e;et&&Qe(it,e)?nt[e]=it[e]:nt[e]=tt&&rt?rt(t):ot(t)}return nt[e]},at=E,ct=X,lt=be,ht=Te,ut=function(e,t){var n,i;if("string"===t&&Ie(n=e.toString)&&!Ae(i=Oe(n,e)))return i;if(Ie(n=e.valueOf)&&!Ae(i=Oe(n,e)))return i;if("string"!==t&&Ie(n=e.toString)&&!Ae(i=Oe(n,e)))return i;throw Le("Can't convert object to primitive value")},dt=st,ft=o.TypeError,pt=dt("toPrimitive"),vt=function(e,t){if(!ct(e)||lt(e))return e;var n,i=ht(e,pt);if(i){if(void 0===t&&(t="default"),n=at(i,e,t),!ct(n)||lt(n))return n;throw ft("Can't convert object to primitive value")}return void 0===t&&(t="number"),ut(e,t)},yt=be,gt=function(e){var t=vt(e,"string");return yt(t)?t:t+""},mt=X,bt=o.document,_t=mt(bt)&&mt(bt.createElement),wt=function(e){return _t?bt.createElement(e):{}},xt=wt,kt=!w&&!s((function(){return 7!=Object.defineProperty(xt("div"),"a",{get:function(){return 7}}).a})),Et=w,Ct=E,St=C,Tt=L,Ot=q,It=gt,At=We,Lt=kt,Ft=Object.getOwnPropertyDescriptor;_.f=Et?Ft:function(e,t){if(e=Ot(e),t=It(t),Lt)try{return Ft(e,t)}catch(e){}if(At(e,t))return Tt(!Ct(St.f,e,t),e[t])};var Pt=s,Nt=b,Mt=/#|\.prototype\./,Dt=function(e,t){var n=Bt[zt(e)];return n==jt||n!=Rt&&(Nt(t)?Pt(t):!!t)},zt=Dt.normalize=function(e){return String(e).replace(Mt,".").toLowerCase()},Bt=Dt.data={},Rt=Dt.NATIVE="N",jt=Dt.POLYFILL="P",Ut=Dt,$t=Ce,Ht=a,Wt=m(m.bind),Gt=function(e,t){return $t(e),void 0===t?e:Ht?Wt(e,t):function(){return e.apply(t,arguments)}},qt={},Vt=w&&s((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Xt=o,Yt=X,Zt=Xt.String,Kt=Xt.TypeError,Qt=function(e){if(Yt(e))return e;throw Kt(Zt(e)+" is not an object")},Jt=w,en=kt,tn=Vt,nn=Qt,rn=gt,on=o.TypeError,sn=Object.defineProperty,an=Object.getOwnPropertyDescriptor,cn="enumerable",ln="configurable",hn="writable";qt.f=Jt?tn?function(e,t,n){if(nn(e),t=rn(t),nn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&hn in n&&!n.writable){var i=an(e,t);i&&i.writable&&(e[t]=n.value,n={configurable:ln in n?n.configurable:i.configurable,enumerable:cn in n?n.enumerable:i.enumerable,writable:!1})}return sn(e,t,n)}:sn:function(e,t,n){if(nn(e),t=rn(t),nn(n),en)try{return sn(e,t,n)}catch(e){}if("get"in n||"set"in n)throw on("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var un=qt,dn=L,fn=w?function(e,t,n){return un.f(e,t,dn(1,n))}:function(e,t,n){return e[t]=n,e},pn=o,vn=d,yn=m,gn=b,mn=_.f,bn=Ut,_n=Y,wn=Gt,xn=fn,kn=We,En=function(e){var t=function(n,i,r){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,i)}return new e(n,i,r)}return vn(e,this,arguments)};return t.prototype=e.prototype,t},Cn=function(e,t){var n,i,r,o,s,a,c,l,h=e.target,u=e.global,d=e.stat,f=e.proto,p=u?pn:d?pn[h]:(pn[h]||{}).prototype,v=u?_n:_n[h]||xn(_n,h,{})[h],y=v.prototype;for(r in t)n=!bn(u?r:h+(d?".":"#")+r,e.forced)&&p&&kn(p,r),s=v[r],n&&(a=e.noTargetGet?(l=mn(p,r))&&l.value:p[r]),o=n&&a?a:t[r],n&&typeof s==typeof o||(c=e.bind&&n?wn(o,pn):e.wrap&&n?En(o):f&&gn(o)?yn(o):o,(e.sham||o&&o.sham||s&&s.sham)&&xn(c,"sham",!0),xn(v,r,c),f&&(kn(_n,i=h+"Prototype")||xn(_n,i,{}),xn(_n[i],r,o),e.real&&y&&!y[r]&&xn(y,r,o)))},Sn=Cn,Tn=w,On=qt.f;Sn({target:"Object",stat:!0,forced:Object.defineProperty!==On,sham:!Tn},{defineProperty:On});var In=Y.Object,An=i.exports=function(e,t,n){return In.defineProperty(e,t,n)};In.defineProperty.sham&&(An.sham=!0);var Ln=i.exports,Fn=Ln;function Pn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Fn(e,i.key,i)}}function Nn(e,t,n){return t&&Pn(e.prototype,t),n&&Pn(e,n),Fn(e,"prototype",{writable:!1}),e}function Mn(e,t,n){return t in e?Fn(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dn=m([].slice),zn=m,Bn=Ce,Rn=X,jn=We,Un=Dn,$n=a,Hn=o.Function,Wn=zn([].concat),Gn=zn([].join),qn={},Vn=function(e,t,n){if(!jn(qn,t)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";qn[t]=Hn("C,a","return new C("+Gn(i,",")+")")}return qn[t](e,n)},Xn=$n?Hn.bind:function(e){var t=Bn(this),n=t.prototype,i=Un(arguments,1),r=function(){var n=Wn(i,Un(arguments));return this instanceof r?Vn(t,n.length,n):t.apply(e,n)};return Rn(n)&&(r.prototype=n),r},Yn=Xn;Cn({target:"Function",proto:!0,forced:Function.bind!==Yn},{bind:Yn});var Zn=Y,Kn=function(e){return Zn[e+"Prototype"]},Qn=Kn("Function").bind,Jn=te,ei=Qn,ti=Function.prototype,ni=function(e){var t=e.bind;return e===ti||Jn(ti,e)&&t===ti.bind?ei:t},ii=ni,ri=Math.ceil,oi=Math.floor,si=function(e){var t=+e;return t!=t||0===t?0:(t>0?oi:ri)(t)},ai=si,ci=Math.min,li=function(e){return e>0?ci(ai(e),9007199254740991):0},hi=function(e){return li(e.length)},ui=Ce,di=Ue,fi=U,pi=hi,vi=o.TypeError,yi=function(e){return function(t,n,i,r){ui(n);var o=di(t),s=fi(o),a=pi(o),c=e?a-1:0,l=e?-1:1;if(i<2)for(;;){if(c in s){r=s[c],c+=l;break}if(c+=l,e?c<0:a<=c)throw vi("Reduce of empty array with no initial value")}for(;e?c>=0:a>c;c+=l)c in s&&(r=n(r,s[c],c,o));return r}},gi={left:yi(!1),right:yi(!0)},mi=s,bi=function(e,t){var n=[][e];return!!n&&mi((function(){n.call(null,t||function(){return 1},1)}))},_i="process"==M(o.process),wi=gi.left,xi=le,ki=_i;Cn({target:"Array",proto:!0,forced:!bi("reduce")||!ki&&xi>79&&xi<83},{reduce:function(e){var t=arguments.length;return wi(this,e,t,t>1?arguments[1]:void 0)}});var Ei=Kn("Array").reduce,Ci=te,Si=Ei,Ti=Array.prototype,Oi=function(e){var t=e.reduce;return e===Ti||Ci(Ti,e)&&t===Ti.reduce?Si:t},Ii=Oi,Ai=M,Li=Array.isArray||function(e){return"Array"==Ai(e)},Fi={};Fi[st("toStringTag")]="z";var Pi="[object z]"===String(Fi),Ni=o,Mi=Pi,Di=b,zi=M,Bi=st("toStringTag"),Ri=Ni.Object,ji="Arguments"==zi(function(){return arguments}()),Ui=Mi?zi:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Ri(e),Bi))?n:ji?zi(t):"Object"==(i=zi(t))&&Di(t.callee)?"Arguments":i},$i=b,Hi=ze,Wi=m(Function.toString);$i(Hi.inspectSource)||(Hi.inspectSource=function(e){return Wi(e)});var Gi=Hi.inspectSource,qi=m,Vi=s,Xi=b,Yi=Ui,Zi=Gi,Ki=function(){},Qi=[],Ji=ee("Reflect","construct"),er=/^\s*(?:class|function)\b/,tr=qi(er.exec),nr=!er.exec(Ki),ir=function(e){if(!Xi(e))return!1;try{return Ji(Ki,Qi,e),!0}catch(e){return!1}},rr=function(e){if(!Xi(e))return!1;switch(Yi(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return nr||!!tr(er,Zi(e))}catch(e){return!0}};rr.sham=!0;var or=!Ji||Vi((function(){var e;return ir(ir.call)||!ir(Object)||!ir((function(){e=!0}))||e}))?rr:ir,sr=o,ar=Li,cr=or,lr=X,hr=st("species"),ur=sr.Array,dr=function(e){var t;return ar(e)&&(t=e.constructor,(cr(t)&&(t===ur||ar(t.prototype))||lr(t)&&null===(t=t[hr]))&&(t=void 0)),void 0===t?ur:t},fr=function(e,t){return new(dr(e))(0===t?0:t)},pr=Gt,vr=U,yr=Ue,gr=hi,mr=fr,br=m([].push),_r=function(e){var t=1==e,n=2==e,i=3==e,r=4==e,o=6==e,s=7==e,a=5==e||o;return function(c,l,h,u){for(var d,f,p=yr(c),v=vr(p),y=pr(l,h),g=gr(v),m=0,b=u||mr,_=t?b(c,g):n||s?b(c,0):void 0;g>m;m++)if((a||m in v)&&(f=y(d=v[m],m,p),e))if(t)_[m]=f;else if(f)switch(e){case 3:return!0;case 5:return d;case 6:return m;case 2:br(_,d)}else switch(e){case 4:return!1;case 7:br(_,d)}return o?-1:i||r?r:_}},wr={forEach:_r(0),map:_r(1),filter:_r(2),some:_r(3),every:_r(4),find:_r(5),findIndex:_r(6),filterReject:_r(7)},xr=s,kr=le,Er=st("species"),Cr=function(e){return kr>=51||!xr((function(){var t=[];return(t.constructor={})[Er]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Sr=wr.filter;Cn({target:"Array",proto:!0,forced:!Cr("filter")},{filter:function(e){return Sr(this,e,arguments.length>1?arguments[1]:void 0)}});var Tr=Kn("Array").filter,Or=te,Ir=Tr,Ar=Array.prototype,Lr=function(e){var t=e.filter;return e===Ar||Or(Ar,e)&&t===Ar.filter?Ir:t},Fr=Lr,Pr=wr.map;Cn({target:"Array",proto:!0,forced:!Cr("map")},{map:function(e){return Pr(this,e,arguments.length>1?arguments[1]:void 0)}});var Nr=Kn("Array").map,Mr=te,Dr=Nr,zr=Array.prototype,Br=function(e){var t=e.map;return e===zr||Mr(zr,e)&&t===zr.map?Dr:t},Rr=Br,jr=Li,Ur=hi,$r=Gt,Hr=o.TypeError,Wr=function(e,t,n,i,r,o,s,a){for(var c,l,h=r,u=0,d=!!s&&$r(s,a);u<i;){if(u in n){if(c=d?d(n[u],u,t):n[u],o>0&&jr(c))l=Ur(c),h=Wr(e,t,c,l,h,o-1)-1;else{if(h>=9007199254740991)throw Hr("Exceed the acceptable array length");e[h]=c}h++}u++}return h},Gr=Wr,qr=Ce,Vr=Ue,Xr=hi,Yr=fr;Cn({target:"Array",proto:!0},{flatMap:function(e){var t,n=Vr(this),i=Xr(n);return qr(e),(t=Yr(n,0)).length=Gr(t,n,n,i,0,1,e,arguments.length>1?arguments[1]:void 0),t}});Kn("Array").flatMap,Array.prototype;var Zr,Kr,Qr,Jr=Ui,eo=o.String,to=function(e){if("Symbol"===Jr(e))throw TypeError("Cannot convert a Symbol value to a string");return eo(e)},no=m,io=si,ro=to,oo=H,so=no("".charAt),ao=no("".charCodeAt),co=no("".slice),lo=function(e){return function(t,n){var i,r,o=ro(oo(t)),s=io(n),a=o.length;return s<0||s>=a?e?"":void 0:(i=ao(o,s))<55296||i>56319||s+1===a||(r=ao(o,s+1))<56320||r>57343?e?so(o,s):i:e?co(o,s,s+2):r-56320+(i-55296<<10)+65536}},ho={codeAt:lo(!1),charAt:lo(!0)},uo=b,fo=Gi,po=o.WeakMap,vo=uo(po)&&/native code/.test(fo(po)),yo=Fe.exports,go=Ye,mo=yo("keys"),bo=function(e){return mo[e]||(mo[e]=go(e))},_o={},wo=vo,xo=o,ko=m,Eo=X,Co=fn,So=We,To=ze,Oo=bo,Io=_o,Ao="Object already initialized",Lo=xo.TypeError,Fo=xo.WeakMap;if(wo||To.state){var Po=To.state||(To.state=new Fo),No=ko(Po.get),Mo=ko(Po.has),Do=ko(Po.set);Zr=function(e,t){if(Mo(Po,e))throw new Lo(Ao);return t.facade=e,Do(Po,e,t),t},Kr=function(e){return No(Po,e)||{}},Qr=function(e){return Mo(Po,e)}}else{var zo=Oo("state");Io[zo]=!0,Zr=function(e,t){if(So(e,zo))throw new Lo(Ao);return t.facade=e,Co(e,zo,t),t},Kr=function(e){return So(e,zo)?e[zo]:{}},Qr=function(e){return So(e,zo)}}var Bo={set:Zr,get:Kr,has:Qr,enforce:function(e){return Qr(e)?Kr(e):Zr(e,{})},getterFor:function(e){return function(t){var n;if(!Eo(t)||(n=Kr(t)).type!==e)throw Lo("Incompatible receiver, "+e+" required");return n}}},Ro=w,jo=We,Uo=Function.prototype,$o=Ro&&Object.getOwnPropertyDescriptor,Ho=jo(Uo,"name"),Wo={EXISTS:Ho,PROPER:Ho&&"something"===function(){}.name,CONFIGURABLE:Ho&&(!Ro||Ro&&$o(Uo,"name").configurable)},Go={},qo=si,Vo=Math.max,Xo=Math.min,Yo=function(e,t){var n=qo(e);return n<0?Vo(n+t,0):Xo(n,t)},Zo=q,Ko=Yo,Qo=hi,Jo=function(e){return function(t,n,i){var r,o=Zo(t),s=Qo(o),a=Ko(i,s);if(e&&n!=n){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},es={includes:Jo(!0),indexOf:Jo(!1)},ts=We,ns=q,is=es.indexOf,rs=_o,os=m([].push),ss=function(e,t){var n,i=ns(e),r=0,o=[];for(n in i)!ts(rs,n)&&ts(i,n)&&os(o,n);for(;t.length>r;)ts(i,n=t[r++])&&(~is(o,n)||os(o,n));return o},as=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],cs=ss,ls=as,hs=Object.keys||function(e){return cs(e,ls)},us=w,ds=Vt,fs=qt,ps=Qt,vs=q,ys=hs;Go.f=us&&!ds?Object.defineProperties:function(e,t){ps(e);for(var n,i=vs(t),r=ys(t),o=r.length,s=0;o>s;)fs.f(e,n=r[s++],i[n]);return e};var gs,ms=ee("document","documentElement"),bs=Qt,_s=Go,ws=as,xs=_o,ks=ms,Es=wt,Cs=bo("IE_PROTO"),Ss=function(){},Ts=function(e){return"<script>"+e+"</"+"script>"},Os=function(e){e.write(Ts("")),e.close();var t=e.parentWindow.Object;return e=null,t},Is=function(){try{gs=new ActiveXObject("htmlfile")}catch(e){}var e,t;Is="undefined"!=typeof document?document.domain&&gs?Os(gs):((t=Es("iframe")).style.display="none",ks.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Ts("document.F=Object")),e.close(),e.F):Os(gs);for(var n=ws.length;n--;)delete Is.prototype[ws[n]];return Is()};xs[Cs]=!0;var As,Ls,Fs,Ps=Object.create||function(e,t){var n;return null!==e?(Ss.prototype=bs(e),n=new Ss,Ss.prototype=null,n[Cs]=e):n=Is(),void 0===t?n:_s.f(n,t)},Ns=!s((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Ms=o,Ds=We,zs=b,Bs=Ue,Rs=Ns,js=bo("IE_PROTO"),Us=Ms.Object,$s=Us.prototype,Hs=Rs?Us.getPrototypeOf:function(e){var t=Bs(e);if(Ds(t,js))return t[js];var n=t.constructor;return zs(n)&&t instanceof n?n.prototype:t instanceof Us?$s:null},Ws=fn,Gs=function(e,t,n,i){i&&i.enumerable?e[t]=n:Ws(e,t,n)},qs=s,Vs=b,Xs=Ps,Ys=Hs,Zs=Gs,Ks=st("iterator"),Qs=!1;[].keys&&("next"in(Fs=[].keys())?(Ls=Ys(Ys(Fs)))!==Object.prototype&&(As=Ls):Qs=!0);var Js=null==As||qs((function(){var e={};return As[Ks].call(e)!==e}));Vs((As=Js?{}:Xs(As))[Ks])||Zs(As,Ks,(function(){return this}));var ea={IteratorPrototype:As,BUGGY_SAFARI_ITERATORS:Qs},ta=Ui,na=Pi?{}.toString:function(){return"[object "+ta(this)+"]"},ia=Pi,ra=qt.f,oa=fn,sa=We,aa=na,ca=st("toStringTag"),la=function(e,t,n,i){if(e){var r=n?e:e.prototype;sa(r,ca)||ra(r,ca,{configurable:!0,value:t}),i&&!ia&&oa(r,"toString",aa)}},ha={},ua=ea.IteratorPrototype,da=Ps,fa=L,pa=la,va=ha,ya=function(){return this},ga=o,ma=b,ba=ga.String,_a=ga.TypeError,wa=m,xa=Qt,ka=function(e){if("object"==typeof e||ma(e))return e;throw _a("Can't set "+ba(e)+" as a prototype")},Ea=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=wa(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return xa(n),ka(i),t?e(n,i):n.__proto__=i,n}}():void 0),Ca=Cn,Sa=E,Ta=function(e,t,n,i){var r=t+" Iterator";return e.prototype=da(ua,{next:fa(+!i,n)}),pa(e,r,!1,!0),va[r]=ya,e},Oa=Hs,Ia=la,Aa=Gs,La=ha,Fa=Wo.PROPER,Pa=ea.BUGGY_SAFARI_ITERATORS,Na=st("iterator"),Ma="keys",Da="values",za="entries",Ba=function(){return this},Ra=function(e,t,n,i,r,o,s){Ta(n,t,i);var a,c,l,h=function(e){if(e===r&&v)return v;if(!Pa&&e in f)return f[e];switch(e){case Ma:case Da:case za:return function(){return new n(this,e)}}return function(){return new n(this)}},u=t+" Iterator",d=!1,f=e.prototype,p=f[Na]||f["@@iterator"]||r&&f[r],v=!Pa&&p||h(r),y="Array"==t&&f.entries||p;if(y&&(a=Oa(y.call(new e)))!==Object.prototype&&a.next&&(Ia(a,u,!0,!0),La[u]=Ba),Fa&&r==Da&&p&&p.name!==Da&&(d=!0,v=function(){return Sa(p,this)}),r)if(c={values:h(Da),keys:o?v:h(Ma),entries:h(za)},s)for(l in c)(Pa||d||!(l in f))&&Aa(f,l,c[l]);else Ca({target:t,proto:!0,forced:Pa||d},c);return s&&f[Na]!==v&&Aa(f,Na,v,{name:r}),La[t]=v,c},ja=ho.charAt,Ua=to,$a=Bo,Ha=Ra,Wa="String Iterator",Ga=$a.set,qa=$a.getterFor(Wa);Ha(String,"String",(function(e){Ga(this,{type:Wa,string:Ua(e),index:0})}),(function(){var e,t=qa(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=ja(n,i),t.index+=e.length,{value:e,done:!1})}));var Va=E,Xa=Qt,Ya=Te,Za=function(e,t,n){var i,r;Xa(e);try{if(!(i=Ya(e,"return"))){if("throw"===t)throw n;return n}i=Va(i,e)}catch(e){r=!0,i=e}if("throw"===t)throw n;if(r)throw i;return Xa(i),n},Ka=Qt,Qa=Za,Ja=ha,ec=st("iterator"),tc=Array.prototype,nc=function(e){return void 0!==e&&(Ja.Array===e||tc[ec]===e)},ic=gt,rc=qt,oc=L,sc=function(e,t,n){var i=ic(t);i in e?rc.f(e,i,oc(0,n)):e[i]=n},ac=Ui,cc=Te,lc=ha,hc=st("iterator"),uc=function(e){if(null!=e)return cc(e,hc)||cc(e,"@@iterator")||lc[ac(e)]},dc=E,fc=Ce,pc=Qt,vc=we,yc=uc,gc=o.TypeError,mc=function(e,t){var n=arguments.length<2?yc(e):t;if(fc(n))return pc(dc(n,e));throw gc(vc(e)+" is not iterable")},bc=Gt,_c=E,wc=Ue,xc=function(e,t,n,i){try{return i?t(Ka(n)[0],n[1]):t(n)}catch(t){Qa(e,"throw",t)}},kc=nc,Ec=or,Cc=hi,Sc=sc,Tc=mc,Oc=uc,Ic=o.Array,Ac=st("iterator"),Lc=!1;try{var Fc=0,Pc={next:function(){return{done:!!Fc++}},return:function(){Lc=!0}};Pc[Ac]=function(){return this},Array.from(Pc,(function(){throw 2}))}catch(e){}var Nc=function(e){var t=wc(e),n=Ec(this),i=arguments.length,r=i>1?arguments[1]:void 0,o=void 0!==r;o&&(r=bc(r,i>2?arguments[2]:void 0));var s,a,c,l,h,u,d=Oc(t),f=0;if(!d||this==Ic&&kc(d))for(s=Cc(t),a=n?new this(s):Ic(s);s>f;f++)u=o?r(t[f],f):t[f],Sc(a,f,u);else for(h=(l=Tc(t,d)).next,a=n?new this:[];!(c=_c(h,l)).done;f++)u=o?xc(l,r,[c.value,f],!0):c.value,Sc(a,f,u);return a.length=f,a},Mc=function(e,t){if(!t&&!Lc)return!1;var n=!1;try{var i={};i[Ac]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n};Cn({target:"Array",stat:!0,forced:!Mc((function(e){Array.from(e)}))},{from:Nc});var Dc=Y.Array.from,zc=Dc,Bc=q,Rc=ha,jc=Bo;qt.f;var Uc=Ra,$c="Array Iterator",Hc=jc.set,Wc=jc.getterFor($c);Uc(Array,"Array",(function(e,t){Hc(this,{type:$c,target:Bc(e),index:0,kind:t})}),(function(){var e=Wc(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),Rc.Arguments=Rc.Array;var Gc=uc,qc={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Vc=o,Xc=Ui,Yc=fn,Zc=ha,Kc=st("toStringTag");for(var Qc in qc){var Jc=Vc[Qc],el=Jc&&Jc.prototype;el&&Xc(el)!==Kc&&Yc(el,Kc,Qc),Zc[Qc]=Zc.Array}var tl=Gc,nl={},il=ss,rl=as.concat("length","prototype");nl.f=Object.getOwnPropertyNames||function(e){return il(e,rl)};var ol={},sl=Yo,al=hi,cl=sc,ll=o.Array,hl=Math.max,ul=function(e,t,n){for(var i=al(e),r=sl(t,i),o=sl(void 0===n?i:n,i),s=ll(hl(o-r,0)),a=0;r<o;r++,a++)cl(s,a,e[r]);return s.length=a,s},dl=M,fl=q,pl=nl.f,vl=ul,yl="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];ol.f=function(e){return yl&&"Window"==dl(e)?function(e){try{return pl(e)}catch(e){return vl(yl)}}(e):pl(fl(e))};var gl={};gl.f=Object.getOwnPropertySymbols;var ml={},bl=st;ml.f=bl;var _l=Y,wl=We,xl=ml,kl=qt.f,El=function(e){var t=_l.Symbol||(_l.Symbol={});wl(t,e)||kl(t,e,{value:xl.f(e)})},Cl=Cn,Sl=o,Tl=ee,Ol=d,Il=E,Al=m,Ll=w,Fl=de,Pl=s,Nl=We,Ml=Li,Dl=b,zl=X,Bl=te,Rl=be,jl=Qt,Ul=Ue,$l=q,Hl=gt,Wl=to,Gl=L,ql=Ps,Vl=hs,Xl=nl,Yl=ol,Zl=gl,Kl=_,Ql=qt,Jl=Go,eh=C,th=Dn,nh=Gs,ih=Fe.exports,rh=_o,oh=Ye,sh=st,ah=ml,ch=El,lh=la,hh=Bo,uh=wr.forEach,dh=bo("hidden"),fh="Symbol",ph=sh("toPrimitive"),vh=hh.set,yh=hh.getterFor(fh),gh=Object.prototype,mh=Sl.Symbol,bh=mh&&mh.prototype,_h=Sl.TypeError,wh=Sl.QObject,xh=Tl("JSON","stringify"),kh=Kl.f,Eh=Ql.f,Ch=Yl.f,Sh=eh.f,Th=Al([].push),Oh=ih("symbols"),Ih=ih("op-symbols"),Ah=ih("string-to-symbol-registry"),Lh=ih("symbol-to-string-registry"),Fh=ih("wks"),Ph=!wh||!wh.prototype||!wh.prototype.findChild,Nh=Ll&&Pl((function(){return 7!=ql(Eh({},"a",{get:function(){return Eh(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=kh(gh,t);i&&delete gh[t],Eh(e,t,n),i&&e!==gh&&Eh(gh,t,i)}:Eh,Mh=function(e,t){var n=Oh[e]=ql(bh);return vh(n,{type:fh,tag:e,description:t}),Ll||(n.description=t),n},Dh=function(e,t,n){e===gh&&Dh(Ih,t,n),jl(e);var i=Hl(t);return jl(n),Nl(Oh,i)?(n.enumerable?(Nl(e,dh)&&e[dh][i]&&(e[dh][i]=!1),n=ql(n,{enumerable:Gl(0,!1)})):(Nl(e,dh)||Eh(e,dh,Gl(1,{})),e[dh][i]=!0),Nh(e,i,n)):Eh(e,i,n)},zh=function(e,t){jl(e);var n=$l(t),i=Vl(n).concat(Uh(n));return uh(i,(function(t){Ll&&!Il(Bh,n,t)||Dh(e,t,n[t])})),e},Bh=function(e){var t=Hl(e),n=Il(Sh,this,t);return!(this===gh&&Nl(Oh,t)&&!Nl(Ih,t))&&(!(n||!Nl(this,t)||!Nl(Oh,t)||Nl(this,dh)&&this[dh][t])||n)},Rh=function(e,t){var n=$l(e),i=Hl(t);if(n!==gh||!Nl(Oh,i)||Nl(Ih,i)){var r=kh(n,i);return!r||!Nl(Oh,i)||Nl(n,dh)&&n[dh][i]||(r.enumerable=!0),r}},jh=function(e){var t=Ch($l(e)),n=[];return uh(t,(function(e){Nl(Oh,e)||Nl(rh,e)||Th(n,e)})),n},Uh=function(e){var t=e===gh,n=Ch(t?Ih:$l(e)),i=[];return uh(n,(function(e){!Nl(Oh,e)||t&&!Nl(gh,e)||Th(i,Oh[e])})),i};if(Fl||(nh(bh=(mh=function(){if(Bl(bh,this))throw _h("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?Wl(arguments[0]):void 0,t=oh(e),n=function(e){this===gh&&Il(n,Ih,e),Nl(this,dh)&&Nl(this[dh],t)&&(this[dh][t]=!1),Nh(this,t,Gl(1,e))};return Ll&&Ph&&Nh(gh,t,{configurable:!0,set:n}),Mh(t,e)}).prototype,"toString",(function(){return yh(this).tag})),nh(mh,"withoutSetter",(function(e){return Mh(oh(e),e)})),eh.f=Bh,Ql.f=Dh,Jl.f=zh,Kl.f=Rh,Xl.f=Yl.f=jh,Zl.f=Uh,ah.f=function(e){return Mh(sh(e),e)},Ll&&Eh(bh,"description",{configurable:!0,get:function(){return yh(this).description}})),Cl({global:!0,wrap:!0,forced:!Fl,sham:!Fl},{Symbol:mh}),uh(Vl(Fh),(function(e){ch(e)})),Cl({target:fh,stat:!0,forced:!Fl},{for:function(e){var t=Wl(e);if(Nl(Ah,t))return Ah[t];var n=mh(t);return Ah[t]=n,Lh[n]=t,n},keyFor:function(e){if(!Rl(e))throw _h(e+" is not a symbol");if(Nl(Lh,e))return Lh[e]},useSetter:function(){Ph=!0},useSimple:function(){Ph=!1}}),Cl({target:"Object",stat:!0,forced:!Fl,sham:!Ll},{create:function(e,t){return void 0===t?ql(e):zh(ql(e),t)},defineProperty:Dh,defineProperties:zh,getOwnPropertyDescriptor:Rh}),Cl({target:"Object",stat:!0,forced:!Fl},{getOwnPropertyNames:jh,getOwnPropertySymbols:Uh}),Cl({target:"Object",stat:!0,forced:Pl((function(){Zl.f(1)}))},{getOwnPropertySymbols:function(e){return Zl.f(Ul(e))}}),xh){var $h=!Fl||Pl((function(){var e=mh();return"[null]"!=xh([e])||"{}"!=xh({a:e})||"{}"!=xh(Object(e))}));Cl({target:"JSON",stat:!0,forced:$h},{stringify:function(e,t,n){var i=th(arguments),r=t;if((zl(t)||void 0!==e)&&!Rl(e))return Ml(t)||(t=function(e,t){if(Dl(r)&&(t=Il(r,this,e,t)),!Rl(t))return t}),i[1]=t,Ol(xh,null,i)}})}if(!bh[ph]){var Hh=bh.valueOf;nh(bh,ph,(function(e){return Il(Hh,this)}))}lh(mh,fh),rh[dh]=!0;var Wh=Y.Object.getOwnPropertySymbols,Gh={exports:{}},qh=Cn,Vh=s,Xh=q,Yh=_.f,Zh=w,Kh=Vh((function(){Yh(1)}));qh({target:"Object",stat:!0,forced:!Zh||Kh,sham:!Zh},{getOwnPropertyDescriptor:function(e,t){return Yh(Xh(e),t)}});var Qh=Y.Object,Jh=Gh.exports=function(e,t){return Qh.getOwnPropertyDescriptor(e,t)};Qh.getOwnPropertyDescriptor.sham&&(Jh.sham=!0);var eu=Gh.exports,tu=ee,nu=nl,iu=gl,ru=Qt,ou=m([].concat),su=tu("Reflect","ownKeys")||function(e){var t=nu.f(ru(e)),n=iu.f;return n?ou(t,n(e)):t},au=su,cu=q,lu=_,hu=sc;Cn({target:"Object",stat:!0,sham:!w},{getOwnPropertyDescriptors:function(e){for(var t,n,i=cu(e),r=lu.f,o=au(i),s={},a=0;o.length>a;)void 0!==(n=r(i,t=o[a++]))&&hu(s,t,n);return s}});var uu=Y.Object.getOwnPropertyDescriptors,du={exports:{}},fu=Cn,pu=w,vu=Go.f;fu({target:"Object",stat:!0,forced:Object.defineProperties!==vu,sham:!pu},{defineProperties:vu});var yu=Y.Object,gu=du.exports=function(e,t){return yu.defineProperties(e,t)};yu.defineProperties.sham&&(gu.sham=!0);var mu=du.exports,bu=Ln;Cn({target:"Array",stat:!0},{isArray:Li});var _u=Y.Array.isArray,wu=_u;var xu=Cn,ku=o,Eu=s,Cu=Li,Su=X,Tu=Ue,Ou=hi,Iu=sc,Au=fr,Lu=Cr,Fu=le,Pu=st("isConcatSpreadable"),Nu=9007199254740991,Mu="Maximum allowed index exceeded",Du=ku.TypeError,zu=Fu>=51||!Eu((function(){var e=[];return e[Pu]=!1,e.concat()[0]!==e})),Bu=Lu("concat"),Ru=function(e){if(!Su(e))return!1;var t=e[Pu];return void 0!==t?!!t:Cu(e)};xu({target:"Array",proto:!0,forced:!zu||!Bu},{concat:function(e){var t,n,i,r,o,s=Tu(this),a=Au(s,0),c=0;for(t=-1,i=arguments.length;t<i;t++)if(Ru(o=-1===t?s:arguments[t])){if(c+(r=Ou(o))>Nu)throw Du(Mu);for(n=0;n<r;n++,c++)n in o&&Iu(a,c,o[n])}else{if(c>=Nu)throw Du(Mu);Iu(a,c++,o)}return a.length=c,a}}),El("asyncIterator"),El("hasInstance"),El("isConcatSpreadable"),El("iterator"),El("match"),El("matchAll"),El("replace"),El("search"),El("species"),El("split"),El("toPrimitive"),El("toStringTag"),El("unscopables"),la(o.JSON,"JSON",!0);var ju=Y.Symbol,Uu=ju;El("asyncDispose"),El("dispose"),El("matcher"),El("metadata"),El("observable"),El("patternMatch"),El("replaceAll");var $u=Uu;var Hu=Cn,Wu=o,Gu=Li,qu=or,Vu=X,Xu=Yo,Yu=hi,Zu=q,Ku=sc,Qu=st,Ju=Dn,ed=Cr("slice"),td=Qu("species"),nd=Wu.Array,id=Math.max;Hu({target:"Array",proto:!0,forced:!ed},{slice:function(e,t){var n,i,r,o=Zu(this),s=Yu(o),a=Xu(e,s),c=Xu(void 0===t?s:t,s);if(Gu(o)&&(n=o.constructor,(qu(n)&&(n===nd||Gu(n.prototype))||Vu(n)&&null===(n=n[td]))&&(n=void 0),n===nd||void 0===n))return Ju(o,a,c);for(i=new(void 0===n?nd:n)(id(c-a,0)),r=0;a<c;a++,r++)a in o&&Ku(i,r,o[a]);return i.length=r,i}});var rd=Kn("Array").slice,od=te,sd=rd,ad=Array.prototype,cd=function(e){var t=e.slice;return e===ad||od(ad,e)&&t===ad.slice?sd:t},ld=cd,hd=ld,ud=Dc;function dd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function fd(e,t){var n;if(e){if("string"==typeof e)return dd(e,t);var i=hd(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?ud(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?dd(e,t):void 0}}function pd(e,t){return function(e){if(wu(e))return e}(e)||function(e,t){var n=null==e?null:void 0!==$u&&tl(e)||e["@@iterator"];if(null!=n){var i,r,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(e){a=!0,r=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}}(e,t)||fd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var vd=ml.f("iterator"),yd=vd;function gd(e){return gd="function"==typeof $u&&"symbol"==typeof yd?function(e){return typeof e}:function(e){return e&&"function"==typeof $u&&e.constructor===$u&&e!==$u.prototype?"symbol":typeof e},gd(e)}function md(e){return function(e){if(wu(e))return dd(e)}(e)||function(e){if(void 0!==$u&&null!=tl(e)||null!=e["@@iterator"])return ud(e)}(e)||fd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var bd=ju,_d=Kn("Array").concat,wd=te,xd=_d,kd=Array.prototype,Ed=function(e){var t=e.concat;return e===kd||wd(kd,e)&&t===kd.concat?xd:t},Cd=Ed,Sd=ld;Cn({target:"Reflect",stat:!0},{ownKeys:su});var Td=Y.Reflect.ownKeys,Od=_u,Id=Ue,Ad=hs;Cn({target:"Object",stat:!0,forced:s((function(){Ad(1)}))},{keys:function(e){return Ad(Id(e))}});var Ld=Y.Object.keys,Fd=Cn,Pd=m,Nd=o.Date,Md=Pd(Nd.prototype.getTime);Fd({target:"Date",stat:!0},{now:function(){return Md(new Nd)}}),Y.Date.now;var Dd=wr.forEach,zd=bi("forEach")?[].forEach:function(e){return Dd(this,e,arguments.length>1?arguments[1]:void 0)};Cn({target:"Array",proto:!0,forced:[].forEach!=zd},{forEach:zd});var Bd=Kn("Array").forEach,Rd=Ui,jd=We,Ud=te,$d=Bd,Hd=Array.prototype,Wd={DOMTokenList:!0,NodeList:!0},Gd=function(e){var t=e.forEach;return e===Hd||Ud(Hd,e)&&t===Hd.forEach||jd(Wd,Rd(e))?$d:t},qd=Cn,Vd=Li,Xd=m([].reverse),Yd=[1,2];qd({target:"Array",proto:!0,forced:String(Yd)===String(Yd.reverse())},{reverse:function(){return Vd(this)&&(this.length=this.length),Xd(this)}});var Zd=Kn("Array").reverse,Kd=te,Qd=Zd,Jd=Array.prototype,ef=function(e){var t=e.reverse;return e===Jd||Kd(Jd,e)&&t===Jd.reverse?Qd:t},tf=ef,nf=Cn,rf=o,of=Yo,sf=si,af=hi,cf=Ue,lf=fr,hf=sc,uf=Cr("splice"),df=rf.TypeError,ff=Math.max,pf=Math.min,vf=9007199254740991,yf="Maximum allowed length exceeded";nf({target:"Array",proto:!0,forced:!uf},{splice:function(e,t){var n,i,r,o,s,a,c=cf(this),l=af(c),h=of(e,l),u=arguments.length;if(0===u?n=i=0:1===u?(n=0,i=l-h):(n=u-2,i=pf(ff(sf(t),0),l-h)),l+n-i>vf)throw df(yf);for(r=lf(c,i),o=0;o<i;o++)(s=h+o)in c&&hf(r,o,c[s]);if(r.length=i,n<i){for(o=h;o<l-i;o++)a=o+n,(s=o+i)in c?c[a]=c[s]:delete c[a];for(o=l;o>l-i+n;o--)delete c[o-1]}else if(n>i)for(o=l-i;o>h;o--)a=o+n-1,(s=o+i-1)in c?c[a]=c[s]:delete c[a];for(o=0;o<n;o++)c[o+h]=arguments[o+2];return c.length=l-i+n,r}});var gf=Kn("Array").splice,mf=te,bf=gf,_f=Array.prototype,wf=function(e){var t=e.splice;return e===_f||mf(_f,e)&&t===_f.splice?bf:t},xf=wf,kf=w,Ef=m,Cf=E,Sf=s,Tf=hs,Of=gl,If=C,Af=Ue,Lf=U,Ff=Object.assign,Pf=Object.defineProperty,Nf=Ef([].concat),Mf=!Ff||Sf((function(){if(kf&&1!==Ff({b:1},Ff(Pf({},"a",{enumerable:!0,get:function(){Pf(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=Ff({},e)[n]||Tf(Ff({},t)).join("")!=i}))?function(e,t){for(var n=Af(e),i=arguments.length,r=1,o=Of.f,s=If.f;i>r;)for(var a,c=Lf(arguments[r++]),l=o?Nf(Tf(c),o(c)):Tf(c),h=l.length,u=0;h>u;)a=l[u++],kf&&!Cf(s,c,a)||(n[a]=c[a]);return n}:Ff,Df=Mf;Cn({target:"Object",stat:!0,forced:Object.assign!==Df},{assign:Df});var zf=Y.Object.assign,Bf=es.includes;Cn({target:"Array",proto:!0},{includes:function(e){return Bf(this,e,arguments.length>1?arguments[1]:void 0)}}),Kn("Array").includes;var Rf=X,jf=M,Uf=st("match"),$f=function(e){var t;return Rf(e)&&(void 0!==(t=e[Uf])?!!t:"RegExp"==jf(e))},Hf=o.TypeError,Wf=st("match"),Gf=Cn,qf=function(e){if($f(e))throw Hf("The method doesn't accept regular expressions");return e},Vf=H,Xf=to,Yf=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Wf]=!1,"/./"[e](t)}catch(e){}}return!1},Zf=m("".indexOf);Gf({target:"String",proto:!0,forced:!Yf("includes")},{includes:function(e){return!!~Zf(Xf(Vf(this)),Xf(qf(e)),arguments.length>1?arguments[1]:void 0)}}),Kn("String").includes;var Kf=Ue,Qf=Hs,Jf=Ns;Cn({target:"Object",stat:!0,forced:s((function(){Qf(1)})),sham:!Jf},{getPrototypeOf:function(e){return Qf(Kf(e))}});var ep=Y.Object.getPrototypeOf,tp=w,np=m,ip=hs,rp=q,op=np(C.f),sp=np([].push),ap=function(e){return function(t){for(var n,i=rp(t),r=ip(i),o=r.length,s=0,a=[];o>s;)n=r[s++],tp&&!op(i,n)||sp(a,e?[n,i[n]]:i[n]);return a}},cp={entries:ap(!0),values:ap(!1)}.values;Cn({target:"Object",stat:!0},{values:function(e){return cp(e)}}),Y.Object.values;var lp="\t\n\v\f\r                　\u2028\u2029\ufeff",hp=H,up=to,dp=m("".replace),fp="[\t\n\v\f\r                　\u2028\u2029\ufeff]",pp=RegExp("^"+fp+fp+"*"),vp=RegExp(fp+fp+"*$"),yp=function(e){return function(t){var n=up(hp(t));return 1&e&&(n=dp(n,pp,"")),2&e&&(n=dp(n,vp,"")),n}},gp={start:yp(1),end:yp(2),trim:yp(3)},mp=o,bp=s,_p=m,wp=to,xp=gp.trim,kp=lp,Ep=mp.parseInt,Cp=mp.Symbol,Sp=Cp&&Cp.iterator,Tp=/^[+-]?0x/i,Op=_p(Tp.exec),Ip=8!==Ep(kp+"08")||22!==Ep(kp+"0x16")||Sp&&!bp((function(){Ep(Object(Sp))}))?function(e,t){var n=xp(wp(e));return Ep(n,t>>>0||(Op(Tp,n)?16:10))}:Ep;Cn({global:!0,forced:parseInt!=Ip},{parseInt:Ip});var Ap=Cn,Lp=es.indexOf,Fp=bi,Pp=m([].indexOf),Np=!!Pp&&1/Pp([1],1,-0)<0,Mp=Fp("indexOf");Ap({target:"Array",proto:!0,forced:Np||!Mp},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return Np?Pp(this,e,t)||0:Lp(this,e,t)}}),Kn("Array").indexOf;var Dp=Wo.PROPER,zp=s,Bp=lp,Rp=gp.trim;Cn({target:"String",proto:!0,forced:function(e){return zp((function(){return!!Bp[e]()||"​᠎"!=="​᠎"[e]()||Dp&&Bp[e].name!==e}))}("trim")},{trim:function(){return Rp(this)}}),Kn("String").trim,Cn({target:"Object",stat:!0,sham:!w},{create:Ps});var jp=Y.Object,Up=function(e,t){return jp.create(e,t)},$p=Up,Hp=Cn,Wp=ee,Gp=d,qp=m,Vp=s,Xp=o.Array,Yp=Wp("JSON","stringify"),Zp=qp(/./.exec),Kp=qp("".charAt),Qp=qp("".charCodeAt),Jp=qp("".replace),ev=qp(1..toString),tv=/[\uD800-\uDFFF]/g,nv=/^[\uD800-\uDBFF]$/,iv=/^[\uDC00-\uDFFF]$/,rv=function(e,t,n){var i=Kp(n,t-1),r=Kp(n,t+1);return Zp(nv,e)&&!Zp(iv,r)||Zp(iv,e)&&!Zp(nv,i)?"\\u"+ev(Qp(e,0),16):e},ov=Vp((function(){return'"\\udf06\\ud834"'!==Yp("\udf06\ud834")||'"\\udead"'!==Yp("\udead")}));Yp&&Hp({target:"JSON",stat:!0,forced:ov},{stringify:function(e,t,n){for(var i=0,r=arguments.length,o=Xp(r);i<r;i++)o[i]=arguments[i];var s=Gp(Yp,null,o);return"string"==typeof s?Jp(s,tv,rv):s}});var sv=Y,av=d;sv.JSON||(sv.JSON={stringify:JSON.stringify});var cv=function(e,t,n){return av(sv.JSON.stringify,null,arguments)},lv=o.TypeError,hv=Cn,uv=o,dv=d,fv=b,pv=Dn,vv=function(e,t){if(e<t)throw lv("Not enough arguments");return e},yv=/MSIE .\./.test(ne),gv=uv.Function,mv=function(e){return function(t,n){var i=vv(arguments.length,1)>2,r=fv(t)?t:gv(t),o=i?pv(arguments,2):void 0;return e(i?function(){dv(r,this,o)}:r,n)}};hv({global:!0,bind:!0,forced:yv},{setTimeout:mv(uv.setTimeout),setInterval:mv(uv.setInterval)});var bv=Y.setTimeout,_v=Ue,wv=Yo,xv=hi,kv=function(e){for(var t=_v(this),n=xv(t),i=arguments.length,r=wv(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,s=void 0===o?n:wv(o,n);s>r;)t[r++]=e;return t};Cn({target:"Array",proto:!0},{fill:kv}),Kn("Array").fill;var Ev={exports:{}};!function(e){function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}(Ev);var Cv,Sv=Ev.exports;function Tv(){return Tv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Tv.apply(this,arguments)}function Ov(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Iv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Cv="function"!=typeof Object.assign?function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var Av,Lv=Cv,Fv=["","webkit","Moz","MS","ms","o"],Pv="undefined"==typeof document?{style:{}}:document.createElement("div"),Nv=Math.round,Mv=Math.abs,Dv=Date.now;function zv(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),o=0;o<Fv.length;){if((i=(n=Fv[o])?n+r:t)in e)return i;o++}}Av="undefined"==typeof window?{}:window;var Bv=zv(Pv.style,"touchAction"),Rv=void 0!==Bv;var jv="compute",Uv="auto",$v="manipulation",Hv="none",Wv="pan-x",Gv="pan-y",qv=function(){if(!Rv)return!1;var e={},t=Av.CSS&&Av.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){return e[n]=!t||Av.CSS.supports("touch-action",n)})),e}(),Vv="ontouchstart"in Av,Xv=void 0!==zv(Av,"PointerEvent"),Yv=Vv&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Zv="touch",Kv="mouse",Qv=16,Jv=24,ey=["x","y"],ty=["clientX","clientY"];function ny(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(void 0!==e.length)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function iy(e,t){return"function"==typeof e?e.apply(t&&t[0]||void 0,t):e}function ry(e,t){return e.indexOf(t)>-1}var oy=function(){function e(e,t){this.manager=e,this.set(t)}var t=e.prototype;return t.set=function(e){e===jv&&(e=this.compute()),Rv&&this.manager.element.style&&qv[e]&&(this.manager.element.style[Bv]=e),this.actions=e.toLowerCase().trim()},t.update=function(){this.set(this.manager.options.touchAction)},t.compute=function(){var e=[];return ny(this.manager.recognizers,(function(t){iy(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(ry(e,Hv))return Hv;var t=ry(e,Wv),n=ry(e,Gv);return t&&n?Hv:t||n?t?Wv:Gv:ry(e,$v)?$v:Uv}(e.join(" "))},t.preventDefaults=function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var i=this.actions,r=ry(i,Hv)&&!qv.none,o=ry(i,Gv)&&!qv["pan-y"],s=ry(i,Wv)&&!qv["pan-x"];if(r){var a=1===e.pointers.length,c=e.distance<2,l=e.deltaTime<250;if(a&&c&&l)return}if(!s||!o)return r||o&&6&n||s&&n&Jv?this.preventSrc(t):void 0}},t.preventSrc=function(e){this.manager.session.prevented=!0,e.preventDefault()},e}();function sy(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function ay(e){var t=e.length;if(1===t)return{x:Nv(e[0].clientX),y:Nv(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:Nv(n/t),y:Nv(i/t)}}function cy(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:Nv(e.pointers[n].clientX),clientY:Nv(e.pointers[n].clientY)},n++;return{timeStamp:Dv(),pointers:t,center:ay(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ly(e,t,n){n||(n=ey);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function hy(e,t,n){n||(n=ey);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}function uy(e,t){return e===t?1:Mv(e)>=Mv(t)?e<0?2:4:t<0?8:Qv}function dy(e,t,n){return{x:t/e||0,y:n/e||0}}function fy(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=cy(t)),r>1&&!n.firstMultiple?n.firstMultiple=cy(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,a=s?s.center:o.center,c=t.center=ay(i);t.timeStamp=Dv(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=hy(a,c),t.distance=ly(a,c),function(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};1!==t.eventType&&4!==o.eventType||(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}(n,t),t.offsetDirection=uy(t.deltaX,t.deltaY);var l,h,u=dy(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=Mv(u.x)>Mv(u.y)?u.x:u.y,t.scale=s?(l=s.pointers,ly((h=i)[0],h[1],ty)/ly(l[0],l[1],ty)):1,t.rotation=s?function(e,t){return hy(t[1],t[0],ty)+hy(e[1],e[0],ty)}(s.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,i,r,o,s=e.lastInterval||t,a=t.timeStamp-s.timeStamp;if(8!==t.eventType&&(a>25||void 0===s.velocity)){var c=t.deltaX-s.deltaX,l=t.deltaY-s.deltaY,h=dy(a,c,l);i=h.x,r=h.y,n=Mv(h.x)>Mv(h.y)?h.x:h.y,o=uy(c,l),e.lastInterval=t}else n=s.velocity,i=s.velocityX,r=s.velocityY,o=s.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=o}(n,t);var d,f=e.element,p=t.srcEvent;sy(d=p.composedPath?p.composedPath()[0]:p.path?p.path[0]:p.target,f)&&(f=d),t.target=f}function py(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=1&t&&i-r==0,s=12&t&&i-r==0;n.isFirst=!!o,n.isFinal=!!s,o&&(e.session={}),n.eventType=t,fy(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function vy(e){return e.trim().split(/\s+/g)}function yy(e,t,n){ny(vy(t),(function(t){e.addEventListener(t,n,!1)}))}function gy(e,t,n){ny(vy(t),(function(t){e.removeEventListener(t,n,!1)}))}function my(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||window}var by=function(){function e(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){iy(e.options.enable,[e])&&n.handler(t)},this.init()}var t=e.prototype;return t.handler=function(){},t.init=function(){this.evEl&&yy(this.element,this.evEl,this.domHandler),this.evTarget&&yy(this.target,this.evTarget,this.domHandler),this.evWin&&yy(my(this.element),this.evWin,this.domHandler)},t.destroy=function(){this.evEl&&gy(this.element,this.evEl,this.domHandler),this.evTarget&&gy(this.target,this.evTarget,this.domHandler),this.evWin&&gy(my(this.element),this.evWin,this.domHandler)},e}();function _y(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}var wy={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},xy={2:Zv,3:"pen",4:Kv,5:"kinect"},ky="pointerdown",Ey="pointermove pointerup pointercancel";Av.MSPointerEvent&&!Av.PointerEvent&&(ky="MSPointerDown",Ey="MSPointerMove MSPointerUp MSPointerCancel");var Cy=function(e){function t(){var n,i=t.prototype;return i.evEl=ky,i.evWin=Ey,(n=e.apply(this,arguments)||this).store=n.manager.session.pointerEvents=[],n}return Ov(t,e),t.prototype.handler=function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=wy[i],o=xy[e.pointerType]||e.pointerType,s=o===Zv,a=_y(t,e.pointerId,"pointerId");1&r&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):12&r&&(n=!0),a<0||(t[a]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(a,1))},t}(by);function Sy(e){return Array.prototype.slice.call(e,0)}function Ty(e,t,n){for(var i=[],r=[],o=0;o<e.length;){var s=t?e[o][t]:e[o];_y(r,s)<0&&i.push(e[o]),r[o]=s,o++}return n&&(i=t?i.sort((function(e,n){return e[t]>n[t]})):i.sort()),i}var Oy={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Iy="touchstart touchmove touchend touchcancel",Ay=function(e){function t(){var n;return t.prototype.evTarget=Iy,(n=e.apply(this,arguments)||this).targetIds={},n}return Ov(t,e),t.prototype.handler=function(e){var t=Oy[e.type],n=Ly.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Zv,srcEvent:e})},t}(by);function Ly(e,t){var n,i,r=Sy(e.touches),o=this.targetIds;if(3&t&&1===r.length)return o[r[0].identifier]=!0,[r,r];var s=Sy(e.changedTouches),a=[],c=this.target;if(i=r.filter((function(e){return sy(e.target,c)})),1===t)for(n=0;n<i.length;)o[i[n].identifier]=!0,n++;for(n=0;n<s.length;)o[s[n].identifier]&&a.push(s[n]),12&t&&delete o[s[n].identifier],n++;return a.length?[Ty(i.concat(a),"identifier",!0),a]:void 0}var Fy={mousedown:1,mousemove:2,mouseup:4},Py="mousedown",Ny="mousemove mouseup",My=function(e){function t(){var n,i=t.prototype;return i.evEl=Py,i.evWin=Ny,(n=e.apply(this,arguments)||this).pressed=!1,n}return Ov(t,e),t.prototype.handler=function(e){var t=Fy[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Kv,srcEvent:e}))},t}(by);function Dy(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);setTimeout((function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)}),2500)}}function zy(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,Dy.call(this,t)):12&e&&Dy.call(this,t)}function By(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(t-r.x),s=Math.abs(n-r.y);if(o<=25&&s<=25)return!0}return!1}var Ry=function(){return function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).handler=function(e,t,n){var r=n.pointerType===Zv,o=n.pointerType===Kv;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)zy.call(Iv(Iv(i)),t,n);else if(o&&By.call(Iv(Iv(i)),n))return;i.callback(e,t,n)}},i.touch=new Ay(i.manager,i.handler),i.mouse=new My(i.manager,i.handler),i.primaryTouch=null,i.lastTouches=[],i}return Ov(t,e),t.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(by)}();function jy(e,t,n){return!!Array.isArray(e)&&(ny(e,n[t],n),!0)}var Uy=32,$y=1;function Hy(e,t){var n=t.manager;return n?n.get(e):e}function Wy(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}var Gy=function(){function e(e){void 0===e&&(e={}),this.options=Tv({enable:!0},e),this.id=$y++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var t=e.prototype;return t.set=function(e){return Lv(this.options,e),this.manager&&this.manager.touchAction.update(),this},t.recognizeWith=function(e){if(jy(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Hy(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},t.dropRecognizeWith=function(e){return jy(e,"dropRecognizeWith",this)||(e=Hy(e,this),delete this.simultaneous[e.id]),this},t.requireFailure=function(e){if(jy(e,"requireFailure",this))return this;var t=this.requireFail;return-1===_y(t,e=Hy(e,this))&&(t.push(e),e.requireFailure(this)),this},t.dropRequireFailure=function(e){if(jy(e,"dropRequireFailure",this))return this;e=Hy(e,this);var t=_y(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},t.hasRequireFailures=function(){return this.requireFail.length>0},t.canRecognizeWith=function(e){return!!this.simultaneous[e.id]},t.emit=function(e){var t=this,n=this.state;function i(n){t.manager.emit(n,e)}n<8&&i(t.options.event+Wy(n)),i(t.options.event),e.additionalEvent&&i(e.additionalEvent),n>=8&&i(t.options.event+Wy(n))},t.tryEmit=function(e){if(this.canEmit())return this.emit(e);this.state=Uy},t.canEmit=function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},t.recognize=function(e){var t=Lv({},e);if(!iy(this.options.enable,[this,t]))return this.reset(),void(this.state=Uy);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},t.process=function(e){},t.getTouchAction=function(){},t.reset=function(){},e}(),qy=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,Tv({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},t))||this).pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}Ov(t,e);var n=t.prototype;return n.getTouchAction=function(){return[$v]},n.process=function(e){var t=this,n=this.options,i=e.pointers.length===n.pointers,r=e.distance<n.threshold,o=e.deltaTime<n.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&o&&i){if(4!==e.eventType)return this.failTimeout();var s=!this.pTime||e.timeStamp-this.pTime<n.interval,a=!this.pCenter||ly(this.pCenter,e.center)<n.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&s?this.count+=1:this.count=1,this._input=e,0===this.count%n.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){t.state=8,t.tryEmit()}),n.interval),2):8}return Uy},n.failTimeout=function(){var e=this;return this._timer=setTimeout((function(){e.state=Uy}),this.options.interval),Uy},n.reset=function(){clearTimeout(this._timer)},n.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},t}(Gy),Vy=function(e){function t(t){return void 0===t&&(t={}),e.call(this,Tv({pointers:1},t))||this}Ov(t,e);var n=t.prototype;return n.attrTest=function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},n.process=function(e){var t=this.state,n=e.eventType,i=6&t,r=this.attrTest(e);return i&&(8&n||!r)?16|t:i||r?4&n?8|t:2&t?4|t:2:Uy},t}(Gy);function Xy(e){return e===Qv?"down":8===e?"up":2===e?"left":4===e?"right":""}var Yy=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,Tv({event:"pan",threshold:10,pointers:1,direction:30},t))||this).pX=null,n.pY=null,n}Ov(t,e);var n=t.prototype;return n.getTouchAction=function(){var e=this.options.direction,t=[];return 6&e&&t.push(Gv),e&Jv&&t.push(Wv),t},n.directionTest=function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,s=e.deltaY;return r&t.direction||(6&t.direction?(r=0===o?1:o<0?2:4,n=o!==this.pX,i=Math.abs(e.deltaX)):(r=0===s?1:s<0?8:Qv,n=s!==this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},n.attrTest=function(e){return Vy.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},n.emit=function(t){this.pX=t.deltaX,this.pY=t.deltaY;var n=Xy(t.direction);n&&(t.additionalEvent=this.options.event+n),e.prototype.emit.call(this,t)},t}(Vy),Zy=function(e){function t(t){return void 0===t&&(t={}),e.call(this,Tv({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},t))||this}Ov(t,e);var n=t.prototype;return n.getTouchAction=function(){return Yy.prototype.getTouchAction.call(this)},n.attrTest=function(t){var n,i=this.options.direction;return 30&i?n=t.overallVelocity:6&i?n=t.overallVelocityX:i&Jv&&(n=t.overallVelocityY),e.prototype.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers===this.options.pointers&&Mv(n)>this.options.velocity&&4&t.eventType},n.emit=function(e){var t=Xy(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)},t}(Vy),Ky=function(e){function t(t){return void 0===t&&(t={}),e.call(this,Tv({event:"pinch",threshold:0,pointers:2},t))||this}Ov(t,e);var n=t.prototype;return n.getTouchAction=function(){return[Hv]},n.attrTest=function(t){return e.prototype.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},n.emit=function(t){if(1!==t.scale){var n=t.scale<1?"in":"out";t.additionalEvent=this.options.event+n}e.prototype.emit.call(this,t)},t}(Vy),Qy=function(e){function t(t){return void 0===t&&(t={}),e.call(this,Tv({event:"rotate",threshold:0,pointers:2},t))||this}Ov(t,e);var n=t.prototype;return n.getTouchAction=function(){return[Hv]},n.attrTest=function(t){return e.prototype.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)},t}(Vy),Jy=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,Tv({event:"press",pointers:1,time:251,threshold:9},t))||this)._timer=null,n._input=null,n}Ov(t,e);var n=t.prototype;return n.getTouchAction=function(){return[Uv]},n.process=function(e){var t=this,n=this.options,i=e.pointers.length===n.pointers,r=e.distance<n.threshold,o=e.deltaTime>n.time;if(this._input=e,!r||!i||12&e.eventType&&!o)this.reset();else if(1&e.eventType)this.reset(),this._timer=setTimeout((function(){t.state=8,t.tryEmit()}),n.time);else if(4&e.eventType)return 8;return Uy},n.reset=function(){clearTimeout(this._timer)},n.emit=function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=Dv(),this.manager.emit(this.options.event,this._input)))},t}(Gy),eg={domEvents:!1,touchAction:jv,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},tg=[[Qy,{enable:!1}],[Ky,{enable:!1},["rotate"]],[Zy,{direction:6}],[Yy,{direction:6},["swipe"]],[qy],[qy,{event:"doubletap",taps:2},["tap"]],[Jy]];function ng(e,t){var n,i=e.element;i.style&&(ny(e.options.cssProps,(function(r,o){n=zv(i.style,o),t?(e.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}var ig=function(){function e(e,t){var n,i=this;this.options=Lv({},eg,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(Xv?Cy:Yv?Ay:Vv?Ry:My))(n,py),this.touchAction=new oy(this,this.options.touchAction),ng(this,!0),ny(this.options.recognizers,(function(e){var t=i.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}var t=e.prototype;return t.set=function(e){return Lv(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},t.stop=function(e){this.session.stopped=e?2:1},t.recognize=function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var i=this.recognizers,r=t.curRecognizer;(!r||r&&8&r.state)&&(t.curRecognizer=null,r=null);for(var o=0;o<i.length;)n=i[o],2===t.stopped||r&&n!==r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&14&n.state&&(t.curRecognizer=n,r=n),o++}},t.get=function(e){if(e instanceof Gy)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event===e)return t[n];return null},t.add=function(e){if(jy(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},t.remove=function(e){if(jy(e,"remove",this))return this;var t=this.get(e);if(e){var n=this.recognizers,i=_y(n,t);-1!==i&&(n.splice(i,1),this.touchAction.update())}return this},t.on=function(e,t){if(void 0===e||void 0===t)return this;var n=this.handlers;return ny(vy(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this},t.off=function(e,t){if(void 0===e)return this;var n=this.handlers;return ny(vy(e),(function(e){t?n[e]&&n[e].splice(_y(n[e],t),1):delete n[e]})),this},t.emit=function(e,t){this.options.domEvents&&function(e,t){var n=document.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},t.destroy=function(){this.element&&ng(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),rg={touchstart:1,touchmove:2,touchend:4,touchcancel:8},og="touchstart",sg="touchstart touchmove touchend touchcancel",ag=function(e){function t(){var n,i=t.prototype;return i.evTarget=og,i.evWin=sg,(n=e.apply(this,arguments)||this).started=!1,n}return Ov(t,e),t.prototype.handler=function(e){var t=rg[e.type];if(1===t&&(this.started=!0),this.started){var n=cg.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Zv,srcEvent:e})}},t}(by);function cg(e,t){var n=Sy(e.touches),i=Sy(e.changedTouches);return 12&t&&(n=Ty(n.concat(i),"identifier",!0)),[n,i]}function lg(e,t,n){var i="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=window.console&&(window.console.warn||window.console.log);return r&&r.call(window.console,i,n),e.apply(this,arguments)}}var hg=lg((function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&void 0===e[i[r]])&&(e[i[r]]=t[i[r]]),r++;return e}),"extend","Use `assign`."),ug=lg((function(e,t){return hg(e,t,!0)}),"merge","Use `assign`.");function dg(e,t,n){var i,r=t.prototype;(i=e.prototype=Object.create(r)).constructor=e,i._super=r,n&&Lv(i,n)}function fg(e,t){return function(){return e.apply(t,arguments)}}var pg=function(){var e=function(e,t){return void 0===t&&(t={}),new ig(e,Tv({recognizers:tg.concat()},t))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=30,e.DIRECTION_DOWN=Qv,e.DIRECTION_LEFT=2,e.DIRECTION_RIGHT=4,e.DIRECTION_UP=8,e.DIRECTION_HORIZONTAL=6,e.DIRECTION_VERTICAL=Jv,e.DIRECTION_NONE=1,e.DIRECTION_DOWN=Qv,e.INPUT_START=1,e.INPUT_MOVE=2,e.INPUT_END=4,e.INPUT_CANCEL=8,e.STATE_POSSIBLE=1,e.STATE_BEGAN=2,e.STATE_CHANGED=4,e.STATE_ENDED=8,e.STATE_RECOGNIZED=8,e.STATE_CANCELLED=16,e.STATE_FAILED=Uy,e.Manager=ig,e.Input=by,e.TouchAction=oy,e.TouchInput=Ay,e.MouseInput=My,e.PointerEventInput=Cy,e.TouchMouseInput=Ry,e.SingleTouchInput=ag,e.Recognizer=Gy,e.AttrRecognizer=Vy,e.Tap=qy,e.Pan=Yy,e.Swipe=Zy,e.Pinch=Ky,e.Rotate=Qy,e.Press=Jy,e.on=yy,e.off=gy,e.each=ny,e.merge=ug,e.extend=hg,e.bindFn=fg,e.assign=Lv,e.inherit=dg,e.bindFn=fg,e.prefixed=zv,e.toArray=Sy,e.inArray=_y,e.uniqueArray=Ty,e.splitStr=vy,e.boolOrFn=iy,e.hasParent=sy,e.addEventListeners=yy,e.removeEventListeners=gy,e.defaults=Lv({},eg,{preset:tg}),e}(),vg=pg;function yg(e,t){var n=void 0!==bd&&tl(e)||e["@@iterator"];if(!n){if(Od(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return gg(e,t);var i=Sd(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return zc(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return gg(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function gg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var mg=bd("DELETE");function bg(){var e=_g.apply(void 0,arguments);return xg(e),e}function _g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)return t[0];var i;if(t.length>2)return _g.apply(void 0,Cd(i=[bg(t[0],t[1])]).call(i,md(Sd(t).call(t,2))));var r,o=t[0],s=t[1],a=yg(Td(s));try{for(a.s();!(r=a.n()).done;){var c=r.value;Object.prototype.propertyIsEnumerable.call(s,c)&&(s[c]===mg?delete o[c]:null===o[c]||null===s[c]||"object"!==gd(o[c])||"object"!==gd(s[c])||Od(o[c])||Od(s[c])?o[c]=wg(s[c]):o[c]=_g(o[c],s[c]))}}catch(e){a.e(e)}finally{a.f()}return o}function wg(e){return Od(e)?Rr(e).call(e,(function(e){return wg(e)})):"object"===gd(e)&&null!==e?_g({},e):e}function xg(e){for(var t=0,n=Ld(e);t<n.length;t++){var i=n[t];e[i]===mg?delete e[i]:"object"===gd(e[i])&&null!==e[i]&&xg(e[i])}}var kg="undefined"!=typeof window?window.Hammer||vg:function(){return function(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}()};function Eg(e){var t,n=this;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push((function(){n._dom.overlay.parentNode.removeChild(n._dom.overlay)}));var i=kg(this._dom.overlay);i.on("tap",ii(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push((function(){i.destroy()}));var r=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Gd(r).call(r,(function(e){i.on(e,(function(e){e.srcEvent.stopPropagation()}))})),document&&document.body&&(this._onClick=function(t){(function(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1})(t.target,e)||n.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push((function(){document.body.removeEventListener("click",n._onClick)}))),this._escListener=function(e){("key"in e?"Escape"===e.key:27===e.keyCode)&&n.deactivate()}}Sv(Eg.prototype),Eg.current=null,Eg.prototype.destroy=function(){var e,t;this.deactivate();var n,i=yg(tf(e=xf(t=this._cleanupQueue).call(t,0)).call(e));try{for(i.s();!(n=i.n()).done;){(0,n.value)()}}catch(e){i.e(e)}finally{i.f()}},Eg.prototype.activate=function(){Eg.current&&Eg.current.deactivate(),Eg.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},Eg.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},Eg.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};var Cg=or,Sg=we,Tg=o.TypeError,Og=Cn,Ig=d,Ag=Xn,Lg=function(e){if(Cg(e))return e;throw Tg(Sg(e)+" is not a constructor")},Fg=Qt,Pg=X,Ng=Ps,Mg=s,Dg=ee("Reflect","construct"),zg=Object.prototype,Bg=[].push,Rg=Mg((function(){function e(){}return!(Dg((function(){}),[],e)instanceof e)})),jg=!Mg((function(){Dg((function(){}))})),Ug=Rg||jg;Og({target:"Reflect",stat:!0,forced:Ug,sham:Ug},{construct:function(e,t){Lg(e),Fg(t);var n=arguments.length<3?e:Lg(arguments[2]);if(jg&&!Rg)return Dg(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return Ig(Bg,i,t),new(Ig(Ag,e,i))}var r=n.prototype,o=Ng(Pg(r)?r:zg),s=Ig(e,o,t);return Pg(s)?s:o}});var $g=Y.Reflect.construct;function Hg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Wg=Up;Cn({target:"Object",stat:!0},{setPrototypeOf:Ea});var Gg=Y.Object.setPrototypeOf;function qg(e,t){return qg=Gg||function(e,t){return e.__proto__=t,e},qg(e,t)}function Vg(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Wg(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Fn(e,"prototype",{writable:!1}),t&&qg(e,t)}function Xg(e,t){if(t&&("object"===gd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hg(e)}var Yg=ep;function Zg(e){return Zg=Gg?Yg:function(e){return e.__proto__||Yg(e)},Zg(e)}var Kg={exports:{}};!function(e){var t=function(e){var t,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var r=t&&t.prototype instanceof y?t:y,o=Object.create(r.prototype),s=new O(i||[]);return o._invoke=function(e,t,n){var i=u;return function(r,o){if(i===f)throw new Error("Generator is already running");if(i===p){if("throw"===r)throw o;return A()}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var a=C(s,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===u)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var c=h(e,t,n);if("normal"===c.type){if(i=n.done?p:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=p,n.method="throw",n.arg=c.arg)}}}(e,n,s),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u="suspendedStart",d="suspendedYield",f="executing",p="completed",v={};function y(){}function g(){}function m(){}var b={};c(b,o,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(I([])));w&&w!==n&&i.call(w,o)&&(b=w);var x=m.prototype=y.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(r,o,s,a){var c=h(e[r],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==typeof u&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(u).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var r;this._invoke=function(e,i){function o(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(o,o):o()}}function C(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=h(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,v;var o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,s=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:A}}function A(){return{value:t,done:!0}}return g.prototype=m,c(x,"constructor",m),c(m,"constructor",g),g.displayName=c(m,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,a,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},k(E.prototype),c(E.prototype,s,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var s=new E(l(t,n,i,r),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},k(x),c(x,a,"Generator"),c(x,o,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=I,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return a.type="throw",a.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),l=i.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:I(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(Kg);var Qg=Kg.exports,Jg={exports:{}},em=s((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),tm=s,nm=X,im=M,rm=em,om=Object.isExtensible,sm=tm((function(){om(1)}))||rm?function(e){return!!nm(e)&&((!rm||"ArrayBuffer"!=im(e))&&(!om||om(e)))}:om,am=!s((function(){return Object.isExtensible(Object.preventExtensions({}))})),cm=Cn,lm=m,hm=_o,um=X,dm=We,fm=qt.f,pm=nl,vm=ol,ym=sm,gm=am,mm=!1,bm=Ye("meta"),_m=0,wm=function(e){fm(e,bm,{value:{objectID:"O"+_m++,weakData:{}}})},xm=Jg.exports={enable:function(){xm.enable=function(){},mm=!0;var e=pm.f,t=lm([].splice),n={};n[bm]=1,e(n).length&&(pm.f=function(n){for(var i=e(n),r=0,o=i.length;r<o;r++)if(i[r]===bm){t(i,r,1);break}return i},cm({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:vm.f}))},fastKey:function(e,t){if(!um(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!dm(e,bm)){if(!ym(e))return"F";if(!t)return"E";wm(e)}return e[bm].objectID},getWeakData:function(e,t){if(!dm(e,bm)){if(!ym(e))return!0;if(!t)return!1;wm(e)}return e[bm].weakData},onFreeze:function(e){return gm&&mm&&ym(e)&&!dm(e,bm)&&wm(e),e}};hm[bm]=!0;var km=Gt,Em=E,Cm=Qt,Sm=we,Tm=nc,Om=hi,Im=te,Am=mc,Lm=uc,Fm=Za,Pm=o.TypeError,Nm=function(e,t){this.stopped=e,this.result=t},Mm=Nm.prototype,Dm=function(e,t,n){var i,r,o,s,a,c,l,h=n&&n.that,u=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),p=km(t,h),v=function(e){return i&&Fm(i,"normal",e),new Nm(!0,e)},y=function(e){return u?(Cm(e),f?p(e[0],e[1],v):p(e[0],e[1])):f?p(e,v):p(e)};if(d)i=e;else{if(!(r=Lm(e)))throw Pm(Sm(e)+" is not iterable");if(Tm(r)){for(o=0,s=Om(e);s>o;o++)if((a=y(e[o]))&&Im(Mm,a))return a;return new Nm(!1)}i=Am(e,r)}for(c=i.next;!(l=Em(c,i)).done;){try{a=y(l.value)}catch(e){Fm(i,"throw",e)}if("object"==typeof a&&a&&Im(Mm,a))return a}return new Nm(!1)},zm=te,Bm=o.TypeError,Rm=function(e,t){if(zm(t,e))return e;throw Bm("Incorrect invocation")},jm=Cn,Um=o,$m=Jg.exports,Hm=s,Wm=fn,Gm=Dm,qm=Rm,Vm=b,Xm=X,Ym=la,Zm=qt.f,Km=wr.forEach,Qm=w,Jm=Bo.set,eb=Bo.getterFor,tb=function(e,t,n){var i,r=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),s=r?"set":"add",a=Um[e],c=a&&a.prototype,l={};if(Qm&&Vm(a)&&(o||c.forEach&&!Hm((function(){(new a).entries().next()})))){var h=(i=t((function(t,n){Jm(qm(t,h),{type:e,collection:new a}),null!=n&&Gm(n,t[s],{that:t,AS_ENTRIES:r})}))).prototype,u=eb(e);Km(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(e){var t="add"==e||"set"==e;!(e in c)||o&&"clear"==e||Wm(h,e,(function(n,i){var r=u(this).collection;if(!t&&o&&!Xm(n))return"get"==e&&void 0;var s=r[e](0===n?0:n,i);return t?this:s}))})),o||Zm(h,"size",{configurable:!0,get:function(){return u(this).collection.size}})}else i=n.getConstructor(t,e,r,s),$m.enable();return Ym(i,e,!1,!0),l[e]=i,jm({global:!0,forced:!0},l),o||n.setStrong(i,e,r),i},nb=Gs,ib=ee,rb=qt,ob=w,sb=st("species"),ab=qt.f,cb=Ps,lb=function(e,t,n){for(var i in t)n&&n.unsafe&&e[i]?e[i]=t[i]:nb(e,i,t[i],n);return e},hb=Gt,ub=Rm,db=Dm,fb=Ra,pb=function(e){var t=ib(e),n=rb.f;ob&&t&&!t[sb]&&n(t,sb,{configurable:!0,get:function(){return this}})},vb=w,yb=Jg.exports.fastKey,gb=Bo.set,mb=Bo.getterFor,bb={getConstructor:function(e,t,n,i){var r=e((function(e,r){ub(e,o),gb(e,{type:t,index:cb(null),first:void 0,last:void 0,size:0}),vb||(e.size=0),null!=r&&db(r,e[i],{that:e,AS_ENTRIES:n})})),o=r.prototype,s=mb(t),a=function(e,t,n){var i,r,o=s(e),a=c(e,t);return a?a.value=n:(o.last=a={index:r=yb(t,!0),key:t,value:n,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=a),i&&(i.next=a),vb?o.size++:e.size++,"F"!==r&&(o.index[r]=a)),e},c=function(e,t){var n,i=s(e),r=yb(t);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==t)return n};return lb(o,{clear:function(){for(var e=s(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,vb?e.size=0:this.size=0},delete:function(e){var t=this,n=s(t),i=c(t,e);if(i){var r=i.next,o=i.previous;delete n.index[i.index],i.removed=!0,o&&(o.next=r),r&&(r.previous=o),n.first==i&&(n.first=r),n.last==i&&(n.last=o),vb?n.size--:t.size--}return!!i},forEach:function(e){for(var t,n=s(this),i=hb(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(i(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),lb(o,n?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),vb&&ab(o,"size",{get:function(){return s(this).size}}),r},setStrong:function(e,t,n){var i=t+" Iterator",r=mb(t),o=mb(i);fb(e,t,(function(e,t){gb(this,{type:i,target:e,state:r(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),pb(t)}};tb("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),bb);var _b=Y.Map,wb=wr.some;Cn({target:"Array",proto:!0,forced:!bi("some")},{some:function(e){return wb(this,e,arguments.length>1?arguments[1]:void 0)}});var xb=Kn("Array").some,kb=te,Eb=xb,Cb=Array.prototype,Sb=function(e){var t=e.some;return e===Cb||kb(Cb,e)&&t===Cb.some?Eb:t},Tb=Sb,Ob=Kn("Array").keys,Ib=Ui,Ab=We,Lb=te,Fb=Ob,Pb=Array.prototype,Nb={DOMTokenList:!0,NodeList:!0},Mb=function(e){var t=e.keys;return e===Pb||Lb(Pb,e)&&t===Pb.keys||Ab(Nb,Ib(e))?Fb:t},Db=ul,zb=Math.floor,Bb=function(e,t){var n=e.length,i=zb(n/2);return n<8?Rb(e,t):jb(e,Bb(Db(e,0,i),t),Bb(Db(e,i),t),t)},Rb=function(e,t){for(var n,i,r=e.length,o=1;o<r;){for(i=o,n=e[o];i&&t(e[i-1],n)>0;)e[i]=e[--i];i!==o++&&(e[i]=n)}return e},jb=function(e,t,n,i){for(var r=t.length,o=n.length,s=0,a=0;s<r||a<o;)e[s+a]=s<r&&a<o?i(t[s],n[a])<=0?t[s++]:n[a++]:s<r?t[s++]:n[a++];return e},Ub=Bb,$b=ne.match(/firefox\/(\d+)/i),Hb=!!$b&&+$b[1],Wb=/MSIE|Trident/.test(ne),Gb=ne.match(/AppleWebKit\/(\d+)\./),qb=!!Gb&&+Gb[1],Vb=Cn,Xb=m,Yb=Ce,Zb=Ue,Kb=hi,Qb=to,Jb=s,e_=Ub,t_=bi,n_=Hb,i_=Wb,r_=le,o_=qb,s_=[],a_=Xb(s_.sort),c_=Xb(s_.push),l_=Jb((function(){s_.sort(void 0)})),h_=Jb((function(){s_.sort(null)})),u_=t_("sort"),d_=!Jb((function(){if(r_)return r_<70;if(!(n_&&n_>3)){if(i_)return!0;if(o_)return o_<603;var e,t,n,i,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)s_.push({k:t+i,v:n})}for(s_.sort((function(e,t){return t.v-e.v})),i=0;i<s_.length;i++)t=s_[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));Vb({target:"Array",proto:!0,forced:l_||!h_||!u_||!d_},{sort:function(e){void 0!==e&&Yb(e);var t=Zb(this);if(d_)return void 0===e?a_(t):a_(t,e);var n,i,r=[],o=Kb(t);for(i=0;i<o;i++)i in t&&c_(r,t[i]);for(e_(r,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Qb(t)>Qb(n)?1:-1}}(e)),n=r.length,i=0;i<n;)t[i]=r[i++];for(;i<o;)delete t[i++];return t}});var f_,p_=Kn("Array").sort,v_=te,y_=p_,g_=Array.prototype,m_=function(e){var t=e.sort;return e===g_||v_(g_,e)&&t===g_.sort?y_:t},b_=m_,__=Kn("Array").values,w_=Ui,x_=We,k_=te,E_=__,C_=Array.prototype,S_={DOMTokenList:!0,NodeList:!0},T_=function(e){var t=e.values;return e===C_||k_(C_,e)&&t===C_.values||x_(S_,w_(e))?E_:t},O_=vd,I_=Kn("Array").entries,A_=Ui,L_=We,F_=te,P_=I_,N_=Array.prototype,M_={DOMTokenList:!0,NodeList:!0},D_=function(e){var t=e.entries;return e===N_||F_(N_,e)&&t===N_.entries||L_(M_,A_(e))?P_:t},z_=new Uint8Array(16);function B_(){if(!f_&&!(f_="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return f_(z_)}var R_=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function j_(e){return"string"==typeof e&&R_.test(e)}for(var U_=[],$_=0;$_<256;++$_)U_.push(($_+256).toString(16).substr(1));function H_(e,t,n){var i=(e=e||{}).random||(e.rng||B_)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(U_[e[t+0]]+U_[e[t+1]]+U_[e[t+2]]+U_[e[t+3]]+"-"+U_[e[t+4]]+U_[e[t+5]]+"-"+U_[e[t+6]]+U_[e[t+7]]+"-"+U_[e[t+8]]+U_[e[t+9]]+"-"+U_[e[t+10]]+U_[e[t+11]]+U_[e[t+12]]+U_[e[t+13]]+U_[e[t+14]]+U_[e[t+15]]).toLowerCase();if(!j_(n))throw TypeError("Stringified UUID is invalid");return n}(i)}function W_(e){return"string"==typeof e||"number"==typeof e}var G_=function(){function t(n){e(this,t),Mn(this,"delay",void 0),Mn(this,"max",void 0),Mn(this,"_queue",[]),Mn(this,"_timeout",null),Mn(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(n)}return Nn(t,[{key:"setOptions",value:function(e){e&&void 0!==e.delay&&(this.delay=e.delay),e&&void 0!==e.max&&(this.max=e.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var e=this._extended.object,t=this._extended.methods,n=0;n<t.length;n++){var i=t[n];i.original?e[i.name]=i.original:delete e[i.name]}this._extended=null}}},{key:"replace",value:function(e,t){var n=this,i=e[t];if(!i)throw new Error("Method "+t+" undefined");e[t]=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.queue({args:t,fn:i,context:this})}}},{key:"queue",value:function(e){"function"==typeof e?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var e=this;this._queue.length>this.max&&this.flush(),null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&"number"==typeof this.delay&&(this._timeout=bv((function(){e.flush()}),this.delay))}},{key:"flush",value:function(){var e,t;Gd(e=xf(t=this._queue).call(t,0)).call(e,(function(e){e.fn.apply(e.context||e.fn,e.args||[])}))}}],[{key:"extend",value:function(e,n){var i=new t(n);if(void 0!==e.flush)throw new Error("Target object already has a property flush");e.flush=function(){i.flush()};var r=[{name:"flush",original:void 0}];if(n&&n.replace)for(var o=0;o<n.replace.length;o++){var s=n.replace[o];r.push({name:s,original:e[s]}),i.replace(e,s)}return i._extended={object:e,methods:r},i}}]),t}(),q_=function(){function t(){e(this,t),Mn(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Mn(this,"subscribe",t.prototype.on),Mn(this,"unsubscribe",t.prototype.off)}return Nn(t,[{key:"_trigger",value:function(e,t,n){var i,r;if("*"===e)throw new Error("Cannot trigger event *");Gd(i=Cd(r=[]).call(r,md(this._subscribers[e]),md(this._subscribers["*"]))).call(i,(function(i){i(e,t,null!=n?n:null)}))}},{key:"on",value:function(e,t){"function"==typeof t&&this._subscribers[e].push(t)}},{key:"off",value:function(e,t){var n;this._subscribers[e]=Fr(n=this._subscribers[e]).call(n,(function(e){return e!==t}))}}]),t}();tb("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),bb);var V_,X_=Y.Set,Y_=mc;function Z_(e,t){var n=void 0!==bd&&tl(e)||e["@@iterator"];if(!n){if(Od(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return K_(e,t);var i=Sd(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return zc(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return K_(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function K_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}V_=O_;var Q_=function(){function t(n){e(this,t),Mn(this,"_pairs",void 0),this._pairs=n}return Nn(t,[{key:V_,value:Qg.mark((function e(){var t,n,i,r,o;return Qg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Z_(this._pairs),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return i=pd(n.value,2),r=i[0],o=i[1],e.next=7,[r,o];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"entries",value:Qg.mark((function e(){var t,n,i,r,o;return Qg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Z_(this._pairs),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return i=pd(n.value,2),r=i[0],o=i[1],e.next=7,[r,o];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"keys",value:Qg.mark((function e(){var t,n,i,r;return Qg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Z_(this._pairs),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return i=pd(n.value,1),r=i[0],e.next=7,r;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:Qg.mark((function e(){var t,n,i,r;return Qg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Z_(this._pairs),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return i=pd(n.value,2),r=i[1],e.next=7,r;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"toIdArray",value:function(){var e;return Rr(e=md(this._pairs)).call(e,(function(e){return e[0]}))}},{key:"toItemArray",value:function(){var e;return Rr(e=md(this._pairs)).call(e,(function(e){return e[1]}))}},{key:"toEntryArray",value:function(){return md(this._pairs)}},{key:"toObjectMap",value:function(){var e,t=$p(null),n=Z_(this._pairs);try{for(n.s();!(e=n.n()).done;){var i=pd(e.value,2),r=i[0],o=i[1];t[r]=o}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"toMap",value:function(){return new _b(this._pairs)}},{key:"toIdSet",value:function(){return new X_(this.toIdArray())}},{key:"toItemSet",value:function(){return new X_(this.toItemArray())}},{key:"cache",value:function(){return new t(md(this._pairs))}},{key:"distinct",value:function(e){var t,n=new X_,i=Z_(this._pairs);try{for(i.s();!(t=i.n()).done;){var r=pd(t.value,2),o=r[0],s=r[1];n.add(e(s,o))}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"filter",value:function(e){var n=this._pairs;return new t(Mn({},O_,Qg.mark((function t(){var i,r,o,s,a;return Qg.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=Z_(n),t.prev=1,i.s();case 3:if((r=i.n()).done){t.next=10;break}if(o=pd(r.value,2),s=o[0],a=o[1],!e(a,s)){t.next=8;break}return t.next=8,[s,a];case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),i.e(t.t0);case 15:return t.prev=15,i.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,12,15,18]])}))))}},{key:"forEach",value:function(e){var t,n=Z_(this._pairs);try{for(n.s();!(t=n.n()).done;){var i=pd(t.value,2),r=i[0];e(i[1],r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"map",value:function(e){var n=this._pairs;return new t(Mn({},O_,Qg.mark((function t(){var i,r,o,s,a;return Qg.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=Z_(n),t.prev=1,i.s();case 3:if((r=i.n()).done){t.next=9;break}return o=pd(r.value,2),s=o[0],a=o[1],t.next=7,[s,e(a,s)];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),i.e(t.t0);case 14:return t.prev=14,i.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])}))))}},{key:"max",value:function(e){var t=Y_(this._pairs),n=t.next();if(n.done)return null;for(var i=n.value[1],r=e(n.value[1],n.value[0]);!(n=t.next()).done;){var o=pd(n.value,2),s=o[0],a=o[1],c=e(a,s);c>r&&(r=c,i=a)}return i}},{key:"min",value:function(e){var t=Y_(this._pairs),n=t.next();if(n.done)return null;for(var i=n.value[1],r=e(n.value[1],n.value[0]);!(n=t.next()).done;){var o=pd(n.value,2),s=o[0],a=o[1],c=e(a,s);c<r&&(r=c,i=a)}return i}},{key:"reduce",value:function(e,t){var n,i=Z_(this._pairs);try{for(i.s();!(n=i.n()).done;){var r=pd(n.value,2),o=r[0];t=e(t,r[1],o)}}catch(e){i.e(e)}finally{i.f()}return t}},{key:"sort",value:function(e){var n=this;return new t(Mn({},O_,(function(){var t;return Y_(b_(t=md(n._pairs)).call(t,(function(t,n){var i=pd(t,2),r=i[0],o=i[1],s=pd(n,2),a=s[0],c=s[1];return e(o,c,r,a)})))})))}}]),t}();function J_(e,t){var n=Ld(e);if(Wh){var i=Wh(e);t&&(i=Fr(i).call(i,(function(t){return eu(e,t).enumerable}))),n.push.apply(n,i)}return n}function ew(e){for(var t=1;t<arguments.length;t++){var n,i,r=null!=arguments[t]?arguments[t]:{};t%2?Gd(n=J_(Object(r),!0)).call(n,(function(t){Mn(e,t,r[t])})):uu?mu(e,uu(r)):Gd(i=J_(Object(r))).call(i,(function(t){bu(e,t,eu(r,t))}))}return e}function tw(e,t){var n=void 0!==bd&&tl(e)||e["@@iterator"];if(!n){if(Od(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return nw(e,t);var i=Sd(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return zc(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return nw(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function nw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function iw(e){var t=function(){if("undefined"==typeof Reflect||!$g)return!1;if($g.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($g(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Zg(e);if(t){var r=Zg(this).constructor;n=$g(i,arguments,r)}else n=i.apply(this,arguments);return Xg(this,n)}}var rw=function(t){Vg(i,t);var n=iw(i);function i(t,r){var o;return e(this,i),Mn(Hg(o=n.call(this)),"flush",void 0),Mn(Hg(o),"length",void 0),Mn(Hg(o),"_options",void 0),Mn(Hg(o),"_data",void 0),Mn(Hg(o),"_idProp",void 0),Mn(Hg(o),"_queue",null),t&&!Od(t)&&(r=t,t=[]),o._options=r||{},o._data=new _b,o.length=0,o._idProp=o._options.fieldId||"id",t&&t.length&&o.add(t),o.setOptions(r),o}return Nn(i,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(e){e&&void 0!==e.queue&&(!1===e.queue?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=G_.extend(this,{replace:["add","update","remove"]})),e.queue&&"object"===gd(e.queue)&&this._queue.setOptions(e.queue)))}},{key:"add",value:function(e,t){var n,i=this,r=[];if(Od(e)){var o=Rr(e).call(e,(function(e){return e[i._idProp]}));if(Tb(o).call(o,(function(e){return i._data.has(e)})))throw new Error("A duplicate id was found in the parameter array.");for(var s=0,a=e.length;s<a;s++)n=this._addItem(e[s]),r.push(n)}else{if(!e||"object"!==gd(e))throw new Error("Unknown dataType");n=this._addItem(e),r.push(n)}return r.length&&this._trigger("add",{items:r},t),r}},{key:"update",value:function(e,t){var n=this,i=[],r=[],o=[],s=[],a=this._idProp,c=function(e){var t=e[a];if(null!=t&&n._data.has(t)){var c=e,l=zf({},n._data.get(t)),h=n._updateItem(c);r.push(h),s.push(c),o.push(l)}else{var u=n._addItem(e);i.push(u)}};if(Od(e))for(var l=0,h=e.length;l<h;l++)e[l]&&"object"===gd(e[l])?c(e[l]):console.warn("Ignoring input item, which is not an object at index "+l);else{if(!e||"object"!==gd(e))throw new Error("Unknown dataType");c(e)}if(i.length&&this._trigger("add",{items:i},t),r.length){var u={items:r,oldData:o,data:s};this._trigger("update",u,t)}return Cd(i).call(i,r)}},{key:"updateOnly",value:function(e,t){var n,i=this;Od(e)||(e=[e]);var r=Rr(n=Rr(e).call(e,(function(e){var t=i._data.get(e[i._idProp]);if(null==t)throw new Error("Updating non-existent items is not allowed.");return{oldData:t,update:e}}))).call(n,(function(e){var t=e.oldData,n=e.update,r=t[i._idProp],o=function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return bg.apply(void 0,Cd(t=[{},e]).call(t,i))}(t,n);return i._data.set(r,o),{id:r,oldData:t,updatedData:o}}));if(r.length){var o={items:Rr(r).call(r,(function(e){return e.id})),oldData:Rr(r).call(r,(function(e){return e.oldData})),data:Rr(r).call(r,(function(e){return e.updatedData}))};return this._trigger("update",o,t),o.items}return[]}},{key:"get",value:function(e,t){var n=void 0,i=void 0,r=void 0;W_(e)?(n=e,r=t):Od(e)?(i=e,r=t):r=e;var o,s=r&&"Object"===r.returnType?"Object":"Array",a=r&&Fr(r),c=[],l=void 0,h=void 0,u=void 0;if(null!=n)(l=this._data.get(n))&&a&&!a(l)&&(l=void 0);else if(null!=i)for(var d=0,f=i.length;d<f;d++)null==(l=this._data.get(i[d]))||a&&!a(l)||c.push(l);else for(var p,v=0,y=(h=md(Mb(p=this._data).call(p))).length;v<y;v++)u=h[v],null==(l=this._data.get(u))||a&&!a(l)||c.push(l);if(r&&r.order&&null==n&&this._sort(c,r.order),r&&r.fields){var g=r.fields;if(null!=n&&null!=l)l=this._filterFields(l,g);else for(var m=0,b=c.length;m<b;m++)c[m]=this._filterFields(c[m],g)}if("Object"==s){for(var _={},w=0,x=c.length;w<x;w++){var k=c[w];_[k[this._idProp]]=k}return _}return null!=n?null!==(o=l)&&void 0!==o?o:null:c}},{key:"getIds",value:function(e){var t=this._data,n=e&&Fr(e),i=e&&e.order,r=md(Mb(t).call(t)),o=[];if(n)if(i){for(var s=[],a=0,c=r.length;a<c;a++){var l=r[a],h=this._data.get(l);null!=h&&n(h)&&s.push(h)}this._sort(s,i);for(var u=0,d=s.length;u<d;u++)o.push(s[u][this._idProp])}else for(var f=0,p=r.length;f<p;f++){var v=r[f],y=this._data.get(v);null!=y&&n(y)&&o.push(y[this._idProp])}else if(i){for(var g=[],m=0,b=r.length;m<b;m++){var _=r[m];g.push(t.get(_))}this._sort(g,i);for(var w=0,x=g.length;w<x;w++)o.push(g[w][this._idProp])}else for(var k=0,E=r.length;k<E;k++){var C=r[k],S=t.get(C);null!=S&&o.push(S[this._idProp])}return o}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(e,t){var n=t&&Fr(t),i=this._data,r=md(Mb(i).call(i));if(t&&t.order)for(var o=this.get(t),s=0,a=o.length;s<a;s++){var c=o[s];e(c,c[this._idProp])}else for(var l=0,h=r.length;l<h;l++){var u=r[l],d=this._data.get(u);null==d||n&&!n(d)||e(d,u)}}},{key:"map",value:function(e,t){for(var n=t&&Fr(t),i=[],r=this._data,o=md(Mb(r).call(r)),s=0,a=o.length;s<a;s++){var c=o[s],l=this._data.get(c);null==l||n&&!n(l)||i.push(e(l,c))}return t&&t.order&&this._sort(i,t.order),i}},{key:"_filterFields",value:function(e,t){var n;return e?Ii(n=Od(t)?t:Ld(t)).call(n,(function(t,n){return t[n]=e[n],t}),{}):e}},{key:"_sort",value:function(e,t){if("string"==typeof t){var n=t;b_(e).call(e,(function(e,t){var i=e[n],r=t[n];return i>r?1:i<r?-1:0}))}else{if("function"!=typeof t)throw new TypeError("Order must be a function or a string");b_(e).call(e,t)}}},{key:"remove",value:function(e,t){for(var n=[],i=[],r=Od(e)?e:[e],o=0,s=r.length;o<s;o++){var a=this._remove(r[o]);if(a){var c=a[this._idProp];null!=c&&(n.push(c),i.push(a))}}return n.length&&this._trigger("remove",{items:n,oldData:i},t),n}},{key:"_remove",value:function(e){var t;if(W_(e)?t=e:e&&"object"===gd(e)&&(t=e[this._idProp]),null!=t&&this._data.has(t)){var n=this._data.get(t)||null;return this._data.delete(t),--this.length,n}return null}},{key:"clear",value:function(e){for(var t,n=md(Mb(t=this._data).call(t)),i=[],r=0,o=n.length;r<o;r++)i.push(this._data.get(n[r]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},e),n}},{key:"max",value:function(e){var t,n,i=null,r=null,o=tw(T_(t=this._data).call(t));try{for(o.s();!(n=o.n()).done;){var s=n.value,a=s[e];"number"==typeof a&&(null==r||a>r)&&(i=s,r=a)}}catch(e){o.e(e)}finally{o.f()}return i||null}},{key:"min",value:function(e){var t,n,i=null,r=null,o=tw(T_(t=this._data).call(t));try{for(o.s();!(n=o.n()).done;){var s=n.value,a=s[e];"number"==typeof a&&(null==r||a<r)&&(i=s,r=a)}}catch(e){o.e(e)}finally{o.f()}return i||null}},{key:"distinct",value:function(e){for(var t=this._data,n=md(Mb(t).call(t)),i=[],r=0,o=0,s=n.length;o<s;o++){for(var a=n[o],c=t.get(a)[e],l=!1,h=0;h<r;h++)if(i[h]==c){l=!0;break}l||void 0===c||(i[r]=c,r++)}return i}},{key:"_addItem",value:function(e){var t=function(e,t){return null==e[t]&&(e[t]=H_()),e}(e,this._idProp),n=t[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,t),++this.length,n}},{key:"_updateItem",value:function(e){var t=e[this._idProp];if(null==t)throw new Error("Cannot update item: item has no id (item: "+cv(e)+")");var n=this._data.get(t);if(!n)throw new Error("Cannot update item: no item with id "+t+" found");return this._data.set(t,ew(ew({},n),e)),t}},{key:"stream",value:function(e){if(e){var t=this._data;return new Q_(Mn({},O_,Qg.mark((function n(){var i,r,o,s;return Qg.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=tw(e),n.prev=1,i.s();case 3:if((r=i.n()).done){n.next=11;break}if(o=r.value,null==(s=t.get(o))){n.next=9;break}return n.next=9,[o,s];case 9:n.next=3;break;case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),i.e(n.t0);case 16:return n.prev=16,i.f(),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[1,13,16,19]])}))))}var n;return new Q_(Mn({},O_,ii(n=D_(this._data)).call(n,this._data)))}}]),i}(q_);function ow(e,t){return"object"===gd(t)&&null!==t&&e===t.idProp&&"function"==typeof Gd(t)&&"function"==typeof t.get&&"function"==typeof t.getDataSet&&"function"==typeof t.getIds&&"number"==typeof t.length&&"function"==typeof Rr(t)&&"function"==typeof t.off&&"function"==typeof t.on&&"function"==typeof t.stream&&function(e,t){return"object"===gd(t)&&null!==t&&e===t.idProp&&"function"==typeof t.add&&"function"==typeof t.clear&&"function"==typeof t.distinct&&"function"==typeof Gd(t)&&"function"==typeof t.get&&"function"==typeof t.getDataSet&&"function"==typeof t.getIds&&"number"==typeof t.length&&"function"==typeof Rr(t)&&"function"==typeof t.max&&"function"==typeof t.min&&"function"==typeof t.off&&"function"==typeof t.on&&"function"==typeof t.remove&&"function"==typeof t.setOptions&&"function"==typeof t.stream&&"function"==typeof t.update&&"function"==typeof t.updateOnly}(e,t.getDataSet())}var sw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},aw=function(e){return e&&e.Math==Math&&e},cw=aw("object"==typeof globalThis&&globalThis)||aw("object"==typeof window&&window)||aw("object"==typeof self&&self)||aw("object"==typeof sw&&sw)||function(){return this}()||Function("return this")(),lw=function(e){try{return!!e()}catch(e){return!0}},hw=!lw((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),uw=hw,dw=Function.prototype,fw=dw.apply,pw=dw.call,vw="object"==typeof Reflect&&Reflect.apply||(uw?pw.bind(fw):function(){return pw.apply(fw,arguments)}),yw=hw,gw=Function.prototype,mw=gw.bind,bw=gw.call,_w=yw&&mw.bind(bw,bw),ww=yw?function(e){return e&&_w(e)}:function(e){return e&&function(){return bw.apply(e,arguments)}},xw=function(e){return"function"==typeof e},kw={},Ew=!lw((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Cw=hw,Sw=Function.prototype.call,Tw=Cw?Sw.bind(Sw):function(){return Sw.apply(Sw,arguments)},Ow={},Iw={}.propertyIsEnumerable,Aw=Object.getOwnPropertyDescriptor,Lw=Aw&&!Iw.call({1:2},1);Ow.f=Lw?function(e){var t=Aw(this,e);return!!t&&t.enumerable}:Iw;var Fw,Pw,Nw=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Mw=ww,Dw=Mw({}.toString),zw=Mw("".slice),Bw=function(e){return zw(Dw(e),8,-1)},Rw=ww,jw=lw,Uw=Bw,$w=cw.Object,Hw=Rw("".split),Ww=jw((function(){return!$w("z").propertyIsEnumerable(0)}))?function(e){return"String"==Uw(e)?Hw(e,""):$w(e)}:$w,Gw=cw.TypeError,qw=function(e){if(null==e)throw Gw("Can't call method on "+e);return e},Vw=Ww,Xw=qw,Yw=function(e){return Vw(Xw(e))},Zw=xw,Kw=function(e){return"object"==typeof e?null!==e:Zw(e)},Qw={},Jw=Qw,ex=cw,tx=xw,nx=function(e){return tx(e)?e:void 0},ix=function(e,t){return arguments.length<2?nx(Jw[e])||nx(ex[e]):Jw[e]&&Jw[e][t]||ex[e]&&ex[e][t]},rx=ww({}.isPrototypeOf),ox=ix("navigator","userAgent")||"",sx=cw,ax=ox,cx=sx.process,lx=sx.Deno,hx=cx&&cx.versions||lx&&lx.version,ux=hx&&hx.v8;ux&&(Pw=(Fw=ux.split("."))[0]>0&&Fw[0]<4?1:+(Fw[0]+Fw[1])),!Pw&&ax&&(!(Fw=ax.match(/Edge\/(\d+)/))||Fw[1]>=74)&&(Fw=ax.match(/Chrome\/(\d+)/))&&(Pw=+Fw[1]);var dx=Pw,fx=dx,px=lw,vx=!!Object.getOwnPropertySymbols&&!px((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&fx&&fx<41})),yx=vx&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,gx=ix,mx=xw,bx=rx,_x=yx,wx=cw.Object,xx=_x?function(e){return"symbol"==typeof e}:function(e){var t=gx("Symbol");return mx(t)&&bx(t.prototype,wx(e))},kx=cw.String,Ex=function(e){try{return kx(e)}catch(e){return"Object"}},Cx=xw,Sx=Ex,Tx=cw.TypeError,Ox=function(e){if(Cx(e))return e;throw Tx(Sx(e)+" is not a function")},Ix=Ox,Ax=function(e,t){var n=e[t];return null==n?void 0:Ix(n)},Lx=Tw,Fx=xw,Px=Kw,Nx=cw.TypeError,Mx={exports:{}},Dx=cw,zx=Object.defineProperty,Bx=function(e,t){try{zx(Dx,e,{value:t,configurable:!0,writable:!0})}catch(n){Dx[e]=t}return t},Rx="__core-js_shared__",jx=cw[Rx]||Bx(Rx,{}),Ux=jx;(Mx.exports=function(e,t){return Ux[e]||(Ux[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"});var $x=qw,Hx=cw.Object,Wx=function(e){return Hx($x(e))},Gx=Wx,qx=ww({}.hasOwnProperty),Vx=Object.hasOwn||function(e,t){return qx(Gx(e),t)},Xx=ww,Yx=0,Zx=Math.random(),Kx=Xx(1..toString),Qx=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Kx(++Yx+Zx,36)},Jx=cw,ek=Mx.exports,tk=Vx,nk=Qx,ik=vx,rk=yx,ok=ek("wks"),sk=Jx.Symbol,ak=sk&&sk.for,ck=rk?sk:sk&&sk.withoutSetter||nk,lk=function(e){if(!tk(ok,e)||!ik&&"string"!=typeof ok[e]){var t="Symbol."+e;ik&&tk(sk,e)?ok[e]=sk[e]:ok[e]=rk&&ak?ak(t):ck(t)}return ok[e]},hk=Tw,uk=Kw,dk=xx,fk=Ax,pk=function(e,t){var n,i;if("string"===t&&Fx(n=e.toString)&&!Px(i=Lx(n,e)))return i;if(Fx(n=e.valueOf)&&!Px(i=Lx(n,e)))return i;if("string"!==t&&Fx(n=e.toString)&&!Px(i=Lx(n,e)))return i;throw Nx("Can't convert object to primitive value")},vk=lk,yk=cw.TypeError,gk=vk("toPrimitive"),mk=function(e,t){if(!uk(e)||dk(e))return e;var n,i=fk(e,gk);if(i){if(void 0===t&&(t="default"),n=hk(i,e,t),!uk(n)||dk(n))return n;throw yk("Can't convert object to primitive value")}return void 0===t&&(t="number"),pk(e,t)},bk=xx,_k=function(e){var t=mk(e,"string");return bk(t)?t:t+""},wk=Kw,xk=cw.document,kk=wk(xk)&&wk(xk.createElement),Ek=function(e){return kk?xk.createElement(e):{}},Ck=Ek,Sk=!Ew&&!lw((function(){return 7!=Object.defineProperty(Ck("div"),"a",{get:function(){return 7}}).a})),Tk=Ew,Ok=Tw,Ik=Ow,Ak=Nw,Lk=Yw,Fk=_k,Pk=Vx,Nk=Sk,Mk=Object.getOwnPropertyDescriptor;kw.f=Tk?Mk:function(e,t){if(e=Lk(e),t=Fk(t),Nk)try{return Mk(e,t)}catch(e){}if(Pk(e,t))return Ak(!Ok(Ik.f,e,t),e[t])};var Dk=lw,zk=xw,Bk=/#|\.prototype\./,Rk=function(e,t){var n=Uk[jk(e)];return n==Hk||n!=$k&&(zk(t)?Dk(t):!!t)},jk=Rk.normalize=function(e){return String(e).replace(Bk,".").toLowerCase()},Uk=Rk.data={},$k=Rk.NATIVE="N",Hk=Rk.POLYFILL="P",Wk=Rk,Gk=Ox,qk=hw,Vk=ww(ww.bind),Xk=function(e,t){return Gk(e),void 0===t?e:qk?Vk(e,t):function(){return e.apply(t,arguments)}},Yk={},Zk=Ew&&lw((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Kk=cw,Qk=Kw,Jk=Kk.String,eE=Kk.TypeError,tE=function(e){if(Qk(e))return e;throw eE(Jk(e)+" is not an object")},nE=Ew,iE=Sk,rE=Zk,oE=tE,sE=_k,aE=cw.TypeError,cE=Object.defineProperty,lE=Object.getOwnPropertyDescriptor,hE="enumerable",uE="configurable",dE="writable";Yk.f=nE?rE?function(e,t,n){if(oE(e),t=sE(t),oE(n),"function"==typeof e&&"prototype"===t&&"value"in n&&dE in n&&!n.writable){var i=lE(e,t);i&&i.writable&&(e[t]=n.value,n={configurable:uE in n?n.configurable:i.configurable,enumerable:hE in n?n.enumerable:i.enumerable,writable:!1})}return cE(e,t,n)}:cE:function(e,t,n){if(oE(e),t=sE(t),oE(n),iE)try{return cE(e,t,n)}catch(e){}if("get"in n||"set"in n)throw aE("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var fE=Yk,pE=Nw,vE=Ew?function(e,t,n){return fE.f(e,t,pE(1,n))}:function(e,t,n){return e[t]=n,e},yE=cw,gE=vw,mE=ww,bE=xw,_E=kw.f,wE=Wk,xE=Qw,kE=Xk,EE=vE,CE=Vx,SE=function(e){var t=function(n,i,r){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,i)}return new e(n,i,r)}return gE(e,this,arguments)};return t.prototype=e.prototype,t},TE=function(e,t){var n,i,r,o,s,a,c,l,h=e.target,u=e.global,d=e.stat,f=e.proto,p=u?yE:d?yE[h]:(yE[h]||{}).prototype,v=u?xE:xE[h]||EE(xE,h,{})[h],y=v.prototype;for(r in t)n=!wE(u?r:h+(d?".":"#")+r,e.forced)&&p&&CE(p,r),s=v[r],n&&(a=e.noTargetGet?(l=_E(p,r))&&l.value:p[r]),o=n&&a?a:t[r],n&&typeof s==typeof o||(c=e.bind&&n?kE(o,yE):e.wrap&&n?SE(o):f&&bE(o)?mE(o):o,(e.sham||o&&o.sham||s&&s.sham)&&EE(c,"sham",!0),EE(v,r,c),f&&(CE(xE,i=h+"Prototype")||EE(xE,i,{}),EE(xE[i],r,o),e.real&&y&&!y[r]&&EE(y,r,o)))},OE=Math.ceil,IE=Math.floor,AE=function(e){var t=+e;return t!=t||0===t?0:(t>0?IE:OE)(t)},LE=AE,FE=Math.max,PE=Math.min,NE=function(e,t){var n=LE(e);return n<0?FE(n+t,0):PE(n,t)},ME=AE,DE=Math.min,zE=function(e){return e>0?DE(ME(e),9007199254740991):0},BE=function(e){return zE(e.length)},RE=Yw,jE=NE,UE=BE,$E=function(e){return function(t,n,i){var r,o=RE(t),s=UE(o),a=jE(i,s);if(e&&n!=n){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},HE={includes:$E(!0),indexOf:$E(!1)},WE={},GE=Vx,qE=Yw,VE=HE.indexOf,XE=WE,YE=ww([].push),ZE=function(e,t){var n,i=qE(e),r=0,o=[];for(n in i)!GE(XE,n)&&GE(i,n)&&YE(o,n);for(;t.length>r;)GE(i,n=t[r++])&&(~VE(o,n)||YE(o,n));return o},KE=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],QE=ZE,JE=KE,eC=Object.keys||function(e){return QE(e,JE)},tC={};tC.f=Object.getOwnPropertySymbols;var nC=Ew,iC=ww,rC=Tw,oC=lw,sC=eC,aC=tC,cC=Ow,lC=Wx,hC=Ww,uC=Object.assign,dC=Object.defineProperty,fC=iC([].concat),pC=!uC||oC((function(){if(nC&&1!==uC({b:1},uC(dC({},"a",{enumerable:!0,get:function(){dC(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=uC({},e)[n]||sC(uC({},t)).join("")!=i}))?function(e,t){for(var n=lC(e),i=arguments.length,r=1,o=aC.f,s=cC.f;i>r;)for(var a,c=hC(arguments[r++]),l=o?fC(sC(c),o(c)):sC(c),h=l.length,u=0;h>u;)a=l[u++],nC&&!rC(s,c,a)||(n[a]=c[a]);return n}:uC,vC=pC;TE({target:"Object",stat:!0,forced:Object.assign!==vC},{assign:vC});var yC=Qw.Object.assign,gC=ww([].slice),mC=ww,bC=Ox,_C=Kw,wC=Vx,xC=gC,kC=hw,EC=cw.Function,CC=mC([].concat),SC=mC([].join),TC={},OC=function(e,t,n){if(!wC(TC,t)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";TC[t]=EC("C,a","return new C("+SC(i,",")+")")}return TC[t](e,n)},IC=kC?EC.bind:function(e){var t=bC(this),n=t.prototype,i=xC(arguments,1),r=function(){var n=CC(i,xC(arguments));return this instanceof r?OC(t,n.length,n):t.apply(e,n)};return _C(n)&&(r.prototype=n),r},AC=IC;TE({target:"Function",proto:!0,forced:Function.bind!==AC},{bind:AC});var LC=Qw,FC=function(e){return LC[e+"Prototype"]},PC=FC("Function").bind,NC=rx,MC=PC,DC=Function.prototype,zC=function(e){var t=e.bind;return e===DC||NC(DC,e)&&t===DC.bind?MC:t},BC=zC;function RC(e,t,n,i){e.beginPath(),e.arc(t,n,i,0,2*Math.PI,!1),e.closePath()}function jC(e,t,n,i,r,o){var s=Math.PI/180;i-2*o<0&&(o=i/2),r-2*o<0&&(o=r/2),e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+i-o,n),e.arc(t+i-o,n+o,o,270*s,360*s,!1),e.lineTo(t+i,n+r-o),e.arc(t+i-o,n+r-o,o,0,90*s,!1),e.lineTo(t+o,n+r),e.arc(t+o,n+r-o,o,90*s,180*s,!1),e.lineTo(t,n+o),e.arc(t+o,n+o,o,180*s,270*s,!1),e.closePath()}function UC(e,t,n,i,r){var o=.5522848,s=i/2*o,a=r/2*o,c=t+i,l=n+r,h=t+i/2,u=n+r/2;e.beginPath(),e.moveTo(t,u),e.bezierCurveTo(t,u-a,h-s,n,h,n),e.bezierCurveTo(h+s,n,c,u-a,c,u),e.bezierCurveTo(c,u+a,h+s,l,h,l),e.bezierCurveTo(h-s,l,t,u+a,t,u),e.closePath()}function $C(e,t,n,i,r){var o=r*(1/3),s=.5522848,a=i/2*s,c=o/2*s,l=t+i,h=n+o,u=t+i/2,d=n+o/2,f=n+(r-o/2),p=n+r;e.beginPath(),e.moveTo(l,d),e.bezierCurveTo(l,d+c,u+a,h,u,h),e.bezierCurveTo(u-a,h,t,d+c,t,d),e.bezierCurveTo(t,d-c,u-a,n,u,n),e.bezierCurveTo(u+a,n,l,d-c,l,d),e.lineTo(l,f),e.bezierCurveTo(l,f+c,u+a,p,u,p),e.bezierCurveTo(u-a,p,t,f+c,t,f),e.lineTo(t,d)}function HC(e,t,n,i,r,o){e.beginPath(),e.moveTo(t,n);for(var s=o.length,a=i-t,c=r-n,l=c/a,h=Math.sqrt(a*a+c*c),u=0,d=!0,f=0,p=+o[0];h>=.1;)(p=+o[u++%s])>h&&(p=h),f=Math.sqrt(p*p/(1+l*l)),t+=f=a<0?-f:f,n+=l*f,!0===d?e.lineTo(t,n):e.moveTo(t,n),h-=p,d=!d}var WC={circle:RC,dashedLine:HC,database:$C,diamond:function(e,t,n,i){e.beginPath(),e.lineTo(t,n+i),e.lineTo(t+i,n),e.lineTo(t,n-i),e.lineTo(t-i,n),e.closePath()},ellipse:UC,ellipse_vis:UC,hexagon:function(e,t,n,i){e.beginPath();var r=2*Math.PI/6;e.moveTo(t+i,n);for(var o=1;o<6;o++)e.lineTo(t+i*Math.cos(r*o),n+i*Math.sin(r*o));e.closePath()},roundRect:jC,square:function(e,t,n,i){e.beginPath(),e.rect(t-i,n-i,2*i,2*i),e.closePath()},star:function(e,t,n,i){e.beginPath(),n+=.1*(i*=.82);for(var r=0;r<10;r++){var o=r%2==0?1.3*i:.5*i;e.lineTo(t+o*Math.sin(2*r*Math.PI/10),n-o*Math.cos(2*r*Math.PI/10))}e.closePath()},triangle:function(e,t,n,i){e.beginPath(),n+=.275*(i*=1.15);var r=2*i,o=r/2,s=Math.sqrt(3)/6*r,a=Math.sqrt(r*r-o*o);e.moveTo(t,n-(a-s)),e.lineTo(t+o,n+s),e.lineTo(t-o,n+s),e.lineTo(t,n-(a-s)),e.closePath()},triangleDown:function(e,t,n,i){e.beginPath(),n-=.275*(i*=1.15);var r=2*i,o=r/2,s=Math.sqrt(3)/6*r,a=Math.sqrt(r*r-o*o);e.moveTo(t,n+(a-s)),e.lineTo(t+o,n-s),e.lineTo(t-o,n-s),e.lineTo(t,n+(a-s)),e.closePath()}};var GC={exports:{}};!function(e){function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}(GC);var qC=GC.exports,VC={};VC[lk("toStringTag")]="z";var XC="[object z]"===String(VC),YC=cw,ZC=XC,KC=xw,QC=Bw,JC=lk("toStringTag"),eS=YC.Object,tS="Arguments"==QC(function(){return arguments}()),nS=ZC?QC:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=eS(e),JC))?n:tS?QC(t):"Object"==(i=QC(t))&&KC(t.callee)?"Arguments":i},iS=nS,rS=cw.String,oS=function(e){if("Symbol"===iS(e))throw TypeError("Cannot convert a Symbol value to a string");return rS(e)},sS=ww,aS=AE,cS=oS,lS=qw,hS=sS("".charAt),uS=sS("".charCodeAt),dS=sS("".slice),fS=function(e){return function(t,n){var i,r,o=cS(lS(t)),s=aS(n),a=o.length;return s<0||s>=a?e?"":void 0:(i=uS(o,s))<55296||i>56319||s+1===a||(r=uS(o,s+1))<56320||r>57343?e?hS(o,s):i:e?dS(o,s,s+2):r-56320+(i-55296<<10)+65536}},pS={codeAt:fS(!1),charAt:fS(!0)},vS=xw,yS=jx,gS=ww(Function.toString);vS(yS.inspectSource)||(yS.inspectSource=function(e){return gS(e)});var mS,bS,_S,wS=yS.inspectSource,xS=xw,kS=wS,ES=cw.WeakMap,CS=xS(ES)&&/native code/.test(kS(ES)),SS=Mx.exports,TS=Qx,OS=SS("keys"),IS=function(e){return OS[e]||(OS[e]=TS(e))},AS=CS,LS=cw,FS=ww,PS=Kw,NS=vE,MS=Vx,DS=jx,zS=IS,BS=WE,RS="Object already initialized",jS=LS.TypeError,US=LS.WeakMap;if(AS||DS.state){var $S=DS.state||(DS.state=new US),HS=FS($S.get),WS=FS($S.has),GS=FS($S.set);mS=function(e,t){if(WS($S,e))throw new jS(RS);return t.facade=e,GS($S,e,t),t},bS=function(e){return HS($S,e)||{}},_S=function(e){return WS($S,e)}}else{var qS=zS("state");BS[qS]=!0,mS=function(e,t){if(MS(e,qS))throw new jS(RS);return t.facade=e,NS(e,qS,t),t},bS=function(e){return MS(e,qS)?e[qS]:{}},_S=function(e){return MS(e,qS)}}var VS={set:mS,get:bS,has:_S,enforce:function(e){return _S(e)?bS(e):mS(e,{})},getterFor:function(e){return function(t){var n;if(!PS(t)||(n=bS(t)).type!==e)throw jS("Incompatible receiver, "+e+" required");return n}}},XS=Ew,YS=Vx,ZS=Function.prototype,KS=XS&&Object.getOwnPropertyDescriptor,QS=YS(ZS,"name"),JS={EXISTS:QS,PROPER:QS&&"something"===function(){}.name,CONFIGURABLE:QS&&(!XS||XS&&KS(ZS,"name").configurable)},eT={},tT=Ew,nT=Zk,iT=Yk,rT=tE,oT=Yw,sT=eC;eT.f=tT&&!nT?Object.defineProperties:function(e,t){rT(e);for(var n,i=oT(t),r=sT(t),o=r.length,s=0;o>s;)iT.f(e,n=r[s++],i[n]);return e};var aT,cT=ix("document","documentElement"),lT=tE,hT=eT,uT=KE,dT=WE,fT=cT,pT=Ek,vT=IS("IE_PROTO"),yT=function(){},gT=function(e){return"<script>"+e+"</"+"script>"},mT=function(e){e.write(gT("")),e.close();var t=e.parentWindow.Object;return e=null,t},bT=function(){try{aT=new ActiveXObject("htmlfile")}catch(e){}var e,t;bT="undefined"!=typeof document?document.domain&&aT?mT(aT):((t=pT("iframe")).style.display="none",fT.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(gT("document.F=Object")),e.close(),e.F):mT(aT);for(var n=uT.length;n--;)delete bT.prototype[uT[n]];return bT()};dT[vT]=!0;var _T,wT,xT,kT=Object.create||function(e,t){var n;return null!==e?(yT.prototype=lT(e),n=new yT,yT.prototype=null,n[vT]=e):n=bT(),void 0===t?n:hT.f(n,t)},ET=!lw((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),CT=cw,ST=Vx,TT=xw,OT=Wx,IT=ET,AT=IS("IE_PROTO"),LT=CT.Object,FT=LT.prototype,PT=IT?LT.getPrototypeOf:function(e){var t=OT(e);if(ST(t,AT))return t[AT];var n=t.constructor;return TT(n)&&t instanceof n?n.prototype:t instanceof LT?FT:null},NT=vE,MT=function(e,t,n,i){i&&i.enumerable?e[t]=n:NT(e,t,n)},DT=lw,zT=xw,BT=kT,RT=PT,jT=MT,UT=lk("iterator"),$T=!1;[].keys&&("next"in(xT=[].keys())?(wT=RT(RT(xT)))!==Object.prototype&&(_T=wT):$T=!0);var HT=null==_T||DT((function(){var e={};return _T[UT].call(e)!==e}));zT((_T=HT?{}:BT(_T))[UT])||jT(_T,UT,(function(){return this}));var WT={IteratorPrototype:_T,BUGGY_SAFARI_ITERATORS:$T},GT=nS,qT=XC?{}.toString:function(){return"[object "+GT(this)+"]"},VT=XC,XT=Yk.f,YT=vE,ZT=Vx,KT=qT,QT=lk("toStringTag"),JT=function(e,t,n,i){if(e){var r=n?e:e.prototype;ZT(r,QT)||XT(r,QT,{configurable:!0,value:t}),i&&!VT&&YT(r,"toString",KT)}},eO={},tO=WT.IteratorPrototype,nO=kT,iO=Nw,rO=JT,oO=eO,sO=function(){return this},aO=cw,cO=xw,lO=aO.String,hO=aO.TypeError,uO=ww,dO=tE,fO=function(e){if("object"==typeof e||cO(e))return e;throw hO("Can't set "+lO(e)+" as a prototype")},pO=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=uO(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return dO(n),fO(i),t?e(n,i):n.__proto__=i,n}}():void 0),vO=TE,yO=Tw,gO=function(e,t,n,i){var r=t+" Iterator";return e.prototype=nO(tO,{next:iO(+!i,n)}),rO(e,r,!1,!0),oO[r]=sO,e},mO=PT,bO=JT,_O=MT,wO=eO,xO=JS.PROPER,kO=WT.BUGGY_SAFARI_ITERATORS,EO=lk("iterator"),CO="keys",SO="values",TO="entries",OO=function(){return this},IO=function(e,t,n,i,r,o,s){gO(n,t,i);var a,c,l,h=function(e){if(e===r&&v)return v;if(!kO&&e in f)return f[e];switch(e){case CO:case SO:case TO:return function(){return new n(this,e)}}return function(){return new n(this)}},u=t+" Iterator",d=!1,f=e.prototype,p=f[EO]||f["@@iterator"]||r&&f[r],v=!kO&&p||h(r),y="Array"==t&&f.entries||p;if(y&&(a=mO(y.call(new e)))!==Object.prototype&&a.next&&(bO(a,u,!0,!0),wO[u]=OO),xO&&r==SO&&p&&p.name!==SO&&(d=!0,v=function(){return yO(p,this)}),r)if(c={values:h(SO),keys:o?v:h(CO),entries:h(TO)},s)for(l in c)(kO||d||!(l in f))&&_O(f,l,c[l]);else vO({target:t,proto:!0,forced:kO||d},c);return s&&f[EO]!==v&&_O(f,EO,v,{name:r}),wO[t]=v,c},AO=pS.charAt,LO=oS,FO=VS,PO=IO,NO="String Iterator",MO=FO.set,DO=FO.getterFor(NO);PO(String,"String",(function(e){MO(this,{type:NO,string:LO(e),index:0})}),(function(){var e,t=DO(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=AO(n,i),t.index+=e.length,{value:e,done:!1})}));var zO=Tw,BO=tE,RO=Ax,jO=function(e,t,n){var i,r;BO(e);try{if(!(i=RO(e,"return"))){if("throw"===t)throw n;return n}i=zO(i,e)}catch(e){r=!0,i=e}if("throw"===t)throw n;if(r)throw i;return BO(i),n},UO=tE,$O=jO,HO=eO,WO=lk("iterator"),GO=Array.prototype,qO=function(e){return void 0!==e&&(HO.Array===e||GO[WO]===e)},VO=ww,XO=lw,YO=xw,ZO=nS,KO=wS,QO=function(){},JO=[],eI=ix("Reflect","construct"),tI=/^\s*(?:class|function)\b/,nI=VO(tI.exec),iI=!tI.exec(QO),rI=function(e){if(!YO(e))return!1;try{return eI(QO,JO,e),!0}catch(e){return!1}},oI=function(e){if(!YO(e))return!1;switch(ZO(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return iI||!!nI(tI,KO(e))}catch(e){return!0}};oI.sham=!0;var sI=!eI||XO((function(){var e;return rI(rI.call)||!rI(Object)||!rI((function(){e=!0}))||e}))?oI:rI,aI=_k,cI=Yk,lI=Nw,hI=function(e,t,n){var i=aI(t);i in e?cI.f(e,i,lI(0,n)):e[i]=n},uI=nS,dI=Ax,fI=eO,pI=lk("iterator"),vI=function(e){if(null!=e)return dI(e,pI)||dI(e,"@@iterator")||fI[uI(e)]},yI=Tw,gI=Ox,mI=tE,bI=Ex,_I=vI,wI=cw.TypeError,xI=function(e,t){var n=arguments.length<2?_I(e):t;if(gI(n))return mI(yI(n,e));throw wI(bI(e)+" is not iterable")},kI=Xk,EI=Tw,CI=Wx,SI=function(e,t,n,i){try{return i?t(UO(n)[0],n[1]):t(n)}catch(t){$O(e,"throw",t)}},TI=qO,OI=sI,II=BE,AI=hI,LI=xI,FI=vI,PI=cw.Array,NI=lk("iterator"),MI=!1;try{var DI=0,zI={next:function(){return{done:!!DI++}},return:function(){MI=!0}};zI[NI]=function(){return this},Array.from(zI,(function(){throw 2}))}catch(e){}var BI=function(e){var t=CI(e),n=OI(this),i=arguments.length,r=i>1?arguments[1]:void 0,o=void 0!==r;o&&(r=kI(r,i>2?arguments[2]:void 0));var s,a,c,l,h,u,d=FI(t),f=0;if(!d||this==PI&&TI(d))for(s=II(t),a=n?new this(s):PI(s);s>f;f++)u=o?r(t[f],f):t[f],AI(a,f,u);else for(h=(l=LI(t,d)).next,a=n?new this:[];!(c=EI(h,l)).done;f++)u=o?SI(l,r,[c.value,f],!0):c.value,AI(a,f,u);return a.length=f,a},RI=function(e,t){if(!t&&!MI)return!1;var n=!1;try{var i={};i[NI]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n};TE({target:"Array",stat:!0,forced:!RI((function(e){Array.from(e)}))},{from:BI});var jI=Qw.Array.from,UI=jI,$I=Yw,HI=eO,WI=VS;Yk.f;var GI=IO,qI="Array Iterator",VI=WI.set,XI=WI.getterFor(qI);GI(Array,"Array",(function(e,t){VI(this,{type:qI,target:$I(e),index:0,kind:t})}),(function(){var e=XI(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),HI.Arguments=HI.Array;var YI=vI,ZI={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},KI=cw,QI=nS,JI=vE,eA=eO,tA=lk("toStringTag");for(var nA in ZI){var iA=KI[nA],rA=iA&&iA.prototype;rA&&QI(rA)!==tA&&JI(rA,tA,nA),eA[nA]=eA.Array}var oA=YI,sA=Bw,aA=Array.isArray||function(e){return"Array"==sA(e)},cA={},lA=ZE,hA=KE.concat("length","prototype");cA.f=Object.getOwnPropertyNames||function(e){return lA(e,hA)};var uA={},dA=NE,fA=BE,pA=hI,vA=cw.Array,yA=Math.max,gA=function(e,t,n){for(var i=fA(e),r=dA(t,i),o=dA(void 0===n?i:n,i),s=vA(yA(o-r,0)),a=0;r<o;r++,a++)pA(s,a,e[r]);return s.length=a,s},mA=Bw,bA=Yw,_A=cA.f,wA=gA,xA="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];uA.f=function(e){return xA&&"Window"==mA(e)?function(e){try{return _A(e)}catch(e){return wA(xA)}}(e):_A(bA(e))};var kA={},EA=lk;kA.f=EA;var CA=Qw,SA=Vx,TA=kA,OA=Yk.f,IA=function(e){var t=CA.Symbol||(CA.Symbol={});SA(t,e)||OA(t,e,{value:TA.f(e)})},AA=cw,LA=aA,FA=sI,PA=Kw,NA=lk("species"),MA=AA.Array,DA=function(e){var t;return LA(e)&&(t=e.constructor,(FA(t)&&(t===MA||LA(t.prototype))||PA(t)&&null===(t=t[NA]))&&(t=void 0)),void 0===t?MA:t},zA=function(e,t){return new(DA(e))(0===t?0:t)},BA=Xk,RA=Ww,jA=Wx,UA=BE,$A=zA,HA=ww([].push),WA=function(e){var t=1==e,n=2==e,i=3==e,r=4==e,o=6==e,s=7==e,a=5==e||o;return function(c,l,h,u){for(var d,f,p=jA(c),v=RA(p),y=BA(l,h),g=UA(v),m=0,b=u||$A,_=t?b(c,g):n||s?b(c,0):void 0;g>m;m++)if((a||m in v)&&(f=y(d=v[m],m,p),e))if(t)_[m]=f;else if(f)switch(e){case 3:return!0;case 5:return d;case 6:return m;case 2:HA(_,d)}else switch(e){case 4:return!1;case 7:HA(_,d)}return o?-1:i||r?r:_}},GA={forEach:WA(0),map:WA(1),filter:WA(2),some:WA(3),every:WA(4),find:WA(5),findIndex:WA(6),filterReject:WA(7)},qA=TE,VA=cw,XA=ix,YA=vw,ZA=Tw,KA=ww,QA=Ew,JA=vx,eL=lw,tL=Vx,nL=aA,iL=xw,rL=Kw,oL=rx,sL=xx,aL=tE,cL=Wx,lL=Yw,hL=_k,uL=oS,dL=Nw,fL=kT,pL=eC,vL=cA,yL=uA,gL=tC,mL=kw,bL=Yk,_L=eT,wL=Ow,xL=gC,kL=MT,EL=Mx.exports,CL=WE,SL=Qx,TL=lk,OL=kA,IL=IA,AL=JT,LL=VS,FL=GA.forEach,PL=IS("hidden"),NL="Symbol",ML=TL("toPrimitive"),DL=LL.set,zL=LL.getterFor(NL),BL=Object.prototype,RL=VA.Symbol,jL=RL&&RL.prototype,UL=VA.TypeError,$L=VA.QObject,HL=XA("JSON","stringify"),WL=mL.f,GL=bL.f,qL=yL.f,VL=wL.f,XL=KA([].push),YL=EL("symbols"),ZL=EL("op-symbols"),KL=EL("string-to-symbol-registry"),QL=EL("symbol-to-string-registry"),JL=EL("wks"),eF=!$L||!$L.prototype||!$L.prototype.findChild,tF=QA&&eL((function(){return 7!=fL(GL({},"a",{get:function(){return GL(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=WL(BL,t);i&&delete BL[t],GL(e,t,n),i&&e!==BL&&GL(BL,t,i)}:GL,nF=function(e,t){var n=YL[e]=fL(jL);return DL(n,{type:NL,tag:e,description:t}),QA||(n.description=t),n},iF=function(e,t,n){e===BL&&iF(ZL,t,n),aL(e);var i=hL(t);return aL(n),tL(YL,i)?(n.enumerable?(tL(e,PL)&&e[PL][i]&&(e[PL][i]=!1),n=fL(n,{enumerable:dL(0,!1)})):(tL(e,PL)||GL(e,PL,dL(1,{})),e[PL][i]=!0),tF(e,i,n)):GL(e,i,n)},rF=function(e,t){aL(e);var n=lL(t),i=pL(n).concat(cF(n));return FL(i,(function(t){QA&&!ZA(oF,n,t)||iF(e,t,n[t])})),e},oF=function(e){var t=hL(e),n=ZA(VL,this,t);return!(this===BL&&tL(YL,t)&&!tL(ZL,t))&&(!(n||!tL(this,t)||!tL(YL,t)||tL(this,PL)&&this[PL][t])||n)},sF=function(e,t){var n=lL(e),i=hL(t);if(n!==BL||!tL(YL,i)||tL(ZL,i)){var r=WL(n,i);return!r||!tL(YL,i)||tL(n,PL)&&n[PL][i]||(r.enumerable=!0),r}},aF=function(e){var t=qL(lL(e)),n=[];return FL(t,(function(e){tL(YL,e)||tL(CL,e)||XL(n,e)})),n},cF=function(e){var t=e===BL,n=qL(t?ZL:lL(e)),i=[];return FL(n,(function(e){!tL(YL,e)||t&&!tL(BL,e)||XL(i,YL[e])})),i};if(JA||(kL(jL=(RL=function(){if(oL(jL,this))throw UL("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?uL(arguments[0]):void 0,t=SL(e),n=function(e){this===BL&&ZA(n,ZL,e),tL(this,PL)&&tL(this[PL],t)&&(this[PL][t]=!1),tF(this,t,dL(1,e))};return QA&&eF&&tF(BL,t,{configurable:!0,set:n}),nF(t,e)}).prototype,"toString",(function(){return zL(this).tag})),kL(RL,"withoutSetter",(function(e){return nF(SL(e),e)})),wL.f=oF,bL.f=iF,_L.f=rF,mL.f=sF,vL.f=yL.f=aF,gL.f=cF,OL.f=function(e){return nF(TL(e),e)},QA&&GL(jL,"description",{configurable:!0,get:function(){return zL(this).description}})),qA({global:!0,wrap:!0,forced:!JA,sham:!JA},{Symbol:RL}),FL(pL(JL),(function(e){IL(e)})),qA({target:NL,stat:!0,forced:!JA},{for:function(e){var t=uL(e);if(tL(KL,t))return KL[t];var n=RL(t);return KL[t]=n,QL[n]=t,n},keyFor:function(e){if(!sL(e))throw UL(e+" is not a symbol");if(tL(QL,e))return QL[e]},useSetter:function(){eF=!0},useSimple:function(){eF=!1}}),qA({target:"Object",stat:!0,forced:!JA,sham:!QA},{create:function(e,t){return void 0===t?fL(e):rF(fL(e),t)},defineProperty:iF,defineProperties:rF,getOwnPropertyDescriptor:sF}),qA({target:"Object",stat:!0,forced:!JA},{getOwnPropertyNames:aF,getOwnPropertySymbols:cF}),qA({target:"Object",stat:!0,forced:eL((function(){gL.f(1)}))},{getOwnPropertySymbols:function(e){return gL.f(cL(e))}}),HL){var lF=!JA||eL((function(){var e=RL();return"[null]"!=HL([e])||"{}"!=HL({a:e})||"{}"!=HL(Object(e))}));qA({target:"JSON",stat:!0,forced:lF},{stringify:function(e,t,n){var i=xL(arguments),r=t;if((rL(t)||void 0!==e)&&!sL(e))return nL(t)||(t=function(e,t){if(iL(r)&&(t=ZA(r,this,e,t)),!sL(t))return t}),i[1]=t,YA(HL,null,i)}})}if(!jL[ML]){var hF=jL.valueOf;kL(jL,ML,(function(e){return ZA(hF,this)}))}AL(RL,NL),CL[PL]=!0;var uF=Qw.Object.getOwnPropertySymbols,dF={exports:{}},fF=TE,pF=lw,vF=Yw,yF=kw.f,gF=Ew,mF=pF((function(){yF(1)}));fF({target:"Object",stat:!0,forced:!gF||mF,sham:!gF},{getOwnPropertyDescriptor:function(e,t){return yF(vF(e),t)}});var bF=Qw.Object,_F=dF.exports=function(e,t){return bF.getOwnPropertyDescriptor(e,t)};bF.getOwnPropertyDescriptor.sham&&(_F.sham=!0);var wF=dF.exports,xF=wF,kF=ix,EF=cA,CF=tC,SF=tE,TF=ww([].concat),OF=kF("Reflect","ownKeys")||function(e){var t=EF.f(SF(e)),n=CF.f;return n?TF(t,n(e)):t},IF=OF,AF=Yw,LF=kw,FF=hI;TE({target:"Object",stat:!0,sham:!Ew},{getOwnPropertyDescriptors:function(e){for(var t,n,i=AF(e),r=LF.f,o=IF(i),s={},a=0;o.length>a;)void 0!==(n=r(i,t=o[a++]))&&FF(s,t,n);return s}});var PF=Qw.Object.getOwnPropertyDescriptors,NF={exports:{}},MF=TE,DF=Ew,zF=eT.f;MF({target:"Object",stat:!0,forced:Object.defineProperties!==zF,sham:!DF},{defineProperties:zF});var BF=Qw.Object,RF=NF.exports=function(e,t){return BF.defineProperties(e,t)};BF.defineProperties.sham&&(RF.sham=!0);var jF=NF.exports,UF={exports:{}},$F=TE,HF=Ew,WF=Yk.f;$F({target:"Object",stat:!0,forced:Object.defineProperty!==WF,sham:!HF},{defineProperty:WF});var GF=Qw.Object,qF=UF.exports=function(e,t,n){return GF.defineProperty(e,t,n)};GF.defineProperty.sham&&(qF.sham=!0);var VF=UF.exports,XF=VF;function YF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ZF=VF;function KF(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),ZF(e,i.key,i)}}function QF(e,t,n){return t&&KF(e.prototype,t),n&&KF(e,n),ZF(e,"prototype",{writable:!1}),e}function JF(e,t,n){return t in e?ZF(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}TE({target:"Array",stat:!0},{isArray:aA});var eP=Qw.Array.isArray,tP=eP;var nP=lw,iP=dx,rP=lk("species"),oP=function(e){return iP>=51||!nP((function(){var t=[];return(t.constructor={})[rP]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},sP=TE,aP=cw,cP=lw,lP=aA,hP=Kw,uP=Wx,dP=BE,fP=hI,pP=zA,vP=oP,yP=dx,gP=lk("isConcatSpreadable"),mP=9007199254740991,bP="Maximum allowed index exceeded",_P=aP.TypeError,wP=yP>=51||!cP((function(){var e=[];return e[gP]=!1,e.concat()[0]!==e})),xP=vP("concat"),kP=function(e){if(!hP(e))return!1;var t=e[gP];return void 0!==t?!!t:lP(e)};sP({target:"Array",proto:!0,forced:!wP||!xP},{concat:function(e){var t,n,i,r,o,s=uP(this),a=pP(s,0),c=0;for(t=-1,i=arguments.length;t<i;t++)if(kP(o=-1===t?s:arguments[t])){if(c+(r=dP(o))>mP)throw _P(bP);for(n=0;n<r;n++,c++)n in o&&fP(a,c,o[n])}else{if(c>=mP)throw _P(bP);fP(a,c++,o)}return a.length=c,a}}),IA("asyncIterator"),IA("hasInstance"),IA("isConcatSpreadable"),IA("iterator"),IA("match"),IA("matchAll"),IA("replace"),IA("search"),IA("species"),IA("split"),IA("toPrimitive"),IA("toStringTag"),IA("unscopables"),JT(cw.JSON,"JSON",!0);var EP=Qw.Symbol,CP=EP;IA("asyncDispose"),IA("dispose"),IA("matcher"),IA("metadata"),IA("observable"),IA("patternMatch"),IA("replaceAll");var SP=CP;var TP=TE,OP=cw,IP=aA,AP=sI,LP=Kw,FP=NE,PP=BE,NP=Yw,MP=hI,DP=lk,zP=gC,BP=oP("slice"),RP=DP("species"),jP=OP.Array,UP=Math.max;TP({target:"Array",proto:!0,forced:!BP},{slice:function(e,t){var n,i,r,o=NP(this),s=PP(o),a=FP(e,s),c=FP(void 0===t?s:t,s);if(IP(o)&&(n=o.constructor,(AP(n)&&(n===jP||IP(n.prototype))||LP(n)&&null===(n=n[RP]))&&(n=void 0),n===jP||void 0===n))return zP(o,a,c);for(i=new(void 0===n?jP:n)(UP(c-a,0)),r=0;a<c;a++,r++)a in o&&MP(i,r,o[a]);return i.length=r,i}});var $P=FC("Array").slice,HP=rx,WP=$P,GP=Array.prototype,qP=function(e){var t=e.slice;return e===GP||HP(GP,e)&&t===GP.slice?WP:t},VP=qP,XP=VP,YP=jI;function ZP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function KP(e,t){var n;if(e){if("string"==typeof e)return ZP(e,t);var i=XP(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?YP(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ZP(e,t):void 0}}function QP(e,t){return function(e){if(tP(e))return e}(e)||function(e,t){var n=null==e?null:void 0!==SP&&oA(e)||e["@@iterator"];if(null!=n){var i,r,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(e){a=!0,r=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}}(e,t)||KP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var JP=kA.f("iterator");function eN(e){return eN="function"==typeof SP&&"symbol"==typeof JP?function(e){return typeof e}:function(e){return e&&"function"==typeof SP&&e.constructor===SP&&e!==SP.prototype?"symbol":typeof e},eN(e)}function tN(e){return function(e){if(tP(e))return ZP(e)}(e)||function(e){if(void 0!==SP&&null!=oA(e)||null!=e["@@iterator"])return YP(e)}(e)||KP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nN=EP,iN=FC("Array").concat,rN=rx,oN=iN,sN=Array.prototype,aN=function(e){var t=e.concat;return e===sN||rN(sN,e)&&t===sN.concat?oN:t},cN=aN,lN=VP;TE({target:"Reflect",stat:!0},{ownKeys:OF}),Qw.Reflect.ownKeys;var hN=eP,uN=GA.map;TE({target:"Array",proto:!0,forced:!oP("map")},{map:function(e){return uN(this,e,arguments.length>1?arguments[1]:void 0)}});var dN=FC("Array").map,fN=rx,pN=dN,vN=Array.prototype,yN=function(e){var t=e.map;return e===vN||fN(vN,e)&&t===vN.map?pN:t},gN=yN,mN=Wx,bN=eC;TE({target:"Object",stat:!0,forced:lw((function(){bN(1)}))},{keys:function(e){return bN(mN(e))}});var _N=Qw.Object.keys,wN=TE,xN=ww,kN=cw.Date,EN=xN(kN.prototype.getTime);wN({target:"Date",stat:!0},{now:function(){return EN(new kN)}});var CN=Qw.Date.now,SN=lw,TN=function(e,t){var n=[][e];return!!n&&SN((function(){n.call(null,t||function(){return 1},1)}))},ON=GA.forEach,IN=TN("forEach")?[].forEach:function(e){return ON(this,e,arguments.length>1?arguments[1]:void 0)};TE({target:"Array",proto:!0,forced:[].forEach!=IN},{forEach:IN});var AN=FC("Array").forEach,LN=nS,FN=Vx,PN=rx,NN=AN,MN=Array.prototype,DN={DOMTokenList:!0,NodeList:!0},zN=function(e){var t=e.forEach;return e===MN||PN(MN,e)&&t===MN.forEach||FN(DN,LN(e))?NN:t},BN=TE,RN=aA,jN=ww([].reverse),UN=[1,2];BN({target:"Array",proto:!0,forced:String(UN)===String(UN.reverse())},{reverse:function(){return RN(this)&&(this.length=this.length),jN(this)}});var $N=FC("Array").reverse,HN=rx,WN=$N,GN=Array.prototype,qN=function(e){var t=e.reverse;return e===GN||HN(GN,e)&&t===GN.reverse?WN:t},VN=qN,XN=TE,YN=cw,ZN=NE,KN=AE,QN=BE,JN=Wx,eM=zA,tM=hI,nM=oP("splice"),iM=YN.TypeError,rM=Math.max,oM=Math.min,sM=9007199254740991,aM="Maximum allowed length exceeded";XN({target:"Array",proto:!0,forced:!nM},{splice:function(e,t){var n,i,r,o,s,a,c=JN(this),l=QN(c),h=ZN(e,l),u=arguments.length;if(0===u?n=i=0:1===u?(n=0,i=l-h):(n=u-2,i=oM(rM(KN(t),0),l-h)),l+n-i>sM)throw iM(aM);for(r=eM(c,i),o=0;o<i;o++)(s=h+o)in c&&tM(r,o,c[s]);if(r.length=i,n<i){for(o=h;o<l-i;o++)a=o+n,(s=o+i)in c?c[a]=c[s]:delete c[a];for(o=l;o>l-i+n;o--)delete c[o-1]}else if(n>i)for(o=l-i;o>h;o--)a=o+n-1,(s=o+i-1)in c?c[a]=c[s]:delete c[a];for(o=0;o<n;o++)c[o+h]=arguments[o+2];return c.length=l-i+n,r}});var cM=FC("Array").splice,lM=rx,hM=cM,uM=Array.prototype,dM=function(e){var t=e.splice;return e===uM||lM(uM,e)&&t===uM.splice?hM:t},fM=dM,pM=HE.includes;TE({target:"Array",proto:!0},{includes:function(e){return pM(this,e,arguments.length>1?arguments[1]:void 0)}});var vM=FC("Array").includes,yM=Kw,gM=Bw,mM=lk("match"),bM=function(e){var t;return yM(e)&&(void 0!==(t=e[mM])?!!t:"RegExp"==gM(e))},_M=cw.TypeError,wM=lk("match"),xM=TE,kM=function(e){if(bM(e))throw _M("The method doesn't accept regular expressions");return e},EM=qw,CM=oS,SM=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[wM]=!1,"/./"[e](t)}catch(e){}}return!1},TM=ww("".indexOf);xM({target:"String",proto:!0,forced:!SM("includes")},{includes:function(e){return!!~TM(CM(EM(this)),CM(kM(e)),arguments.length>1?arguments[1]:void 0)}});var OM=FC("String").includes,IM=rx,AM=vM,LM=OM,FM=Array.prototype,PM=String.prototype,NM=function(e){var t=e.includes;return e===FM||IM(FM,e)&&t===FM.includes?AM:"string"==typeof e||e===PM||IM(PM,e)&&t===PM.includes?LM:t},MM=NM,DM=Wx,zM=PT,BM=ET;TE({target:"Object",stat:!0,forced:lw((function(){zM(1)})),sham:!BM},{getPrototypeOf:function(e){return zM(DM(e))}});var RM=Qw.Object.getPrototypeOf,jM=RM,UM=GA.filter;TE({target:"Array",proto:!0,forced:!oP("filter")},{filter:function(e){return UM(this,e,arguments.length>1?arguments[1]:void 0)}});var $M=FC("Array").filter,HM=rx,WM=$M,GM=Array.prototype,qM=function(e){var t=e.filter;return e===GM||HM(GM,e)&&t===GM.filter?WM:t},VM=qM,XM=Ew,YM=ww,ZM=eC,KM=Yw,QM=YM(Ow.f),JM=YM([].push),eD=function(e){return function(t){for(var n,i=KM(t),r=ZM(i),o=r.length,s=0,a=[];o>s;)n=r[s++],XM&&!QM(i,n)||JM(a,e?[n,i[n]]:i[n]);return a}},tD={entries:eD(!0),values:eD(!1)}.values;TE({target:"Object",stat:!0},{values:function(e){return tD(e)}}),Qw.Object.values;var nD="\t\n\v\f\r                　\u2028\u2029\ufeff",iD=qw,rD=oS,oD=ww("".replace),sD="[\t\n\v\f\r                　\u2028\u2029\ufeff]",aD=RegExp("^"+sD+sD+"*"),cD=RegExp(sD+sD+"*$"),lD=function(e){return function(t){var n=rD(iD(t));return 1&e&&(n=oD(n,aD,"")),2&e&&(n=oD(n,cD,"")),n}},hD={start:lD(1),end:lD(2),trim:lD(3)},uD=cw,dD=lw,fD=ww,pD=oS,vD=hD.trim,yD=uD.parseInt,gD=uD.Symbol,mD=gD&&gD.iterator,bD=/^[+-]?0x/i,_D=fD(bD.exec),wD=8!==yD("\t\n\v\f\r                　\u2028\u2029\ufeff08")||22!==yD("\t\n\v\f\r                　\u2028\u2029\ufeff0x16")||mD&&!dD((function(){yD(Object(mD))}))?function(e,t){var n=vD(pD(e));return yD(n,t>>>0||(_D(bD,n)?16:10))}:yD;TE({global:!0,forced:parseInt!=wD},{parseInt:wD});var xD=Qw.parseInt,kD=TE,ED=HE.indexOf,CD=TN,SD=ww([].indexOf),TD=!!SD&&1/SD([1],1,-0)<0,OD=CD("indexOf");kD({target:"Array",proto:!0,forced:TD||!OD},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return TD?SD(this,e,t)||0:ED(this,e,t)}});var ID=FC("Array").indexOf,AD=rx,LD=ID,FD=Array.prototype,PD=function(e){var t=e.indexOf;return e===FD||AD(FD,e)&&t===FD.indexOf?LD:t},ND=PD,MD=JS.PROPER,DD=lw,zD=nD,BD=hD.trim;TE({target:"String",proto:!0,forced:function(e){return DD((function(){return!!zD[e]()||"​᠎"!=="​᠎"[e]()||MD&&zD[e].name!==e}))}("trim")},{trim:function(){return BD(this)}}),FC("String").trim,TE({target:"Object",stat:!0,sham:!Ew},{create:kT});var RD=Qw.Object,jD=function(e,t){return RD.create(e,t)},UD=jD,$D=TE,HD=ix,WD=vw,GD=ww,qD=lw,VD=cw.Array,XD=HD("JSON","stringify"),YD=GD(/./.exec),ZD=GD("".charAt),KD=GD("".charCodeAt),QD=GD("".replace),JD=GD(1..toString),ez=/[\uD800-\uDFFF]/g,tz=/^[\uD800-\uDBFF]$/,nz=/^[\uDC00-\uDFFF]$/,iz=function(e,t,n){var i=ZD(n,t-1),r=ZD(n,t+1);return YD(tz,e)&&!YD(nz,r)||YD(nz,e)&&!YD(tz,i)?"\\u"+JD(KD(e,0),16):e},rz=qD((function(){return'"\\udf06\\ud834"'!==XD("\udf06\ud834")||'"\\udead"'!==XD("\udead")}));XD&&$D({target:"JSON",stat:!0,forced:rz},{stringify:function(e,t,n){for(var i=0,r=arguments.length,o=VD(r);i<r;i++)o[i]=arguments[i];var s=WD(XD,null,o);return"string"==typeof s?QD(s,ez,iz):s}});var oz=Qw,sz=vw;oz.JSON||(oz.JSON={stringify:JSON.stringify});var az=function(e,t,n){return sz(oz.JSON.stringify,null,arguments)},cz=cw.TypeError,lz=TE,hz=cw,uz=vw,dz=xw,fz=gC,pz=function(e,t){if(e<t)throw cz("Not enough arguments");return e},vz=/MSIE .\./.test(ox),yz=hz.Function,gz=function(e){return function(t,n){var i=pz(arguments.length,1)>2,r=dz(t)?t:yz(t),o=i?fz(arguments,2):void 0;return e(i?function(){uz(r,this,o)}:r,n)}};lz({global:!0,bind:!0,forced:vz},{setTimeout:gz(hz.setTimeout),setInterval:gz(hz.setInterval)});var mz=Qw.setTimeout,bz=Wx,_z=NE,wz=BE,xz=function(e){for(var t=bz(this),n=wz(t),i=arguments.length,r=_z(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,s=void 0===o?n:_z(o,n);s>r;)t[r++]=e;return t};TE({target:"Array",proto:!0},{fill:xz});var kz,Ez=FC("Array").fill,Cz=rx,Sz=Ez,Tz=Array.prototype,Oz=function(e){var t=e.fill;return e===Tz||Cz(Tz,e)&&t===Tz.fill?Sz:t},Iz=Oz;function Az(){return Az=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Az.apply(this,arguments)}function Lz(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Fz(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}kz="function"!=typeof Object.assign?function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var Pz,Nz=kz,Mz=["","webkit","Moz","MS","ms","o"],Dz="undefined"==typeof document?{style:{}}:document.createElement("div"),zz=Math.round,Bz=Math.abs,Rz=Date.now;function jz(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),o=0;o<Mz.length;){if((i=(n=Mz[o])?n+r:t)in e)return i;o++}}Pz="undefined"==typeof window?{}:window;var Uz=jz(Dz.style,"touchAction"),$z=void 0!==Uz;var Hz="compute",Wz="auto",Gz="manipulation",qz="none",Vz="pan-x",Xz="pan-y",Yz=function(){if(!$z)return!1;var e={},t=Pz.CSS&&Pz.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){return e[n]=!t||Pz.CSS.supports("touch-action",n)})),e}(),Zz="ontouchstart"in Pz,Kz=void 0!==jz(Pz,"PointerEvent"),Qz=Zz&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Jz="touch",eB="mouse",tB=16,nB=24,iB=["x","y"],rB=["clientX","clientY"];function oB(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(void 0!==e.length)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function sB(e,t){return"function"==typeof e?e.apply(t&&t[0]||void 0,t):e}function aB(e,t){return e.indexOf(t)>-1}var cB=function(){function e(e,t){this.manager=e,this.set(t)}var t=e.prototype;return t.set=function(e){e===Hz&&(e=this.compute()),$z&&this.manager.element.style&&Yz[e]&&(this.manager.element.style[Uz]=e),this.actions=e.toLowerCase().trim()},t.update=function(){this.set(this.manager.options.touchAction)},t.compute=function(){var e=[];return oB(this.manager.recognizers,(function(t){sB(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(aB(e,qz))return qz;var t=aB(e,Vz),n=aB(e,Xz);return t&&n?qz:t||n?t?Vz:Xz:aB(e,Gz)?Gz:Wz}(e.join(" "))},t.preventDefaults=function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var i=this.actions,r=aB(i,qz)&&!Yz.none,o=aB(i,Xz)&&!Yz["pan-y"],s=aB(i,Vz)&&!Yz["pan-x"];if(r){var a=1===e.pointers.length,c=e.distance<2,l=e.deltaTime<250;if(a&&c&&l)return}if(!s||!o)return r||o&&6&n||s&&n&nB?this.preventSrc(t):void 0}},t.preventSrc=function(e){this.manager.session.prevented=!0,e.preventDefault()},e}();function lB(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function hB(e){var t=e.length;if(1===t)return{x:zz(e[0].clientX),y:zz(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:zz(n/t),y:zz(i/t)}}function uB(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:zz(e.pointers[n].clientX),clientY:zz(e.pointers[n].clientY)},n++;return{timeStamp:Rz(),pointers:t,center:hB(t),deltaX:e.deltaX,deltaY:e.deltaY}}function dB(e,t,n){n||(n=iB);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function fB(e,t,n){n||(n=iB);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}function pB(e,t){return e===t?1:Bz(e)>=Bz(t)?e<0?2:4:t<0?8:tB}function vB(e,t,n){return{x:t/e||0,y:n/e||0}}function yB(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=uB(t)),r>1&&!n.firstMultiple?n.firstMultiple=uB(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,a=s?s.center:o.center,c=t.center=hB(i);t.timeStamp=Rz(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=fB(a,c),t.distance=dB(a,c),function(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};1!==t.eventType&&4!==o.eventType||(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}(n,t),t.offsetDirection=pB(t.deltaX,t.deltaY);var l,h,u=vB(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=Bz(u.x)>Bz(u.y)?u.x:u.y,t.scale=s?(l=s.pointers,dB((h=i)[0],h[1],rB)/dB(l[0],l[1],rB)):1,t.rotation=s?function(e,t){return fB(t[1],t[0],rB)+fB(e[1],e[0],rB)}(s.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,i,r,o,s=e.lastInterval||t,a=t.timeStamp-s.timeStamp;if(8!==t.eventType&&(a>25||void 0===s.velocity)){var c=t.deltaX-s.deltaX,l=t.deltaY-s.deltaY,h=vB(a,c,l);i=h.x,r=h.y,n=Bz(h.x)>Bz(h.y)?h.x:h.y,o=pB(c,l),e.lastInterval=t}else n=s.velocity,i=s.velocityX,r=s.velocityY,o=s.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=o}(n,t);var d,f=e.element,p=t.srcEvent;lB(d=p.composedPath?p.composedPath()[0]:p.path?p.path[0]:p.target,f)&&(f=d),t.target=f}function gB(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=1&t&&i-r==0,s=12&t&&i-r==0;n.isFirst=!!o,n.isFinal=!!s,o&&(e.session={}),n.eventType=t,yB(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function mB(e){return e.trim().split(/\s+/g)}function bB(e,t,n){oB(mB(t),(function(t){e.addEventListener(t,n,!1)}))}function _B(e,t,n){oB(mB(t),(function(t){e.removeEventListener(t,n,!1)}))}function wB(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||window}var xB=function(){function e(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){sB(e.options.enable,[e])&&n.handler(t)},this.init()}var t=e.prototype;return t.handler=function(){},t.init=function(){this.evEl&&bB(this.element,this.evEl,this.domHandler),this.evTarget&&bB(this.target,this.evTarget,this.domHandler),this.evWin&&bB(wB(this.element),this.evWin,this.domHandler)},t.destroy=function(){this.evEl&&_B(this.element,this.evEl,this.domHandler),this.evTarget&&_B(this.target,this.evTarget,this.domHandler),this.evWin&&_B(wB(this.element),this.evWin,this.domHandler)},e}();function kB(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}var EB={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},CB={2:Jz,3:"pen",4:eB,5:"kinect"},SB="pointerdown",TB="pointermove pointerup pointercancel";Pz.MSPointerEvent&&!Pz.PointerEvent&&(SB="MSPointerDown",TB="MSPointerMove MSPointerUp MSPointerCancel");var OB=function(e){function t(){var n,i=t.prototype;return i.evEl=SB,i.evWin=TB,(n=e.apply(this,arguments)||this).store=n.manager.session.pointerEvents=[],n}return Lz(t,e),t.prototype.handler=function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=EB[i],o=CB[e.pointerType]||e.pointerType,s=o===Jz,a=kB(t,e.pointerId,"pointerId");1&r&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):12&r&&(n=!0),a<0||(t[a]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(a,1))},t}(xB);function IB(e){return Array.prototype.slice.call(e,0)}function AB(e,t,n){for(var i=[],r=[],o=0;o<e.length;){var s=t?e[o][t]:e[o];kB(r,s)<0&&i.push(e[o]),r[o]=s,o++}return n&&(i=t?i.sort((function(e,n){return e[t]>n[t]})):i.sort()),i}var LB={touchstart:1,touchmove:2,touchend:4,touchcancel:8},FB="touchstart touchmove touchend touchcancel",PB=function(e){function t(){var n;return t.prototype.evTarget=FB,(n=e.apply(this,arguments)||this).targetIds={},n}return Lz(t,e),t.prototype.handler=function(e){var t=LB[e.type],n=NB.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Jz,srcEvent:e})},t}(xB);function NB(e,t){var n,i,r=IB(e.touches),o=this.targetIds;if(3&t&&1===r.length)return o[r[0].identifier]=!0,[r,r];var s=IB(e.changedTouches),a=[],c=this.target;if(i=r.filter((function(e){return lB(e.target,c)})),1===t)for(n=0;n<i.length;)o[i[n].identifier]=!0,n++;for(n=0;n<s.length;)o[s[n].identifier]&&a.push(s[n]),12&t&&delete o[s[n].identifier],n++;return a.length?[AB(i.concat(a),"identifier",!0),a]:void 0}var MB={mousedown:1,mousemove:2,mouseup:4},DB="mousedown",zB="mousemove mouseup",BB=function(e){function t(){var n,i=t.prototype;return i.evEl=DB,i.evWin=zB,(n=e.apply(this,arguments)||this).pressed=!1,n}return Lz(t,e),t.prototype.handler=function(e){var t=MB[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:eB,srcEvent:e}))},t}(xB);function RB(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);setTimeout((function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)}),2500)}}function jB(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,RB.call(this,t)):12&e&&RB.call(this,t)}function UB(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(t-r.x),s=Math.abs(n-r.y);if(o<=25&&s<=25)return!0}return!1}var $B=function(){return function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).handler=function(e,t,n){var r=n.pointerType===Jz,o=n.pointerType===eB;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)jB.call(Fz(Fz(i)),t,n);else if(o&&UB.call(Fz(Fz(i)),n))return;i.callback(e,t,n)}},i.touch=new PB(i.manager,i.handler),i.mouse=new BB(i.manager,i.handler),i.primaryTouch=null,i.lastTouches=[],i}return Lz(t,e),t.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(xB)}();function HB(e,t,n){return!!Array.isArray(e)&&(oB(e,n[t],n),!0)}var WB=32,GB=1;function qB(e,t){var n=t.manager;return n?n.get(e):e}function VB(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}var XB=function(){function e(e){void 0===e&&(e={}),this.options=Az({enable:!0},e),this.id=GB++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var t=e.prototype;return t.set=function(e){return Nz(this.options,e),this.manager&&this.manager.touchAction.update(),this},t.recognizeWith=function(e){if(HB(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=qB(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},t.dropRecognizeWith=function(e){return HB(e,"dropRecognizeWith",this)||(e=qB(e,this),delete this.simultaneous[e.id]),this},t.requireFailure=function(e){if(HB(e,"requireFailure",this))return this;var t=this.requireFail;return-1===kB(t,e=qB(e,this))&&(t.push(e),e.requireFailure(this)),this},t.dropRequireFailure=function(e){if(HB(e,"dropRequireFailure",this))return this;e=qB(e,this);var t=kB(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},t.hasRequireFailures=function(){return this.requireFail.length>0},t.canRecognizeWith=function(e){return!!this.simultaneous[e.id]},t.emit=function(e){var t=this,n=this.state;function i(n){t.manager.emit(n,e)}n<8&&i(t.options.event+VB(n)),i(t.options.event),e.additionalEvent&&i(e.additionalEvent),n>=8&&i(t.options.event+VB(n))},t.tryEmit=function(e){if(this.canEmit())return this.emit(e);this.state=WB},t.canEmit=function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},t.recognize=function(e){var t=Nz({},e);if(!sB(this.options.enable,[this,t]))return this.reset(),void(this.state=WB);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},t.process=function(e){},t.getTouchAction=function(){},t.reset=function(){},e}(),YB=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,Az({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},t))||this).pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}Lz(t,e);var n=t.prototype;return n.getTouchAction=function(){return[Gz]},n.process=function(e){var t=this,n=this.options,i=e.pointers.length===n.pointers,r=e.distance<n.threshold,o=e.deltaTime<n.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&o&&i){if(4!==e.eventType)return this.failTimeout();var s=!this.pTime||e.timeStamp-this.pTime<n.interval,a=!this.pCenter||dB(this.pCenter,e.center)<n.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&s?this.count+=1:this.count=1,this._input=e,0===this.count%n.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){t.state=8,t.tryEmit()}),n.interval),2):8}return WB},n.failTimeout=function(){var e=this;return this._timer=setTimeout((function(){e.state=WB}),this.options.interval),WB},n.reset=function(){clearTimeout(this._timer)},n.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},t}(XB),ZB=function(e){function t(t){return void 0===t&&(t={}),e.call(this,Az({pointers:1},t))||this}Lz(t,e);var n=t.prototype;return n.attrTest=function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},n.process=function(e){var t=this.state,n=e.eventType,i=6&t,r=this.attrTest(e);return i&&(8&n||!r)?16|t:i||r?4&n?8|t:2&t?4|t:2:WB},t}(XB);function KB(e){return e===tB?"down":8===e?"up":2===e?"left":4===e?"right":""}var QB=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,Az({event:"pan",threshold:10,pointers:1,direction:30},t))||this).pX=null,n.pY=null,n}Lz(t,e);var n=t.prototype;return n.getTouchAction=function(){var e=this.options.direction,t=[];return 6&e&&t.push(Xz),e&nB&&t.push(Vz),t},n.directionTest=function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,s=e.deltaY;return r&t.direction||(6&t.direction?(r=0===o?1:o<0?2:4,n=o!==this.pX,i=Math.abs(e.deltaX)):(r=0===s?1:s<0?8:tB,n=s!==this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},n.attrTest=function(e){return ZB.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},n.emit=function(t){this.pX=t.deltaX,this.pY=t.deltaY;var n=KB(t.direction);n&&(t.additionalEvent=this.options.event+n),e.prototype.emit.call(this,t)},t}(ZB),JB=function(e){function t(t){return void 0===t&&(t={}),e.call(this,Az({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},t))||this}Lz(t,e);var n=t.prototype;return n.getTouchAction=function(){return QB.prototype.getTouchAction.call(this)},n.attrTest=function(t){var n,i=this.options.direction;return 30&i?n=t.overallVelocity:6&i?n=t.overallVelocityX:i&nB&&(n=t.overallVelocityY),e.prototype.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers===this.options.pointers&&Bz(n)>this.options.velocity&&4&t.eventType},n.emit=function(e){var t=KB(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)},t}(ZB),eR=function(e){function t(t){return void 0===t&&(t={}),e.call(this,Az({event:"pinch",threshold:0,pointers:2},t))||this}Lz(t,e);var n=t.prototype;return n.getTouchAction=function(){return[qz]},n.attrTest=function(t){return e.prototype.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},n.emit=function(t){if(1!==t.scale){var n=t.scale<1?"in":"out";t.additionalEvent=this.options.event+n}e.prototype.emit.call(this,t)},t}(ZB),tR=function(e){function t(t){return void 0===t&&(t={}),e.call(this,Az({event:"rotate",threshold:0,pointers:2},t))||this}Lz(t,e);var n=t.prototype;return n.getTouchAction=function(){return[qz]},n.attrTest=function(t){return e.prototype.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)},t}(ZB),nR=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,Az({event:"press",pointers:1,time:251,threshold:9},t))||this)._timer=null,n._input=null,n}Lz(t,e);var n=t.prototype;return n.getTouchAction=function(){return[Wz]},n.process=function(e){var t=this,n=this.options,i=e.pointers.length===n.pointers,r=e.distance<n.threshold,o=e.deltaTime>n.time;if(this._input=e,!r||!i||12&e.eventType&&!o)this.reset();else if(1&e.eventType)this.reset(),this._timer=setTimeout((function(){t.state=8,t.tryEmit()}),n.time);else if(4&e.eventType)return 8;return WB},n.reset=function(){clearTimeout(this._timer)},n.emit=function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=Rz(),this.manager.emit(this.options.event,this._input)))},t}(XB),iR={domEvents:!1,touchAction:Hz,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},rR=[[tR,{enable:!1}],[eR,{enable:!1},["rotate"]],[JB,{direction:6}],[QB,{direction:6},["swipe"]],[YB],[YB,{event:"doubletap",taps:2},["tap"]],[nR]];function oR(e,t){var n,i=e.element;i.style&&(oB(e.options.cssProps,(function(r,o){n=jz(i.style,o),t?(e.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}var sR=function(){function e(e,t){var n,i=this;this.options=Nz({},iR,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(Kz?OB:Qz?PB:Zz?$B:BB))(n,gB),this.touchAction=new cB(this,this.options.touchAction),oR(this,!0),oB(this.options.recognizers,(function(e){var t=i.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}var t=e.prototype;return t.set=function(e){return Nz(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},t.stop=function(e){this.session.stopped=e?2:1},t.recognize=function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var i=this.recognizers,r=t.curRecognizer;(!r||r&&8&r.state)&&(t.curRecognizer=null,r=null);for(var o=0;o<i.length;)n=i[o],2===t.stopped||r&&n!==r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&14&n.state&&(t.curRecognizer=n,r=n),o++}},t.get=function(e){if(e instanceof XB)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event===e)return t[n];return null},t.add=function(e){if(HB(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},t.remove=function(e){if(HB(e,"remove",this))return this;var t=this.get(e);if(e){var n=this.recognizers,i=kB(n,t);-1!==i&&(n.splice(i,1),this.touchAction.update())}return this},t.on=function(e,t){if(void 0===e||void 0===t)return this;var n=this.handlers;return oB(mB(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this},t.off=function(e,t){if(void 0===e)return this;var n=this.handlers;return oB(mB(e),(function(e){t?n[e]&&n[e].splice(kB(n[e],t),1):delete n[e]})),this},t.emit=function(e,t){this.options.domEvents&&function(e,t){var n=document.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},t.destroy=function(){this.element&&oR(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),aR={touchstart:1,touchmove:2,touchend:4,touchcancel:8},cR="touchstart",lR="touchstart touchmove touchend touchcancel",hR=function(e){function t(){var n,i=t.prototype;return i.evTarget=cR,i.evWin=lR,(n=e.apply(this,arguments)||this).started=!1,n}return Lz(t,e),t.prototype.handler=function(e){var t=aR[e.type];if(1===t&&(this.started=!0),this.started){var n=uR.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Jz,srcEvent:e})}},t}(xB);function uR(e,t){var n=IB(e.touches),i=IB(e.changedTouches);return 12&t&&(n=AB(n.concat(i),"identifier",!0)),[n,i]}function dR(e,t,n){var i="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=window.console&&(window.console.warn||window.console.log);return r&&r.call(window.console,i,n),e.apply(this,arguments)}}var fR=dR((function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&void 0===e[i[r]])&&(e[i[r]]=t[i[r]]),r++;return e}),"extend","Use `assign`."),pR=dR((function(e,t){return fR(e,t,!0)}),"merge","Use `assign`.");function vR(e,t,n){var i,r=t.prototype;(i=e.prototype=Object.create(r)).constructor=e,i._super=r,n&&Nz(i,n)}function yR(e,t){return function(){return e.apply(t,arguments)}}var gR=function(){var e=function(e,t){return void 0===t&&(t={}),new sR(e,Az({recognizers:rR.concat()},t))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=30,e.DIRECTION_DOWN=tB,e.DIRECTION_LEFT=2,e.DIRECTION_RIGHT=4,e.DIRECTION_UP=8,e.DIRECTION_HORIZONTAL=6,e.DIRECTION_VERTICAL=nB,e.DIRECTION_NONE=1,e.DIRECTION_DOWN=tB,e.INPUT_START=1,e.INPUT_MOVE=2,e.INPUT_END=4,e.INPUT_CANCEL=8,e.STATE_POSSIBLE=1,e.STATE_BEGAN=2,e.STATE_CHANGED=4,e.STATE_ENDED=8,e.STATE_RECOGNIZED=8,e.STATE_CANCELLED=16,e.STATE_FAILED=WB,e.Manager=sR,e.Input=xB,e.TouchAction=cB,e.TouchInput=PB,e.MouseInput=BB,e.PointerEventInput=OB,e.TouchMouseInput=$B,e.SingleTouchInput=hR,e.Recognizer=XB,e.AttrRecognizer=ZB,e.Tap=YB,e.Pan=QB,e.Swipe=JB,e.Pinch=eR,e.Rotate=tR,e.Press=nR,e.on=bB,e.off=_B,e.each=oB,e.merge=pR,e.extend=fR,e.bindFn=yR,e.assign=Nz,e.inherit=vR,e.bindFn=yR,e.prefixed=jz,e.toArray=IB,e.inArray=kB,e.uniqueArray=AB,e.splitStr=mB,e.boolOrFn=sB,e.hasParent=lB,e.addEventListeners=bB,e.removeEventListeners=_B,e.defaults=Nz({},iR,{preset:rR}),e}(),mR=gR;function bR(e,t){var n=void 0!==nN&&oA(e)||e["@@iterator"];if(!n){if(hN(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return _R(e,t);var i=lN(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return UI(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _R(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function _R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function wR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xR(t.length?t:[CN()])}function xR(e){var t=function(){for(var e=kR(),t=e(" "),n=e(" "),i=e(" "),r=0;r<arguments.length;r++)(t-=e(r<0||arguments.length<=r?void 0:arguments[r]))<0&&(t+=1),(n-=e(r<0||arguments.length<=r?void 0:arguments[r]))<0&&(n+=1),(i-=e(r<0||arguments.length<=r?void 0:arguments[r]))<0&&(i+=1);return[t,n,i]}(e),n=QP(t,3),i=n[0],r=n[1],o=n[2],s=1,a=function(){var e=2091639*i+2.3283064365386963e-10*s;return i=r,r=o,o=e-(s=0|e)};return a.uint32=function(){return 4294967296*a()},a.fract53=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.algorithm="Alea",a.seed=e,a.version="0.9",a}function kR(){var e=4022871197;return function(t){for(var n=t.toString(),i=0;i<n.length;i++){var r=.02519603282416938*(e+=n.charCodeAt(i));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}nN("DELETE");var ER="undefined"!=typeof window?window.Hammer||mR:function(){return function(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}()};function CR(e){var t,n=this;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push((function(){n._dom.overlay.parentNode.removeChild(n._dom.overlay)}));var i=ER(this._dom.overlay);i.on("tap",BC(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push((function(){i.destroy()}));var r=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];zN(r).call(r,(function(e){i.on(e,(function(e){e.srcEvent.stopPropagation()}))})),document&&document.body&&(this._onClick=function(t){(function(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1})(t.target,e)||n.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push((function(){document.body.removeEventListener("click",n._onClick)}))),this._escListener=function(e){("key"in e?"Escape"===e.key:27===e.keyCode)&&n.deactivate()}}qC(CR.prototype),CR.current=null,CR.prototype.destroy=function(){var e,t;this.deactivate();var n,i=bR(VN(e=fM(t=this._cleanupQueue).call(t,0)).call(e));try{for(i.s();!(n=i.n()).done;){(0,n.value)()}}catch(e){i.e(e)}finally{i.f()}},CR.prototype.activate=function(){CR.current&&CR.current.deactivate(),CR.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},CR.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},CR.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};var SR=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,TR=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,OR=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,IR=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function AR(e){if(e)for(;!0===e.hasChildNodes();){var t=e.firstChild;t&&(AR(t),e.removeChild(t))}}function LR(e){return e instanceof String||"string"==typeof e}function FR(e){return"object"===eN(e)&&null!==e}function PR(e,t,n,i){var r=!1;!0===i&&(r=null===t[n]&&void 0!==e[n]),r?delete e[n]:e[n]=t[n]}function NR(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var i in e)if(void 0!==t[i])if(null===t[i]||"object"!==eN(t[i]))PR(e,t,i,n);else{var r=e[i],o=t[i];FR(r)&&FR(o)&&NR(r,o,n)}}function MR(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(hN(n))throw new TypeError("Arrays are not supported by deepExtend");for(var r=0;r<e.length;r++){var o=e[r];if(Object.prototype.hasOwnProperty.call(n,o))if(n[o]&&n[o].constructor===Object)void 0===t[o]&&(t[o]={}),t[o].constructor===Object?zR(t[o],n[o],!1,i):PR(t,n,o,i);else{if(hN(n[o]))throw new TypeError("Arrays are not supported by deepExtend");PR(t,n,o,i)}}return t}function DR(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(hN(n))throw new TypeError("Arrays are not supported by deepExtend");for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&!MM(e).call(e,r))if(n[r]&&n[r].constructor===Object)void 0===t[r]&&(t[r]={}),t[r].constructor===Object?zR(t[r],n[r]):PR(t,n,r,i);else if(hN(n[r])){t[r]=[];for(var o=0;o<n[r].length;o++)t[r].push(n[r][o])}else PR(t,n,r,i);return t}function zR(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)||!0===n)if("object"===eN(t[r])&&null!==t[r]&&jM(t[r])===Object.prototype)void 0===e[r]?e[r]=zR({},t[r],n):"object"===eN(e[r])&&null!==e[r]&&jM(e[r])===Object.prototype?zR(e[r],t[r],n):PR(e,t,r,i);else if(hN(t[r])){var o;e[r]=lN(o=t[r]).call(o)}else PR(e,t,r,i);return e}function BR(e,t){var n;return cN(n=[]).call(n,tN(e),[t])}function RR(e){return lN(e).call(e)}function jR(e){return e.getBoundingClientRect().top}function UR(e,t){if(hN(e))for(var n=e.length,i=0;i<n;i++)t(e[i],i,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(e[r],r,e)}function $R(e){var t;switch(e.length){case 3:case 4:return(t=TR.exec(e))?{r:xD(t[1]+t[1],16),g:xD(t[2]+t[2],16),b:xD(t[3]+t[3],16)}:null;case 6:case 7:return(t=SR.exec(e))?{r:xD(t[1],16),g:xD(t[2],16),b:xD(t[3],16)}:null;default:return null}}function HR(e,t){if(MM(e).call(e,"rgba"))return e;if(MM(e).call(e,"rgb")){var n=e.substr(ND(e).call(e,"(")+1).replace(")","").split(",");return"rgba("+n[0]+","+n[1]+","+n[2]+","+t+")"}var i=$R(e);return null==i?e:"rgba("+i.r+","+i.g+","+i.b+","+t+")"}function WR(e,t,n){var i;return"#"+lN(i=((1<<24)+(e<<16)+(t<<8)+n).toString(16)).call(i,1)}function GR(e,t){if(LR(e)){var n=e;if(ZR(n)){var i,r=gN(i=n.substr(4).substr(0,n.length-5).split(",")).call(i,(function(e){return xD(e)}));n=WR(r[0],r[1],r[2])}if(!0===YR(n)){var o=function(e){var t=$R(e);if(!t)throw new TypeError("'".concat(e,"' is not a valid color."));return qR(t.r,t.g,t.b)}(n),s={h:o.h,s:.8*o.s,v:Math.min(1,1.02*o.v)},a={h:o.h,s:Math.min(1,1.25*o.s),v:.8*o.v},c=XR(a.h,a.s,a.v),l=XR(s.h,s.s,s.v);return{background:n,border:c,highlight:{background:l,border:c},hover:{background:l,border:c}}}return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}return t?{background:e.background||t.background,border:e.border||t.border,highlight:LR(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||t.highlight.background,border:e.highlight&&e.highlight.border||t.highlight.border},hover:LR(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||t.hover.border,background:e.hover&&e.hover.background||t.hover.background}}:{background:e.background||void 0,border:e.border||void 0,highlight:LR(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||void 0,border:e.highlight&&e.highlight.border||void 0},hover:LR(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||void 0,background:e.hover&&e.hover.background||void 0}}}function qR(e,t,n){e/=255,t/=255,n/=255;var i=Math.min(e,Math.min(t,n)),r=Math.max(e,Math.max(t,n));return i===r?{h:0,s:0,v:i}:{h:60*((e===i?3:n===i?1:5)-(e===i?t-n:n===i?e-t:n-e)/(r-i))/360,s:(r-i)/r,v:r}}function VR(e,t,n){var i,r,o,s=Math.floor(6*e),a=6*e-s,c=n*(1-t),l=n*(1-a*t),h=n*(1-(1-a)*t);switch(s%6){case 0:i=n,r=h,o=c;break;case 1:i=l,r=n,o=c;break;case 2:i=c,r=n,o=h;break;case 3:i=c,r=l,o=n;break;case 4:i=h,r=c,o=n;break;case 5:i=n,r=c,o=l}return{r:Math.floor(255*i),g:Math.floor(255*r),b:Math.floor(255*o)}}function XR(e,t,n){var i=VR(e,t,n);return WR(i.r,i.g,i.b)}function YR(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)}function ZR(e){return OR.test(e)}function KR(e){return IR.test(e)}function QR(e){if(null===e||"object"!==eN(e))return null;if(e instanceof Element)return e;var t=UD(e);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&"object"==eN(e[n])&&(t[n]=QR(e[n]));return t}function JR(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=function(e){return null!=e},o=function(e){return null!==e&&"object"===eN(e)},s=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0};if(!o(e))throw new Error("Parameter mergeTarget must be an object");if(!o(t))throw new Error("Parameter options must be an object");if(!r(n))throw new Error("Parameter option must have a value");if(!o(i))throw new Error("Parameter globalOptions must be an object");var a=function(e,t,n){o(e[n])||(e[n]={});var i=t[n],r=e[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},c=t[n],l=o(i)&&!s(i),h=l?i[n]:void 0,u=h?h.enabled:void 0;if(void 0!==c){if("boolean"==typeof c)return o(e[n])||(e[n]={}),void(e[n].enabled=c);if(null===c&&!o(e[n])){if(!r(h))return;e[n]=UD(h)}if(o(c)){var d=!0;void 0!==c.enabled?d=c.enabled:void 0!==u&&(d=h.enabled),a(e,t,n),e[n].enabled=d}}}var ej={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};function tj(e,t){var n;hN(t)||(t=[t]);var i,r=bR(e);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o){n=o[t[0]];for(var s=1;s<t.length;s++)n&&(n=n[t[s]]);if(void 0!==n)break}}}catch(e){r.e(e)}finally{r.f()}return n}var nj={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},ij=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;YF(this,e),this.pixelRatio=t,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return QF(e,[{key:"insertTo",value:function(e){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(e){if("function"!=typeof e)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=e}},{key:"setCloseCallback",value:function(e){if("function"!=typeof e)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=e}},{key:"_isColorString",value:function(e){if("string"==typeof e)return nj[e]}},{key:"setColor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("none"!==e){var n,i=this._isColorString(e);if(void 0!==i&&(e=i),!0===LR(e)){if(!0===ZR(e)){var r=e.substr(4).substr(0,e.length-5).split(",");n={r:r[0],g:r[1],b:r[2],a:1}}else if(!0===KR(e)){var o=e.substr(5).substr(0,e.length-6).split(",");n={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(!0===YR(e)){var s=$R(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&void 0!==e.r&&void 0!==e.g&&void 0!==e.b){var a=void 0!==e.a?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a}}if(void 0===n)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+az(e));this._setColor(n,t)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!0===t&&(this.previousColor=yC({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",mz((function(){void 0!==e.closeCallback&&(e.closeCallback(),e.closeCallback=void 0)}),0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!0===t&&(this.initialColor=yC({},e)),this.color=e;var n=qR(e.r,e.g,e.b),i=2*Math.PI,r=this.r*n.s,o=this.centerCoordinates.x+r*Math.sin(i*n.h),s=this.centerCoordinates.y+r*Math.cos(i*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=s-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}},{key:"_setOpacity",value:function(e){this.color.a=e/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(e){var t=qR(this.color.r,this.color.g,this.color.b);t.v=e/100;var n=VR(t.h,t.s,t.v);n.a=this.color.a,this.color=n,this._updatePicker()}},{key:"_updatePicker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.color,t=qR(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var i=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,r),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-t.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Iz(n).call(n),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var e,t,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var r=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(e){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(e){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=BC(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=BC(t=this._apply).call(t,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=BC(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=BC(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var e=this;this.drag={},this.pinch={},this.hammer=new ER(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",(function(t){t.isFirst&&e._moveSelector(t)})),this.hammer.on("tap",(function(t){e._moveSelector(t)})),this.hammer.on("panstart",(function(t){e._moveSelector(t)})),this.hammer.on("panmove",(function(t){e._moveSelector(t)})),this.hammer.on("panend",(function(t){e._moveSelector(t)}))}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var e=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var t,n,i,r,o=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,o,s),this.centerCoordinates={x:.5*o,y:.5*s},this.r=.49*o;var a,c=2*Math.PI/360,l=1/this.r;for(i=0;i<360;i++)for(r=0;r<this.r;r++)t=this.centerCoordinates.x+r*Math.sin(c*i),n=this.centerCoordinates.y+r*Math.cos(c*i),a=VR(.002777777777777778*i,r*l,1),e.fillStyle="rgb("+a.r+","+a.g+","+a.b+")",e.fillRect(t-.5,n-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,o,s)}this.generated=!0}},{key:"_moveSelector",value:function(e){var t=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-t.left,i=e.center.y-t.top,r=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,s=n-o,a=i-r,c=Math.atan2(s,a),l=.98*Math.min(Math.sqrt(s*s+a*a),o),h=Math.cos(c)*l+r,u=Math.sin(c)*l+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=u-.5*this.colorPickerSelector.clientWidth+"px";var d=c/(2*Math.PI);d=d<0?d+1:d;var f=l/this.r,p=qR(this.color.r,this.color.g,this.color.b);p.h=d,p.s=f;var v=VR(p.h,p.s,p.v);v.a=this.color.a,this.color=v,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}();function rj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<1)throw new TypeError("Invalid arguments.");if(1===t.length)return document.createTextNode(t[0]);var i=document.createElement(t[0]);return i.appendChild(rj.apply(void 0,tN(lN(t).call(t,1)))),i}var oj,sj=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!1};YF(this,e),this.parent=t,this.changedOptions=[],this.container=n,this.allowCreation=!1,this.hideOption=o,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},yC(this.options,this.defaultOptions),this.configureOptions=i,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new ij(r),this.wrapper=void 0}return QF(e,[{key:"setOptions",value:function(e){if(void 0!==e){this.popupHistory={},this._removePopup();var t=!0;if("string"==typeof e)this.options.filter=e;else if(hN(e))this.options.filter=e.join();else if("object"===eN(e)){if(null==e)throw new TypeError("options cannot be null");void 0!==e.container&&(this.options.container=e.container),void 0!==VM(e)&&(this.options.filter=VM(e)),void 0!==e.showButton&&(this.options.showButton=e.showButton),void 0!==e.enabled&&(t=e.enabled)}else"boolean"==typeof e?(this.options.filter=!0,t=e):"function"==typeof e&&(this.options.filter=e,t=!0);!1===VM(this.options)&&(t=!1),this.options.enabled=t}this._clean()}},{key:"setModuleOptions",value:function(e){this.moduleOptions=e,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var e=VM(this.options),t=0,n=!1;for(var i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,"function"==typeof e?n=(n=e(i,[]))||this._handleObject(this.configureOptions[i],[i],!0):!0!==e&&-1===ND(e).call(e,i)||(n=!0),!1!==n&&(this.allowCreation=!0,t>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),t++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(e){for(var t=this.moduleOptions,n=0;n<e.length;n++){if(void 0===t[e[n]]){t=void 0;break}t=t[e[n]]}return t}},{key:"_makeItem",value:function(e){if(!0===this.allowCreation){var t=document.createElement("div");t.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return zN(i).call(i,(function(e){t.appendChild(e)})),this.domElements.push(t),this.domElements.length}return 0}},{key:"_makeHeader",value:function(e){var t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerText=e,this._makeItem([],t)}},{key:"_makeLabel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+t.length,!0===n){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(rj("i","b",e))}else i.innerText=e+":";return i}},{key:"_makeDropdown",value:function(e,t,n){var i=document.createElement("select");i.className="vis-configuration vis-config-select";var r=0;void 0!==t&&-1!==ND(e).call(e,t)&&(r=ND(e).call(e,t));for(var o=0;o<e.length;o++){var s=document.createElement("option");s.value=e[o],o===r&&(s.selected="selected"),s.innerText=e[o],i.appendChild(s)}var a=this;i.onchange=function(){a._update(this.value,n)};var c=this._makeLabel(n[n.length-1],n);this._makeItem(n,c,i)}},{key:"_makeRange",value:function(e,t,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=document.createElement("input");a.className="vis-configuration vis-config-range";try{a.type="range",a.min=r,a.max=o}catch(e){}a.step=s;var c="",l=0;if(void 0!==t){var h=1.2;t<0&&t*h<r?(a.min=Math.ceil(t*h),l=a.min,c="range increased"):t/h<r&&(a.min=Math.ceil(t/h),l=a.min,c="range increased"),t*h>o&&1!==o&&(a.max=Math.ceil(t*h),l=a.max,c="range increased"),a.value=t}else a.value=i;var u=document.createElement("input");u.className="vis-configuration vis-config-rangeinput",u.value=a.value;var d=this;a.onchange=function(){u.value=this.value,d._update(Number(this.value),n)},a.oninput=function(){u.value=this.value};var f=this._makeLabel(n[n.length-1],n),p=this._makeItem(n,f,a,u);""!==c&&this.popupHistory[p]!==l&&(this.popupHistory[p]=l,this._setupPopup(c,p))}},{key:"_makeButton",value:function(){var e=this;if(!0===this.options.showButton){var t=document.createElement("div");t.className="vis-configuration vis-config-button",t.innerText="generate options",t.onclick=function(){e._printOptions()},t.onmouseover=function(){t.className="vis-configuration vis-config-button hover"},t.onmouseout=function(){t.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(t)}}},{key:"_setupPopup",value:function(e,t){var n=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var i=document.createElement("div");i.id="vis-configuration-popup",i.className="vis-configuration-popup",i.innerText=e,i.onclick=function(){n._removePopup()},this.popupCounter+=1,this.popupDiv={html:i,index:t}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var e=this;if(void 0!==this.popupDiv.html){var t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=mz((function(){e.popupDiv.html.style.opacity=0}),1500),this.popupDiv.deleteTimeout=mz((function(){e._removePopup()}),1800)}}},{key:"_makeCheckbox",value:function(e,t,n){var i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,void 0!==t&&(i.checked=t,t!==e&&("object"===eN(e)?t!==e.enabled&&this.changedOptions.push({path:n,value:t}):this.changedOptions.push({path:n,value:t})));var r=this;i.onchange=function(){r._update(this.checked,n)};var o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}},{key:"_makeTextInput",value:function(e,t,n){var i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=t,t!==e&&this.changedOptions.push({path:n,value:t});var r=this;i.onchange=function(){r._update(this.value,n)};var o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}},{key:"_makeColorField",value:function(e,t,n){var i=this,r=e[1],o=document.createElement("div");"none"!==(t=void 0===t?r:t)?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=t):o.className="vis-configuration vis-config-colorBlock none",t=void 0===t?r:t,o.onclick=function(){i._showColorPicker(t,o,n)};var s=this._makeLabel(n[n.length-1],n);this._makeItem(n,s,o)}},{key:"_showColorPicker",value:function(e,t,n){var i=this;t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback((function(e){var r="rgba("+e.r+","+e.g+","+e.b+","+e.a+")";t.style.backgroundColor=r,i._update(r,n)})),this.colorPicker.setCloseCallback((function(){t.onclick=function(){i._showColorPicker(e,t,n)}}))}},{key:"_handleObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1,r=VM(this.options),o=!1;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){i=!0;var a=e[s],c=BR(t,s);if("function"==typeof r&&!1===(i=r(s,t))&&!hN(a)&&"string"!=typeof a&&"boolean"!=typeof a&&a instanceof Object&&(this.allowCreation=!1,i=this._handleObject(a,c,!0),this.allowCreation=!1===n),!1!==i){o=!0;var l=this._getValue(c);if(hN(a))this._handleArray(a,l,c);else if("string"==typeof a)this._makeTextInput(a,l,c);else if("boolean"==typeof a)this._makeCheckbox(a,l,c);else if(a instanceof Object){if(!this.hideOption(t,s,this.moduleOptions))if(void 0!==a.enabled){var h=BR(c,"enabled"),u=this._getValue(h);if(!0===u){var d=this._makeLabel(s,c,!0);this._makeItem(c,d),o=this._handleObject(a,c)||o}else this._makeCheckbox(a,u,c)}else{var f=this._makeLabel(s,c,!0);this._makeItem(c,f),o=this._handleObject(a,c)||o}}else console.error("dont know how to handle",a,s,c)}}return o}},{key:"_handleArray",value:function(e,t,n){"string"==typeof e[0]&&"color"===e[0]?(this._makeColorField(e,t,n),e[1]!==t&&this.changedOptions.push({path:n,value:t})):"string"==typeof e[0]?(this._makeDropdown(e,t,n),e[0]!==t&&this.changedOptions.push({path:n,value:t})):"number"==typeof e[0]&&(this._makeRange(e,t,n),e[0]!==t&&this.changedOptions.push({path:n,value:Number(t)}))}},{key:"_update",value:function(e,t){var n=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}},{key:"_constructOptions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n;e="false"!==(e="true"===e||e)&&e;for(var r=0;r<t.length;r++)"global"!==t[r]&&(void 0===i[t[r]]&&(i[t[r]]={}),r!==t.length-1?i=i[t[r]]:i[t[r]]=e);return n}},{key:"_printOptions",value:function(){for(var e=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(rj("pre","const options = "+az(e,null,2)))}},{key:"getOptions",value:function(){for(var e={},t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}}]),e}(),aj=function(){function e(t,n){YF(this,e),this.container=t,this.overflowMethod=n||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return QF(e,[{key:"setPosition",value:function(e,t){this.x=xD(e),this.y=xD(t)}},{key:"setText",value:function(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}},{key:"show",value:function(e){if(void 0===e&&(e=!0),!0===e){var t=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,r=this.frame.parentNode.clientWidth,o=0,s=0;if("flip"==this.overflowMethod){var a=!1,c=!0;this.y-t<this.padding&&(c=!1),this.x+n>r-this.padding&&(a=!0),o=a?this.x-n:this.x,s=c?this.y-t:this.y}else(s=this.y-t)+t+this.padding>i&&(s=i-t-this.padding),s<this.padding&&(s=this.padding),(o=this.x)+n+this.padding>r&&(o=r-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=s+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),e}(),cj=!1,lj="background: #FFeeee; color: #dd0000",hj=function(){function e(){YF(this,e)}return QF(e,null,[{key:"validate",value:function(t,n,i){cj=!1,oj=n;var r=n;return void 0!==i&&(r=n[i]),e.parse(t,r,[]),cj}},{key:"parse",value:function(t,n,i){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.check(r,t,n,i)}},{key:"check",value:function(t,n,i,r){if(void 0!==i[t]||void 0!==i.__any__){var o=t,s=!0;void 0===i[t]&&void 0!==i.__any__&&(o="__any__",s="object"===e.getType(n[t]));var a=i[o];s&&void 0!==a.__type__&&(a=a.__type__),e.checkFields(t,n,i,o,a,r)}else e.getSuggestion(t,i,r)}},{key:"checkFields",value:function(t,n,i,r,o,s){var a=function(n){console.error("%c"+n+e.printLocation(s,t),lj)},c=e.getType(n[t]),l=o[c];void 0!==l?"array"===e.getType(l)&&-1===ND(l).call(l,n[t])?(a('Invalid option detected in "'+t+'". Allowed values are:'+e.print(l)+' not "'+n[t]+'". '),cj=!0):"object"===c&&"__any__"!==r&&(s=BR(s,t),e.parse(n[t],i[r],s)):void 0===o.any&&(a('Invalid type received for "'+t+'". Expected: '+e.print(_N(o))+". Received ["+c+'] "'+n[t]+'"'),cj=!0)}},{key:"getType",value:function(e){var t=eN(e);return"object"===t?null===e?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":hN(e)?"array":e instanceof Date?"date":void 0!==e.nodeType?"dom":!0===e._isAMomentObject?"moment":"object":"number"===t?"number":"boolean"===t?"boolean":"string"===t?"string":void 0===t?"undefined":t}},{key:"getSuggestion",value:function(t,n,i){var r,o=e.findInOptions(t,n,i,!1),s=e.findInOptions(t,oj,[],!0);r=void 0!==o.indexMatch?" in "+e.printLocation(o.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+o.indexMatch+'"?\n\n':s.distance<=4&&o.distance>s.distance?" in "+e.printLocation(o.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(s.path,s.closestMatch,""):o.distance<=8?'. Did you mean "'+o.closestMatch+'"?'+e.printLocation(o.path,t):". Did you mean one of these: "+e.print(_N(n))+e.printLocation(i,t),console.error('%cUnknown option detected: "'+t+'"'+r,lj),cj=!0}},{key:"findInOptions",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=1e9,s="",a=[],c=t.toLowerCase(),l=void 0;for(var h in n){var u=void 0;if(void 0!==n[h].__type__&&!0===r){var d=e.findInOptions(t,n[h],BR(i,h));o>d.distance&&(s=d.closestMatch,a=d.path,o=d.distance,l=d.indexMatch)}else{var f;-1!==ND(f=h.toLowerCase()).call(f,c)&&(l=h),o>(u=e.levenshteinDistance(t,h))&&(s=h,a=RR(i),o=u)}}return{closestMatch:s,path:a,distance:o,indexMatch:l}}},{key:"printLocation",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n",i="\n\n"+n+"options = {\n",r=0;r<e.length;r++){for(var o=0;o<r+1;o++)i+="  ";i+=e[r]+": {\n"}for(var s=0;s<e.length+1;s++)i+="  ";i+=t+"\n";for(var a=0;a<e.length+1;a++){for(var c=0;c<e.length-a;c++)i+="  ";i+="}\n"}return i+"\n\n"}},{key:"print",value:function(e){return az(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;var n,i,r=[];for(n=0;n<=t.length;n++)r[n]=[n];for(i=0;i<=e.length;i++)r[0][i]=i;for(n=1;n<=t.length;n++)for(i=1;i<=e.length;i++)t.charAt(n-1)==e.charAt(i-1)?r[n][i]=r[n-1][i-1]:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[t.length][e.length]}}]),e}(),uj=CR,dj=sj,fj=ER,pj=aj,vj=lj,yj=hj;function gj(e){return Cj=e,function(){var e={};Sj=0,void(Tj=Cj.charAt(0)),Bj(),"strict"===Oj&&(e.strict=!0,Bj());"graph"!==Oj&&"digraph"!==Oj||(e.type=Oj,Bj());Ij===xj&&(e.id=Oj,Bj());if("{"!=Oj)throw Wj("Angle bracket { expected");if(Bj(),Rj(e),"}"!=Oj)throw Wj("Angle bracket } expected");if(Bj(),""!==Oj)throw Wj("End of file expected");return Bj(),delete e.node,delete e.edge,delete e.graph,e}()}var mj={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},bj=UD(mj);bj.color="color.color",bj.style="dashes";var _j=0,wj=1,xj=2,kj=3,Ej={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},Cj="",Sj=0,Tj="",Oj="",Ij=_j;function Aj(){Sj++,Tj=Cj.charAt(Sj)}function Lj(){return Cj.charAt(Sj+1)}function Fj(e){var t=e.charCodeAt(0);return t<47?35===t||46===t:t<59?t>47:t<91?t>64:t<96?95===t:t<123&&t>96}function Pj(e,t){if(e||(e={}),t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Nj(e,t,n){for(var i=t.split("."),r=e;i.length;){var o=i.shift();i.length?(r[o]||(r[o]={}),r=r[o]):r[o]=n}}function Mj(e,t){for(var n,i,r=null,o=[e],s=e;s.parent;)o.push(s.parent),s=s.parent;if(s.nodes)for(n=0,i=s.nodes.length;n<i;n++)if(t.id===s.nodes[n].id){r=s.nodes[n];break}for(r||(r={id:t.id},e.node&&(r.attr=Pj(r.attr,e.node))),n=o.length-1;n>=0;n--){var a,c=o[n];c.nodes||(c.nodes=[]),-1===ND(a=c.nodes).call(a,r)&&c.nodes.push(r)}t.attr&&(r.attr=Pj(r.attr,t.attr))}function Dj(e,t){if(e.edges||(e.edges=[]),e.edges.push(t),e.edge){var n=Pj({},e.edge);t.attr=Pj(n,t.attr)}}function zj(e,t,n,i,r){var o={from:t,to:n,type:i};return e.edge&&(o.attr=Pj({},e.edge)),o.attr=Pj(o.attr||{},r),null!=r&&r.hasOwnProperty("arrows")&&null!=r.arrows&&(o.arrows={to:{enabled:!0,type:r.arrows.type}},r.arrows=null),o}function Bj(){for(Ij=_j,Oj="";" "===Tj||"\t"===Tj||"\n"===Tj||"\r"===Tj;)Aj();do{var e=!1;if("#"===Tj){for(var t=Sj-1;" "===Cj.charAt(t)||"\t"===Cj.charAt(t);)t--;if("\n"===Cj.charAt(t)||""===Cj.charAt(t)){for(;""!=Tj&&"\n"!=Tj;)Aj();e=!0}}if("/"===Tj&&"/"===Lj()){for(;""!=Tj&&"\n"!=Tj;)Aj();e=!0}if("/"===Tj&&"*"===Lj()){for(;""!=Tj;){if("*"===Tj&&"/"===Lj()){Aj(),Aj();break}Aj()}e=!0}for(;" "===Tj||"\t"===Tj||"\n"===Tj||"\r"===Tj;)Aj()}while(e);if(""!==Tj){var n=Tj+Lj();if(Ej[n])return Ij=wj,Oj=n,Aj(),void Aj();if(Ej[Tj])return Ij=wj,Oj=Tj,void Aj();if(Fj(Tj)||"-"===Tj){for(Oj+=Tj,Aj();Fj(Tj);)Oj+=Tj,Aj();return"false"===Oj?Oj=!1:"true"===Oj?Oj=!0:isNaN(Number(Oj))||(Oj=Number(Oj)),void(Ij=xj)}if('"'===Tj){for(Aj();""!=Tj&&('"'!=Tj||'"'===Tj&&'"'===Lj());)'"'===Tj?(Oj+=Tj,Aj()):"\\"===Tj&&"n"===Lj()?(Oj+="\n",Aj()):Oj+=Tj,Aj();if('"'!=Tj)throw Wj('End of string " expected');return Aj(),void(Ij=xj)}for(Ij=kj;""!=Tj;)Oj+=Tj,Aj();throw new SyntaxError('Syntax error in part "'+Gj(Oj,30)+'"')}Ij=wj}function Rj(e){for(;""!==Oj&&"}"!=Oj;)jj(e),";"===Oj&&Bj()}function jj(e){var t=Uj(e);if(t)$j(e,t);else{var n=function(e){if("node"===Oj)return Bj(),e.node=Hj(),"node";if("edge"===Oj)return Bj(),e.edge=Hj(),"edge";if("graph"===Oj)return Bj(),e.graph=Hj(),"graph";return null}(e);if(!n){if(Ij!=xj)throw Wj("Identifier expected");var i=Oj;if(Bj(),"="===Oj){if(Bj(),Ij!=xj)throw Wj("Identifier expected");e[i]=Oj,Bj()}else!function(e,t){var n={id:t},i=Hj();i&&(n.attr=i);Mj(e,n),$j(e,t)}(e,i)}}}function Uj(e){var t=null;if("subgraph"===Oj&&((t={}).type="subgraph",Bj(),Ij===xj&&(t.id=Oj,Bj())),"{"===Oj){if(Bj(),t||(t={}),t.parent=e,t.node=e.node,t.edge=e.edge,t.graph=e.graph,Rj(t),"}"!=Oj)throw Wj("Angle bracket } expected");Bj(),delete t.node,delete t.edge,delete t.graph,delete t.parent,e.subgraphs||(e.subgraphs=[]),e.subgraphs.push(t)}return t}function $j(e,t){for(;"->"===Oj||"--"===Oj;){var n,i=Oj;Bj();var r=Uj(e);if(r)n=r;else{if(Ij!=xj)throw Wj("Identifier or subgraph expected");Mj(e,{id:n=Oj}),Bj()}Dj(e,zj(e,t,n,i,Hj())),t=n}}function Hj(){for(var e,t,n=null,i={dashed:!0,solid:!1,dotted:[1,5]},r={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},o=new Array,s=new Array;"["===Oj;){for(Bj(),n={};""!==Oj&&"]"!=Oj;){if(Ij!=xj)throw Wj("Attribute name expected");var a=Oj;if(Bj(),"="!=Oj)throw Wj("Equal sign = expected");if(Bj(),Ij!=xj)throw Wj("Attribute value expected");var c=Oj;"style"===a&&(c=i[c]),"arrowhead"===a&&(a="arrows",c={to:{enabled:!0,type:r[c]}}),"arrowtail"===a&&(a="arrows",c={from:{enabled:!0,type:r[c]}}),o.push({attr:n,name:a,value:c}),s.push(a),Bj(),","==Oj&&Bj()}if("]"!=Oj)throw Wj("Bracket ] expected");Bj()}if(MM(s).call(s,"dir")){var l={arrows:{}};for(e=0;e<o.length;e++)if("arrows"===o[e].name)if(null!=o[e].value.to)l.arrows.to=e;else{if(null==o[e].value.from)throw Wj("Invalid value of arrows");l.arrows.from=e}else"dir"===o[e].name&&(l.dir=e);var h,u,d=o[l.dir].value;if(!MM(s).call(s,"arrows"))if("both"===d)o.push({attr:o[l.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),l.arrows.to=o.length-1,o.push({attr:o[l.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),l.arrows.from=o.length-1;else if("forward"===d)o.push({attr:o[l.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),l.arrows.to=o.length-1;else if("back"===d)o.push({attr:o[l.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),l.arrows.from=o.length-1;else{if("none"!==d)throw Wj('Invalid dir type "'+d+'"');o.push({attr:o[l.dir].attr,name:"arrows",value:""}),l.arrows.to=o.length-1}if("both"===d)l.arrows.to&&l.arrows.from?(u=o[l.arrows.to].value.to.type,h=o[l.arrows.from].value.from.type,o[l.arrows.to]={attr:o[l.arrows.to].attr,name:o[l.arrows.to].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:h}}},fM(o).call(o,l.arrows.from,1)):l.arrows.to?(u=o[l.arrows.to].value.to.type,h="arrow",o[l.arrows.to]={attr:o[l.arrows.to].attr,name:o[l.arrows.to].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:h}}}):l.arrows.from&&(u="arrow",h=o[l.arrows.from].value.from.type,o[l.arrows.from]={attr:o[l.arrows.from].attr,name:o[l.arrows.from].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:h}}});else if("back"===d)l.arrows.to&&l.arrows.from?(u="",h=o[l.arrows.from].value.from.type,o[l.arrows.from]={attr:o[l.arrows.from].attr,name:o[l.arrows.from].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:h}}}):l.arrows.to?(u="",h="arrow",l.arrows.from=l.arrows.to,o[l.arrows.from]={attr:o[l.arrows.from].attr,name:o[l.arrows.from].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:h}}}):l.arrows.from&&(u="",h=o[l.arrows.from].value.from.type,o[l.arrows.to]={attr:o[l.arrows.from].attr,name:o[l.arrows.from].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:h}}}),o[l.arrows.from]={attr:o[l.arrows.from].attr,name:o[l.arrows.from].name,value:{from:{enabled:!0,type:o[l.arrows.from].value.from.type}}};else if("none"===d){var f;o[f=l.arrows.to?l.arrows.to:l.arrows.from]={attr:o[f].attr,name:o[f].name,value:""}}else{if("forward"!==d)throw Wj('Invalid dir type "'+d+'"');l.arrows.to&&l.arrows.from||l.arrows.to?(u=o[l.arrows.to].value.to.type,h="",o[l.arrows.to]={attr:o[l.arrows.to].attr,name:o[l.arrows.to].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:h}}}):l.arrows.from&&(u="arrow",h="",l.arrows.to=l.arrows.from,o[l.arrows.to]={attr:o[l.arrows.to].attr,name:o[l.arrows.to].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:h}}}),o[l.arrows.to]={attr:o[l.arrows.to].attr,name:o[l.arrows.to].name,value:{to:{enabled:!0,type:o[l.arrows.to].value.to.type}}}}fM(o).call(o,l.dir,1)}if(MM(s).call(s,"penwidth")){var p=[];for(t=o.length,e=0;e<t;e++)"width"!==o[e].name&&("penwidth"===o[e].name&&(o[e].name="width"),p.push(o[e]));o=p}for(t=o.length,e=0;e<t;e++)Nj(o[e].attr,o[e].name,o[e].value);return n}function Wj(e){return new SyntaxError(e+', got "'+Gj(Oj,30)+'" (char '+Sj+")")}function Gj(e,t){return e.length<=t?e:e.substr(0,27)+"..."}function qj(e,t,n){for(var i=t.split("."),r=i.pop(),o=e,s=0;s<i.length;s++){var a=i[s];a in o||(o[a]={}),o=o[a]}return o[r]=n,e}function Vj(e,t){var n={};for(var i in e)if(e.hasOwnProperty(i)){var r=t[i];hN(r)?zN(r).call(r,(function(t){qj(n,t,e[i])})):qj(n,"string"==typeof r?r:i,e[i])}return n}function Xj(e){var t,n=gj(e),i={nodes:[],edges:[],options:{}};n.nodes&&zN(t=n.nodes).call(t,(function(e){var t={id:e.id,label:String(e.label||e.id)};Pj(t,Vj(e.attr,mj)),t.image&&(t.shape="image"),i.nodes.push(t)}));if(n.edges){var r,o=function(e){var t={from:e.from,to:e.to};return Pj(t,Vj(e.attr,bj)),null==t.arrows&&"->"===e.type&&(t.arrows="to"),t};zN(r=n.edges).call(r,(function(e){var t,n,r,s,a,c,l;(t=e.from instanceof Object?e.from.nodes:{id:e.from},n=e.to instanceof Object?e.to.nodes:{id:e.to},e.from instanceof Object&&e.from.edges)&&zN(r=e.from.edges).call(r,(function(e){var t=o(e);i.edges.push(t)}));(a=n,c=function(t,n){var r=zj(i,t.id,n.id,e.type,e.attr),s=o(r);i.edges.push(s)},hN(s=t)?zN(s).call(s,(function(e){hN(a)?zN(a).call(a,(function(t){c(e,t)})):c(e,a)})):hN(a)?zN(a).call(a,(function(e){c(s,e)})):c(s,a),e.to instanceof Object&&e.to.edges)&&zN(l=e.to.edges).call(l,(function(e){var t=o(e);i.edges.push(t)}))}))}return n.attr&&(i.options=n.attr),i}function Yj(e,t){var n,i={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};null!=t&&(null!=t.fixed&&(i.nodes.fixed=t.fixed),null!=t.parseColor&&(i.nodes.parseColor=t.parseColor),null!=t.inheritColor&&(i.edges.inheritColor=t.inheritColor));var r=e.edges,o=gN(r).call(r,(function(e){var t={from:e.source,id:e.id,to:e.target};return null!=e.attributes&&(t.attributes=e.attributes),null!=e.label&&(t.label=e.label),null!=e.attributes&&null!=e.attributes.title&&(t.title=e.attributes.title),"Directed"===e.type&&(t.arrows="to"),e.color&&!1===i.edges.inheritColor&&(t.color=e.color),t}));return{nodes:gN(n=e.nodes).call(n,(function(e){var t={id:e.id,fixed:i.nodes.fixed&&null!=e.x&&null!=e.y};return null!=e.attributes&&(t.attributes=e.attributes),null!=e.label&&(t.label=e.label),null!=e.size&&(t.size=e.size),null!=e.attributes&&null!=e.attributes.title&&(t.title=e.attributes.title),null!=e.title&&(t.title=e.title),null!=e.x&&(t.x=e.x),null!=e.y&&(t.y=e.y),null!=e.color&&(!0===i.nodes.parseColor?t.color=e.color:t.color={background:e.color,border:e.color,highlight:{background:e.color,border:e.color},hover:{background:e.color,border:e.color}}),t})),edges:o}}var Zj=Object.freeze({__proto__:null,en:{addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},de:{addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufügen",addNode:"Knoten hinzufügen",back:"Zurück",close:"Schließen",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",del:"Lösche Auswahl",deleteClusterError:"Cluster können nicht gelöscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster können nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},es:{addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",addEdge:"Añadir arista",addNode:"Añadir nodo",back:"Atrás",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar selección",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},it:{addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},nl:{addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},pt:{addDescription:"Clique em um espaço em branco para adicionar um novo nó",addEdge:"Adicionar aresta",addNode:"Adicionar nó",back:"Voltar",close:"Fechar",createEdgeError:"Não foi possível linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters não puderam ser removidos.",edgeDescription:"Clique em um nó e arraste a aresta até outro nó para conectá-los",edit:"Editar",editClusterError:"Clusters não puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nó para conectá-los",editNode:"Editar nó"},ru:{addDescription:"Кликните в свободное место, чтобы добавить новый узел.",addEdge:"Добавить ребро",addNode:"Добавить узел",back:"Назад",close:"Закрывать",createEdgeError:"Невозможно соединить ребра в кластер.",del:"Удалить выбранное",deleteClusterError:"Кластеры не могут быть удалены",edgeDescription:"Кликните на узел и протяните ребро к другому узлу, чтобы соединить их.",edit:"Редактировать",editClusterError:"Кластеры недоступны для редактирования.",editEdge:"Редактировать ребро",editEdgeDescription:"Кликните на контрольные точки и перетащите их в узел, чтобы подключиться к нему.",editNode:"Редактировать узел"},cn:{addDescription:"单击空白处放置新节点。",addEdge:"添加连接线",addNode:"添加节点",back:"返回",close:"關閉",createEdgeError:"无法将连接线连接到群集。",del:"删除选定",deleteClusterError:"无法删除群集。",edgeDescription:"单击某个节点并将该连接线拖动到另一个节点以连接它们。",edit:"编辑",editClusterError:"无法编辑群集。",editEdge:"编辑连接线",editEdgeDescription:"单击控制节点并将它们拖到节点上连接。",editNode:"编辑节点"},uk:{addDescription:"Kлікніть на вільне місце, щоб додати новий вузол.",addEdge:"Додати край",addNode:"Додати вузол",back:"Назад",close:"Закрити",createEdgeError:"Не можливо об'єднати краї в групу.",del:"Видалити обране",deleteClusterError:"Групи не можуть бути видалені.",edgeDescription:"Клікніть на вузол і перетягніть край до іншого вузла, щоб їх з'єднати.",edit:"Редагувати",editClusterError:"Групи недоступні для редагування.",editEdge:"Редагувати край",editEdgeDescription:"Клікніть на контрольні точки і перетягніть їх у вузол, щоб підключитися до нього.",editNode:"Редагувати вузол"},fr:{addDescription:"Cliquez dans un endroit vide pour placer un nœud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nœud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de créer un lien vers un cluster.",del:"Effacer la sélection",deleteClusterError:"Les clusters ne peuvent pas être effacés.",edgeDescription:"Cliquez sur un nœud et glissez le lien vers un autre nœud pour les connecter.",edit:"Éditer",editClusterError:"Les clusters ne peuvent pas être édités.",editEdge:"Éditer le lien",editEdgeDescription:"Cliquez sur les points de contrôle et glissez-les pour connecter un nœud.",editNode:"Éditer le nœud"},cs:{addDescription:"Kluknutím do prázdného prostoru můžete přidat nový vrchol.",addEdge:"Přidat hranu",addNode:"Přidat vrchol",back:"Zpět",close:"Zavřít",createEdgeError:"Nelze připojit hranu ke shluku.",del:"Smazat výběr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Přetažením z jednoho vrcholu do druhého můžete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Přetažením kontrolního vrcholu hrany ji můžete připojit k jinému vrcholu.",editNode:"Upravit vrchol"}});var Kj=function(){function e(){YF(this,e),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return QF(e,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var e=this.image.width,t=this.image.height;this.width=e,this.height=t;var n=Math.floor(t/2),i=Math.floor(t/4),r=Math.floor(t/8),o=Math.floor(t/16),s=Math.floor(e/2),a=Math.floor(e/4),c=Math.floor(e/8),l=Math.floor(e/16);this.canvas.width=3*a,this.canvas.height=n,this.coordinates=[[0,0,s,n],[s,0,a,i],[s,i,c,r],[5*c,i,l,o]],this._fillMipMap()}}},{key:"initialized",value:function(){return void 0!==this.coordinates}},{key:"_fillMipMap",value:function(){var e=this.canvas.getContext("2d"),t=this.coordinates[0];e.drawImage(this.image,t[0],t[1],t[2],t[3]);for(var n=1;n<this.NUM_ITERATIONS;n++){var i=this.coordinates[n-1],r=this.coordinates[n];e.drawImage(this.canvas,i[0],i[1],i[2],i[3],r[0],r[1],r[2],r[3])}}},{key:"drawImageAtPosition",value:function(e,t,n,i,r,o){if(this.initialized())if(t>2){t*=.5;for(var s=0;t>2&&s<this.NUM_ITERATIONS;)t*=.5,s+=1;s>=this.NUM_ITERATIONS&&(s=this.NUM_ITERATIONS-1);var a=this.coordinates[s];e.drawImage(this.canvas,a[0],a[1],a[2],a[3],n,i,r,o)}else e.drawImage(this.image,n,i,r,o)}}]),e}(),Qj=function(){function e(t){YF(this,e),this.images={},this.imageBroken={},this.callback=t}return QF(e,[{key:"_tryloadBrokenUrl",value:function(e,t,n){void 0!==e&&void 0!==n&&(void 0!==t?(n.image.onerror=function(){console.error("Could not load brokenImage:",t)},n.image.src=t):console.warn("No broken url image defined"))}},{key:"_redrawWithImage",value:function(e){this.callback&&this.callback(e)}},{key:"load",value:function(e,t){var n=this,i=this.images[e];if(i)return i;var r=new Kj;return this.images[e]=r,r.image.onload=function(){n._fixImageCoordinates(r.image),r.init(),n._redrawWithImage(r)},r.image.onerror=function(){console.error("Could not load image:",e),n._tryloadBrokenUrl(e,t,r)},r.image.src=e,r}},{key:"_fixImageCoordinates",value:function(e){0===e.width&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}]),e}(),Jj={exports:{}},eU=lw((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),tU=lw,nU=Kw,iU=Bw,rU=eU,oU=Object.isExtensible,sU=tU((function(){oU(1)}))||rU?function(e){return!!nU(e)&&((!rU||"ArrayBuffer"!=iU(e))&&(!oU||oU(e)))}:oU,aU=!lw((function(){return Object.isExtensible(Object.preventExtensions({}))})),cU=TE,lU=ww,hU=WE,uU=Kw,dU=Vx,fU=Yk.f,pU=cA,vU=uA,yU=sU,gU=aU,mU=!1,bU=Qx("meta"),_U=0,wU=function(e){fU(e,bU,{value:{objectID:"O"+_U++,weakData:{}}})},xU=Jj.exports={enable:function(){xU.enable=function(){},mU=!0;var e=pU.f,t=lU([].splice),n={};n[bU]=1,e(n).length&&(pU.f=function(n){for(var i=e(n),r=0,o=i.length;r<o;r++)if(i[r]===bU){t(i,r,1);break}return i},cU({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:vU.f}))},fastKey:function(e,t){if(!uU(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!dU(e,bU)){if(!yU(e))return"F";if(!t)return"E";wU(e)}return e[bU].objectID},getWeakData:function(e,t){if(!dU(e,bU)){if(!yU(e))return!0;if(!t)return!1;wU(e)}return e[bU].weakData},onFreeze:function(e){return gU&&mU&&yU(e)&&!dU(e,bU)&&wU(e),e}};hU[bU]=!0;var kU=Xk,EU=Tw,CU=tE,SU=Ex,TU=qO,OU=BE,IU=rx,AU=xI,LU=vI,FU=jO,PU=cw.TypeError,NU=function(e,t){this.stopped=e,this.result=t},MU=NU.prototype,DU=function(e,t,n){var i,r,o,s,a,c,l,h=n&&n.that,u=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),p=kU(t,h),v=function(e){return i&&FU(i,"normal",e),new NU(!0,e)},y=function(e){return u?(CU(e),f?p(e[0],e[1],v):p(e[0],e[1])):f?p(e,v):p(e)};if(d)i=e;else{if(!(r=LU(e)))throw PU(SU(e)+" is not iterable");if(TU(r)){for(o=0,s=OU(e);s>o;o++)if((a=y(e[o]))&&IU(MU,a))return a;return new NU(!1)}i=AU(e,r)}for(c=i.next;!(l=EU(c,i)).done;){try{a=y(l.value)}catch(e){FU(i,"throw",e)}if("object"==typeof a&&a&&IU(MU,a))return a}return new NU(!1)},zU=rx,BU=cw.TypeError,RU=function(e,t){if(zU(t,e))return e;throw BU("Incorrect invocation")},jU=TE,UU=cw,$U=Jj.exports,HU=lw,WU=vE,GU=DU,qU=RU,VU=xw,XU=Kw,YU=JT,ZU=Yk.f,KU=GA.forEach,QU=Ew,JU=VS.set,e$=VS.getterFor,t$=function(e,t,n){var i,r=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),s=r?"set":"add",a=UU[e],c=a&&a.prototype,l={};if(QU&&VU(a)&&(o||c.forEach&&!HU((function(){(new a).entries().next()})))){var h=(i=t((function(t,n){JU(qU(t,h),{type:e,collection:new a}),null!=n&&GU(n,t[s],{that:t,AS_ENTRIES:r})}))).prototype,u=e$(e);KU(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(e){var t="add"==e||"set"==e;!(e in c)||o&&"clear"==e||WU(h,e,(function(n,i){var r=u(this).collection;if(!t&&o&&!XU(n))return"get"==e&&void 0;var s=r[e](0===n?0:n,i);return t?this:s}))})),o||ZU(h,"size",{configurable:!0,get:function(){return u(this).collection.size}})}else i=n.getConstructor(t,e,r,s),$U.enable();return YU(i,e,!1,!0),l[e]=i,jU({global:!0,forced:!0},l),o||n.setStrong(i,e,r),i},n$=MT,i$=function(e,t,n){for(var i in t)n&&n.unsafe&&e[i]?e[i]=t[i]:n$(e,i,t[i],n);return e},r$=ix,o$=Yk,s$=Ew,a$=lk("species"),c$=Yk.f,l$=kT,h$=i$,u$=Xk,d$=RU,f$=DU,p$=IO,v$=function(e){var t=r$(e),n=o$.f;s$&&t&&!t[a$]&&n(t,a$,{configurable:!0,get:function(){return this}})},y$=Ew,g$=Jj.exports.fastKey,m$=VS.set,b$=VS.getterFor,_$={getConstructor:function(e,t,n,i){var r=e((function(e,r){d$(e,o),m$(e,{type:t,index:l$(null),first:void 0,last:void 0,size:0}),y$||(e.size=0),null!=r&&f$(r,e[i],{that:e,AS_ENTRIES:n})})),o=r.prototype,s=b$(t),a=function(e,t,n){var i,r,o=s(e),a=c(e,t);return a?a.value=n:(o.last=a={index:r=g$(t,!0),key:t,value:n,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=a),i&&(i.next=a),y$?o.size++:e.size++,"F"!==r&&(o.index[r]=a)),e},c=function(e,t){var n,i=s(e),r=g$(t);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==t)return n};return h$(o,{clear:function(){for(var e=s(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,y$?e.size=0:this.size=0},delete:function(e){var t=this,n=s(t),i=c(t,e);if(i){var r=i.next,o=i.previous;delete n.index[i.index],i.removed=!0,o&&(o.next=r),r&&(r.previous=o),n.first==i&&(n.first=r),n.last==i&&(n.last=o),y$?n.size--:t.size--}return!!i},forEach:function(e){for(var t,n=s(this),i=u$(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(i(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),h$(o,n?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),y$&&c$(o,"size",{get:function(){return s(this).size}}),r},setStrong:function(e,t,n){var i=t+" Iterator",r=b$(t),o=b$(i);p$(e,t,(function(e,t){m$(this,{type:i,target:e,state:r(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),v$(t)}};t$("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),_$);var w$=Qw.Map,x$=function(){function e(){YF(this,e),this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},yC(this.options,this.defaultOptions)}return QF(e,[{key:"setOptions",value:function(e){var t=["useDefaultGroups"];if(void 0!==e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&-1===ND(t).call(t,n)){var i=e[n];this.add(n,i)}}},{key:"clear",value:function(){this._groups=new w$,this._groupNames=[]}},{key:"get",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._groups.get(e);if(void 0===n&&t)if(!1===this.options.useDefaultGroups&&this._groupNames.length>0){var i=this._groupIndex%this._groupNames.length;++this._groupIndex,(n={}).color=this._groups.get(this._groupNames[i]),this._groups.set(e,n)}else{var r=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,(n={}).color=this._defaultGroups[r],this._groups.set(e,n)}return n}},{key:"add",value:function(e,t){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,t),t}}]),e}();TE({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var k$=Qw.Number.isNaN,E$=cw.isFinite,C$=Number.isFinite||function(e){return"number"==typeof e&&E$(e)};TE({target:"Number",stat:!0},{isFinite:C$});var S$=Qw.Number.isFinite,T$=GA.some;TE({target:"Array",proto:!0,forced:!TN("some")},{some:function(e){return T$(this,e,arguments.length>1?arguments[1]:void 0)}});var O$=FC("Array").some,I$=rx,A$=O$,L$=Array.prototype,F$=function(e){var t=e.some;return e===L$||I$(L$,e)&&t===L$.some?A$:t},P$=F$,N$=cw,M$=lw,D$=oS,z$=hD.trim,B$=ww("".charAt),R$=N$.parseFloat,j$=N$.Symbol,U$=j$&&j$.iterator,$$=1/R$("\t\n\v\f\r                　\u2028\u2029\ufeff-0")!=-1/0||U$&&!M$((function(){R$(Object(U$))}))?function(e){var t=z$(D$(e)),n=R$(t);return 0===n&&"-"==B$(t,0)?-0:n}:R$;TE({global:!0,forced:parseFloat!=$$},{parseFloat:$$});var H$=Qw.parseFloat,W$=TE,G$=lw,q$=uA.f;W$({target:"Object",stat:!0,forced:G$((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:q$});var V$=Qw.Object,X$=function(e){return V$.getOwnPropertyNames(e)},Y$=X$;function Z$(e,t){var n=["node","edge","label"],i=!0,r=tj(t,"chosen");if("boolean"==typeof r)i=r;else if("object"===eN(r)){if(-1===ND(n).call(n,e))throw new Error("choosify: subOption '"+e+"' should be one of '"+n.join("', '")+"'");var o=tj(t,["chosen",e]);"boolean"!=typeof o&&"function"!=typeof o||(i=o)}return i}function K$(e,t,n){if(e.width<=0||e.height<=0)return!1;if(void 0!==n){var i={x:t.x-n.x,y:t.y-n.y};if(0!==n.angle){var r=-n.angle;t={x:Math.cos(r)*i.x-Math.sin(r)*i.y,y:Math.sin(r)*i.x+Math.cos(r)*i.y}}else t=i}var o=e.x+e.width,s=e.y+e.width;return e.left<t.x&&o>t.x&&e.top<t.y&&s>t.y}function Q$(e){return"string"==typeof e&&""!==e}function J$(e,t,n,i){var r=i.x,o=i.y;if("function"==typeof i.distanceToBorder){var s=i.distanceToBorder(e,t),a=Math.sin(t)*s,c=Math.cos(t)*s;c===s?(r+=s,o=i.y):a===s?(r=i.x,o-=s):(r+=c,o-=a)}else i.shape.width>i.shape.height?(r=i.x+.5*i.shape.width,o=i.y-n):(r=i.x+n,o=i.y-.5*i.shape.height);return{x:r,y:o}}var eH=FC("Array").values,tH=nS,nH=Vx,iH=rx,rH=eH,oH=Array.prototype,sH={DOMTokenList:!0,NodeList:!0},aH=function(e){var t=e.values;return e===oH||iH(oH,e)&&t===oH.values||nH(sH,tH(e))?rH:t},cH=function(){function e(t){YF(this,e),this.measureText=t,this.current=0,this.width=0,this.height=0,this.lines=[]}return QF(e,[{key:"_add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";void 0===this.lines[e]&&(this.lines[e]={width:0,height:0,blocks:[]});var i=t;void 0!==t&&""!==t||(i=" ");var r=this.measureText(i,n),o=yC({},aH(r));o.text=t,o.width=r.width,o.mod=n,void 0!==t&&""!==t||(o.width=0),this.lines[e].blocks.push(o),this.lines[e].width+=o.width}},{key:"curWidth",value:function(){var e=this.lines[this.current];return void 0===e?0:e.width}},{key:"append",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,e,t)}},{key:"newLine",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,e,t),this.current++}},{key:"determineLineHeights",value:function(){for(var e=0;e<this.lines.length;e++){var t=this.lines[e],n=0;if(void 0!==t.blocks)for(var i=0;i<t.blocks.length;i++){var r=t.blocks[i];n<r.height&&(n=r.height)}t.height=n}}},{key:"determineLabelSize",value:function(){for(var e=0,t=0,n=0;n<this.lines.length;n++){var i=this.lines[n];i.width>e&&(e=i.width),t+=i.height}this.width=e,this.height=t}},{key:"removeEmptyBlocks",value:function(){for(var e=[],t=0;t<this.lines.length;t++){var n=this.lines[t];if(0!==n.blocks.length&&(t!==this.lines.length-1||0!==n.width)){var i={};yC(i,n),i.blocks=[];for(var r=void 0,o=[],s=0;s<n.blocks.length;s++){var a=n.blocks[s];0!==a.width?o.push(a):void 0===r&&(r=a)}0===o.length&&void 0!==r&&o.push(r),i.blocks=o,e.push(i)}}return e}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}]),e}(),lH={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/},hH=function(){function e(t){YF(this,e),this.text=t,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return QF(e,[{key:"mod",value:function(){return 0===this.modStack.length?"normal":this.modStack[0]}},{key:"modName",value:function(){return 0===this.modStack.length?"normal":"mono"===this.modStack[0]?"mono":this.bold&&this.ital?"boldital":this.bold?"bold":this.ital?"ital":void 0}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(e){" "===e&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1)," "!=e&&(this.buffer+=e)}},{key:"parseWS",value:function(e){return!!/[ \t]/.test(e)&&(this.mono?this.add(e):this.spacing=!0,!0)}},{key:"setTag",value:function(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}},{key:"unsetTag",value:function(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(e,t){return!(this.mono||this[e]||!this.match(t))&&(this.setTag(e),!0)}},{key:"match",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.prepareRegExp(e),i=QP(n,2),r=i[0],o=i[1],s=r.test(this.text.substr(this.position,o));return s&&t&&(this.position+=o-1),s}},{key:"parseEndTag",value:function(e,t,n){var i=this.mod()===e;return!(!(i="mono"===e?i&&this.mono:i&&!this.mono)||!this.match(t))&&(void 0!==n?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e):this.unsetTag(e),!0)}},{key:"replace",value:function(e,t){return!!this.match(e)&&(this.add(t),this.position+=length-1,!0)}},{key:"prepareRegExp",value:function(e){var t,n;if(e instanceof RegExp)n=e,t=1;else{var i=lH[e];n=void 0!==i?i:new RegExp(e),t=e.length}return[n,t]}}]),e}(),uH=function(){function e(t,n,i,r){var o=this;YF(this,e),this.ctx=t,this.parent=n,this.selected=i,this.hover=r;this.lines=new cH((function(e,n){if(void 0===e)return 0;var s=o.parent.getFormattingValues(t,i,r,n),a=0;""!==e&&(a=o.ctx.measureText(e).width);return{width:a,values:s}}))}return QF(e,[{key:"process",value:function(e){if(!Q$(e))return this.lines.finalize();var t=this.parent.fontOptions;e=(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n");var n=String(e).split("\n"),i=n.length;if(t.multi)for(var r=0;r<i;r++){var o=this.splitBlocks(n[r],t.multi);if(void 0!==o)if(0!==o.length){if(t.maxWdt>0)for(var s=0;s<o.length;s++){var a=o[s].mod,c=o[s].text;this.splitStringIntoLines(c,a,!0)}else for(var l=0;l<o.length;l++){var h=o[l].mod,u=o[l].text;this.lines.append(u,h)}this.lines.newLine()}else this.lines.newLine("")}else if(t.maxWdt>0)for(var d=0;d<i;d++)this.splitStringIntoLines(n[d]);else for(var f=0;f<i;f++)this.lines.newLine(n[f]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(e){var t="none";return"markdown"===e||"md"===e?t="markdown":!0!==e&&"html"!==e||(t="html"),t}},{key:"splitHtmlBlocks",value:function(e){for(var t=new hH(e),n=function(e){return!!/&/.test(e)&&(t.replace(t.text,"&lt;","<")||t.replace(t.text,"&amp;","&")||t.add("&"),!0)};t.position<t.text.length;){var i=t.text.charAt(t.position);t.parseWS(i)||/</.test(i)&&(t.parseStartTag("bold","<b>")||t.parseStartTag("ital","<i>")||t.parseStartTag("mono","<code>")||t.parseEndTag("bold","</b>")||t.parseEndTag("ital","</i>")||t.parseEndTag("mono","</code>"))||n(i)||t.add(i),t.position++}return t.emitBlock(),t.blocks}},{key:"splitMarkdownBlocks",value:function(e){for(var t=this,n=new hH(e),i=!0,r=function(e){return!!/\\/.test(e)&&(n.position<t.text.length+1&&(n.position++,e=t.text.charAt(n.position),/ \t/.test(e)?n.spacing=!0:(n.add(e),i=!1)),!0)};n.position<n.text.length;){var o=n.text.charAt(n.position);n.parseWS(o)||r(o)||(i||n.spacing)&&(n.parseStartTag("bold","*")||n.parseStartTag("ital","_")||n.parseStartTag("mono","`"))||n.parseEndTag("bold","*","afterBold")||n.parseEndTag("ital","_","afterItal")||n.parseEndTag("mono","`","afterMono")||(n.add(o),i=!1),n.position++}return n.emitBlock(),n.blocks}},{key:"splitBlocks",value:function(e,t){var n=this.decodeMarkupSystem(t);return"none"===n?[{text:e,mod:"normal"}]:"markdown"===n?this.splitMarkdownBlocks(e):"html"===n?this.splitHtmlBlocks(e):void 0}},{key:"overMaxWidth",value:function(e){var t=this.ctx.measureText(e).width;return this.lines.curWidth()+t>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(e){for(var t="",n=0;n<e.length;){var i=t+(""===t?"":" ")+e[n];if(this.overMaxWidth(i))break;t=i,n++}return n}},{key:"getLongestFitWord",value:function(e){for(var t=0;t<e.length&&!this.overMaxWidth(lN(e).call(e,0,t));)t++;return t}},{key:"splitStringIntoLines",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.parent.getFormattingValues(this.ctx,this.selected,this.hover,t);for(var i=(e=(e=e.replace(/^( +)/g,"$1\r")).replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r")).split("\r");i.length>0;){var r=this.getLongestFit(i);if(0===r){var o=i[0],s=this.getLongestFitWord(o);this.lines.newLine(lN(o).call(o,0,s),t),i[0]=lN(o).call(o,s)}else{var a=r;" "===i[r-1]?r--:" "===i[a]&&a++;var c=lN(i).call(i,0,r).join("");r==i.length&&n?this.lines.append(c,t):this.lines.newLine(c,t),i=lN(i).call(i,a)}}}}]),e}(),dH=["bold","ital","boldital","mono"],fH=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];YF(this,e),this.body=t,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(n),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=i}return QF(e,[{key:"setOptions",value:function(e){if(this.elementOptions=e,this.initFontOptions(e.font),Q$(e.label)?this.labelDirty=!0:e.label=void 0,void 0!==e.font&&null!==e.font)if("string"==typeof e.font)this.baseSize=this.fontOptions.size;else if("object"===eN(e.font)){var t=e.font.size;void 0!==t&&(this.baseSize=t)}}},{key:"initFontOptions",value:function(t){var n=this;UR(dH,(function(e){n.fontOptions[e]={}})),e.parseFontString(this.fontOptions,t)?this.fontOptions.vadjust=0:UR(t,(function(e,t){null!=e&&"object"!==eN(e)&&(n.fontOptions[t]=e)}))}},{key:"constrain",value:function(e){var t={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=tj(e,"widthConstraint");if("number"==typeof n)t.maxWdt=Number(n),t.minWdt=Number(n);else if("object"===eN(n)){var i=tj(e,["widthConstraint","maximum"]);"number"==typeof i&&(t.maxWdt=Number(i));var r=tj(e,["widthConstraint","minimum"]);"number"==typeof r&&(t.minWdt=Number(r))}var o=tj(e,"heightConstraint");if("number"==typeof o)t.minHgt=Number(o);else if("object"===eN(o)){var s=tj(e,["heightConstraint","minimum"]);"number"==typeof s&&(t.minHgt=Number(s));var a=tj(e,["heightConstraint","valign"]);"string"==typeof a&&("top"!==a&&"bottom"!==a||(t.valign=a))}return t}},{key:"update",value:function(e,t){this.setOptions(e,!0),this.propagateFonts(t),zR(this.fontOptions,this.constrain(t)),this.fontOptions.chooser=Z$("label",t)}},{key:"adjustSizes",value:function(e){var t=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=t,this.fontOptions.minWdt-=t);var n=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}},{key:"addFontOptionsToPile",value:function(e,t){for(var n=0;n<t.length;++n)this.addFontToPile(e,t[n])}},{key:"addFontToPile",value:function(e,t){if(void 0!==t&&void 0!==t.font&&null!==t.font){var n=t.font;e.push(n)}}},{key:"getBasicOptions",value:function(t){for(var n={},i=0;i<t.length;++i){var r=t[i],o={};e.parseFontString(o,r)&&(r=o),UR(r,(function(e,t){void 0!==e&&(Object.prototype.hasOwnProperty.call(n,t)||(-1!==ND(dH).call(dH,t)?n[t]={}:n[t]=e))}))}return n}},{key:"getFontOption",value:function(t,n,i){for(var r,o=0;o<t.length;++o){var s=t[o];if(Object.prototype.hasOwnProperty.call(s,n)){if(null==(r=s[n]))continue;var a={};if(e.parseFontString(a,r)&&(r=a),Object.prototype.hasOwnProperty.call(r,i))return r[i]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,i))return this.fontOptions[i];throw new Error("Did not find value for multi-font for property: '"+i+"'")}},{key:"getFontOptions",value:function(e,t){for(var n={},i=["color","size","face","mod","vadjust"],r=0;r<i.length;++r){var o=i[r];n[o]=this.getFontOption(e,t,o)}return n}},{key:"propagateFonts",value:function(e){var t=this,n=[];this.addFontOptionsToPile(n,e),this.fontOptions=this.getBasicOptions(n);for(var i=function(e){var i=dH[e],r=t.fontOptions[i];UR(t.getFontOptions(n,i),(function(e,t){r[t]=e})),r.size=Number(r.size),r.vadjust=Number(r.vadjust)},r=0;r<dH.length;++r)i(r)}},{key:"draw",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";if(void 0!==this.elementOptions.label){var s=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&s<this.elementOptions.scaling.label.drawThreshold-1||(s>=this.elementOptions.scaling.label.maxVisible&&(s=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,i,r,t,n,o),this._drawBackground(e),this._drawText(e,t,this.size.yLine,o,s))}}},{key:"_drawBackground",value:function(e){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){e.fillStyle=this.fontOptions.background;var t=this.getSize();e.fillRect(t.left,t.top,t.width,t.height)}}},{key:"_drawText",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle",r=arguments.length>4?arguments[4]:void 0,o=this._setAlignment(e,t,n,i),s=QP(o,2);t=s[0],n=s[1],e.textAlign="left",t-=this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&("top"===this.fontOptions.valign&&(n-=(this.size.height-this.size.labelHeight)/2),"bottom"===this.fontOptions.valign&&(n+=(this.size.height-this.size.labelHeight)/2));for(var a=0;a<this.lineCount;a++){var c=this.lines[a];if(c&&c.blocks){var l=0;this.isEdgeLabel||"center"===this.fontOptions.align?l+=(this.size.width-c.width)/2:"right"===this.fontOptions.align&&(l+=this.size.width-c.width);for(var h=0;h<c.blocks.length;h++){var u=c.blocks[h];e.font=u.font;var d=this._getColor(u.color,r,u.strokeColor),f=QP(d,2),p=f[0],v=f[1];u.strokeWidth>0&&(e.lineWidth=u.strokeWidth,e.strokeStyle=v,e.lineJoin="round"),e.fillStyle=p,u.strokeWidth>0&&e.strokeText(u.text,t+l,n+u.vadjust),e.fillText(u.text,t+l,n+u.vadjust),l+=u.width}n+=c.height}}}},{key:"_setAlignment",value:function(e,t,n,i){if(this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&!1===this.pointToSelf){t=0,n=0;"top"===this.fontOptions.align?(e.textBaseline="alphabetic",n-=4):"bottom"===this.fontOptions.align?(e.textBaseline="hanging",n+=4):e.textBaseline="middle"}else e.textBaseline=i;return[t,n]}},{key:"_getColor",value:function(e,t,n){var i=e||"#000000",r=n||"#ffffff";if(t<=this.elementOptions.scaling.label.drawThreshold){var o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-t)));i=HR(i,o),r=HR(r,o)}return[i,r]}},{key:"getTextSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._processLabel(e,t,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var e=this.size.left,t=this.size.top-1;if(this.isEdgeLabel){var n=.5*-this.size.width;switch(this.fontOptions.align){case"middle":e=n,t=.5*-this.size.height;break;case"top":e=n,t=-(this.size.height+2);break;case"bottom":e=n,t=2}}return{left:e,top:t,width:this.size.width,height:this.size.height}}},{key:"calculateLabelSize",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";this._processLabel(e,t,n),this.size.left=i-.5*this.size.width,this.size.top=r-.5*this.size.height,this.size.yLine=r+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===o&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(e,t,n,i){var r=function(e,t,n){return"normal"===t?"mod"===n?"":e[n]:void 0!==e[t][n]?e[t][n]:e[n]},o={color:r(this.fontOptions,i,"color"),size:r(this.fontOptions,i,"size"),face:r(this.fontOptions,i,"face"),mod:r(this.fontOptions,i,"mod"),vadjust:r(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(t||n)&&("normal"===i&&!0===this.fontOptions.chooser&&this.elementOptions.labelHighlightBold?o.mod="bold":"function"==typeof this.fontOptions.chooser&&this.fontOptions.chooser(o,this.elementOptions.id,t,n));var s="";return void 0!==o.mod&&""!==o.mod&&(s+=o.mod+" "),s+=o.size+"px "+o.face,e.font=s.replace(/"/g,""),o.font=e.font,o.height=o.size,o}},{key:"differentState",value:function(e,t){return e!==this.selectedState||t!==this.hoverState}},{key:"_processLabelText",value:function(e,t,n,i){return new uH(e,this,t,n).process(i)}},{key:"_processLabel",value:function(e,t,n){if(!1!==this.labelDirty||this.differentState(t,n)){var i=this._processLabelText(e,t,n,this.elementOptions.label);this.fontOptions.minWdt>0&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,this.fontOptions.minHgt>0&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=t,this.hoverState=n,this.labelDirty=!1}}},{key:"visible",value:function(){return 0!==this.size.width&&0!==this.size.height&&void 0!==this.elementOptions.label&&!(this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(e,t){if(!t||"string"!=typeof t)return!1;var n=t.split(" ");return e.size=+n[0].replace("px",""),e.face=n[1],e.color=n[2],!0}}]),e}(),pH=sI,vH=Ex,yH=cw.TypeError,gH=TE,mH=vw,bH=IC,_H=function(e){if(pH(e))return e;throw yH(vH(e)+" is not a constructor")},wH=tE,xH=Kw,kH=kT,EH=lw,CH=ix("Reflect","construct"),SH=Object.prototype,TH=[].push,OH=EH((function(){function e(){}return!(CH((function(){}),[],e)instanceof e)})),IH=!EH((function(){CH((function(){}))})),AH=OH||IH;gH({target:"Reflect",stat:!0,forced:AH,sham:AH},{construct:function(e,t){_H(e),wH(t);var n=arguments.length<3?e:_H(arguments[2]);if(IH&&!OH)return CH(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return mH(TH,i,t),new(mH(bH,e,i))}var r=n.prototype,o=kH(xH(r)?r:SH),s=mH(e,o,t);return xH(s)?s:o}});var LH=Qw.Reflect.construct,FH=jD;TE({target:"Object",stat:!0},{setPrototypeOf:pO});var PH=Qw.Object.setPrototypeOf;function NH(e,t){return NH=PH||function(e,t){return e.__proto__=t,e},NH(e,t)}function MH(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=FH(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),ZF(e,"prototype",{writable:!1}),t&&NH(e,t)}function DH(e,t){if(t&&("object"===eN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}var zH=RM;function BH(e){return BH=PH?zH:function(e){return e.__proto__||zH(e)},BH(e)}var RH=function(){function e(t,n,i){YF(this,e),this.body=n,this.labelModule=i,this.setOptions(t),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return QF(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"_setMargins",value:function(e){this.margin={},this.options.margin&&("object"==eN(this.options.margin)?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(e,t){var n=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+n}},{key:"enableShadow",value:function(e,t){t.shadow&&(e.shadowColor=t.shadowColor,e.shadowBlur=t.shadowSize,e.shadowOffsetX=t.shadowX,e.shadowOffsetY=t.shadowY)}},{key:"disableShadow",value:function(e,t){t.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(e,t){if(!1!==t.borderDashes)if(void 0!==e.setLineDash){var n=t.borderDashes;!0===n&&(n=[5,15]),e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,t.borderDashes=!1}},{key:"disableBorderDashes",value:function(e,t){!1!==t.borderDashes&&(void 0!==e.setLineDash?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,t.borderDashes=!1))}},{key:"needsRefresh",value:function(e,t){return!0===this.refreshNeeded?(this.refreshNeeded=!1,!0):void 0===this.width||this.labelModule.differentState(e,t)}},{key:"initContextForDraw",value:function(e,t){var n=t.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,n),e.strokeStyle=t.borderColor,e.fillStyle=t.color}},{key:"performStroke",value:function(e,t){var n=t.borderWidth/this.body.view.scale;e.save(),n>0&&(this.enableBorderDashes(e,t),e.stroke(),this.disableBorderDashes(e,t)),e.restore()}},{key:"performFill",value:function(e,t){e.save(),e.fillStyle=t.color,this.enableShadow(e,t),Iz(e).call(e),this.disableShadow(e,t),e.restore(),this.performStroke(e,t)}},{key:"_addBoundingBoxMargin",value:function(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}},{key:"_updateBoundingBox",value:function(e,t,n,i,r){void 0!==n&&this.resize(n,i,r),this.left=e-this.width/2,this.top=t-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(e,t,n,i,r){this._updateBoundingBox(e,t,n,i,r)}},{key:"getDimensionsFromLabel",value:function(e,t,n){this.textSize=this.labelModule.getTextSize(e,t,n);var i=this.textSize.width,r=this.textSize.height;return 0===i&&(i=14,r=14),{width:i,height:r}}}]),e}();function jH(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var UH=function(e){MH(n,e);var t=jH(n);function n(e,i,r){var o;return YF(this,n),(o=t.call(this,e,i,r))._setMargins(r),o}return QF(n,[{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(t,n)){var i=this.getDimensionsFromLabel(e,t,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(e,t,n,i,r,o){this.resize(e,i,r),this.left=t-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),jC(e,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(e,o),this.updateBoundingBox(t,n,e,i,r),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,r)}},{key:"updateBoundingBox",value:function(e,t,n,i,r){this._updateBoundingBox(e,t,n,i,r);var o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}},{key:"distanceToBorder",value:function(e,t){e&&this.resize(e);var n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+n}}]),n}(RH);function $H(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var HH=function(e){MH(n,e);var t=$H(n);function n(e,i,r){var o;return YF(this,n),(o=t.call(this,e,i,r)).labelOffset=0,o.selected=!1,o}return QF(n,[{key:"setOptions",value:function(e,t,n){this.options=e,void 0===t&&void 0===n||this.setImages(t,n)}},{key:"setImages",value:function(e,t){t&&this.selected?(this.imageObj=t,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=t)}},{key:"switchImages",value:function(e){var t=e&&!this.selected||!e&&this.selected;if(this.selected=e,void 0!==this.imageObjAlt&&t){var n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}},{key:"_getImagePadding",value:function(){var e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var t=this.options.imagePadding;"object"==eN(t)?(e.top=t.top,e.right=t.right,e.bottom=t.bottom,e.left=t.left):(e.top=t,e.right=t,e.bottom=t,e.left=t)}return e}},{key:"_resizeImage",value:function(){var e,t;if(!1===this.options.shapeProperties.useImageSize){var n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),e=2*this.options.size*n,t=2*this.options.size*i}else{var r=this._getImagePadding();e=this.imageObj.width+r.left+r.right,t=this.imageObj.height+r.top+r.bottom}this.width=e,this.height=t,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(e,t,n,i){this.initContextForDraw(e,i),RC(e,t,n,i.size),this.performFill(e,i)}},{key:"_drawImageAtPosition",value:function(e,t){if(0!=this.imageObj.width){e.globalAlpha=void 0!==t.opacity?t.opacity:1,this.enableShadow(e,t);var n=1;!0===this.options.shapeProperties.interpolation&&(n=this.imageObj.width/this.width/this.body.view.scale);var i=this._getImagePadding(),r=this.left+i.left,o=this.top+i.top,s=this.width-i.left-i.right,a=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(e,n,r,o,s,a),this.disableShadow(e,t)}}},{key:"_drawImageLabel",value:function(e,t,n,i,r){var o=0;if(void 0!==this.height){o=.5*this.height;var s=this.labelModule.getTextSize(e,i,r);s.lineCount>=1&&(o+=s.height/2)}var a=n+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(e,t,a,i,r,"hanging")}}]),n}(RH);function WH(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var GH=function(e){MH(n,e);var t=WH(n);function n(e,i,r){var o;return YF(this,n),(o=t.call(this,e,i,r))._setMargins(r),o}return QF(n,[{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(t,n)){var i=this.getDimensionsFromLabel(e,t,n),r=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=r/2,this.width=r,this.height=r,this.radius=this.width/2}}},{key:"draw",value:function(e,t,n,i,r,o){this.resize(e,i,r),this.left=t-this.width/2,this.top=n-this.height/2,this._drawRawCircle(e,t,n,o),this.updateBoundingBox(t,n),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,n,i,r)}},{key:"updateBoundingBox",value:function(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size}},{key:"distanceToBorder",value:function(e){return e&&this.resize(e),.5*this.width}}]),n}(HH);function qH(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var VH=function(e){MH(n,e);var t=qH(n);function n(e,i,r,o,s){var a;return YF(this,n),(a=t.call(this,e,i,r)).setImages(o,s),a}return QF(n,[{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover,i=void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height;if(i){var r=2*this.options.size;return this.width=r,this.height=r,void(this.radius=.5*this.width)}this.needsRefresh(t,n)&&this._resizeImage()}},{key:"draw",value:function(e,t,n,i,r,o){this.switchImages(i),this.resize();var s=t,a=n;"top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=t,this.top=n,s+=this.width/2,a+=this.height/2):(this.left=t-this.width/2,this.top=n-this.height/2),this._drawRawCircle(e,s,a,o),e.save(),e.clip(),this._drawImageAtPosition(e,o),e.restore(),this._drawImageLabel(e,s,a,i,r),this.updateBoundingBox(t,n)}},{key:"updateBoundingBox",value:function(e,t){"top-left"===this.options.shapeProperties.coordinateOrigin?(this.boundingBox.top=t,this.boundingBox.left=e,this.boundingBox.right=e+2*this.options.size,this.boundingBox.bottom=t+2*this.options.size):(this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(e){return e&&this.resize(e),.5*this.width}}]),n}(HH);function XH(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var YH=function(e){MH(n,e);var t=XH(n);function n(e,i,r){return YF(this,n),t.call(this,e,i,r)}return QF(n,[{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{size:this.options.size};if(this.needsRefresh(t,n)){var r,o;this.labelModule.getTextSize(e,t,n);var s=2*i.size;this.width=null!==(r=this.customSizeWidth)&&void 0!==r?r:s,this.height=null!==(o=this.customSizeHeight)&&void 0!==o?o:s,this.radius=.5*this.width}}},{key:"_drawShape",value:function(e,t,n,i,r,o,s,a){var c,l=this;return this.resize(e,o,s,a),this.left=i-this.width/2,this.top=r-this.height/2,this.initContextForDraw(e,a),(c=t,Object.prototype.hasOwnProperty.call(WC,c)?WC[c]:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[c].call(e,n)})(e,i,r,a.size),this.performFill(e,a),void 0!==this.options.icon&&void 0!==this.options.icon.code&&(e.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,i,r)),{drawExternalLabel:function(){if(void 0!==l.options.label){l.labelModule.calculateLabelSize(e,o,s,i,r,"hanging");var t=r+.5*l.height+.5*l.labelModule.size.height;l.labelModule.draw(e,i,t,o,s,"hanging")}l.updateBoundingBox(i,r)}}}},{key:"updateBoundingBox",value:function(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),n}(RH);function ZH(e,t){var n=_N(e);if(uF){var i=uF(e);t&&(i=VM(i).call(i,(function(t){return xF(e,t).enumerable}))),n.push.apply(n,i)}return n}function KH(e){for(var t=1;t<arguments.length;t++){var n,i,r=null!=arguments[t]?arguments[t]:{};t%2?zN(n=ZH(Object(r),!0)).call(n,(function(t){JF(e,t,r[t])})):PF?jF(e,PF(r)):zN(i=ZH(Object(r))).call(i,(function(t){XF(e,t,xF(r,t))}))}return e}function QH(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var JH=function(e){MH(n,e);var t=QH(n);function n(e,i,r,o){var s;return YF(this,n),(s=t.call(this,e,i,r,o)).ctxRenderer=o,s}return QF(n,[{key:"draw",value:function(e,t,n,i,r,o){this.resize(e,i,r,o),this.left=t-this.width/2,this.top=n-this.height/2,e.save();var s=this.ctxRenderer({ctx:e,id:this.options.id,x:t,y:n,state:{selected:i,hover:r},style:KH({},o),label:this.options.label});if(null!=s.drawNode&&s.drawNode(),e.restore(),s.drawExternalLabel){var a=s.drawExternalLabel;s.drawExternalLabel=function(){e.save(),a(),e.restore()}}return s.nodeDimensions&&(this.customSizeWidth=s.nodeDimensions.width,this.customSizeHeight=s.nodeDimensions.height),s}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),n}(YH);function eW(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var tW=function(e){MH(n,e);var t=eW(n);function n(e,i,r){var o;return YF(this,n),(o=t.call(this,e,i,r))._setMargins(r),o}return QF(n,[{key:"resize",value:function(e,t,n){if(this.needsRefresh(t,n)){var i=this.getDimensionsFromLabel(e,t,n).width+this.margin.right+this.margin.left;this.width=i,this.height=i,this.radius=this.width/2}}},{key:"draw",value:function(e,t,n,i,r,o){this.resize(e,i,r),this.left=t-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),$C(e,t-this.width/2,n-this.height/2,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(t,n,e,i,r),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,r)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),n}(RH);function nW(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var iW=function(e){MH(n,e);var t=nW(n);function n(e,i,r){return YF(this,n),t.call(this,e,i,r)}return QF(n,[{key:"draw",value:function(e,t,n,i,r,o){return this._drawShape(e,"diamond",4,t,n,i,r,o)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),n}(YH);function rW(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var oW=function(e){MH(n,e);var t=rW(n);function n(e,i,r){return YF(this,n),t.call(this,e,i,r)}return QF(n,[{key:"draw",value:function(e,t,n,i,r,o){return this._drawShape(e,"circle",2,t,n,i,r,o)}},{key:"distanceToBorder",value:function(e){return e&&this.resize(e),this.options.size}}]),n}(YH);function sW(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var aW=function(e){MH(n,e);var t=sW(n);function n(e,i,r){return YF(this,n),t.call(this,e,i,r)}return QF(n,[{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(t,n)){var i=this.getDimensionsFromLabel(e,t,n);this.height=2*i.height,this.width=i.width+i.height,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,n,i,r,o){this.resize(e,i,r),this.left=t-.5*this.width,this.top=n-.5*this.height,this.initContextForDraw(e,o),UC(e,this.left,this.top,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(t,n,e,i,r),this.labelModule.draw(e,t,n,i,r)}},{key:"distanceToBorder",value:function(e,t){e&&this.resize(e);var n=.5*this.width,i=.5*this.height,r=Math.sin(t)*n,o=Math.cos(t)*i;return n*i/Math.sqrt(r*r+o*o)}}]),n}(RH);function cW(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var lW=function(e){MH(n,e);var t=cW(n);function n(e,i,r){var o;return YF(this,n),(o=t.call(this,e,i,r))._setMargins(r),o}return QF(n,[{key:"resize",value:function(e,t,n){this.needsRefresh(t,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(e,t,n,i,r,o){var s=this;return this.resize(e,i,r),this.options.icon.size=this.options.icon.size||50,this.left=t-this.width/2,this.top=n-this.height/2,this._icon(e,t,n,i,r,o),{drawExternalLabel:function(){if(void 0!==s.options.label){s.labelModule.draw(e,s.left+s.iconSize.width/2+s.margin.left,n+s.height/2+5,i)}s.updateBoundingBox(t,n)}}}},{key:"updateBoundingBox",value:function(e,t){if(this.boundingBox.top=t-.5*this.options.icon.size,this.boundingBox.left=e-.5*this.options.icon.size,this.boundingBox.right=e+.5*this.options.icon.size,this.boundingBox.bottom=t+.5*this.options.icon.size,void 0!==this.options.label&&this.labelModule.size.width>0){this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5)}}},{key:"_icon",value:function(e,t,n,i,r,o){var s=Number(this.options.icon.size);void 0!==this.options.icon.code?(e.font=[null!=this.options.icon.weight?this.options.icon.weight:i?"bold":"",(null!=this.options.icon.weight&&i?5:0)+s+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,o),e.fillText(this.options.icon.code,t,n),this.disableShadow(e,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),n}(RH);function hW(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var uW=function(e){MH(n,e);var t=hW(n);function n(e,i,r,o,s){var a;return YF(this,n),(a=t.call(this,e,i,r)).setImages(o,s),a}return QF(n,[{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover,i=void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height;if(i){var r=2*this.options.size;return this.width=r,void(this.height=r)}this.needsRefresh(t,n)&&this._resizeImage()}},{key:"draw",value:function(e,t,n,i,r,o){e.save(),this.switchImages(i),this.resize();var s=t,a=n;if("top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=t,this.top=n,s+=this.width/2,a+=this.height/2):(this.left=t-this.width/2,this.top=n-this.height/2),!0===this.options.shapeProperties.useBorderWithImage){var c=this.options.borderWidth,l=this.options.borderWidthSelected||2*this.options.borderWidth,h=(i?l:c)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.beginPath();var u=i?this.options.color.highlight.border:r?this.options.color.hover.border:this.options.color.border,d=i?this.options.color.highlight.background:r?this.options.color.hover.background:this.options.color.background;void 0!==o.opacity&&(u=HR(u,o.opacity),d=HR(d,o.opacity)),e.strokeStyle=u,e.fillStyle=d,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),Iz(e).call(e),this.performStroke(e,o),e.closePath()}this._drawImageAtPosition(e,o),this._drawImageLabel(e,s,a,i,r),this.updateBoundingBox(t,n),e.restore()}},{key:"updateBoundingBox",value:function(e,t){this.resize(),"top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=e,this.top=t):(this.left=e-this.width/2,this.top=t-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),n}(HH);function dW(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var fW=function(e){MH(n,e);var t=dW(n);function n(e,i,r){return YF(this,n),t.call(this,e,i,r)}return QF(n,[{key:"draw",value:function(e,t,n,i,r,o){return this._drawShape(e,"square",2,t,n,i,r,o)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),n}(YH);function pW(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var vW=function(e){MH(n,e);var t=pW(n);function n(e,i,r){return YF(this,n),t.call(this,e,i,r)}return QF(n,[{key:"draw",value:function(e,t,n,i,r,o){return this._drawShape(e,"hexagon",4,t,n,i,r,o)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),n}(YH);function yW(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var gW=function(e){MH(n,e);var t=yW(n);function n(e,i,r){return YF(this,n),t.call(this,e,i,r)}return QF(n,[{key:"draw",value:function(e,t,n,i,r,o){return this._drawShape(e,"star",4,t,n,i,r,o)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),n}(YH);function mW(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var bW=function(e){MH(n,e);var t=mW(n);function n(e,i,r){var o;return YF(this,n),(o=t.call(this,e,i,r))._setMargins(r),o}return QF(n,[{key:"resize",value:function(e,t,n){this.needsRefresh(t,n)&&(this.textSize=this.labelModule.getTextSize(e,t,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(e,t,n,i,r,o){this.resize(e,i,r),this.left=t-this.width/2,this.top=n-this.height/2,this.enableShadow(e,o),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,r),this.disableShadow(e,o),this.updateBoundingBox(t,n,e,i,r)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),n}(RH);function _W(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var wW=function(e){MH(n,e);var t=_W(n);function n(e,i,r){return YF(this,n),t.call(this,e,i,r)}return QF(n,[{key:"draw",value:function(e,t,n,i,r,o){return this._drawShape(e,"triangle",3,t,n,i,r,o)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),n}(YH);function xW(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var kW=function(e){MH(n,e);var t=xW(n);function n(e,i,r){return YF(this,n),t.call(this,e,i,r)}return QF(n,[{key:"draw",value:function(e,t,n,i,r,o){return this._drawShape(e,"triangleDown",3,t,n,i,r,o)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),n}(YH);function EW(e,t){var n=_N(e);if(uF){var i=uF(e);t&&(i=VM(i).call(i,(function(t){return xF(e,t).enumerable}))),n.push.apply(n,i)}return n}function CW(e){for(var t=1;t<arguments.length;t++){var n,i,r=null!=arguments[t]?arguments[t]:{};t%2?zN(n=EW(Object(r),!0)).call(n,(function(t){JF(e,t,r[t])})):PF?jF(e,PF(r)):zN(i=EW(Object(r))).call(i,(function(t){XF(e,t,xF(r,t))}))}return e}var SW=function(){function e(t,n,i,r,o,s){YF(this,e),this.options=QR(o),this.globalOptions=o,this.defaultOptions=s,this.body=n,this.edges=[],this.id=void 0,this.imagelist=i,this.grouplist=r,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new fH(this.body,this.options,!1),this.setOptions(t)}return QF(e,[{key:"attachEdge",value:function(e){var t;-1===ND(t=this.edges).call(t,e)&&this.edges.push(e)}},{key:"detachEdge",value:function(e){var t,n,i=ND(t=this.edges).call(t,e);-1!=i&&fM(n=this.edges).call(n,i,1)}},{key:"setOptions",value:function(t){var n=this.options.shape;if(t){if(void 0!==t.color&&(this._localColor=t.color),void 0!==t.id&&(this.id=t.id),void 0===this.id)throw new Error("Node must have an id");e.checkMass(t,this.id),void 0!==t.x&&(null===t.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=xD(t.x),this.predefinedPosition=!0)),void 0!==t.y&&(null===t.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=xD(t.y),this.predefinedPosition=!0)),void 0!==t.size&&(this.baseSize=t.size),void 0!==t.value&&(t.value=H$(t.value)),e.parseOptions(this.options,t,!0,this.globalOptions,this.grouplist);var i=[t,this.options,this.defaultOptions];return this.chooser=Z$("node",i),this._load_images(),this.updateLabelModule(t),void 0!==t.opacity&&e.checkOpacity(t.opacity)&&(this.options.opacity=t.opacity),this.updateShape(n),void 0!==t.hidden||void 0!==t.physics}}},{key:"_load_images",value:function(){if(("circularImage"===this.options.shape||"image"===this.options.shape)&&void 0===this.options.image)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(void 0!==this.options.image){if(void 0===this.imagelist)throw new Error("Internal Error: No images provided");if("string"==typeof this.options.image)this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(void 0===this.options.image.unselected)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),void 0!==this.options.image.selected?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?!0===this.chooser?this.selected?(null!=this.options.borderWidthSelected?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):"function"==typeof this.chooser&&(this.chooser(e,this.options.id,this.selected,this.hover),!1===e.shadow&&(e.shadowColor===this.options.shadow.color&&e.shadowSize===this.options.shadow.size&&e.shadowX===this.options.shadow.x&&e.shadowY===this.options.shadow.y||(e.shadow=!0))):e.shadow=this.options.shadow.enabled,void 0!==this.options.opacity){var t=this.options.opacity;e.borderColor=HR(e.borderColor,t),e.color=HR(e.color,t),e.shadowColor=HR(e.shadowColor,t)}return e}},{key:"updateLabelModule",value:function(t){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),e.updateGroupOptions(this.options,CW(CW({},t),{},{color:t&&t.color||this._localColor||void 0}),this.grouplist);var n=this.grouplist.get(this.options.group,!1),i=[t,this.options,n,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,i),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new UH(this.options,this.body,this.labelModule);break;case"circle":this.shape=new GH(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new VH(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new JH(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new tW(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new iW(this.options,this.body,this.labelModule);break;case"dot":this.shape=new oW(this.options,this.body,this.labelModule);break;case"ellipse":default:this.shape=new aW(this.options,this.body,this.labelModule);break;case"icon":this.shape=new lW(this.options,this.body,this.labelModule);break;case"image":this.shape=new uW(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new fW(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new vW(this.options,this.body,this.labelModule);break;case"star":this.shape=new gW(this.options,this.body,this.labelModule);break;case"text":this.shape=new bW(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new wW(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new kW(this.options,this.body,this.labelModule)}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(e,t){return this.shape.distanceToBorder(e,t)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(e,t,n){if(void 0!==this.options.value){var i=this.options.scaling.customScalingFunction(e,t,n,this.options.value),r=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.size=this.options.scaling.min+i*r}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(e){var t=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,t)||{}}},{key:"updateBoundingBox",value:function(e){this.shape.updateBoundingBox(this.x,this.y,e)}},{key:"resize",value:function(e){var t=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,t)}},{key:"getItemsOnPoint",value:function(e){var t=[];return this.labelModule.visible()&&K$(this.labelModule.getSize(),e)&&t.push({nodeId:this.id,labelId:0}),K$(this.shape.boundingBox,e)&&t.push({nodeId:this.id}),t}},{key:"isOverlappingWith",value:function(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}},{key:"isBoundingBoxOverlappingWith",value:function(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}}],[{key:"checkOpacity",value:function(e){return 0<=e&&e<=1}},{key:"checkCoordinateOrigin",value:function(e){return void 0===e||"center"===e||"top-left"===e}},{key:"updateGroupOptions",value:function(t,n,i){var r;if(void 0!==i){var o=t.group;if(void 0!==n&&void 0!==n.group&&o!==n.group)throw new Error("updateGroupOptions: group values in options don't match.");if("number"==typeof o||"string"==typeof o&&""!=o){var s=i.get(o);void 0!==s.opacity&&void 0===n.opacity&&(e.checkOpacity(s.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+s.opacity),s.opacity=void 0));var a=VM(r=Y$(n)).call(r,(function(e){return null!=n[e]}));a.push("font"),DR(a,t,s),t.color=GR(t.color)}}}},{key:"parseOptions",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,s=["color","fixed","shadow"];if(DR(s,t,n,i),e.checkMass(n),void 0!==t.opacity&&(e.checkOpacity(t.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity),t.opacity=void 0)),void 0!==n.opacity&&(e.checkOpacity(n.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+n.opacity),n.opacity=void 0)),n.shapeProperties&&!e.checkCoordinateOrigin(n.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+n.shapeProperties.coordinateOrigin),JR(t,n,"shadow",r),void 0!==n.color&&null!==n.color){var a=GR(n.color);NR(t.color,a)}else!0===i&&null===n.color&&(t.color=QR(r.color));void 0!==n.fixed&&null!==n.fixed&&("boolean"==typeof n.fixed?(t.fixed.x=n.fixed,t.fixed.y=n.fixed):(void 0!==n.fixed.x&&"boolean"==typeof n.fixed.x&&(t.fixed.x=n.fixed.x),void 0!==n.fixed.y&&"boolean"==typeof n.fixed.y&&(t.fixed.y=n.fixed.y))),!0===i&&null===n.font&&(t.font=QR(r.font)),e.updateGroupOptions(t,n,o),void 0!==n.scaling&&JR(t.scaling,n.scaling,"label",r.scaling)}},{key:"checkMass",value:function(e,t){if(void 0!==e.mass&&e.mass<=0){var n="";void 0!==t&&(n=" in node id: "+t),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",vj),e.mass=1}}}]),e}();function TW(e,t){var n=void 0!==nN&&oA(e)||e["@@iterator"];if(!n){if(hN(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return OW(e,t);var i=lN(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return UI(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return OW(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function OW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var IW=function(){function e(t,n,i,r){var o,s=this;if(YF(this,e),this.body=t,this.images=n,this.groups=i,this.layoutEngine=r,this.body.functions.createNode=BC(o=this.create).call(o,this),this.nodesListeners={add:function(e,t){s.add(t.items)},update:function(e,t){s.update(t.items,t.data,t.oldData)},remove:function(e,t){s.remove(t.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(e,t,n,i){if(t===e)return.5;var r=1/(t-e);return Math.max(0,(i-e)*r)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=QR(this.defaultOptions),this.bindEventListeners()}return QF(e,[{key:"bindEventListeners",value:function(){var e,t,n=this;this.body.emitter.on("refreshNodes",BC(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",BC(t=this.refresh).call(t,this)),this.body.emitter.on("destroy",(function(){UR(n.nodesListeners,(function(e,t){n.body.data.nodes&&n.body.data.nodes.off(t,e)})),delete n.body.functions.createNode,delete n.nodesListeners.add,delete n.nodesListeners.update,delete n.nodesListeners.remove,delete n.nodesListeners}))}},{key:"setOptions",value:function(e){if(void 0!==e){if(SW.parseOptions(this.options,e),void 0!==e.opacity&&(k$(e.opacity)||!S$(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),void 0!==e.shape)for(var t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&this.body.nodes[t].updateShape();if(void 0!==e.font||void 0!==e.widthConstraint||void 0!==e.heightConstraint)for(var n=0,i=_N(this.body.nodes);n<i.length;n++){var r=i[n];this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh()}if(void 0!==e.size)for(var o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.body.nodes[o].needsRefresh();void 0===e.hidden&&void 0===e.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.body.data.nodes;if(ow("id",e))this.body.data.nodes=e;else if(hN(e))this.body.data.nodes=new rw,this.body.data.nodes.add(e);else{if(e)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new rw}if(n&&UR(this.nodesListeners,(function(e,t){n.off(t,e)})),this.body.nodes={},this.body.data.nodes){var i=this;UR(this.nodesListeners,(function(e,t){i.body.data.nodes.on(t,e)}));var r=this.body.data.nodes.getIds();this.add(r,!0)}!1===t&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[],r=0;r<e.length;r++){t=e[r];var o=this.body.data.nodes.get(t),s=this.create(o);i.push(s),this.body.nodes[t]=s}this.layoutEngine.positionInitially(i),!1===n&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(e,t,n){for(var i=this.body.nodes,r=!1,o=0;o<e.length;o++){var s=e[o],a=i[s],c=t[o];void 0!==a?a.setOptions(c)&&(r=!0):(r=!0,a=this.create(c),i[s]=a)}r||void 0===n||(r=P$(t).call(t,(function(e,t){var i=n[t];return i&&i.level!==e.level}))),!0===r?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(e){for(var t=this.body.nodes,n=0;n<e.length;n++){delete t[e[n]]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:SW;return new t(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];UR(this.body.nodes,(function(n,i){var r=e.body.data.nodes.get(i);void 0!==r&&(!0===t&&n.setOptions({x:null,y:null}),n.setOptions({fixed:!1}),n.setOptions(r))}))}},{key:"getPositions",value:function(e){var t={};if(void 0!==e){if(!0===hN(e)){for(var n=0;n<e.length;n++)if(void 0!==this.body.nodes[e[n]]){var i=this.body.nodes[e[n]];t[e[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(void 0!==this.body.nodes[e]){var r=this.body.nodes[e];t[e]={x:Math.round(r.x),y:Math.round(r.y)}}}else for(var o=0;o<this.body.nodeIndices.length;o++){var s=this.body.nodes[this.body.nodeIndices[o]];t[this.body.nodeIndices[o]]={x:Math.round(s.x),y:Math.round(s.y)}}return t}},{key:"getPosition",value:function(e){if(null==e)throw new TypeError("No id was specified for getPosition method.");if(null==this.body.nodes[e])throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}},{key:"storePositions",value:function(){var e,t=[],n=this.body.data.nodes.getDataSet(),i=TW(n.get());try{for(i.s();!(e=i.n()).done;){var r=e.value,o=r.id,s=this.body.nodes[o],a=Math.round(s.x),c=Math.round(s.y);r.x===a&&r.y===c||t.push({id:o,x:a,y:c})}}catch(e){i.e(e)}finally{i.f()}n.update(t)}},{key:"getBoundingBox",value:function(e){if(void 0!==this.body.nodes[e])return this.body.nodes[e].shape.boundingBox}},{key:"getConnectedNodes",value:function(e,t){var n=[];if(void 0!==this.body.nodes[e])for(var i=this.body.nodes[e],r={},o=0;o<i.edges.length;o++){var s=i.edges[o];"to"!==t&&s.toId==i.id?void 0===r[s.fromId]&&(n.push(s.fromId),r[s.fromId]=!0):"from"!==t&&s.fromId==i.id&&void 0===r[s.toId]&&(n.push(s.toId),r[s.toId]=!0)}return n}},{key:"getConnectedEdges",value:function(e){var t=[];if(void 0!==this.body.nodes[e])for(var n=this.body.nodes[e],i=0;i<n.edges.length;i++)t.push(n.edges[i].id);else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return t}},{key:"moveNode",value:function(e,t,n){var i=this;void 0!==this.body.nodes[e]?(this.body.nodes[e].x=Number(t),this.body.nodes[e].y=Number(n),mz((function(){i.body.emitter.emit("startSimulation")}),0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}]),e}(),AW=Vx,LW=Tw,FW=Kw,PW=tE,NW=function(e){return void 0!==e&&(AW(e,"value")||AW(e,"writable"))},MW=kw,DW=PT;TE({target:"Reflect",stat:!0},{get:function e(t,n){var i,r,o=arguments.length<3?t:arguments[2];return PW(t)===o?t[n]:(i=MW.f(t,n))?NW(i)?i.value:void 0===i.get?void 0:LW(i.get,o):FW(r=DW(t))?e(r,n,o):void 0}});var zW=Qw.Reflect.get,BW=wF;function RW(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BH(e)););return e}function jW(){return jW="undefined"!=typeof Reflect&&zW?zW:function(e,t,n){var i=RW(e,t);if(i){var r=BW(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},jW.apply(this,arguments)}var UW=TE,$W=Math.hypot,HW=Math.abs,WW=Math.sqrt;UW({target:"Math",stat:!0,forced:!!$W&&$W(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,i,r=0,o=0,s=arguments.length,a=0;o<s;)a<(n=HW(arguments[o++]))?(r=r*(i=a/n)*i+1,a=n):r+=n>0?(i=n/a)*i:n;return a===1/0?1/0:a*WW(r)}});var GW=Qw.Math.hypot;function qW(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var VW=function(){function e(){YF(this,e)}return QF(e,null,[{key:"transform",value:function(e,t){hN(e)||(e=[e]);for(var n=t.point.x,i=t.point.y,r=t.angle,o=t.length,s=0;s<e.length;++s){var a=e[s],c=a.x*Math.cos(r)-a.y*Math.sin(r),l=a.x*Math.sin(r)+a.y*Math.cos(r);a.x=n+o*c,a.y=i+o*l}}},{key:"drawPath",value:function(e,t){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var n=1;n<t.length;++n)e.lineTo(t[n].x,t[n].y);e.closePath()}}]),e}(),XW=function(e){MH(n,e);var t=qW(n);function n(){return YF(this,n),t.apply(this,arguments)}return QF(n,null,[{key:"draw",value:function(e,t){if(t.image){e.save(),e.translate(t.point.x,t.point.y),e.rotate(Math.PI/2+t.angle);var n=null!=t.imageWidth?t.imageWidth:t.image.width,i=null!=t.imageHeight?t.imageHeight:t.image.height;t.image.drawImageAtPosition(e,1,-n/2,0,n,i),e.restore()}return!1}}]),n}(VW),YW=function(e){MH(n,e);var t=qW(n);function n(){return YF(this,n),t.apply(this,arguments)}return QF(n,null,[{key:"draw",value:function(e,t){var n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return VW.transform(n,t),VW.drawPath(e,n),!0}}]),n}(VW),ZW=function(){function e(){YF(this,e)}return QF(e,null,[{key:"draw",value:function(e,t){var n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return VW.transform(n,t),VW.drawPath(e,n),!0}}]),e}(),KW=function(){function e(){YF(this,e)}return QF(e,null,[{key:"draw",value:function(e,t){var n={x:-.4,y:0};VW.transform(n,t),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";var i=Math.PI,r=t.angle-i/2,o=t.angle+i/2;return e.beginPath(),e.arc(n.x,n.y,.4*t.length,r,o,!1),e.stroke(),!0}}]),e}(),QW=function(){function e(){YF(this,e)}return QF(e,null,[{key:"draw",value:function(e,t){var n={x:-.3,y:0};VW.transform(n,t),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";var i=Math.PI,r=t.angle+i/2,o=t.angle+3*i/2;return e.beginPath(),e.arc(n.x,n.y,.4*t.length,r,o,!1),e.stroke(),!0}}]),e}(),JW=function(){function e(){YF(this,e)}return QF(e,null,[{key:"draw",value:function(e,t){var n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return VW.transform(n,t),VW.drawPath(e,n),!0}}]),e}(),eG=function(){function e(){YF(this,e)}return QF(e,null,[{key:"draw",value:function(e,t){var n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return VW.transform(n,t),VW.drawPath(e,n),!0}}]),e}(),tG=function(){function e(){YF(this,e)}return QF(e,null,[{key:"draw",value:function(e,t){var n={x:-.4,y:0};return VW.transform(n,t),RC(e,n.x,n.y,.4*t.length),!0}}]),e}(),nG=function(){function e(){YF(this,e)}return QF(e,null,[{key:"draw",value:function(e,t){var n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return VW.transform(n,t),VW.drawPath(e,n),!0}}]),e}(),iG=function(){function e(){YF(this,e)}return QF(e,null,[{key:"draw",value:function(e,t){var n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return VW.transform(n,t),VW.drawPath(e,n),!0}}]),e}(),rG=function(){function e(){YF(this,e)}return QF(e,null,[{key:"draw",value:function(e,t){var n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return VW.transform(n,t),VW.drawPath(e,n),!0}}]),e}(),oG=function(){function e(){YF(this,e)}return QF(e,null,[{key:"draw",value:function(e,t){var n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return VW.transform(n,t),VW.drawPath(e,n),!0}}]),e}(),sG=function(){function e(){YF(this,e)}return QF(e,null,[{key:"draw",value:function(e,t){var n;switch(t.type&&(n=t.type.toLowerCase()),n){case"image":return XW.draw(e,t);case"circle":return tG.draw(e,t);case"box":return iG.draw(e,t);case"crow":return ZW.draw(e,t);case"curve":return KW.draw(e,t);case"diamond":return rG.draw(e,t);case"inv_curve":return QW.draw(e,t);case"triangle":return JW.draw(e,t);case"inv_triangle":return eG.draw(e,t);case"bar":return nG.draw(e,t);case"vee":return oG.draw(e,t);default:return YW.draw(e,t)}}}]),e}();function aG(e,t){var n=_N(e);if(uF){var i=uF(e);t&&(i=VM(i).call(i,(function(t){return xF(e,t).enumerable}))),n.push.apply(n,i)}return n}function cG(e){for(var t=1;t<arguments.length;t++){var n,i,r=null!=arguments[t]?arguments[t]:{};t%2?zN(n=aG(Object(r),!0)).call(n,(function(t){JF(e,t,r[t])})):PF?jF(e,PF(r)):zN(i=aG(Object(r))).call(i,(function(t){XF(e,t,xF(r,t))}))}return e}var lG=function(){function e(t,n,i){YF(this,e),this._body=n,this._labelModule=i,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(t),this.fromPoint=this.from,this.toPoint=this.to}return QF(e,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,t),e.lineWidth=t.width,!1!==t.dashes?this._drawDashedLine(e,t,r):this._drawLine(e,t,r)}},{key:"_drawLine",value:function(e,t,n,i,r){if(this.from!=this.to)this._line(e,t,n,i,r);else{var o=QP(this._getCircleData(e),3),s=o[0],a=o[1],c=o[2];this._circle(e,t,s,a,c)}}},{key:"_drawDashedLine",value:function(e,t,n,i,r){e.lineCap="round";var o=hN(t.dashes)?t.dashes:[5,5];if(void 0!==e.setLineDash){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,t,n);else{var s=QP(this._getCircleData(e),3),a=s[0],c=s[1],l=s[2];this._circle(e,t,a,c,l)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)HC(e,this.from.x,this.from.y,this.to.x,this.to.y,o);else{var h=QP(this._getCircleData(e),3),u=h[0],d=h[1],f=h[2];this._circle(e,t,u,d,f)}this.enableShadow(e,t),e.stroke(),this.disableShadow(e,t)}}},{key:"findBorderPosition",value:function(e,t,n){return this.from!=this.to?this._findBorderPosition(e,t,n):this._findBorderPositionCircle(e,t,n)}},{key:"findBorderPositions",value:function(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};var t,n=QP(lN(t=this._getCircleData(e)).call(t,0,2),2),i=n[0],r=n[1];return{from:this._findBorderPositionCircle(this.from,e,{x:i,y:r,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:i,y:r,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(e){var t=this.options.selfReference.size;void 0!==e&&void 0===this.from.shape.width&&this.from.shape.resize(e);var n=J$(e,this.options.selfReference.angle,t,this.from);return[n.x,n.y,t]}},{key:"_pointOnCircle",value:function(e,t,n,i){var r=2*i*Math.PI;return{x:e+n*Math.cos(r),y:t-n*Math.sin(r)}}},{key:"_findBorderPositionCircle",value:function(e,t,n){var i,r=n.x,o=n.y,s=n.low,a=n.high,c=n.direction,l=this.options.selfReference.size,h=.5*(s+a),u=0;!0===this.options.arrowStrikethrough&&(-1===c?u=this.options.endPointOffset.from:1===c&&(u=this.options.endPointOffset.to));var d=0;do{h=.5*(s+a),i=this._pointOnCircle(r,o,l,h);var f=Math.atan2(e.y-i.y,e.x-i.x),p=e.distanceToBorder(t,f)+u-Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));if(Math.abs(p)<.05)break;p>0?c>0?s=h:a=h:c>0?a=h:s=h,++d}while(s<=a&&d<10);return cG(cG({},i),{},{t:h})}},{key:"getLineWidth",value:function(e,t){return!0===e?Math.max(this.selectionWidth,.3/this._body.view.scale):!0===t?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(e,t){if(!1!==t.inheritsColor){if("both"===t.inheritsColor&&this.from.id!==this.to.id){var n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),i=this.from.options.color.highlight.border,r=this.to.options.color.highlight.border;return!1===this.from.selected&&!1===this.to.selected?(i=HR(this.from.options.color.border,t.opacity),r=HR(this.to.options.color.border,t.opacity)):!0===this.from.selected&&!1===this.to.selected?r=this.to.options.color.border:!1===this.from.selected&&!0===this.to.selected&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,r),n}return"to"===t.inheritsColor?HR(this.to.options.color.border,t.opacity):HR(this.from.options.color.border,t.opacity)}return HR(t.color,t.opacity)}},{key:"_circle",value:function(e,t,n,i,r){this.enableShadow(e,t);var o=0,s=2*Math.PI;if(!this.options.selfReference.renderBehindTheNode){var a=this.options.selfReference.angle,c=this.options.selfReference.angle+Math.PI,l=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:a,high:c,direction:-1}),h=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:a,high:c,direction:1});o=Math.atan2(l.y-i,l.x-n),s=Math.atan2(h.y-i,h.x-n)}e.beginPath(),e.arc(n,i,r,o,s,!1),e.stroke(),this.disableShadow(e,t)}},{key:"getDistanceToEdge",value:function(e,t,n,i,r,o){if(this.from!=this.to)return this._getDistanceToEdge(e,t,n,i,r,o);var s=QP(this._getCircleData(void 0),3),a=s[0],c=s[1],l=s[2],h=a-r,u=c-o;return Math.abs(Math.sqrt(h*h+u*u)-l)}},{key:"_getDistanceToLine",value:function(e,t,n,i,r,o){var s=n-e,a=i-t,c=((r-e)*s+(o-t)*a)/(s*s+a*a);c>1?c=1:c<0&&(c=0);var l=e+c*s-r,h=t+c*a-o;return Math.sqrt(l*l+h*h)}},{key:"getArrowData",value:function(e,t,n,i,r,o){var s,a,c,l,h,u,d,f=o.width;"from"===t?(c=this.from,l=this.to,h=o.fromArrowScale<0,u=Math.abs(o.fromArrowScale),d=o.fromArrowType):"to"===t?(c=this.to,l=this.from,h=o.toArrowScale<0,u=Math.abs(o.toArrowScale),d=o.toArrowType):(c=this.to,l=this.from,h=o.middleArrowScale<0,u=Math.abs(o.middleArrowScale),d=o.middleArrowType);var p=15*u+3*f;if(c!=l){var v=p/GW(c.x-l.x,c.y-l.y);if("middle"!==t)if(!0===this.options.smooth.enabled){var y=this._findBorderPosition(c,e,{via:n}),g=this.getPoint(y.t+v*("from"===t?1:-1),n);s=Math.atan2(y.y-g.y,y.x-g.x),a=y}else s=Math.atan2(c.y-l.y,c.x-l.x),a=this._findBorderPosition(c,e);else{var m=(h?-v:v)/2,b=this.getPoint(.5+m,n),_=this.getPoint(.5-m,n);s=Math.atan2(b.y-_.y,b.x-_.x),a=this.getPoint(.5,n)}}else{var w=QP(this._getCircleData(e),3),x=w[0],k=w[1],E=w[2];if("from"===t){var C=this.options.selfReference.angle,S=this.options.selfReference.angle+Math.PI,T=this._findBorderPositionCircle(this.from,e,{x,y:k,low:C,high:S,direction:-1});s=-2*T.t*Math.PI+1.5*Math.PI+.1*Math.PI,a=T}else if("to"===t){var O=this.options.selfReference.angle,I=this.options.selfReference.angle+Math.PI,A=this._findBorderPositionCircle(this.from,e,{x,y:k,low:O,high:I,direction:1});s=-2*A.t*Math.PI+1.5*Math.PI-1.1*Math.PI,a=A}else{var L=this.options.selfReference.angle/(2*Math.PI);a=this._pointOnCircle(x,k,E,L),s=-2*L*Math.PI+1.5*Math.PI+.1*Math.PI}}return{point:a,core:{x:a.x-.9*p*Math.cos(s),y:a.y-.9*p*Math.sin(s)},angle:s,length:p,type:d}}},{key:"drawArrowHead",value:function(e,t,n,i,r){e.strokeStyle=this.getColor(e,t),e.fillStyle=e.strokeStyle,e.lineWidth=t.width,sG.draw(e,r)&&(this.enableShadow(e,t),Iz(e).call(e),this.disableShadow(e,t))}},{key:"enableShadow",value:function(e,t){!0===t.shadow&&(e.shadowColor=t.shadowColor,e.shadowBlur=t.shadowSize,e.shadowOffsetX=t.shadowX,e.shadowOffsetY=t.shadowY)}},{key:"disableShadow",value:function(e,t){!0===t.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}},{key:"drawBackground",value:function(e,t){if(!1!==t.background){var n={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=t.backgroundColor,e.lineWidth=t.backgroundSize,this.setStrokeDashed(e,t.backgroundDashes),e.stroke(),e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.dashes=n.dashes,this.setStrokeDashed(e,t.dashes)}}},{key:"setStrokeDashed",value:function(e,t){if(!1!==t)if(void 0!==e.setLineDash){var n=hN(t)?t:[5,5];e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else void 0!==e.setLineDash?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),e}();function hG(e,t){var n=_N(e);if(uF){var i=uF(e);t&&(i=VM(i).call(i,(function(t){return xF(e,t).enumerable}))),n.push.apply(n,i)}return n}function uG(e){for(var t=1;t<arguments.length;t++){var n,i,r=null!=arguments[t]?arguments[t]:{};t%2?zN(n=hG(Object(r),!0)).call(n,(function(t){JF(e,t,r[t])})):PF?jF(e,PF(r)):zN(i=hG(Object(r))).call(i,(function(t){XF(e,t,xF(r,t))}))}return e}function dG(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var fG=function(e){MH(n,e);var t=dG(n);function n(e,i,r){return YF(this,n),t.call(this,e,i,r)}return QF(n,[{key:"_findBorderPositionBezier",value:function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._getViaCoordinates(),o=10,s=.2,a=!1,c=1,l=0,h=this.to,u=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(h=this.from,a=!0,u=this.options.endPointOffset?this.options.endPointOffset.from:0),!1===this.options.arrowStrikethrough&&(u=0);var d=0;do{i=.5*(l+c),n=this.getPoint(i,r);var f=Math.atan2(h.y-n.y,h.x-n.x),p=h.distanceToBorder(t,f)+u,v=Math.sqrt(Math.pow(n.x-h.x,2)+Math.pow(n.y-h.y,2)),y=p-v;if(Math.abs(y)<s)break;y<0?!1===a?l=i:c=i:!1===a?c=i:l=i,++d}while(l<=c&&d<o);return uG(uG({},n),{},{t:i})}},{key:"_getDistanceToBezierEdge",value:function(e,t,n,i,r,o,s){var a,c,l,h,u,d=1e9,f=e,p=t;for(c=1;c<10;c++)l=.1*c,h=Math.pow(1-l,2)*e+2*l*(1-l)*s.x+Math.pow(l,2)*n,u=Math.pow(1-l,2)*t+2*l*(1-l)*s.y+Math.pow(l,2)*i,c>0&&(d=(a=this._getDistanceToLine(f,p,h,u,r,o))<d?a:d),f=h,p=u;return d}},{key:"_bezierCurve",value:function(e,t,n,i){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),null!=n&&null!=n.x?null!=i&&null!=i.x?e.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,t),this.enableShadow(e,t),e.stroke(),this.disableShadow(e,t)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),n}(lG);function pG(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var vG=function(e){MH(n,e);var t=pG(n);function n(e,i,r){var o;return YF(this,n),(o=t.call(this,e,i,r)).via=o.via,o._boundFunction=function(){o.positionBezierNode()},o._body.emitter.on("_repositionBezierNodes",o._boundFunction),o}return QF(n,[{key:"setOptions",value:function(e){jW(BH(n.prototype),"setOptions",this).call(this,e);var t=!1;this.options.physics!==e.physics&&(t=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),!0===t&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],void 0===this.from||void 0===this.to||!1===this.options.physics||this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via&&(delete this._body.nodes[this.via.id],this.via=void 0,!0)}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var e="edgeId:"+this.id,t=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=t,this.via=t,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(e,t,n){this._bezierCurve(e,t,n)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.via;if(this.from===this.to){var n=this._getCircleData(),i=QP(n,3),r=i[0],o=i[1],s=i[2],a=2*Math.PI*(1-e);return{x:r+s*Math.sin(a),y:o+s-s*(1-Math.cos(a))}}return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*t.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*t.y+Math.pow(e,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(e,t){return this._findBorderPositionBezier(e,t,this.via)}},{key:"_getDistanceToEdge",value:function(e,t,n,i,r,o){return this._getDistanceToBezierEdge(e,t,n,i,r,o,this.via)}}]),n}(fG);function yG(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var gG=function(e){MH(n,e);var t=yG(n);function n(e,i,r){return YF(this,n),t.call(this,e,i,r)}return QF(n,[{key:"_line",value:function(e,t,n){this._bezierCurve(e,t,n)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var e,t,n=this.options.smooth.roundness,i=this.options.smooth.type,r=Math.abs(this.from.x-this.to.x),o=Math.abs(this.from.y-this.to.y);if("discrete"===i||"diagonalCross"===i){var s,a;s=a=r<=o?n*o:n*r,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(a=-a);var c=this.from.x+s,l=this.from.y+a;return"discrete"===i&&(r<=o?c=r<n*o?this.from.x:c:l=o<n*r?this.from.y:l),{x:c,y:l}}if("straightCross"===i){var h=(1-n)*r,u=(1-n)*o;return r<=o?(h=0,this.from.y<this.to.y&&(u=-u)):(this.from.x<this.to.x&&(h=-h),u=0),{x:this.to.x+h,y:this.to.y+u}}if("horizontal"===i){var d=(1-n)*r;return this.from.x<this.to.x&&(d=-d),{x:this.to.x+d,y:this.from.y}}if("vertical"===i){var f=(1-n)*o;return this.from.y<this.to.y&&(f=-f),{x:this.from.x,y:this.to.y+f}}if("curvedCW"===i){r=this.to.x-this.from.x,o=this.from.y-this.to.y;var p=Math.sqrt(r*r+o*o),v=Math.PI,y=(Math.atan2(o,r)+(.5*n+.5)*v)%(2*v);return{x:this.from.x+(.5*n+.5)*p*Math.sin(y),y:this.from.y+(.5*n+.5)*p*Math.cos(y)}}if("curvedCCW"===i){r=this.to.x-this.from.x,o=this.from.y-this.to.y;var g=Math.sqrt(r*r+o*o),m=Math.PI,b=(Math.atan2(o,r)+(.5*-n+.5)*m)%(2*m);return{x:this.from.x+(.5*n+.5)*g*Math.sin(b),y:this.from.y+(.5*n+.5)*g*Math.cos(b)}}e=t=r<=o?n*o:n*r,this.from.x>this.to.x&&(e=-e),this.from.y>=this.to.y&&(t=-t);var _=this.from.x+e,w=this.from.y+t;return r<=o?_=this.from.x<=this.to.x?this.to.x<_?this.to.x:_:this.to.x>_?this.to.x:_:w=this.from.y>=this.to.y?this.to.y>w?this.to.y:w:this.to.y<w?this.to.y:w,{x:_,y:w}}},{key:"_findBorderPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._findBorderPositionBezier(e,t,n.via)}},{key:"_getDistanceToEdge",value:function(e,t,n,i,r,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,t,n,i,r,o,s)}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),n=e,i=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*t.x+Math.pow(n,2)*this.toPoint.x,r=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*t.y+Math.pow(n,2)*this.toPoint.y;return{x:i,y:r}}}]),n}(fG);function mG(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var bG=function(e){MH(n,e);var t=mG(n);function n(e,i,r){return YF(this,n),t.call(this,e,i,r)}return QF(n,[{key:"_getDistanceToBezierEdge2",value:function(e,t,n,i,r,o,s,a){for(var c=1e9,l=e,h=t,u=[0,0,0,0],d=1;d<10;d++){var f=.1*d;u[0]=Math.pow(1-f,3),u[1]=3*f*Math.pow(1-f,2),u[2]=3*Math.pow(f,2)*(1-f),u[3]=Math.pow(f,3);var p=u[0]*e+u[1]*s.x+u[2]*a.x+u[3]*n,v=u[0]*t+u[1]*s.y+u[2]*a.y+u[3]*i;if(d>0){var y=this._getDistanceToLine(l,h,p,v,r,o);c=y<c?y:c}l=p,h=v}return c}}]),n}(fG);function _G(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var wG=function(e){MH(n,e);var t=_G(n);function n(e,i,r){return YF(this,n),t.call(this,e,i,r)}return QF(n,[{key:"_line",value:function(e,t,n){var i=n[0],r=n[1];this._bezierCurve(e,t,i,r)}},{key:"_getViaCoordinates",value:function(){var e,t,n,i,r=this.from.x-this.to.x,o=this.from.y-this.to.y,s=this.options.smooth.roundness;return(Math.abs(r)>Math.abs(o)||!0===this.options.smooth.forceDirection||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(t=this.from.y,i=this.to.y,e=this.from.x-s*r,n=this.to.x+s*r):(t=this.from.y-s*o,i=this.to.y+s*o,e=this.from.x,n=this.to.x),[{x:e,y:t},{x:n,y:i}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(e,t){return this._findBorderPositionBezier(e,t)}},{key:"_getDistanceToEdge",value:function(e,t,n,i,r,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates(),a=QP(s,2),c=a[0],l=a[1];return this._getDistanceToBezierEdge2(e,t,n,i,r,o,c,l)}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),n=QP(t,2),i=n[0],r=n[1],o=e,s=[Math.pow(1-o,3),3*o*Math.pow(1-o,2),3*Math.pow(o,2)*(1-o),Math.pow(o,3)],a=s[0]*this.fromPoint.x+s[1]*i.x+s[2]*r.x+s[3]*this.toPoint.x,c=s[0]*this.fromPoint.y+s[1]*i.y+s[2]*r.y+s[3]*this.toPoint.y;return{x:a,y:c}}}]),n}(bG);function xG(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var kG=function(e){MH(n,e);var t=xG(n);function n(e,i,r){return YF(this,n),t.call(this,e,i,r)}return QF(n,[{key:"_line",value:function(e,t){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,t),e.stroke(),this.disableShadow(e,t)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}},{key:"_findBorderPosition",value:function(e,t){var n=this.to,i=this.from;e.id===this.from.id&&(n=this.from,i=this.to);var r=Math.atan2(n.y-i.y,n.x-i.x),o=n.x-i.x,s=n.y-i.y,a=Math.sqrt(o*o+s*s),c=(a-e.distanceToBorder(t,r))/a;return{x:(1-c)*i.x+c*n.x,y:(1-c)*i.y+c*n.y,t:0}}},{key:"_getDistanceToEdge",value:function(e,t,n,i,r,o){return this._getDistanceToLine(e,t,n,i,r,o)}}]),n}(lG),EG=function(){function e(t,n,i,r,o){if(YF(this,e),void 0===n)throw new Error("No body provided");this.options=QR(r),this.globalOptions=r,this.defaultOptions=o,this.body=n,this.imagelist=i,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new fH(this.body,this.options,!0),this.setOptions(t)}return QF(e,[{key:"setOptions",value:function(t){if(t){var n=void 0!==t.physics&&this.options.physics!==t.physics||void 0!==t.hidden&&(this.options.hidden||!1)!==(t.hidden||!1)||void 0!==t.from&&this.options.from!==t.from||void 0!==t.to&&this.options.to!==t.to;e.parseOptions(this.options,t,!0,this.globalOptions),void 0!==t.id&&(this.id=t.id),void 0!==t.from&&(this.fromId=t.from),void 0!==t.to&&(this.toId=t.to),void 0!==t.title&&(this.title=t.title),void 0!==t.value&&(t.value=H$(t.value));var i=[t,this.options,this.defaultOptions];return this.chooser=Z$("edge",i),this.updateLabelModule(t),n=this.updateEdgeType()||n,this._setInteractionWidths(),this.connect(),n}}},{key:"getFormattingValues",value:function(){var e=!0===this.options.arrows.to||!0===this.options.arrows.to.enabled,t=!0===this.options.arrows.from||!0===this.options.arrows.from.enabled,n=!0===this.options.arrows.middle||!0===this.options.arrows.middle.enabled,i=this.options.color.inherit,r={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:t,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(!0===this.chooser){if(this.selected){var o=this.options.selectionWidth;"function"==typeof o?r.width=o(r.width):"number"==typeof o&&(r.width+=o),r.width=Math.max(r.width,.3/this.body.view.scale),r.color=this.options.color.highlight,r.shadow=this.options.shadow.enabled}else if(this.hover){var s=this.options.hoverWidth;"function"==typeof s?r.width=s(r.width):"number"==typeof s&&(r.width+=s),r.width=Math.max(r.width,.3/this.body.view.scale),r.color=this.options.color.hover,r.shadow=this.options.shadow.enabled}}else"function"==typeof this.chooser&&(this.chooser(r,this.options.id,this.selected,this.hover),void 0!==r.color&&(r.inheritsColor=!1),!1===r.shadow&&(r.shadowColor===this.options.shadow.color&&r.shadowSize===this.options.shadow.size&&r.shadowX===this.options.shadow.x&&r.shadowY===this.options.shadow.y||(r.shadow=!0)));else r.shadow=this.options.shadow.enabled,r.width=Math.max(r.width,.3/this.body.view.scale);return r}},{key:"updateLabelModule",value:function(e){var t=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,t),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var e=this.options.smooth,t=!1,n=!0;return void 0!==this.edgeType&&((this.edgeType instanceof vG&&!0===e.enabled&&"dynamic"===e.type||this.edgeType instanceof wG&&!0===e.enabled&&"cubicBezier"===e.type||this.edgeType instanceof gG&&!0===e.enabled&&"dynamic"!==e.type&&"cubicBezier"!==e.type||this.edgeType instanceof kG&&!1===e.type.enabled)&&(n=!1),!0===n&&(t=this.cleanup())),!0===n?!0===e.enabled?"dynamic"===e.type?(t=!0,this.edgeType=new vG(this.options,this.body,this.labelModule)):"cubicBezier"===e.type?this.edgeType=new wG(this.options,this.body,this.labelModule):this.edgeType=new gG(this.options,this.body,this.labelModule):this.edgeType=new kG(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),t}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,!0===this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(e,t,n){if(void 0!==this.options.value){var i=this.options.scaling.customScalingFunction(e,t,n,this.options.value),r=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.width=this.options.scaling.min+i*r}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"==typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"==typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(e){var t=this.getFormattingValues();if(!t.hidden){var n=this.edgeType.getViaNode();this.edgeType.drawLine(e,t,this.selected,this.hover,n),this.drawLabel(e,n)}}},{key:"drawArrows",value:function(e){var t=this.getFormattingValues();if(!t.hidden){var n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,t.fromArrow&&(i.from=this.edgeType.getArrowData(e,"from",n,this.selected,this.hover,t),!1===t.arrowStrikethrough&&(this.edgeType.fromPoint=i.from.core),t.fromArrowSrc&&(i.from.image=this.imagelist.load(t.fromArrowSrc)),t.fromArrowImageWidth&&(i.from.imageWidth=t.fromArrowImageWidth),t.fromArrowImageHeight&&(i.from.imageHeight=t.fromArrowImageHeight)),t.toArrow&&(i.to=this.edgeType.getArrowData(e,"to",n,this.selected,this.hover,t),!1===t.arrowStrikethrough&&(this.edgeType.toPoint=i.to.core),t.toArrowSrc&&(i.to.image=this.imagelist.load(t.toArrowSrc)),t.toArrowImageWidth&&(i.to.imageWidth=t.toArrowImageWidth),t.toArrowImageHeight&&(i.to.imageHeight=t.toArrowImageHeight)),t.middleArrow&&(i.middle=this.edgeType.getArrowData(e,"middle",n,this.selected,this.hover,t),t.middleArrowSrc&&(i.middle.image=this.imagelist.load(t.middleArrowSrc)),t.middleArrowImageWidth&&(i.middle.imageWidth=t.middleArrowImageWidth),t.middleArrowImageHeight&&(i.middle.imageHeight=t.middleArrowImageHeight)),t.fromArrow&&this.edgeType.drawArrowHead(e,t,this.selected,this.hover,i.from),t.middleArrow&&this.edgeType.drawArrowHead(e,t,this.selected,this.hover,i.middle),t.toArrow&&this.edgeType.drawArrowHead(e,t,this.selected,this.hover,i.to)}}},{key:"drawLabel",value:function(e,t){if(void 0!==this.options.label){var n,i=this.from,r=this.to;if(this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover),i.id!=r.id){this.labelModule.pointToSelf=!1,n=this.edgeType.getPoint(.5,t),e.save();var o=this._getRotation(e);0!=o.angle&&(e.translate(o.x,o.y),e.rotate(o.angle)),this.labelModule.draw(e,n.x,n.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;var s=J$(e,this.options.selfReference.angle,this.options.selfReference.size,i);n=this._pointOnCircle(s.x,s.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,n.x,n.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(e){var t=[];if(this.labelModule.visible()){var n=this._getRotation();K$(this.labelModule.getSize(),e,n)&&t.push({edgeId:this.id,labelId:0})}var i={left:e.x,top:e.y};return this.isOverlappingWith(i)&&t.push({edgeId:this.id}),t}},{key:"isOverlappingWith",value:function(e){if(this.connected){var t=this.from.x,n=this.from.y,i=this.to.x,r=this.to.y,o=e.left,s=e.top;return this.edgeType.getDistanceToEdge(t,n,i,r,o,s)<10}return!1}},{key:"_getRotation",value:function(e){var t=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,t);void 0!==e&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,n.x,n.y);var i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible())return i;if("horizontal"===this.options.font.align)return i;var r=this.from.y-this.to.y,o=this.from.x-this.to.x,s=Math.atan2(r,o);return(s<-1&&o<0||s>0&&o<0)&&(s+=Math.PI),i.angle=s,i}},{key:"_pointOnCircle",value:function(e,t,n,i){return{x:e+n*Math.cos(i),y:t-n*Math.sin(i)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return void 0!==this.body.nodes[this.fromId]&&void 0!==this.body.nodes[this.toId]}}],[{key:"parseOptions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"];if(MR(o,e,t,n),void 0!==t.endPointOffset&&void 0!==t.endPointOffset.from&&(S$(t.endPointOffset.from)?e.endPointOffset.from=t.endPointOffset.from:(e.endPointOffset.from=void 0!==i.endPointOffset.from?i.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),void 0!==t.endPointOffset&&void 0!==t.endPointOffset.to&&(S$(t.endPointOffset.to)?e.endPointOffset.to=t.endPointOffset.to:(e.endPointOffset.to=void 0!==i.endPointOffset.to?i.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),Q$(t.label)?e.label=t.label:Q$(e.label)||(e.label=void 0),JR(e,t,"smooth",i),JR(e,t,"shadow",i),JR(e,t,"background",i),void 0!==t.dashes&&null!==t.dashes?e.dashes=t.dashes:!0===n&&null===t.dashes&&(e.dashes=UD(i.dashes)),void 0!==t.scaling&&null!==t.scaling?(void 0!==t.scaling.min&&(e.scaling.min=t.scaling.min),void 0!==t.scaling.max&&(e.scaling.max=t.scaling.max),JR(e.scaling,t.scaling,"label",i.scaling)):!0===n&&null===t.scaling&&(e.scaling=UD(i.scaling)),void 0!==t.arrows&&null!==t.arrows)if("string"==typeof t.arrows){var s=t.arrows.toLowerCase();e.arrows.to.enabled=-1!=ND(s).call(s,"to"),e.arrows.middle.enabled=-1!=ND(s).call(s,"middle"),e.arrows.from.enabled=-1!=ND(s).call(s,"from")}else{if("object"!==eN(t.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+az(t.arrows));JR(e.arrows,t.arrows,"to",i.arrows),JR(e.arrows,t.arrows,"middle",i.arrows),JR(e.arrows,t.arrows,"from",i.arrows)}else!0===n&&null===t.arrows&&(e.arrows=UD(i.arrows));if(void 0!==t.color&&null!==t.color){var a=LR(t.color)?{color:t.color,highlight:t.color,hover:t.color,inherit:!1,opacity:1}:t.color,c=e.color;if(r)zR(c,i.color,!1,n);else for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&delete c[l];if(LR(c))c.color=c,c.highlight=c,c.hover=c,c.inherit=!1,void 0===a.opacity&&(c.opacity=1);else{var h=!1;void 0!==a.color&&(c.color=a.color,h=!0),void 0!==a.highlight&&(c.highlight=a.highlight,h=!0),void 0!==a.hover&&(c.hover=a.hover,h=!0),void 0!==a.inherit&&(c.inherit=a.inherit),void 0!==a.opacity&&(c.opacity=Math.min(1,Math.max(0,a.opacity))),!0===h?c.inherit=!1:void 0===c.inherit&&(c.inherit="from")}}else!0===n&&null===t.color&&(e.color=QR(i.color));!0===n&&null===t.font&&(e.font=QR(i.font)),Object.prototype.hasOwnProperty.call(t,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=t.selfReferenceSize)}}]),e}(),CG=function(){function e(t,n,i){var r,o=this;YF(this,e),this.body=t,this.images=n,this.groups=i,this.body.functions.createEdge=BC(r=this.create).call(r,this),this.edgesListeners={add:function(e,t){o.add(t.items)},update:function(e,t){o.update(t.items)},remove:function(e,t){o.remove(t.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(e,t,n,i){if(t===e)return.5;var r=1/(t-e);return Math.max(0,(i-e)*r)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},zR(this.options,this.defaultOptions),this.bindEventListeners()}return QF(e,[{key:"bindEventListeners",value:function(){var e,t,n=this;this.body.emitter.on("_forceDisableDynamicCurves",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"dynamic"===e&&(e="continuous");var i=!1;for(var r in n.body.edges)if(Object.prototype.hasOwnProperty.call(n.body.edges,r)){var o=n.body.edges[r],s=n.body.data.edges.get(r);if(null!=s){var a=s.smooth;void 0!==a&&!0===a.enabled&&"dynamic"===a.type&&(void 0===e?o.setOptions({smooth:!1}):o.setOptions({smooth:{type:e}}),i=!0)}}!0===t&&!0===i&&n.body.emitter.emit("_dataChanged")})),this.body.emitter.on("_dataUpdated",(function(){n.reconnectEdges()})),this.body.emitter.on("refreshEdges",BC(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",BC(t=this.refresh).call(t,this)),this.body.emitter.on("destroy",(function(){UR(n.edgesListeners,(function(e,t){n.body.data.edges&&n.body.data.edges.off(t,e)})),delete n.body.functions.createEdge,delete n.edgesListeners.add,delete n.edgesListeners.update,delete n.edgesListeners.remove,delete n.edgesListeners}))}},{key:"setOptions",value:function(e){if(void 0!==e){EG.parseOptions(this.options,e,!0,this.defaultOptions,!0);var t=!1;if(void 0!==e.smooth)for(var n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(t=this.body.edges[n].updateEdgeType()||t);if(void 0!==e.font)for(var i in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,i)&&this.body.edges[i].updateLabelModule();void 0===e.hidden&&void 0===e.physics&&!0!==t||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.body.data.edges;if(ow("id",e))this.body.data.edges=e;else if(hN(e))this.body.data.edges=new rw,this.body.data.edges.add(e);else{if(e)throw new TypeError("Array or DataSet expected");this.body.data.edges=new rw}if(i&&UR(this.edgesListeners,(function(e,t){i.off(t,e)})),this.body.edges={},this.body.data.edges){UR(this.edgesListeners,(function(e,n){t.body.data.edges.on(n,e)}));var r=this.body.data.edges.getIds();this.add(r,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===n&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.body.edges,i=this.body.data.edges,r=0;r<e.length;r++){var o=e[r],s=n[o];s&&s.disconnect();var a=i.get(o,{showInternalIds:!0});n[o]=this.create(a)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===t&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(e){for(var t=this.body.edges,n=this.body.data.edges,i=!1,r=0;r<e.length;r++){var o=e[r],s=n.get(o),a=t[o];void 0!==a?(a.disconnect(),i=a.setOptions(s)||i,a.connect()):(this.body.edges[o]=this.create(s),i=!0)}!0===i?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!==e.length){var n=this.body.edges;UR(e,(function(e){var t=n[e];void 0!==t&&t.remove()})),t&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var e=this;UR(this.body.edges,(function(t,n){var i=e.body.data.edges.get(n);void 0!==i&&t.setOptions(i)}))}},{key:"create",value:function(e){return new EG(e,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var e,t=this.body.nodes,n=this.body.edges;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(t[e].edges=[]);for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){var i=n[e];i.from=null,i.to=null,i.connect()}}},{key:"getConnectedNodes",value:function(e){var t=[];if(void 0!==this.body.edges[e]){var n=this.body.edges[e];void 0!==n.fromId&&t.push(n.fromId),void 0!==n.toId&&t.push(n.toId)}return t}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var e=this,t=[];UR(this.body.edges,(function(n,i){var r=e.body.nodes[n.toId],o=e.body.nodes[n.fromId];void 0!==r&&!0===r.isCluster||void 0!==o&&!0===o.isCluster||void 0!==r&&void 0!==o||t.push(i)})),this.remove(t,!1)}},{key:"_addMissingEdges",value:function(){var e=this.body.data.edges;if(null!=e){var t=this.body.edges,n=[];zN(e).call(e,(function(e,i){void 0===t[i]&&n.push(i)})),this.add(n,!0)}}}]),e}(),SG=function(){function e(t,n,i){YF(this,e),this.body=t,this.physicsBody=n,this.barnesHutTree,this.setOptions(i),this._rng=wR("BARNES HUT SOLVER")}return QF(e,[{key:"setOptions",value:function(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&this.physicsBody.physicsNodeIndices.length>0){var e,t=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,r=this._formBarnesHutTree(t,n);this.barnesHutTree=r;for(var o=0;o<i;o++)(e=t[n[o]]).options.mass>0&&this._getForceContributions(r.root,e)}}},{key:"_getForceContributions",value:function(e,t){this._getForceContribution(e.children.NW,t),this._getForceContribution(e.children.NE,t),this._getForceContribution(e.children.SW,t),this._getForceContribution(e.children.SE,t)}},{key:"_getForceContribution",value:function(e,t){if(e.childrenCount>0){var n=e.centerOfMass.x-t.x,i=e.centerOfMass.y-t.y,r=Math.sqrt(n*n+i*i);r*e.calcSize>this.thetaInversed?this._calculateForces(r,n,i,t,e):4===e.childrenCount?this._getForceContributions(e,t):e.children.data.id!=t.id&&this._calculateForces(r,n,i,t,e)}}},{key:"_calculateForces",value:function(e,t,n,i,r){0===e&&(t=e=.1),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));var o=this.options.gravitationalConstant*r.mass*i.options.mass/Math.pow(e,3),s=t*o,a=n*o;this.physicsBody.forces[i.id].x+=s,this.physicsBody.forces[i.id].y+=a}},{key:"_formBarnesHutTree",value:function(e,t){for(var n,i=t.length,r=e[t[0]].x,o=e[t[0]].y,s=e[t[0]].x,a=e[t[0]].y,c=1;c<i;c++){var l=e[t[c]],h=l.x,u=l.y;l.options.mass>0&&(h<r&&(r=h),h>s&&(s=h),u<o&&(o=u),u>a&&(a=u))}var d=Math.abs(s-r)-Math.abs(a-o);d>0?(o-=.5*d,a+=.5*d):(r+=.5*d,s-=.5*d);var f=Math.max(1e-5,Math.abs(s-r)),p=.5*f,v=.5*(r+s),y=.5*(o+a),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:v-p,maxX:v+p,minY:y-p,maxY:y+p},size:f,calcSize:1/f,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(var m=0;m<i;m++)(n=e[t[m]]).options.mass>0&&this._placeInTree(g.root,n);return g}},{key:"_updateBranchMass",value:function(e,t){var n=e.centerOfMass,i=e.mass+t.options.mass,r=1/i;n.x=n.x*e.mass+t.x*t.options.mass,n.x*=r,n.y=n.y*e.mass+t.y*t.options.mass,n.y*=r,e.mass=i;var o=Math.max(Math.max(t.height,t.radius),t.width);e.maxWidth=e.maxWidth<o?o:e.maxWidth}},{key:"_placeInTree",value:function(e,t,n){1==n&&void 0!==n||this._updateBranchMass(e,t);var i,r=e.children.NW.range;i=r.maxX>t.x?r.maxY>t.y?"NW":"SW":r.maxY>t.y?"NE":"SE",this._placeInRegion(e,t,i)}},{key:"_placeInRegion",value:function(e,t,n){var i=e.children[n];switch(i.childrenCount){case 0:i.children.data=t,i.childrenCount=1,this._updateBranchMass(i,t);break;case 1:i.children.data.x===t.x&&i.children.data.y===t.y?(t.x+=this._rng(),t.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,t));break;case 4:this._placeInTree(i,t)}}},{key:"_splitBranch",value:function(e){var t=null;1===e.childrenCount&&(t=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),null!=t&&this._placeInTree(e,t)}},{key:"_insertRegion",value:function(e,t){var n,i,r,o,s=.5*e.size;switch(t){case"NW":n=e.range.minX,i=e.range.minX+s,r=e.range.minY,o=e.range.minY+s;break;case"NE":n=e.range.minX+s,i=e.range.maxX,r=e.range.minY,o=e.range.minY+s;break;case"SW":n=e.range.minX,i=e.range.minX+s,r=e.range.minY+s,o=e.range.maxY;break;case"SE":n=e.range.minX+s,i=e.range.maxX,r=e.range.minY+s,o=e.range.maxY}e.children[t]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:r,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}},{key:"_debug",value:function(e,t){void 0!==this.barnesHutTree&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,t))}},{key:"_drawBranch",value:function(e,t,n){void 0===n&&(n="#FF0000"),4===e.childrenCount&&(this._drawBranch(e.children.NW,t),this._drawBranch(e.children.NE,t),this._drawBranch(e.children.SE,t),this._drawBranch(e.children.SW,t)),t.strokeStyle=n,t.beginPath(),t.moveTo(e.range.minX,e.range.minY),t.lineTo(e.range.maxX,e.range.minY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.minY),t.lineTo(e.range.maxX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.maxY),t.lineTo(e.range.minX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.minX,e.range.maxY),t.lineTo(e.range.minX,e.range.minY),t.stroke()}}]),e}(),TG=function(){function e(t,n,i){YF(this,e),this._rng=wR("REPULSION SOLVER"),this.body=t,this.physicsBody=n,this.setOptions(i)}return QF(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,n,i,r,o,s,a,c=this.body.nodes,l=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,u=this.options.nodeDistance,d=-2/3/u,f=0;f<l.length-1;f++){s=c[l[f]];for(var p=f+1;p<l.length;p++)e=(a=c[l[p]]).x-s.x,t=a.y-s.y,0===(n=Math.sqrt(e*e+t*t))&&(e=n=.1*this._rng()),n<2*u&&(o=n<.5*u?1:d*n+1.3333333333333333,i=e*(o/=n),r=t*o,h[s.id].x-=i,h[s.id].y-=r,h[a.id].x+=i,h[a.id].y+=r)}}}]),e}(),OG=function(){function e(t,n,i){YF(this,e),this.body=t,this.physicsBody=n,this.setOptions(i)}return QF(e,[{key:"setOptions",value:function(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var e=this.body.nodes,t=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance,r=0;r<t.length-1;r++)for(var o=e[t[r]],s=r+1;s<t.length;s++){var a=e[t[s]];if(o.level===a.level){var c=i+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(a.shape.radius||0)/2),l=a.x-o.x,h=a.y-o.y,u=Math.sqrt(l*l+h*h),d=void 0;d=u<c?-Math.pow(.05*u,2)+Math.pow(.05*c,2):0,0!==u&&(d/=u);var f=l*d,p=h*d;n[o.id].x-=f,n[o.id].y-=p,n[a.id].x+=f,n[a.id].y+=p}}}}]),e}(),IG=function(){function e(t,n,i){YF(this,e),this.body=t,this.physicsBody=n,this.setOptions(i)}return QF(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,n,i,r,o=this.physicsBody.physicsEdgeIndices,s=this.body.edges,a=0;a<o.length;a++)!0===(t=s[o[a]]).connected&&t.toId!==t.fromId&&void 0!==this.body.nodes[t.toId]&&void 0!==this.body.nodes[t.fromId]&&(void 0!==t.edgeType.via?(e=void 0===t.options.length?this.options.springLength:t.options.length,n=t.to,i=t.edgeType.via,r=t.from,this._calculateSpringForce(n,i,.5*e),this._calculateSpringForce(i,r,.5*e)):(e=void 0===t.options.length?1.5*this.options.springLength:t.options.length,this._calculateSpringForce(t.from,t.to,e)))}},{key:"_calculateSpringForce",value:function(e,t,n){var i=e.x-t.x,r=e.y-t.y,o=Math.max(Math.sqrt(i*i+r*r),.01),s=this.options.springConstant*(n-o)/o,a=i*s,c=r*s;void 0!==this.physicsBody.forces[e.id]&&(this.physicsBody.forces[e.id].x+=a,this.physicsBody.forces[e.id].y+=c),void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x-=a,this.physicsBody.forces[t.id].y-=c)}}]),e}(),AG=function(){function e(t,n,i){YF(this,e),this.body=t,this.physicsBody=n,this.setOptions(i)}return QF(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,n,i,r,o,s,a,c,l,h=this.body.edges,u=.5,d=this.physicsBody.physicsEdgeIndices,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces,v=0;v<f.length;v++){var y=f[v];p[y].springFx=0,p[y].springFy=0}for(var g=0;g<d.length;g++)!0===(t=h[d[g]]).connected&&(e=void 0===t.options.length?this.options.springLength:t.options.length,n=t.from.x-t.to.x,i=t.from.y-t.to.y,a=0===(a=Math.sqrt(n*n+i*i))?.01:a,r=n*(s=this.options.springConstant*(e-a)/a),o=i*s,t.to.level!=t.from.level?(void 0!==p[t.toId]&&(p[t.toId].springFx-=r,p[t.toId].springFy-=o),void 0!==p[t.fromId]&&(p[t.fromId].springFx+=r,p[t.fromId].springFy+=o)):(void 0!==p[t.toId]&&(p[t.toId].x-=u*r,p[t.toId].y-=u*o),void 0!==p[t.fromId]&&(p[t.fromId].x+=u*r,p[t.fromId].y+=u*o)));s=1;for(var m=0;m<f.length;m++){var b=f[m];c=Math.min(s,Math.max(-s,p[b].springFx)),l=Math.min(s,Math.max(-s,p[b].springFy)),p[b].x+=c,p[b].y+=l}for(var _=0,w=0,x=0;x<f.length;x++){var k=f[x];_+=p[k].x,w+=p[k].y}for(var E=_/f.length,C=w/f.length,S=0;S<f.length;S++){var T=f[S];p[T].x-=E,p[T].y-=C}}}]),e}(),LG=function(){function e(t,n,i){YF(this,e),this.body=t,this.physicsBody=n,this.setOptions(i)}return QF(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,n,i,r=this.body.nodes,o=this.physicsBody.physicsNodeIndices,s=this.physicsBody.forces,a=0;a<o.length;a++){e=-(i=r[o[a]]).x,t=-i.y,n=Math.sqrt(e*e+t*t),this._calculateForces(n,e,t,s,i)}}},{key:"_calculateForces",value:function(e,t,n,i,r){var o=0===e?0:this.options.centralGravity/e;i[r.id].x=t*o,i[r.id].y=n*o}}]),e}();function FG(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var PG=function(e){MH(n,e);var t=FG(n);function n(e,i,r){var o;return YF(this,n),(o=t.call(this,e,i,r))._rng=wR("FORCE ATLAS 2 BASED REPULSION SOLVER"),o}return QF(n,[{key:"_calculateForces",value:function(e,t,n,i,r){0===e&&(t=e=.1*this._rng()),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));var o=i.edges.length+1,s=this.options.gravitationalConstant*r.mass*i.options.mass*o/Math.pow(e,2),a=t*s,c=n*s;this.physicsBody.forces[i.id].x+=a,this.physicsBody.forces[i.id].y+=c}}]),n}(SG);function NG(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var MG,DG=function(e){MH(n,e);var t=NG(n);function n(e,i,r){return YF(this,n),t.call(this,e,i,r)}return QF(n,[{key:"_calculateForces",value:function(e,t,n,i,r){if(e>0){var o=r.edges.length+1,s=this.options.centralGravity*o*r.options.mass;i[r.id].x=t*s,i[r.id].y=n*s}}}]),n}(LG),zG=function(){function e(t){YF(this,e),this.body=t,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},yC(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return QF(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("initPhysics",(function(){e.initPhysics()})),this.body.emitter.on("_layoutFailed",(function(){e.layoutFailed=!0})),this.body.emitter.on("resetPhysics",(function(){e.stopSimulation(),e.ready=!1})),this.body.emitter.on("disablePhysics",(function(){e.physicsEnabled=!1,e.stopSimulation()})),this.body.emitter.on("restorePhysics",(function(){e.setOptions(e.options),!0===e.ready&&e.startSimulation()})),this.body.emitter.on("startSimulation",(function(){!0===e.ready&&e.startSimulation()})),this.body.emitter.on("stopSimulation",(function(){e.stopSimulation()})),this.body.emitter.on("destroy",(function(){e.stopSimulation(!1),e.body.emitter.off()})),this.body.emitter.on("_dataChanged",(function(){e.updatePhysicsData()}))}},{key:"setOptions",value:function(e){if(void 0!==e)if(!1===e)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(!0===e)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,DR(["stabilization"],this.options,e),JR(this.options,e,"stabilization"),void 0===e.enabled&&(this.options.enabled=!0),!1===this.options.enabled&&(this.physicsEnabled=!1,this.stopSimulation());var t=this.options.wind;t&&(("number"!=typeof t.x||k$(t.x))&&(t.x=0),("number"!=typeof t.y||k$(t.y))&&(t.y=0)),this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){var e;"forceAtlas2Based"===this.options.solver?(e=this.options.forceAtlas2Based,this.nodesSolver=new PG(this.body,this.physicsBody,e),this.edgesSolver=new IG(this.body,this.physicsBody,e),this.gravitySolver=new DG(this.body,this.physicsBody,e)):"repulsion"===this.options.solver?(e=this.options.repulsion,this.nodesSolver=new TG(this.body,this.physicsBody,e),this.edgesSolver=new IG(this.body,this.physicsBody,e),this.gravitySolver=new LG(this.body,this.physicsBody,e)):"hierarchicalRepulsion"===this.options.solver?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new OG(this.body,this.physicsBody,e),this.edgesSolver=new AG(this.body,this.physicsBody,e),this.gravitySolver=new LG(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new SG(this.body,this.physicsBody,e),this.edgesSolver=new IG(this.body,this.physicsBody,e),this.gravitySolver=new LG(this.body,this.physicsBody,e)),this.modelOptions=e}},{key:"initPhysics",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?!0===this.options.stabilization.enabled?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){var e;!0===this.physicsEnabled&&!0===this.options.enabled?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=BC(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.stabilized=!0,!0===e&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,!0===e&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var e=CN();this.physicsTick(),(CN()-e<.4*this.simulationInterval||!0===this.runDoubleSpeed)&&!1===this.stabilized&&(this.physicsTick(),this.runDoubleSpeed=!0),!0===this.stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||!0===this.startedStabilization)&&mz((function(){e.body.emitter.emit("stabilized",{iterations:t}),e.startedStabilization=!1,e.stabilizationIterations=0}),0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){!0===this._evaluateStepQuality()?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}},{key:"physicsTick",value:function(){if(this._startStabilizing(),!0!==this.stabilized){if(!0===this.adaptiveTimestep&&!0===this.adaptiveTimestepEnabled)this.adaptiveCounter%this.adaptiveInterval==0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1;else this.timestep=this.options.timestep,this.physicsStep();!0===this.stabilized&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var e=this.body.nodes,t=this.body.edges;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&!0===e[n].options.physics&&this.physicsBody.physicsNodeIndices.push(e[n].id);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&!0===t[i].options.physics&&this.physicsBody.physicsEdgeIndices.push(t[i].id);for(var r=0;r<this.physicsBody.physicsNodeIndices.length;r++){var o=this.physicsBody.physicsNodeIndices[r];this.physicsBody.forces[o]={x:0,y:0},void 0===this.physicsBody.velocities[o]&&(this.physicsBody.velocities[o]={x:0,y:0})}for(var s in this.physicsBody.velocities)void 0===e[s]&&delete this.physicsBody.velocities[s]}},{key:"revert",value:function(){var e=_N(this.previousStates),t=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(var i=0;i<e.length;i++){var r=e[i];void 0!==t[r]?!0===t[r].options.physics&&(this.referenceState[r]={positions:{x:t[r].x,y:t[r].y}},n[r].x=this.previousStates[r].vx,n[r].y=this.previousStates[r].vy,t[r].x=this.previousStates[r].x,t[r].y=this.previousStates[r].y):delete this.previousStates[r]}}},{key:"_evaluateStepQuality",value:function(){var e,t,n=this.body.nodes,i=this.referenceState;for(var r in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,r)&&void 0!==n[r]&&(e=n[r].x-i[r].positions.x,t=n[r].y-i[r].positions.y,Math.sqrt(Math.pow(e,2)+Math.pow(t,2))>.3))return!1;return!0}},{key:"moveNodes",value:function(){for(var e=this.physicsBody.physicsNodeIndices,t=0,n=0,i=0;i<e.length;i++){var r=e[i],o=this._performStep(r);t=Math.max(t,o),n+=o}this.adaptiveTimestepEnabled=n/e.length<5,this.stabilized=t<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(e,t,n){e+=(t-this.modelOptions.damping*e)/n*this.timestep;var i=this.options.maxVelocity||1e9;return Math.abs(e)>i&&(e=e>0?i:-i),e}},{key:"_performStep",value:function(e){var t=this.body.nodes[e],n=this.physicsBody.forces[e];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);var i=this.physicsBody.velocities[e];return this.previousStates[e]={x:t.x,y:t.y,vx:i.x,vy:i.y},!1===t.options.fixed.x?(i.x=this.calculateComponentVelocity(i.x,n.x,t.options.mass),t.x+=i.x*this.timestep):(n.x=0,i.x=0),!1===t.options.fixed.y?(i.y=this.calculateComponentVelocity(i.y,n.y,t.options.mass),t.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}},{key:"_freezeNodes",value:function(){var e=this.body.nodes;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t].x&&e[t].y){var n=e[t].options.fixed;this.freezeCache[t]={x:n.x,y:n.y},n.x=!0,n.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var e=this.body.nodes;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&void 0!==this.freezeCache[t]&&(e[t].options.fixed.x=this.freezeCache[t].x,e[t].options.fixed.y=this.freezeCache[t].y);this.freezeCache={}}},{key:"stabilize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.stabilization.iterations;"number"!=typeof t&&(t=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",t)),0!==this.physicsBody.physicsNodeIndices.length?(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=t,!0===this.options.stabilization.onlyDynamicEdges&&this._freezeNodes(),this.stabilizationIterations=0,mz((function(){return e._stabilizationBatch()}),0)):this.ready=!0}},{key:"_startStabilizing",value:function(){return!0!==this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var e=this,t=function(){return!1===e.stabilized&&e.stabilizationIterations<e.targetIterations},n=function(){e.body.emitter.emit("stabilizationProgress",{iterations:e.stabilizationIterations,total:e.targetIterations})};this._startStabilizing()&&n();for(var i,r=0;t()&&r<this.options.stabilization.updateInterval;)this.physicsTick(),r++;(n(),t())?mz(BC(i=this._stabilizationBatch).call(i,this),0):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),!0===this.options.stabilization.fit&&this.body.emitter.emit("fit"),!0===this.options.stabilization.onlyDynamicEdges&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),!0===this.stabilized?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(e){for(var t=0;t<this.physicsBody.physicsNodeIndices.length;t++){var n=this.physicsBody.physicsNodeIndices[t],i=this.body.nodes[n],r=this.physicsBody.forces[n],o=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.x,2)),s=Math.min(Math.max(5,o),15),a=3*s,c=XR((180-180*Math.min(1,Math.max(0,.03*o)))/360,1,1),l={x:i.x+20*r.x,y:i.y+20*r.y};e.lineWidth=s,e.strokeStyle=c,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(l.x,l.y),e.stroke();var h=Math.atan2(r.y,r.x);e.fillStyle=c,sG.draw(e,{type:"arrow",point:l,angle:h,length:a}),Iz(e).call(e)}}}]),e}(),BG=new Uint8Array(16);function RG(){if(!MG&&!(MG="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return MG(BG)}var jG=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function UG(e){return"string"==typeof e&&jG.test(e)}for(var $G=[],HG=0;HG<256;++HG)$G.push((HG+256).toString(16).substr(1));function WG(e,t,n){var i=(e=e||{}).random||(e.rng||RG)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=($G[e[t+0]]+$G[e[t+1]]+$G[e[t+2]]+$G[e[t+3]]+"-"+$G[e[t+4]]+$G[e[t+5]]+"-"+$G[e[t+6]]+$G[e[t+7]]+"-"+$G[e[t+8]]+$G[e[t+9]]+"-"+$G[e[t+10]]+$G[e[t+11]]+$G[e[t+12]]+$G[e[t+13]]+$G[e[t+14]]+$G[e[t+15]]).toLowerCase();if(!UG(n))throw TypeError("Stringified UUID is invalid");return n}(i)}var GG=function(){function e(){YF(this,e)}return QF(e,null,[{key:"getRange",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=1e9,r=-1e9,o=1e9,s=-1e9;if(n.length>0)for(var a=0;a<n.length;a++)o>(t=e[n[a]]).shape.boundingBox.left&&(o=t.shape.boundingBox.left),s<t.shape.boundingBox.right&&(s=t.shape.boundingBox.right),i>t.shape.boundingBox.top&&(i=t.shape.boundingBox.top),r<t.shape.boundingBox.bottom&&(r=t.shape.boundingBox.bottom);return 1e9===o&&-1e9===s&&1e9===i&&-1e9===r&&(i=0,r=0,o=0,s=0),{minX:o,maxX:s,minY:i,maxY:r}}},{key:"getRangeCore",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=1e9,r=-1e9,o=1e9,s=-1e9;if(n.length>0)for(var a=0;a<n.length;a++)o>(t=e[n[a]]).x&&(o=t.x),s<t.x&&(s=t.x),i>t.y&&(i=t.y),r<t.y&&(r=t.y);return 1e9===o&&-1e9===s&&1e9===i&&-1e9===r&&(i=0,r=0,o=0,s=0),{minX:o,maxX:s,minY:i,maxY:r}}},{key:"findCenter",value:function(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}},{key:"cloneOptions",value:function(e,t){var n={};return void 0===t||"node"===t?(zR(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):zR(n,e.options,!0),n}}]),e}();function qG(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var VG=function(e){MH(n,e);var t=qG(n);function n(e,i,r,o,s,a){var c;return YF(this,n),(c=t.call(this,e,i,r,o,s,a)).isCluster=!0,c.containedNodes={},c.containedEdges={},c}return QF(n,[{key:"_openChildCluster",value:function(e){var t=this,n=this.body.nodes[e];if(void 0===this.containedNodes[e])throw new Error("node with id: "+e+" not in current cluster");if(!n.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],UR(n.edges,(function(e){delete t.containedEdges[e.id]})),UR(n.containedNodes,(function(e,n){t.containedNodes[n]=e})),n.containedNodes={},UR(n.containedEdges,(function(e,n){t.containedEdges[n]=e})),n.containedEdges={},UR(n.edges,(function(e){UR(t.edges,(function(n){var i,r,o=ND(i=n.clusteringEdgeReplacingIds).call(i,e.id);-1!==o&&(UR(e.clusteringEdgeReplacingIds,(function(e){n.clusteringEdgeReplacingIds.push(e),t.body.edges[e].edgeReplacedById=n.id})),fM(r=n.clusteringEdgeReplacingIds).call(r,o,1))}))})),n.edges=[]}}]),n}(SW),XG=function(){function e(t){var n=this;YF(this,e),this.body=t,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},yC(this.options,this.defaultOptions),this.body.emitter.on("_resetData",(function(){n.clusteredNodes={},n.clusteredEdges={}}))}return QF(e,[{key:"clusterByHubsize",value:function(e,t){void 0===e?e=this._getHubSize():"object"===eN(e)&&(t=this._checkOptions(e),e=this._getHubSize());for(var n=[],i=0;i<this.body.nodeIndices.length;i++){var r=this.body.nodes[this.body.nodeIndices[i]];r.edges.length>=e&&n.push(r.id)}for(var o=0;o<n.length;o++)this.clusterByConnection(n[o],t,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===t.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");t=this._checkOptions(t);var i={},r={};UR(this.body.nodes,(function(n,o){n.options&&!0===t.joinCondition(n.options)&&(i[o]=n,UR(n.edges,(function(t){void 0===e.clusteredEdges[t.id]&&(r[t.id]=t)})))})),this._cluster(i,r,t,n)}},{key:"clusterByEdgeCount",value:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=this._checkOptions(t);for(var r,o,s,a=[],c={},l=function(i){var l={},h={},u=n.body.nodeIndices[i],d=n.body.nodes[u];if(void 0===c[u]){s=0,o=[];for(var f=0;f<d.edges.length;f++)r=d.edges[f],void 0===n.clusteredEdges[r.id]&&(r.toId!==r.fromId&&s++,o.push(r));if(s===e){for(var p=function(e){if(void 0===t.joinCondition||null===t.joinCondition)return!0;var n=GG.cloneOptions(e);return t.joinCondition(n)},v=!0,y=0;y<o.length;y++){r=o[y];var g=n._getConnectedId(r,u);if(!p(d)){v=!1;break}h[r.id]=r,l[u]=d,l[g]=n.body.nodes[g],c[u]=!0}if(_N(l).length>0&&_N(h).length>0&&!0===v){var m=function(){for(var e=0;e<a.length;++e)for(var t in l)if(void 0!==a[e].nodes[t])return a[e]}();if(void 0!==m){for(var b in l)void 0===m.nodes[b]&&(m.nodes[b]=l[b]);for(var _ in h)void 0===m.edges[_]&&(m.edges[_]=h[_])}else a.push({nodes:l,edges:h})}}}},h=0;h<this.body.nodeIndices.length;h++)l(h);for(var u=0;u<a.length;u++)this._cluster(a[u].nodes,a[u].edges,t,!1);!0===i&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(1,e,t)}},{key:"clusterBridges",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(2,e,t)}},{key:"clusterByConnection",value:function(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===e)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[e])throw new Error("The nodeId given to clusterByConnection does not exist!");var r=this.body.nodes[e];void 0===(t=this._checkOptions(t,r)).clusterNodeProperties.x&&(t.clusterNodeProperties.x=r.x),void 0===t.clusterNodeProperties.y&&(t.clusterNodeProperties.y=r.y),void 0===t.clusterNodeProperties.fixed&&(t.clusterNodeProperties.fixed={},t.clusterNodeProperties.fixed.x=r.options.fixed.x,t.clusterNodeProperties.fixed.y=r.options.fixed.y);var o={},s={},a=r.id,c=GG.cloneOptions(r);o[a]=r;for(var l=0;l<r.edges.length;l++){var h=r.edges[l];if(void 0===this.clusteredEdges[h.id]){var u=this._getConnectedId(h,a);if(void 0===this.clusteredNodes[u])if(u!==a)if(void 0===t.joinCondition)s[h.id]=h,o[u]=this.body.nodes[u];else{var d=GG.cloneOptions(this.body.nodes[u]);!0===t.joinCondition(c,d)&&(s[h.id]=h,o[u]=this.body.nodes[u])}else s[h.id]=h}}var f=gN(n=_N(o)).call(n,(function(e){return o[e].id}));for(var p in o)if(Object.prototype.hasOwnProperty.call(o,p))for(var v=o[p],y=0;y<v.edges.length;y++){var g=v.edges[y];ND(f).call(f,this._getConnectedId(g,v.id))>-1&&(s[g.id]=g)}this._cluster(o,s,t,i)}},{key:"_createClusterEdges",value:function(e,t,n,i){for(var r,o,s,a,c,l,h=_N(e),u=[],d=0;d<h.length;d++){s=e[o=h[d]];for(var f=0;f<s.edges.length;f++)r=s.edges[f],void 0===this.clusteredEdges[r.id]&&(r.toId==r.fromId?t[r.id]=r:r.toId==o?(a=n.id,l=c=r.fromId):(a=r.toId,c=n.id,l=a),void 0===e[l]&&u.push({edge:r,fromId:c,toId:a}))}for(var p=[],v=function(e){for(var t=0;t<p.length;t++){var n=p[t],i=e.fromId===n.fromId&&e.toId===n.toId,r=e.fromId===n.toId&&e.toId===n.fromId;if(i||r)return n}return null},y=0;y<u.length;y++){var g=u[y],m=g.edge,b=v(g);null===b?(b=this._createClusteredEdge(g.fromId,g.toId,m,i),p.push(b)):b.clusteringEdgeReplacingIds.push(m.id),this.body.edges[m.id].edgeReplacedById=b.id,this._backupEdgeOptions(m),m.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===e.clusterEdgeProperties&&(e.clusterEdgeProperties={}),void 0===e.clusterNodeProperties&&(e.clusterNodeProperties={}),e}},{key:"_cluster",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&void 0!==this.clusteredNodes[o]&&r.push(o);for(var s=0;s<r.length;++s)delete e[r[s]];if(0!=_N(e).length&&(1!=_N(e).length||1==n.clusterNodeProperties.allowSingleNodeCluster)){var a=zR({},n.clusterNodeProperties);if(void 0!==n.processProperties){var c=[];for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var h=GG.cloneOptions(e[l]);c.push(h)}var u=[];for(var d in t)if(Object.prototype.hasOwnProperty.call(t,d)&&"clusterEdge:"!==d.substr(0,12)){var f=GG.cloneOptions(t[d],"edge");u.push(f)}if(!(a=n.processProperties(a,c,u)))throw new Error("The processProperties function does not return properties!")}void 0===a.id&&(a.id="cluster:"+WG());var p=a.id;void 0===a.label&&(a.label="cluster");var v=void 0;void 0===a.x&&(v=this._getClusterPosition(e),a.x=v.x),void 0===a.y&&(void 0===v&&(v=this._getClusterPosition(e)),a.y=v.y),a.id=p;var y=this.body.functions.createNode(a,VG);y.containedNodes=e,y.containedEdges=t,y.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[a.id]=y,this._clusterEdges(e,t,a,n.clusterEdgeProperties),a.id=void 0,!0===i&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(e){void 0===this.clusteredEdges[e.id]&&(this.clusteredEdges[e.id]={physics:e.options.physics})}},{key:"_restoreEdge",value:function(e){var t=this.clusteredEdges[e.id];void 0!==t&&(e.setOptions({physics:t.physics}),delete this.clusteredEdges[e.id])}},{key:"isCluster",value:function(e){return void 0!==this.body.nodes[e]?!0===this.body.nodes[e].isCluster:(console.error("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(e){for(var t,n=_N(e),i=e[n[0]].x,r=e[n[0]].x,o=e[n[0]].y,s=e[n[0]].y,a=1;a<n.length;a++)i=(t=e[n[a]]).x<i?t.x:i,r=t.x>r?t.x:r,o=t.y<o?t.y:o,s=t.y>s?t.y:s;return{x:.5*(i+r),y:.5*(o+s)}}},{key:"openCluster",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===e)throw new Error("No clusterNodeId supplied to openCluster.");var i=this.body.nodes[e];if(void 0===i)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(!0!==i.isCluster||void 0===i.containedNodes||void 0===i.containedEdges)throw new Error("The node:"+e+" is not a valid cluster.");var r=this.findNode(e),o=ND(r).call(r,e)-1;if(o>=0){var s=r[o],a=this.body.nodes[s];return a._openChildCluster(e),delete this.body.nodes[e],void(!0===n&&this.body.emitter.emit("_dataChanged"))}var c=i.containedNodes,l=i.containedEdges;if(void 0!==t&&void 0!==t.releaseFunction&&"function"==typeof t.releaseFunction){var h={},u={x:i.x,y:i.y};for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){var f=this.body.nodes[d];h[d]={x:f.x,y:f.y}}var p=t.releaseFunction(u,h);for(var v in c)if(Object.prototype.hasOwnProperty.call(c,v)){var y=this.body.nodes[v];void 0!==p[v]&&(y.x=void 0===p[v].x?i.x:p[v].x,y.y=void 0===p[v].y?i.y:p[v].y)}}else UR(c,(function(e){!1===e.options.fixed.x&&(e.x=i.x),!1===e.options.fixed.y&&(e.y=i.y)}));for(var g in c)if(Object.prototype.hasOwnProperty.call(c,g)){var m=this.body.nodes[g];m.vx=i.vx,m.vy=i.vy,m.setOptions({physics:!0}),delete this.clusteredNodes[g]}for(var b=[],_=0;_<i.edges.length;_++)b.push(i.edges[_]);for(var w=0;w<b.length;w++){for(var x=b[w],k=this._getConnectedId(x,e),E=this.clusteredNodes[k],C=0;C<x.clusteringEdgeReplacingIds.length;C++){var S=x.clusteringEdgeReplacingIds[C],T=this.body.edges[S];if(void 0!==T)if(void 0!==E){var O=this.body.nodes[E.clusterId];O.containedEdges[T.id]=T,delete l[T.id];var I=T.fromId,A=T.toId;T.toId==k?A=E.clusterId:I=E.clusterId,this._createClusteredEdge(I,A,T,O.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(T)}x.remove()}for(var L in l)Object.prototype.hasOwnProperty.call(l,L)&&this._restoreEdge(l[L]);delete this.body.nodes[e],!0===n&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(e){var t=[];if(!0===this.isCluster(e)){var n=this.body.nodes[e].containedNodes;for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(this.body.nodes[i].id)}return t}},{key:"findNode",value:function(e){for(var t,n=[],i=0;void 0!==this.clusteredNodes[e]&&i<100;){if(void 0===(t=this.body.nodes[e]))return[];n.push(t.id),e=this.clusteredNodes[e].clusterId,i++}return void 0===(t=this.body.nodes[e])?[]:(n.push(t.id),VN(n).call(n),n)}},{key:"updateClusteredNode",value:function(e,t){if(void 0===e)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(void 0===t)throw new Error("No newOptions supplied to updateClusteredNode.");if(void 0===this.body.nodes[e])throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(t),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(e,t){if(void 0===e)throw new Error("No startEdgeId supplied to updateEdge.");if(void 0===t)throw new Error("No newOptions supplied to updateEdge.");if(void 0===this.body.edges[e])throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var n=this.getClusteredEdges(e),i=0;i<n.length;i++){this.body.edges[n[i]].setOptions(t)}this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(e){for(var t=[],n=0;void 0!==e&&void 0!==this.body.edges[e]&&n<100;)t.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,n++;return VN(t).call(t),t}},{key:"getBaseEdge",value:function(e){return this.getBaseEdges(e)[0]}},{key:"getBaseEdges",value:function(e){for(var t=[e],n=[],i=[],r=0;t.length>0&&r<100;){var o=t.pop();if(void 0!==o){var s=this.body.edges[o];if(void 0!==s){r++;var a=s.clusteringEdgeReplacingIds;if(void 0===a)i.push(o);else for(var c=0;c<a.length;++c){var l=a[c];-1===ND(t).call(t,a)&&-1===ND(n).call(n,a)&&t.push(l)}n.push(o)}}}return i}},{key:"_getConnectedId",value:function(e,t){return e.toId!=t?e.toId:(e.fromId,e.fromId)}},{key:"_getHubSize",value:function(){for(var e=0,t=0,n=0,i=0,r=0;r<this.body.nodeIndices.length;r++){var o=this.body.nodes[this.body.nodeIndices[r]];o.edges.length>i&&(i=o.edges.length),e+=o.edges.length,t+=Math.pow(o.edges.length,2),n+=1}e/=n;var s=(t/=n)-Math.pow(e,2),a=Math.sqrt(s),c=Math.floor(e+2*a);return c>i&&(c=i),c}},{key:"_createClusteredEdge",value:function(e,t,n,i,r){var o=GG.cloneOptions(n,"edge");zR(o,i),o.from=e,o.to=t,o.id="clusterEdge:"+WG(),void 0!==r&&zR(o,r);var s=this.body.functions.createEdge(o);return s.clusteringEdgeReplacingIds=[n.id],s.connect(),this.body.edges[s.id]=s,s}},{key:"_clusterEdges",value:function(e,t,n,i){if(t instanceof EG){var r=t,o={};o[r.id]=r,t=o}if(e instanceof SW){var s=e,a={};a[s.id]=s,e=a}if(null==n)throw new Error("_clusterEdges: parameter clusterNode required");for(var c in void 0===i&&(i=n.clusterEdgeProperties),this._createClusterEdges(e,t,n,i),t)if(Object.prototype.hasOwnProperty.call(t,c)&&void 0!==this.body.edges[c]){var l=this.body.edges[c];this._backupEdgeOptions(l),l.setOptions({physics:!1})}for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&(this.clusteredNodes[h]={clusterId:n.id,node:this.body.nodes[h]},this.body.nodes[h].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(e){if(void 0!==e){var t=this.clusteredNodes[e];if(void 0!==t){var n=t.clusterId;if(void 0!==n)return this.body.nodes[n]}}}},{key:"_filter",value:function(e,t){var n=[];return UR(e,(function(e){t(e)&&n.push(e)})),n}},{key:"_updateState",value:function(){var e,t=this,n=[],i={},r=function(e){UR(t.body.nodes,(function(t){!0===t.isCluster&&e(t)}))};for(e in this.clusteredNodes){if(Object.prototype.hasOwnProperty.call(this.clusteredNodes,e))void 0===this.body.nodes[e]&&n.push(e)}r((function(e){for(var t=0;t<n.length;t++)delete e.containedNodes[n[t]]}));for(var o=0;o<n.length;o++)delete this.clusteredNodes[n[o]];UR(this.clusteredEdges,(function(e){var n=t.body.edges[e];void 0!==n&&n.endPointsValid()||(i[e]=e)})),r((function(e){UR(e.containedEdges,(function(e,t){e.endPointsValid()||i[t]||(i[t]=t)}))})),UR(this.body.edges,(function(e,n){var r=!0,o=e.clusteringEdgeReplacingIds;if(void 0!==o){var s=0;UR(o,(function(e){var n=t.body.edges[e];void 0!==n&&n.endPointsValid()&&(s+=1)})),r=s>0}e.endPointsValid()&&r||(i[n]=n)})),r((function(e){UR(i,(function(n){delete e.containedEdges[n],UR(e.edges,(function(r,o){r.id!==n?r.clusteringEdgeReplacingIds=t._filter(r.clusteringEdgeReplacingIds,(function(e){return!i[e]})):e.edges[o]=null})),e.edges=t._filter(e.edges,(function(e){return null!==e}))}))})),UR(i,(function(e){delete t.clusteredEdges[e]})),UR(i,(function(e){delete t.body.edges[e]})),UR(_N(this.body.edges),(function(e){var n=t.body.edges[e],i=t._isClusteredNode(n.fromId)||t._isClusteredNode(n.toId);if(i!==t._isClusteredEdge(n.id))if(i){var r=t._getClusterNodeForNode(n.fromId);void 0!==r&&t._clusterEdges(t.body.nodes[n.fromId],n,r);var o=t._getClusterNodeForNode(n.toId);void 0!==o&&t._clusterEdges(t.body.nodes[n.toId],n,o)}else delete t._clusterEdges[e],t._restoreEdge(n)}));for(var s=!1,a=!0,c=function(){var e=[];r((function(t){var n=_N(t.containedNodes).length,i=!0===t.options.allowSingleNodeCluster;(i&&n<1||!i&&n<2)&&e.push(t.id)}));for(var n=0;n<e.length;++n)t.openCluster(e[n],{},!1);a=e.length>0,s=s||a};a;)c();s&&this._updateState()}},{key:"_isClusteredNode",value:function(e){return void 0!==this.clusteredNodes[e]}},{key:"_isClusteredEdge",value:function(e){return void 0!==this.clusteredEdges[e]}}]),e}();function YG(e,t){var n=void 0!==nN&&oA(e)||e["@@iterator"];if(!n){if(hN(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return ZG(e,t);var i=lN(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return UI(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ZG(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function ZG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var KG=function(){function e(t,n){var i;YF(this,e),void 0!==window&&(i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),window.requestAnimationFrame=void 0===i?function(e){e()}:i,this.body=t,this.canvas=n,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},yC(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return QF(e,[{key:"bindEventListeners",value:function(){var e,t=this;this.body.emitter.on("dragStart",(function(){t.dragging=!0})),this.body.emitter.on("dragEnd",(function(){t.dragging=!1})),this.body.emitter.on("zoom",(function(){t.zooming=!0,window.clearTimeout(t.zoomTimeoutId),t.zoomTimeoutId=mz((function(){var e;t.zooming=!1,BC(e=t._requestRedraw).call(e,t)()}),250)})),this.body.emitter.on("_resizeNodes",(function(){t._resizeNodes()})),this.body.emitter.on("_redraw",(function(){!1===t.renderingActive&&t._redraw()})),this.body.emitter.on("_blockRedraw",(function(){t.allowRedraw=!1})),this.body.emitter.on("_allowRedraw",(function(){t.allowRedraw=!0,t.redrawRequested=!1})),this.body.emitter.on("_requestRedraw",BC(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",(function(){t.renderRequests+=1,t.renderingActive=!0,t._startRendering()})),this.body.emitter.on("_stopRendering",(function(){t.renderRequests-=1,t.renderingActive=t.renderRequests>0,t.renderTimer=void 0})),this.body.emitter.on("destroy",(function(){t.renderRequests=0,t.allowRedraw=!1,t.renderingActive=!1,!0===t.requiresTimeout?clearTimeout(t.renderTimer):window.cancelAnimationFrame(t.renderTimer),t.body.emitter.off()}))}},{key:"setOptions",value:function(e){if(void 0!==e){MR(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}}},{key:"_requestNextFrame",value:function(e,t){if("undefined"!=typeof window){var n,i=window;return!0===this.requiresTimeout?n=mz(e,t):i.requestAnimationFrame&&(n=i.requestAnimationFrame(e)),n}}},{key:"_startRendering",value:function(){var e;!0===this.renderingActive&&(void 0===this.renderTimer&&(this.renderTimer=this._requestNextFrame(BC(e=this._renderStep).call(e,this),this.simulationInterval)))}},{key:"_renderStep",value:function(){!0===this.renderingActive&&(this.renderTimer=void 0,!0===this.requiresTimeout&&this._startRendering(),this._redraw(),!1===this.requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var e=this;!0!==this.redrawRequested&&!1===this.renderingActive&&!0===this.allowRedraw&&(this.redrawRequested=!0,this._requestNextFrame((function(){e._redraw(!1)}),0))}},{key:"_redraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.allowRedraw){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var t={drawExternalLabels:null};0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.canvas.setTransform();var n=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,r=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,i,r),0===this.canvas.frame.clientWidth)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),!1===e&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawEdges(n),!1===this.dragging||!0===this.dragging&&!1===this.options.hideNodesOnDrag){var o=this._drawNodes(n,e),s=o.drawExternalLabels;t.drawExternalLabels=s}!1===e&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawArrows(n),null!=t.drawExternalLabels&&t.drawExternalLabels(),!1===e&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),!0===e&&n.clearRect(0,0,i,r)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);var t,n=this.body.nodes;for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&((t=n[i]).resize(e),t.updateBoundingBox(e,t.selected));e.restore()}},{key:"_drawNodes",value:function(e){for(var t,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.body.nodes,o=this.body.nodeIndices,s=[],a=[],c=20,l=this.canvas.DOMtoCanvas({x:-c,y:-c}),h=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+c,y:this.canvas.frame.canvas.clientHeight+c}),u={top:l.y,left:l.x,bottom:h.y,right:h.x},d=[],f=0;f<o.length;f++)if((t=r[o[f]]).hover)a.push(o[f]);else if(t.isSelected())s.push(o[f]);else if(!0===i){var p=t.draw(e);null!=p.drawExternalLabel&&d.push(p.drawExternalLabel)}else if(!0===t.isBoundingBoxOverlappingWith(u)){var v=t.draw(e);null!=v.drawExternalLabel&&d.push(v.drawExternalLabel)}else t.updateBoundingBox(e,t.selected);var y=s.length,g=a.length;for(n=0;n<y;n++){var m=(t=r[s[n]]).draw(e);null!=m.drawExternalLabel&&d.push(m.drawExternalLabel)}for(n=0;n<g;n++){var b=(t=r[a[n]]).draw(e);null!=b.drawExternalLabel&&d.push(b.drawExternalLabel)}return{drawExternalLabels:function(){var e,t=YG(d);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(e){t.e(e)}finally{t.f()}}}}},{key:"_drawEdges",value:function(e){for(var t=this.body.edges,n=this.body.edgeIndices,i=0;i<n.length;i++){var r=t[n[i]];!0===r.connected&&r.draw(e)}}},{key:"_drawArrows",value:function(e){for(var t=this.body.edges,n=this.body.edgeIndices,i=0;i<n.length;i++){var r=t[n[i]];!0===r.connected&&r.drawArrows(e)}}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var e=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,(-1!=ND(e).call(e,"msie 9.0")||-1!=ND(e).call(e,"safari")&&ND(e).call(e,"chrome")<=-1)&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}},{key:"_drawSelectionBox",value:function(e){if(this.body.selectionBox.show){e.beginPath();var t=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,t,n),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,t,n),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}}]),e}(),QG=Qw.setInterval;function JG(e,t){t.inputHandler=function(e){e.isFirst&&t(e)},e.on("hammer.input",t.inputHandler)}function eq(e,t){return t.inputHandler=function(e){e.isFinal&&t(e)},e.on("hammer.input",t.inputHandler)}var tq=function(){function e(t){YF(this,e),this.body=t,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},yC(this.options,this.defaultOptions),this.bindEventListeners()}return QF(e,[{key:"bindEventListeners",value:function(){var e,t=this;this.body.emitter.once("resize",(function(e){0!==e.width&&(t.body.view.translation.x=.5*e.width),0!==e.height&&(t.body.view.translation.y=.5*e.height)})),this.body.emitter.on("setSize",BC(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",(function(){t.hammerFrame.destroy(),t.hammer.destroy(),t._cleanUp()}))}},{key:"setOptions",value:function(e){var t,n,i,r,o,s=this;if(void 0!==e){MR(["width","height","autoResize"],this.options,e)}if(this._cleanUp(),!0===this.options.autoResize){var a;if(window.ResizeObserver){var c=new ResizeObserver((function(){!0===s.setSize()&&s.body.emitter.emit("_requestRedraw")})),l=this.frame;c.observe(l),this._cleanupCallbacks.push((function(){c.unobserve(l)}))}else{var h=QG((function(){!0===s.setSize()&&s.body.emitter.emit("_requestRedraw")}),1e3);this._cleanupCallbacks.push((function(){clearInterval(h)}))}var u=BC(a=this._onResize).call(a,this);t=window,n="resize",i=u,t.addEventListener?(void 0===r&&(r=!1),"mousewheel"===n&&MM(o=navigator.userAgent).call(o,"Firefox")&&(n="DOMMouseScroll"),t.addEventListener(n,i,r)):t.attachEvent("on"+n,i),this._cleanupCallbacks.push((function(){!function(e,t,n,i){var r;e.removeEventListener?(void 0===i&&(i=!1),"mousewheel"===t&&MM(r=navigator.userAgent).call(r,"Firefox")&&(t="DOMMouseScroll"),e.removeEventListener(t,n,i)):e.detachEvent("on"+t,n)}(window,"resize",u)}))}}},{key:"_cleanUp",value:function(){var e,t,n;zN(e=VN(t=fM(n=this._cleanupCallbacks).call(n,0)).call(t)).call(e,(function(e){try{e()}catch(e){console.error(e)}}))}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pixelRatio;!0===this.initialized&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){var e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,t=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,n=this.cameraState.scale;1!=e&&1!=t?n=.5*this.cameraState.scale*(e+t):1!=e?n=this.cameraState.scale*e:1!=t&&(n=this.cameraState.scale*t),this.body.view.scale=n;var i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),r={x:i.x-this.cameraState.position.x,y:i.y-this.cameraState.position.y};this.body.view.translation.x+=r.x*this.body.view.scale,this.body.view.translation.y+=r.y*this.body.view.scale}}},{key:"_prepareValue",value:function(e){if("number"==typeof e)return e+"px";if("string"==typeof e){if(-1!==ND(e).call(e,"%")||-1!==ND(e).call(e,"px"))return e;if(-1===ND(e).call(e,"%"))return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var e=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new fj(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:fj.DIRECTION_ALL}),JG(this.hammer,(function(t){e.body.eventListeners.onTouch(t)})),this.hammer.on("tap",(function(t){e.body.eventListeners.onTap(t)})),this.hammer.on("doubletap",(function(t){e.body.eventListeners.onDoubleTap(t)})),this.hammer.on("press",(function(t){e.body.eventListeners.onHold(t)})),this.hammer.on("panstart",(function(t){e.body.eventListeners.onDragStart(t)})),this.hammer.on("panmove",(function(t){e.body.eventListeners.onDrag(t)})),this.hammer.on("panend",(function(t){e.body.eventListeners.onDragEnd(t)})),this.hammer.on("pinch",(function(t){e.body.eventListeners.onPinch(t)})),this.frame.canvas.addEventListener("wheel",(function(t){e.body.eventListeners.onMouseWheel(t)})),this.frame.canvas.addEventListener("mousemove",(function(t){e.body.eventListeners.onMouseMove(t)})),this.frame.canvas.addEventListener("contextmenu",(function(t){e.body.eventListeners.onContext(t)})),this.hammerFrame=new fj(this.frame),eq(this.hammerFrame,(function(t){e.body.eventListeners.onRelease(t)}))}},{key:"setSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.width,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.height;e=this._prepareValue(e),t=this._prepareValue(t);var n=!1,i=this.frame.canvas.width,r=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||t!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=t)this._getCameraState(o),this.frame.style.width=e,this.frame.style.height=t,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=t,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{var s=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),a=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);this.frame.canvas.width===s&&this.frame.canvas.height===a||this._getCameraState(o),this.frame.canvas.width!==s&&(this.frame.canvas.width=s,n=!0),this.frame.canvas.height!==a&&(this.frame.canvas.height=a,n=!0)}return!0===n&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(r/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var e=this.getContext();if(void 0===e)throw new Error("Could not get canvax context");var t=1;return"undefined"!=typeof window&&(t=window.devicePixelRatio||1),t/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var e=this.getContext();if(void 0===e)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(e){return(e-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(e){return e*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(e){return(e-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(e){return e*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}},{key:"DOMtoCanvas",value:function(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}]),e}();function nq(e,t){var n=yC({nodes:t,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},null!=e?e:{});if(!hN(n.nodes))throw new TypeError("Nodes has to be an array of ids.");if(0===n.nodes.length&&(n.nodes=t),!("number"==typeof n.minZoomLevel&&n.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!("number"==typeof n.maxZoomLevel&&n.minZoomLevel<=n.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return n}var iq=function(){function e(t,n){var i,r,o=this;YF(this,e),this.body=t,this.canvas=n,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",BC(i=this.fit).call(i,this)),this.body.emitter.on("animationFinished",(function(){o.body.emitter.emit("_stopRendering")})),this.body.emitter.on("unlockNode",BC(r=this.releaseNode).call(r,this))}return QF(e,[{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e}},{key:"fit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=nq(e,this.body.nodeIndices);var n,i,r=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(0===r||0===o)i=1,n=GG.getRange(this.body.nodes,e.nodes);else if(!0===t){var s=0;for(var a in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,a)){var c=this.body.nodes[a];!0===c.predefinedPosition&&(s+=1)}if(s>.5*this.body.nodeIndices.length)return void this.fit(e,!1);n=GG.getRange(this.body.nodes,e.nodes);var l=this.body.nodeIndices.length;i=12.662/(l+7.4147)+.0964822;var h=Math.min(r/600,o/600);i*=h}else{this.body.emitter.emit("_resizeNodes"),n=GG.getRange(this.body.nodes,e.nodes);var u=1.1*Math.abs(n.maxX-n.minX),d=1.1*Math.abs(n.maxY-n.minY),f=r/u,p=o/d;i=f<=p?f:p}i>e.maxZoomLevel?i=e.maxZoomLevel:i<e.minZoomLevel&&(i=e.minZoomLevel);var v=GG.findCenter(n),y={position:v,scale:i,animation:e.animation};this.moveTo(y)}},{key:"focus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==this.body.nodes[e]){var n={x:this.body.nodes[e].x,y:this.body.nodes[e].y};t.position=n,t.lockedOnNode=e,this.moveTo(t)}else console.error("Node: "+e+" cannot be found.")}},{key:"moveTo",value:function(e){if(void 0!==e){if(null!=e.offset){if(null!=e.offset.x){if(e.offset.x=+e.offset.x,!S$(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(null!=e.offset.y){if(e.offset.y=+e.offset.y,!S$(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(null!=e.position){if(null!=e.position.x){if(e.position.x=+e.position.x,!S$(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(null!=e.position.y){if(e.position.y=+e.position.y,!S$(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(null!=e.scale){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;void 0===e.animation&&(e.animation={duration:0}),!1===e.animation&&(e.animation={duration:0}),!0===e.animation&&(e.animation={}),void 0===e.animation.duration&&(e.animation.duration=1e3),void 0===e.animation.easingFunction&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}else e={}}},{key:"animateView",value:function(e){if(void 0!==e){this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),!0===e.locked&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;var t,n,i=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),r=i.x-e.position.x,o=i.y-e.position.y;if(this.targetTranslation={x:this.sourceTranslation.x+r*this.targetScale+e.offset.x,y:this.sourceTranslation.y+o*this.targetScale+e.offset.y},0===e.animation.duration)if(null!=this.lockedOnNodeId)this.viewFunction=BC(t=this._lockedRedraw).call(t,this),this.body.emitter.on("initRedraw",this.viewFunction);else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=BC(n=this._transitionRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}},{key:"_lockedRedraw",value:function(){var e=this.body.nodes[this.lockedOnNodeId].x,t=this.body.nodes[this.lockedOnNodeId].y,n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i=n.x-e,r=n.y-t,o=this.body.view.translation,s={x:o.x+i*this.body.view.scale+this.lockedOnNodeOffset.x,y:o.y+r*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=!0===e?1:this.easingTime;var t=ej[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*t,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*t,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*t},this.easingTime>=1){var n;if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,null!=this.lockedOnNodeId)this.viewFunction=BC(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction);this.body.emitter.emit("animationFinished")}}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),e}();function rq(e){var t,n=e&&e.preventDefault||!1,i=e&&e.container||window,r={},o={keydown:{},keyup:{}},s={};for(t=97;t<=122;t++)s[String.fromCharCode(t)]={code:t-97+65,shift:!1};for(t=65;t<=90;t++)s[String.fromCharCode(t)]={code:t,shift:!0};for(t=0;t<=9;t++)s[""+t]={code:48+t,shift:!1};for(t=1;t<=12;t++)s["F"+t]={code:111+t,shift:!1};for(t=0;t<=9;t++)s["num"+t]={code:96+t,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(e){l(e,"keydown")},c=function(e){l(e,"keyup")},l=function(e,t){if(void 0!==o[t][e.keyCode]){for(var i=o[t][e.keyCode],r=0;r<i.length;r++)(void 0===i[r].shift||1==i[r].shift&&1==e.shiftKey||0==i[r].shift&&0==e.shiftKey)&&i[r].fn(e);1==n&&e.preventDefault()}};return r.bind=function(e,t,n){if(void 0===n&&(n="keydown"),void 0===s[e])throw new Error("unsupported key: "+e);void 0===o[n][s[e].code]&&(o[n][s[e].code]=[]),o[n][s[e].code].push({fn:t,shift:s[e].shift})},r.bindAll=function(e,t){for(var n in void 0===t&&(t="keydown"),s)s.hasOwnProperty(n)&&r.bind(n,e,t)},r.getKey=function(e){for(var t in s)if(s.hasOwnProperty(t)){if(1==e.shiftKey&&1==s[t].shift&&e.keyCode==s[t].code)return t;if(0==e.shiftKey&&0==s[t].shift&&e.keyCode==s[t].code)return t;if(e.keyCode==s[t].code&&"shift"==t)return t}return"unknown key, currently not supported"},r.unbind=function(e,t,n){if(void 0===n&&(n="keydown"),void 0===s[e])throw new Error("unsupported key: "+e);if(void 0!==t){var i=[],r=o[n][s[e].code];if(void 0!==r)for(var a=0;a<r.length;a++)r[a].fn==t&&r[a].shift==s[e].shift||i.push(o[n][s[e].code][a]);o[n][s[e].code]=i}else o[n][s[e].code]=[]},r.reset=function(){o={keydown:{},keyup:{}}},r.destroy=function(){o={keydown:{},keyup:{}},i.removeEventListener("keydown",a,!0),i.removeEventListener("keyup",c,!0)},i.addEventListener("keydown",a,!0),i.addEventListener("keyup",c,!0),r}var oq=function(){function e(t,n){var i=this;YF(this,e),this.body=t,this.canvas=n,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",(function(){i.activated=!0,i.configureKeyboardBindings()})),this.body.emitter.on("deactivate",(function(){i.activated=!1,i.configureKeyboardBindings()})),this.body.emitter.on("destroy",(function(){void 0!==i.keycharm&&i.keycharm.destroy()})),this.options={}}return QF(e,[{key:"setOptions",value:function(e){void 0!==e&&(this.options=e,this.create())}},{key:"create",value:function(){!0===this.options.navigationButtons?!1===this.iconsCreated&&this.loadNavigationElements():!0===this.iconsCreated&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var e=this;this.cleanNavigation(),this.navigationDOM={};var t=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],n=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var i=0;i<t.length;i++){this.navigationDOM[t[i]]=document.createElement("div"),this.navigationDOM[t[i]].className="vis-button vis-"+t[i],this.navigationDOM.wrapper.appendChild(this.navigationDOM[t[i]]);var r,o,s=new fj(this.navigationDOM[t[i]]);if("_fit"===n[i])JG(s,BC(r=this._fit).call(r,this));else JG(s,BC(o=this.bindToRedraw).call(o,this,n[i]));this.navigationHammers.push(s)}var a=new fj(this.canvas.frame);eq(a,(function(){e._stopMovement()})),this.navigationHammers.push(a),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(e){var t;void 0===this.boundFunctions[e]&&(this.boundFunctions[e]=BC(t=this[e]).call(t,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(e){void 0!==this.boundFunctions[e]&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}},{key:"_fit",value:function(){(new Date).valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var e=this.body.view.scale,t=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=t/e,r=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=t,this.body.view.translation={x:r,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var e=this.body.view.scale,t=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=t/e,r=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=t,this.body.view.translation={x:r,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var e,t,n,i,r,o,s,a,c,l,h,u,d,f,p,v,y,g,m,b,_,w,x,k,E=this;(void 0!==this.keycharm&&this.keycharm.destroy(),!0===this.options.keyboard.enabled)&&(!0===this.options.keyboard.bindToWindow?this.keycharm=rq({container:window,preventDefault:!0}):this.keycharm=rq({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),!0===this.activated&&(BC(e=this.keycharm).call(e,"up",(function(){E.bindToRedraw("_moveUp")}),"keydown"),BC(t=this.keycharm).call(t,"down",(function(){E.bindToRedraw("_moveDown")}),"keydown"),BC(n=this.keycharm).call(n,"left",(function(){E.bindToRedraw("_moveLeft")}),"keydown"),BC(i=this.keycharm).call(i,"right",(function(){E.bindToRedraw("_moveRight")}),"keydown"),BC(r=this.keycharm).call(r,"=",(function(){E.bindToRedraw("_zoomIn")}),"keydown"),BC(o=this.keycharm).call(o,"num+",(function(){E.bindToRedraw("_zoomIn")}),"keydown"),BC(s=this.keycharm).call(s,"num-",(function(){E.bindToRedraw("_zoomOut")}),"keydown"),BC(a=this.keycharm).call(a,"-",(function(){E.bindToRedraw("_zoomOut")}),"keydown"),BC(c=this.keycharm).call(c,"[",(function(){E.bindToRedraw("_zoomOut")}),"keydown"),BC(l=this.keycharm).call(l,"]",(function(){E.bindToRedraw("_zoomIn")}),"keydown"),BC(h=this.keycharm).call(h,"pageup",(function(){E.bindToRedraw("_zoomIn")}),"keydown"),BC(u=this.keycharm).call(u,"pagedown",(function(){E.bindToRedraw("_zoomOut")}),"keydown"),BC(d=this.keycharm).call(d,"up",(function(){E.unbindFromRedraw("_moveUp")}),"keyup"),BC(f=this.keycharm).call(f,"down",(function(){E.unbindFromRedraw("_moveDown")}),"keyup"),BC(p=this.keycharm).call(p,"left",(function(){E.unbindFromRedraw("_moveLeft")}),"keyup"),BC(v=this.keycharm).call(v,"right",(function(){E.unbindFromRedraw("_moveRight")}),"keyup"),BC(y=this.keycharm).call(y,"=",(function(){E.unbindFromRedraw("_zoomIn")}),"keyup"),BC(g=this.keycharm).call(g,"num+",(function(){E.unbindFromRedraw("_zoomIn")}),"keyup"),BC(m=this.keycharm).call(m,"num-",(function(){E.unbindFromRedraw("_zoomOut")}),"keyup"),BC(b=this.keycharm).call(b,"-",(function(){E.unbindFromRedraw("_zoomOut")}),"keyup"),BC(_=this.keycharm).call(_,"[",(function(){E.unbindFromRedraw("_zoomOut")}),"keyup"),BC(w=this.keycharm).call(w,"]",(function(){E.unbindFromRedraw("_zoomIn")}),"keyup"),BC(x=this.keycharm).call(x,"pageup",(function(){E.unbindFromRedraw("_zoomIn")}),"keyup"),BC(k=this.keycharm).call(k,"pagedown",(function(){E.unbindFromRedraw("_zoomOut")}),"keyup")))}}]),e}();function sq(e,t){var n=void 0!==nN&&oA(e)||e["@@iterator"];if(!n){if(hN(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return aq(e,t);var i=lN(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return UI(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return aq(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function aq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var cq=function(){function e(t,n,i){var r,o,s,a,c,l,h,u,d,f,p,v,y;YF(this,e),this.body=t,this.canvas=n,this.selectionHandler=i,this.navigationHandler=new oq(t,n),this.body.eventListeners.onTap=BC(r=this.onTap).call(r,this),this.body.eventListeners.onTouch=BC(o=this.onTouch).call(o,this),this.body.eventListeners.onDoubleTap=BC(s=this.onDoubleTap).call(s,this),this.body.eventListeners.onHold=BC(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=BC(c=this.onDragStart).call(c,this),this.body.eventListeners.onDrag=BC(l=this.onDrag).call(l,this),this.body.eventListeners.onDragEnd=BC(h=this.onDragEnd).call(h,this),this.body.eventListeners.onMouseWheel=BC(u=this.onMouseWheel).call(u,this),this.body.eventListeners.onPinch=BC(d=this.onPinch).call(d,this),this.body.eventListeners.onMouseMove=BC(f=this.onMouseMove).call(f,this),this.body.eventListeners.onRelease=BC(p=this.onRelease).call(p,this),this.body.eventListeners.onContext=BC(v=this.onContext).call(v,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=BC(y=this.getPointer).call(y,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},yC(this.options,this.defaultOptions),this.bindEventListeners()}return QF(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("destroy",(function(){clearTimeout(e.popupTimer),delete e.body.functions.getPointer}))}},{key:"setOptions",value:function(e){if(void 0!==e){DR(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),JR(this.options,e,"keyboard"),e.tooltip&&(yC(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=GR(e.tooltip.color)))}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(e){return{x:e.x-(t=this.canvas.frame.canvas,t.getBoundingClientRect().left),y:e.y-jR(this.canvas.frame.canvas)};var t}},{key:"onTouch",value:function(e){(new Date).valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(e){var t=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(t,n),this.selectionHandler.commitAndEmit(t,e),this.selectionHandler.generateClickEvent("click",e,t)}},{key:"onDoubleTap",value:function(e){var t=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,t)}},{key:"onHold",value:function(e){var t=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(t,n),this.selectionHandler.commitAndEmit(t,e),this.selectionHandler.generateClickEvent("click",e,t),this.selectionHandler.generateClickEvent("hold",e,t)}},{key:"onRelease",value:function(e){if((new Date).valueOf()-this.touchTime>10){var t=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,t),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(e){var t=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,t)}},{key:"checkSelectionChanges",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!0===t?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}},{key:"_determineDifference",value:function(e,t){var n=function(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i];-1===ND(t).call(t,r)&&n.push(r)}return n};return{nodes:n(e.nodes,t.nodes),edges:n(e.edges,t.edges)}}},{key:"onDragStart",value:function(e){if(!this.drag.dragging){void 0===this.drag.pointer&&this.onTouch(e);var t=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=yC({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;var n=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}if(void 0!==t&&!0===this.options.dragNodes){this.drag.nodeId=t.id,!1===t.isSelected()&&this.selectionHandler.setSelection({nodes:[t.id]}),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);var i,r=sq(this.selectionHandler.getSelectedNodes());try{for(r.s();!(i=r.n()).done;){var o=i.value,s={id:o.id,node:o,x:o.x,y:o.y,xFixed:o.options.fixed.x,yFixed:o.options.fixed.y};o.options.fixed.x=!0,o.options.fixed.y=!0,this.drag.selection.push(s)}}catch(e){r.e(e)}finally{r.f()}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}}},{key:"onDrag",value:function(e){var t=this;if(!0!==this.drag.pinched){this.body.emitter.emit("unlockNode");var n=this.getPointer(e.center),i=this.drag.selection;if(i&&i.length&&!0===this.options.dragNodes){this.selectionHandler.generateClickEvent("dragging",e,n);var r=n.x-this.drag.pointer.x,o=n.y-this.drag.pointer.y;zN(i).call(i,(function(e){var n=e.node;!1===e.xFixed&&(n.x=t.canvas._XconvertDOMtoCanvas(t.canvas._XconvertCanvasToDOM(e.x)+r)),!1===e.yFixed&&(n.y=t.canvas._YconvertDOMtoCanvas(t.canvas._YconvertCanvasToDOM(e.y)+o))})),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,n,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(e);this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.emitter.emit("_requestRedraw")}if(!0===this.options.dragView&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,n,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(e);var s=n.x-this.drag.pointer.x,a=n.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+s,y:this.drag.translation.y+a},this.body.emitter.emit("_requestRedraw")}}}}},{key:"onDragEnd",value:function(e){var t=this;if(this.drag.dragging=!1,this.body.selectionBox.show){var n;this.body.selectionBox.show=!1;var i=this.body.selectionBox.position,r={minX:Math.min(i.start.x,i.end.x),minY:Math.min(i.start.y,i.end.y),maxX:Math.max(i.start.x,i.end.x),maxY:Math.max(i.start.y,i.end.y)},o=VM(n=this.body.nodeIndices).call(n,(function(e){var n=t.body.nodes[e];return n.x>=r.minX&&n.x<=r.maxX&&n.y>=r.minY&&n.y<=r.maxY}));zN(o).call(o,(function(e){return t.selectionHandler.selectObject(t.body.nodes[e])}));var s=this.getPointer(e.center);this.selectionHandler.commitAndEmit(s,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{var a=this.drag.selection;a&&a.length?(zN(a).call(a,(function(e){e.node.options.fixed.x=e.xFixed,e.node.options.fixed.y=e.yFixed})),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}},{key:"onPinch",value:function(e){var t=this.getPointer(e.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var n=this.pinch.scale*e.scale;this.zoom(n,t)}},{key:"zoom",value:function(e,t){if(!0===this.options.zoomView){var n=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);var i=void 0;void 0!==this.drag&&!0===this.drag.dragging&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));var r=this.body.view.translation,o=e/n,s=(1-o)*t.x+r.x*o,a=(1-o)*t.y+r.y*o;if(this.body.view.scale=e,this.body.view.translation={x:s,y:a},null!=i){var c=this.canvas.canvasToDOM(i);this.drag.pointer.x=c.x,this.drag.pointer.y=c.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:t}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:t})}}},{key:"onMouseWheel",value:function(e){if(!0===this.options.zoomView){if(0!==e.deltaY){var t=this.body.view.scale;t*=1+(e.deltaY<0?1:-1)*(.1*this.options.zoomSpeed);var n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(t,n)}e.preventDefault()}}},{key:"onMouseMove",value:function(e){var t=this,n=this.getPointer({x:e.clientX,y:e.clientY}),i=!1;void 0!==this.popup&&(!1===this.popup.hidden&&this._checkHidePopup(n),!1===this.popup.hidden&&(i=!0,this.popup.setPosition(n.x+3,n.y-5),this.popup.show())),this.options.keyboard.autoFocus&&!1===this.options.keyboard.bindToWindow&&!0===this.options.keyboard.enabled&&this.canvas.frame.focus(),!1===i&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=mz((function(){return t._checkShowPopup(n)}),this.options.tooltipDelay))),!0===this.options.hover&&this.selectionHandler.hoverObject(e,n)}},{key:"_checkShowPopup",value:function(e){var t=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),i={left:t,top:n,right:t,bottom:n},r=void 0===this.popupObj?void 0:this.popupObj.id,o=!1,s="node";if(void 0===this.popupObj){for(var a,c=this.body.nodeIndices,l=this.body.nodes,h=[],u=0;u<c.length;u++)!0===(a=l[c[u]]).isOverlappingWith(i)&&(o=!0,void 0!==a.getTitle()&&h.push(c[u]));h.length>0&&(this.popupObj=l[h[h.length-1]],o=!0)}if(void 0===this.popupObj&&!1===o){for(var d,f=this.body.edgeIndices,p=this.body.edges,v=[],y=0;y<f.length;y++)!0===(d=p[f[y]]).isOverlappingWith(i)&&!0===d.connected&&void 0!==d.getTitle()&&v.push(f[y]);v.length>0&&(this.popupObj=p[v[v.length-1]],s="edge")}void 0!==this.popupObj?this.popupObj.id!==r&&(void 0===this.popup&&(this.popup=new pj(this.canvas.frame)),this.popup.popupTargetType=s,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(e){var t=this.selectionHandler._pointerToPositionObject(e),n=!1;if("node"===this.popup.popupTargetType){if(void 0!==this.body.nodes[this.popup.popupTargetId]&&!0===(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(t))){var i=this.selectionHandler.getNodeAt(e);n=void 0!==i&&i.id===this.popup.popupTargetId}}else void 0===this.selectionHandler.getNodeAt(e)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(t));!1===n&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),e}();t$("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),_$);var lq=Qw.Set,hq=ww,uq=i$,dq=Jj.exports.getWeakData,fq=tE,pq=Kw,vq=RU,yq=DU,gq=Vx,mq=VS.set,bq=VS.getterFor,_q=GA.find,wq=GA.findIndex,xq=hq([].splice),kq=0,Eq=function(e){return e.frozen||(e.frozen=new Cq)},Cq=function(){this.entries=[]},Sq=function(e,t){return _q(e.entries,(function(e){return e[0]===t}))};Cq.prototype={get:function(e){var t=Sq(this,e);if(t)return t[1]},has:function(e){return!!Sq(this,e)},set:function(e,t){var n=Sq(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=wq(this.entries,(function(t){return t[0]===e}));return~t&&xq(this.entries,t,1),!!~t}};var Tq,Oq={getConstructor:function(e,t,n,i){var r=e((function(e,r){vq(e,o),mq(e,{type:t,id:kq++,frozen:void 0}),null!=r&&yq(r,e[i],{that:e,AS_ENTRIES:n})})),o=r.prototype,s=bq(t),a=function(e,t,n){var i=s(e),r=dq(fq(t),!0);return!0===r?Eq(i).set(t,n):r[i.id]=n,e};return uq(o,{delete:function(e){var t=s(this);if(!pq(e))return!1;var n=dq(e);return!0===n?Eq(t).delete(e):n&&gq(n,t.id)&&delete n[t.id]},has:function(e){var t=s(this);if(!pq(e))return!1;var n=dq(e);return!0===n?Eq(t).has(e):n&&gq(n,t.id)}}),uq(o,n?{get:function(e){var t=s(this);if(pq(e)){var n=dq(e);return!0===n?Eq(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return a(this,e,t)}}:{add:function(e){return a(this,e,!0)}}),r}},Iq=cw,Aq=ww,Lq=i$,Fq=Jj.exports,Pq=t$,Nq=Oq,Mq=Kw,Dq=sU,zq=VS.enforce,Bq=CS,Rq=!Iq.ActiveXObject&&"ActiveXObject"in Iq,jq=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Uq=Pq("WeakMap",jq,Nq);if(Bq&&Rq){Tq=Nq.getConstructor(jq,"WeakMap",!0),Fq.enable();var $q=Uq.prototype,Hq=Aq($q.delete),Wq=Aq($q.has),Gq=Aq($q.get),qq=Aq($q.set);Lq($q,{delete:function(e){if(Mq(e)&&!Dq(e)){var t=zq(this);return t.frozen||(t.frozen=new Tq),Hq(this,e)||t.frozen.delete(e)}return Hq(this,e)},has:function(e){if(Mq(e)&&!Dq(e)){var t=zq(this);return t.frozen||(t.frozen=new Tq),Wq(this,e)||t.frozen.has(e)}return Wq(this,e)},get:function(e){if(Mq(e)&&!Dq(e)){var t=zq(this);return t.frozen||(t.frozen=new Tq),Wq(this,e)?Gq(this,e):t.frozen.get(e)}return Gq(this,e)},set:function(e,t){if(Mq(e)&&!Dq(e)){var n=zq(this);n.frozen||(n.frozen=new Tq),Wq(this,e)?qq(this,e,t):n.frozen.set(e,t)}else qq(this,e,t);return this}})}var Vq,Xq,Yq,Zq,Kq,Qq=Qw.WeakMap;function Jq(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function eV(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n}function tV(e,t){var n=void 0!==nN&&oA(e)||e["@@iterator"];if(!n){if(hN(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return nV(e,t);var i=lN(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return UI(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return nV(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function nV(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function iV(e,t){var n,i=new lq,r=tV(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.has(o)||i.add(o)}}catch(e){r.e(e)}finally{r.f()}return i}var rV=function(){function e(){YF(this,e),Vq.set(this,new lq),Xq.set(this,new lq)}return QF(e,[{key:"size",get:function(){return Jq(this,Xq,"f").size}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,r=t;i<r.length;i++){var o=r[i];Jq(this,Xq,"f").add(o)}}},{key:"delete",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,r=t;i<r.length;i++){var o=r[i];Jq(this,Xq,"f").delete(o)}}},{key:"clear",value:function(){Jq(this,Xq,"f").clear()}},{key:"getSelection",value:function(){return tN(Jq(this,Xq,"f"))}},{key:"getChanges",value:function(){return{added:tN(iV(Jq(this,Vq,"f"),Jq(this,Xq,"f"))),deleted:tN(iV(Jq(this,Xq,"f"),Jq(this,Vq,"f"))),previous:tN(new lq(Jq(this,Vq,"f"))),current:tN(new lq(Jq(this,Xq,"f")))}}},{key:"commit",value:function(){var e=this.getChanges();eV(this,Vq,Jq(this,Xq,"f"),"f"),eV(this,Xq,new lq(Jq(this,Vq,"f")),"f");var t,n=tV(e.added);try{for(n.s();!(t=n.n()).done;){t.value.select()}}catch(e){n.e(e)}finally{n.f()}var i,r=tV(e.deleted);try{for(r.s();!(i=r.n()).done;){i.value.unselect()}}catch(e){r.e(e)}finally{r.f()}return e}}]),e}();Vq=new Qq,Xq=new Qq;var oV=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};YF(this,e),Yq.set(this,new rV),Zq.set(this,new rV),Kq.set(this,void 0),eV(this,Kq,t,"f")}return QF(e,[{key:"sizeNodes",get:function(){return Jq(this,Yq,"f").size}},{key:"sizeEdges",get:function(){return Jq(this,Zq,"f").size}},{key:"getNodes",value:function(){return Jq(this,Yq,"f").getSelection()}},{key:"getEdges",value:function(){return Jq(this,Zq,"f").getSelection()}},{key:"addNodes",value:function(){var e;(e=Jq(this,Yq,"f")).add.apply(e,arguments)}},{key:"addEdges",value:function(){var e;(e=Jq(this,Zq,"f")).add.apply(e,arguments)}},{key:"deleteNodes",value:function(e){Jq(this,Yq,"f").delete(e)}},{key:"deleteEdges",value:function(e){Jq(this,Zq,"f").delete(e)}},{key:"clear",value:function(){Jq(this,Yq,"f").clear(),Jq(this,Zq,"f").clear()}},{key:"commit",value:function(){for(var e,t,n={nodes:Jq(this,Yq,"f").commit(),edges:Jq(this,Zq,"f").commit()},i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=Jq(this,Kq,"f")).call.apply(e,cN(t=[this,n]).call(t,r)),n}}]),e}();function sV(e,t){var n=void 0!==nN&&oA(e)||e["@@iterator"];if(!n){if(hN(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return aV(e,t);var i=lN(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return UI(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return aV(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function aV(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Yq=new Qq,Zq=new Qq,Kq=new Qq;var cV=function(){function e(t,n){var i=this;YF(this,e),this.body=t,this.canvas=n,this._selectionAccumulator=new oV,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},yC(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",(function(){i.updateSelection()}))}return QF(e,[{key:"setOptions",value:function(e){if(void 0!==e){MR(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}}},{key:"selectOnPoint",value:function(e){var t=!1;if(!0===this.options.selectable){var n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),void 0!==n&&(t=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return t}},{key:"selectAdditionalOnPoint",value:function(e){var t=!1;if(!0===this.options.selectable){var n=this.getNodeAt(e)||this.getEdgeAt(e);void 0!==n&&(t=!0,!0===n.isSelected()?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return t}},{key:"_initBaseEvent",value:function(e,t){var n={};return n.pointer={DOM:{x:t.x,y:t.y},canvas:this.canvas.DOMtoCanvas(t)},n.event=e,n}},{key:"generateClickEvent",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this._initBaseEvent(t,n);if(!0===r)o.nodes=[],o.edges=[];else{var s=this.getSelection();o.nodes=s.nodes,o.edges=s.edges}void 0!==i&&(o.previousSelection=i),"click"==e&&(o.items=this.getClickedItems(n)),void 0!==t.controlEdge&&(o.controlEdge=t.controlEdge),this.body.emitter.emit(e,o)}},{key:"selectObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.selectConnectedEdges;if(void 0!==e){if(e instanceof SW){var n;if(!0===t)(n=this._selectionAccumulator).addEdges.apply(n,tN(e.edges));this._selectionAccumulator.addNodes(e)}else this._selectionAccumulator.addEdges(e);return!0}return!1}},{key:"deselectObject",value:function(e){!0===e.isSelected()&&(e.selected=!1,this._removeFromSelection(e))}},{key:"_getAllNodesOverlappingWith",value:function(e){for(var t=[],n=this.body.nodes,i=0;i<this.body.nodeIndices.length;i++){var r=this.body.nodeIndices[i];n[r].isOverlappingWith(e)&&t.push(r)}return t}},{key:"_pointerToPositionObject",value:function(e){var t=this.canvas.DOMtoCanvas(e);return{left:t.x-1,top:t.y+1,right:t.x+1,bottom:t.y-1}}},{key:"getNodeAt",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._pointerToPositionObject(e),i=this._getAllNodesOverlappingWith(n);return i.length>0?!0===t?this.body.nodes[i[i.length-1]]:i[i.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(e,t){for(var n=this.body.edges,i=0;i<this.body.edgeIndices.length;i++){var r=this.body.edgeIndices[i];n[r].isOverlappingWith(e)&&t.push(r)}}},{key:"_getAllEdgesOverlappingWith",value:function(e){var t=[];return this._getEdgesOverlappingWith(e,t),t}},{key:"getEdgeAt",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.canvas.DOMtoCanvas(e),i=10,r=null,o=this.body.edges,s=0;s<this.body.edgeIndices.length;s++){var a=this.body.edgeIndices[s],c=o[a];if(c.connected){var l=c.from.x,h=c.from.y,u=c.to.x,d=c.to.y,f=c.edgeType.getDistanceToEdge(l,h,u,d,n.x,n.y);f<i&&(r=a,i=f)}}return null!==r?!0===t?this.body.edges[r]:r:void 0}},{key:"_addToHover",value:function(e){e instanceof SW?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}},{key:"_removeFromSelection",value:function(e){var t;e instanceof SW?(this._selectionAccumulator.deleteNodes(e),(t=this._selectionAccumulator).deleteEdges.apply(t,tN(e.edges))):this._selectionAccumulator.deleteEdges(e)}},{key:"unselectAll",value:function(){this._selectionAccumulator.clear()}},{key:"getSelectedNodeCount",value:function(){return this._selectionAccumulator.sizeNodes}},{key:"getSelectedEdgeCount",value:function(){return this._selectionAccumulator.sizeEdges}},{key:"_hoverConnectedEdges",value:function(e){for(var t=0;t<e.edges.length;t++){var n=e.edges[t];n.hover=!0,this._addToHover(n)}}},{key:"emitBlurEvent",value:function(e,t,n){var i=this._initBaseEvent(e,t);!0===n.hover&&(n.hover=!1,n instanceof SW?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}},{key:"emitHoverEvent",value:function(e,t,n){var i=this._initBaseEvent(e,t),r=!1;return!1===n.hover&&(n.hover=!0,this._addToHover(n),r=!0,n instanceof SW?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),r}},{key:"hoverObject",value:function(e,t){var n=this.getNodeAt(t);void 0===n&&(n=this.getEdgeAt(t));var i=!1;for(var r in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,r)&&(void 0===n||n instanceof SW&&n.id!=r||n instanceof EG)&&(this.emitBlurEvent(e,t,this.hoverObj.nodes[r]),delete this.hoverObj.nodes[r],i=!0);for(var o in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,o)&&(!0===i?(this.hoverObj.edges[o].hover=!1,delete this.hoverObj.edges[o]):(void 0===n||n instanceof EG&&n.id!=o||n instanceof SW&&!n.hover)&&(this.emitBlurEvent(e,t,this.hoverObj.edges[o]),delete this.hoverObj.edges[o],i=!0));if(void 0!==n){var s=_N(this.hoverObj.edges).length,a=_N(this.hoverObj.nodes).length;(i||n instanceof EG&&0===s&&0===a||n instanceof SW&&0===s&&0===a)&&(i=this.emitHoverEvent(e,t,n)),n instanceof SW&&!0===this.options.hoverConnectedEdges&&this._hoverConnectedEdges(n)}!0===i&&this.body.emitter.emit("_requestRedraw")}},{key:"commitWithoutEmitting",value:function(){this._selectionAccumulator.commit()}},{key:"commitAndEmit",value:function(e,t){var n=!1,i=this._selectionAccumulator.commit(),r={nodes:i.nodes.previous,edges:i.edges.previous};i.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",t,e,r),n=!0),i.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",t,e,r),n=!0),i.nodes.added.length>0&&(this.generateClickEvent("selectNode",t,e),n=!0),i.edges.added.length>0&&(this.generateClickEvent("selectEdge",t,e),n=!0),!0===n&&this.generateClickEvent("select",t,e)}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}},{key:"getSelectedNodes",value:function(){return this._selectionAccumulator.getNodes()}},{key:"getSelectedEdges",value:function(){return this._selectionAccumulator.getEdges()}},{key:"getSelectedNodeIds",value:function(){var e;return gN(e=this._selectionAccumulator.getNodes()).call(e,(function(e){return e.id}))}},{key:"getSelectedEdgeIds",value:function(){var e;return gN(e=this._selectionAccumulator.getEdges()).call(e,(function(e){return e.id}))}},{key:"setSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((t.unselectAll||void 0===t.unselectAll)&&this.unselectAll(),e.nodes){var n,i=sV(e.nodes);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=this.body.nodes[r];if(!o)throw new RangeError('Node with id "'+r+'" not found');this.selectObject(o,t.highlightEdges)}}catch(e){i.e(e)}finally{i.f()}}if(e.edges){var s,a=sV(e.edges);try{for(a.s();!(s=a.n()).done;){var c=s.value,l=this.body.edges[c];if(!l)throw new RangeError('Edge with id "'+c+'" not found');this.selectObject(l)}}catch(e){a.e(e)}finally{a.f()}}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}},{key:"selectNodes",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||void 0===e.length)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:t})}},{key:"selectEdges",value:function(e){if(!e||void 0===e.length)throw"Selection must be an array with ids";this.setSelection({edges:e})}},{key:"updateSelection",value:function(){for(var e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(var t in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,t.id)||this._selectionAccumulator.deleteEdges(t)}},{key:"getClickedItems",value:function(e){for(var t=this.canvas.DOMtoCanvas(e),n=[],i=this.body.nodeIndices,r=this.body.nodes,o=i.length-1;o>=0;o--){var s=r[i[o]].getItemsOnPoint(t);n.push.apply(n,s)}for(var a=this.body.edgeIndices,c=this.body.edges,l=a.length-1;l>=0;l--){var h=c[a[l]].getItemsOnPoint(t);n.push.apply(n,h)}return n}}]),e}(),lV=gA,hV=Math.floor,uV=function(e,t){var n=e.length,i=hV(n/2);return n<8?dV(e,t):fV(e,uV(lV(e,0,i),t),uV(lV(e,i),t),t)},dV=function(e,t){for(var n,i,r=e.length,o=1;o<r;){for(i=o,n=e[o];i&&t(e[i-1],n)>0;)e[i]=e[--i];i!==o++&&(e[i]=n)}return e},fV=function(e,t,n,i){for(var r=t.length,o=n.length,s=0,a=0;s<r||a<o;)e[s+a]=s<r&&a<o?i(t[s],n[a])<=0?t[s++]:n[a++]:s<r?t[s++]:n[a++];return e},pV=uV,vV=ox.match(/firefox\/(\d+)/i),yV=!!vV&&+vV[1],gV=/MSIE|Trident/.test(ox),mV=ox.match(/AppleWebKit\/(\d+)\./),bV=!!mV&&+mV[1],_V=TE,wV=ww,xV=Ox,kV=Wx,EV=BE,CV=oS,SV=lw,TV=pV,OV=TN,IV=yV,AV=gV,LV=dx,FV=bV,PV=[],NV=wV(PV.sort),MV=wV(PV.push),DV=SV((function(){PV.sort(void 0)})),zV=SV((function(){PV.sort(null)})),BV=OV("sort"),RV=!SV((function(){if(LV)return LV<70;if(!(IV&&IV>3)){if(AV)return!0;if(FV)return FV<603;var e,t,n,i,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)PV.push({k:t+i,v:n})}for(PV.sort((function(e,t){return t.v-e.v})),i=0;i<PV.length;i++)t=PV[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));_V({target:"Array",proto:!0,forced:DV||!zV||!BV||!RV},{sort:function(e){void 0!==e&&xV(e);var t=kV(this);if(RV)return void 0===e?NV(t):NV(t,e);var n,i,r=[],o=EV(t);for(i=0;i<o;i++)i in t&&MV(r,t[i]);for(TV(r,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:CV(t)>CV(n)?1:-1}}(e)),n=r.length,i=0;i<n;)t[i]=r[i++];for(;i<o;)delete t[i++];return t}});var jV=FC("Array").sort,UV=rx,$V=jV,HV=Array.prototype,WV=function(e){var t=e.sort;return e===HV||UV(HV,e)&&t===HV.sort?$V:t},GV=WV,qV=Ox,VV=Wx,XV=Ww,YV=BE,ZV=cw.TypeError,KV=function(e){return function(t,n,i,r){qV(n);var o=VV(t),s=XV(o),a=YV(o),c=e?a-1:0,l=e?-1:1;if(i<2)for(;;){if(c in s){r=s[c],c+=l;break}if(c+=l,e?c<0:a<=c)throw ZV("Reduce of empty array with no initial value")}for(;e?c>=0:a>c;c+=l)c in s&&(r=n(r,s[c],c,o));return r}},QV={left:KV(!1),right:KV(!0)},JV="process"==Bw(cw.process),eX=QV.left,tX=dx,nX=JV;TE({target:"Array",proto:!0,forced:!TN("reduce")||!nX&&tX>79&&tX<83},{reduce:function(e){var t=arguments.length;return eX(this,e,t,t>1?arguments[1]:void 0)}});var iX=FC("Array").reduce,rX=rx,oX=iX,sX=Array.prototype,aX=function(e){var t=e.reduce;return e===sX||rX(sX,e)&&t===sX.reduce?oX:t},cX=aX,lX={};(function(e){function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.sort=v;var n=32,i=7,r=256,o=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function s(e){return e<1e5?e<100?e<10?0:1:e<1e4?e<1e3?2:3:4:e<1e7?e<1e6?5:6:e<1e9?e<1e8?7:8:9}function a(e,t){if(e===t)return 0;if(~~e===e&&~~t===t){if(0===e||0===t)return e<t?-1:1;if(e<0||t<0){if(t>=0)return-1;if(e>=0)return 1;e=-e,t=-t}var n=s(e),i=s(t),r=0;return n<i?(e*=o[i-n-1],t/=10,r=-1):n>i&&(t*=o[n-i-1],e/=10,r=1),e===t?r:e<t?-1:1}var a=String(e),c=String(t);return a===c?0:a<c?-1:1}function c(e){for(var t=0;e>=n;)t|=1&e,e>>=1;return e+t}function l(e,t,n,i){var r=t+1;if(r===n)return 1;if(i(e[r++],e[t])<0){for(;r<n&&i(e[r],e[r-1])<0;)r++;h(e,t,r)}else for(;r<n&&i(e[r],e[r-1])>=0;)r++;return r-t}function h(e,t,n){for(n--;t<n;){var i=e[t];e[t++]=e[n],e[n--]=i}}function u(e,t,n,i,r){for(i===t&&i++;i<n;i++){for(var o=e[i],s=t,a=i;s<a;){var c=s+a>>>1;r(o,e[c])<0?a=c:s=c+1}var l=i-s;switch(l){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:for(;l>0;)e[s+l]=e[s+l-1],l--}e[s]=o}}function d(e,t,n,i,r,o){var s=0,a=0,c=1;if(o(e,t[n+r])>0){for(a=i-r;c<a&&o(e,t[n+r+c])>0;)s=c,(c=1+(c<<1))<=0&&(c=a);c>a&&(c=a),s+=r,c+=r}else{for(a=r+1;c<a&&o(e,t[n+r-c])<=0;)s=c,(c=1+(c<<1))<=0&&(c=a);c>a&&(c=a);var l=s;s=r-c,c=r-l}for(s++;s<c;){var h=s+(c-s>>>1);o(e,t[n+h])>0?s=h+1:c=h}return c}function f(e,t,n,i,r,o){var s=0,a=0,c=1;if(o(e,t[n+r])<0){for(a=r+1;c<a&&o(e,t[n+r-c])<0;)s=c,(c=1+(c<<1))<=0&&(c=a);c>a&&(c=a);var l=s;s=r-c,c=r-l}else{for(a=i-r;c<a&&o(e,t[n+r+c])>=0;)s=c,(c=1+(c<<1))<=0&&(c=a);c>a&&(c=a),s+=r,c+=r}for(s++;s<c;){var h=s+(c-s>>>1);o(e,t[n+h])<0?c=h:s=h+1}return c}var p=function(){function e(n,o){t(this,e),this.array=null,this.compare=null,this.minGallop=i,this.length=0,this.tmpStorageLength=r,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=n,this.compare=o,this.length=n.length,this.length<2*r&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return e.prototype.pushRun=function(e,t){this.runStart[this.stackSize]=e,this.runLength[this.stackSize]=t,this.stackSize+=1},e.prototype.mergeRuns=function(){for(;this.stackSize>1;){var e=this.stackSize-2;if(e>=1&&this.runLength[e-1]<=this.runLength[e]+this.runLength[e+1]||e>=2&&this.runLength[e-2]<=this.runLength[e]+this.runLength[e-1])this.runLength[e-1]<this.runLength[e+1]&&e--;else if(this.runLength[e]>this.runLength[e+1])break;this.mergeAt(e)}},e.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var e=this.stackSize-2;e>0&&this.runLength[e-1]<this.runLength[e+1]&&e--,this.mergeAt(e)}},e.prototype.mergeAt=function(e){var t=this.compare,n=this.array,i=this.runStart[e],r=this.runLength[e],o=this.runStart[e+1],s=this.runLength[e+1];this.runLength[e]=r+s,e===this.stackSize-3&&(this.runStart[e+1]=this.runStart[e+2],this.runLength[e+1]=this.runLength[e+2]),this.stackSize--;var a=f(n[o],n,i,r,0,t);i+=a,0!=(r-=a)&&0!==(s=d(n[i+r-1],n,o,s,s-1,t))&&(r<=s?this.mergeLow(i,r,o,s):this.mergeHigh(i,r,o,s))},e.prototype.mergeLow=function(e,t,n,r){var o=this.compare,s=this.array,a=this.tmp,c=0;for(c=0;c<t;c++)a[c]=s[e+c];var l=0,h=n,u=e;if(s[u++]=s[h++],0!=--r)if(1!==t){for(var p=this.minGallop;;){var v=0,y=0,g=!1;do{if(o(s[h],a[l])<0){if(s[u++]=s[h++],y++,v=0,0==--r){g=!0;break}}else if(s[u++]=a[l++],v++,y=0,1==--t){g=!0;break}}while((v|y)<p);if(g)break;do{if(0!==(v=f(s[h],a,l,t,0,o))){for(c=0;c<v;c++)s[u+c]=a[l+c];if(u+=v,l+=v,(t-=v)<=1){g=!0;break}}if(s[u++]=s[h++],0==--r){g=!0;break}if(0!==(y=d(a[l],s,h,r,0,o))){for(c=0;c<y;c++)s[u+c]=s[h+c];if(u+=y,h+=y,0==(r-=y)){g=!0;break}}if(s[u++]=a[l++],1==--t){g=!0;break}p--}while(v>=i||y>=i);if(g)break;p<0&&(p=0),p+=2}if(this.minGallop=p,p<1&&(this.minGallop=1),1===t){for(c=0;c<r;c++)s[u+c]=s[h+c];s[u+r]=a[l]}else{if(0===t)throw new Error("mergeLow preconditions were not respected");for(c=0;c<t;c++)s[u+c]=a[l+c]}}else{for(c=0;c<r;c++)s[u+c]=s[h+c];s[u+r]=a[l]}else for(c=0;c<t;c++)s[u+c]=a[l+c]},e.prototype.mergeHigh=function(e,t,n,r){var o=this.compare,s=this.array,a=this.tmp,c=0;for(c=0;c<r;c++)a[c]=s[n+c];var l=e+t-1,h=r-1,u=n+r-1,p=0,v=0;if(s[u--]=s[l--],0!=--t)if(1!==r){for(var y=this.minGallop;;){var g=0,m=0,b=!1;do{if(o(a[h],s[l])<0){if(s[u--]=s[l--],g++,m=0,0==--t){b=!0;break}}else if(s[u--]=a[h--],m++,g=0,1==--r){b=!0;break}}while((g|m)<y);if(b)break;do{if(0!=(g=t-f(a[h],s,e,t,t-1,o))){for(t-=g,v=1+(u-=g),p=1+(l-=g),c=g-1;c>=0;c--)s[v+c]=s[p+c];if(0===t){b=!0;break}}if(s[u--]=a[h--],1==--r){b=!0;break}if(0!=(m=r-d(s[l],a,0,r,r-1,o))){for(r-=m,v=1+(u-=m),p=1+(h-=m),c=0;c<m;c++)s[v+c]=a[p+c];if(r<=1){b=!0;break}}if(s[u--]=s[l--],0==--t){b=!0;break}y--}while(g>=i||m>=i);if(b)break;y<0&&(y=0),y+=2}if(this.minGallop=y,y<1&&(this.minGallop=1),1===r){for(v=1+(u-=t),p=1+(l-=t),c=t-1;c>=0;c--)s[v+c]=s[p+c];s[u]=a[h]}else{if(0===r)throw new Error("mergeHigh preconditions were not respected");for(p=u-(r-1),c=0;c<r;c++)s[p+c]=a[c]}}else{for(v=1+(u-=t),p=1+(l-=t),c=t-1;c>=0;c--)s[v+c]=s[p+c];s[u]=a[h]}else for(p=u-(r-1),c=0;c<r;c++)s[p+c]=a[c]},e}();function v(e,t,i,r){if(!Array.isArray(e))throw new TypeError("Can only sort arrays");t?"function"!=typeof t&&(r=i,i=t,t=a):t=a,i||(i=0),r||(r=e.length);var o=r-i;if(!(o<2)){var s=0;if(o<n)u(e,i,r,i+(s=l(e,i,r,t)),t);else{var h=new p(e,t),d=c(o);do{if((s=l(e,i,r,t))<d){var f=o;f>d&&(f=d),u(e,i,i+f,i+s,t),s=f}h.pushRun(i,s),h.mergeRuns(),o-=s,i+=s}while(0!==o);h.forceMergeRuns()}}}})(lX);var hX=lX;function uX(e){var t=function(){if("undefined"==typeof Reflect||!LH)return!1;if(LH.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(LH(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=BH(e);if(t){var r=BH(this).constructor;n=LH(i,arguments,r)}else n=i.apply(this,arguments);return DH(this,n)}}var dX=function(){function e(){YF(this,e)}return QF(e,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(e){return this.fake_use(e),this.abstract()}},{key:"setPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.fake_use(e,t,n),this.abstract()}},{key:"getTreeSize",value:function(e){return this.fake_use(e),this.abstract()}},{key:"sort",value:function(e){this.fake_use(e),this.abstract()}},{key:"fix",value:function(e,t){this.fake_use(e,t),this.abstract()}},{key:"shift",value:function(e,t){this.fake_use(e,t),this.abstract()}}]),e}(),fX=function(e){MH(n,e);var t=uX(n);function n(e){var i;return YF(this,n),(i=t.call(this)).layout=e,i}return QF(n,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(e){return e.x}},{key:"setPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==n&&this.layout.hierarchical.addToOrdering(e,n),e.x=t}},{key:"getTreeSize",value:function(e){var t=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:t.min_x,max:t.max_x}}},{key:"sort",value:function(e){hX.sort(e,(function(e,t){return e.x-t.x}))}},{key:"fix",value:function(e,t){e.y=this.layout.options.hierarchical.levelSeparation*t,e.options.fixed.y=!0}},{key:"shift",value:function(e,t){this.layout.body.nodes[e].x+=t}}]),n}(dX),pX=function(e){MH(n,e);var t=uX(n);function n(e){var i;return YF(this,n),(i=t.call(this)).layout=e,i}return QF(n,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(e){return e.y}},{key:"setPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==n&&this.layout.hierarchical.addToOrdering(e,n),e.y=t}},{key:"getTreeSize",value:function(e){var t=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:t.min_y,max:t.max_y}}},{key:"sort",value:function(e){hX.sort(e,(function(e,t){return e.y-t.y}))}},{key:"fix",value:function(e,t){e.x=this.layout.options.hierarchical.levelSeparation*t,e.options.fixed.x=!0}},{key:"shift",value:function(e,t){this.layout.body.nodes[e].y+=t}}]),n}(dX),vX=GA.every;TE({target:"Array",proto:!0,forced:!TN("every")},{every:function(e){return vX(this,e,arguments.length>1?arguments[1]:void 0)}});var yX=FC("Array").every,gX=rx,mX=yX,bX=Array.prototype,_X=function(e){var t=e.every;return e===bX||gX(bX,e)&&t===bX.every?mX:t},wX=_X;function xX(e,t){var n=void 0!==nN&&oA(e)||e["@@iterator"];if(!n){if(hN(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return kX(e,t);var i=lN(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return UI(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return kX(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function kX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function EX(e,t){var n=new lq;return zN(e).call(e,(function(e){var t;zN(t=e.edges).call(t,(function(e){e.connected&&n.add(e)}))})),zN(n).call(n,(function(e){var n=e.from.id,i=e.to.id;null==t[n]&&(t[n]=0),(null==t[i]||t[n]>=t[i])&&(t[i]=t[n]+1)})),t}function CX(e,t,n,i){var r,o,s=UD(null),a=cX(r=tN(aH(i).call(i))).call(r,(function(e,t){return e+1+t.edges.length}),0),c=n+"Id",l="to"===n?1:-1,h=xX(i);try{var u=function(){var r=QP(o.value,2),h=r[0],u=r[1];if(!i.has(h)||!e(u))return"continue";s[h]=0;for(var d=[u],f=0,p=void 0,v=function(){var e,r;if(!i.has(h))return"continue";var o=s[p.id]+l;if(zN(e=VM(r=p.edges).call(r,(function(e){return e.connected&&e.to!==e.from&&e[n]!==p&&i.has(e.toId)&&i.has(e.fromId)}))).call(e,(function(e){var i=e[c],r=s[i];(null==r||t(o,r))&&(s[i]=o,d.push(e[n]))})),f>a)return{v:{v:EX(i,s)}};++f};p=d.pop();){var y=v();if("continue"!==y&&"object"===eN(y))return y.v}};for(h.s();!(o=h.n()).done;){var d=u();if("continue"!==d&&"object"===eN(d))return d.v}}catch(e){h.e(e)}finally{h.f()}return s}var SX=function(){function e(){YF(this,e),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return QF(e,[{key:"addRelation",value:function(e,t){void 0===this.childrenReference[e]&&(this.childrenReference[e]=[]),this.childrenReference[e].push(t),void 0===this.parentReference[t]&&(this.parentReference[t]=[]),this.parentReference[t].push(e)}},{key:"checkIfTree",value:function(){for(var e in this.parentReference)if(this.parentReference[e].length>1)return void(this.isTree=!1);this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(e,t){void 0!==t&&void 0===this.trees[e.id]&&(this.trees[e.id]=t,this.treeIndex=Math.max(t,this.treeIndex))}},{key:"ensureLevel",value:function(e){void 0===this.levels[e]&&(this.levels[e]=0)}},{key:"getMaxLevel",value:function(e){var t=this,n={};return function e(i){if(void 0!==n[i])return n[i];var r=t.levels[i];if(t.childrenReference[i]){var o=t.childrenReference[i];if(o.length>0)for(var s=0;s<o.length;s++)r=Math.max(r,e(o[s]))}return n[i]=r,r}(e)}},{key:"levelDownstream",value:function(e,t){void 0===this.levels[t.id]&&(void 0===this.levels[e.id]&&(this.levels[e.id]=0),this.levels[t.id]=this.levels[e.id]+1)}},{key:"setMinLevelToZero",value:function(e){var t=1e9;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&void 0!==this.levels[n]&&(t=Math.min(this.levels[n],t));for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&void 0!==this.levels[i]&&(this.levels[i]-=t)}},{key:"getTreeSize",value:function(e,t){var n=1e9,i=-1e9,r=1e9,o=-1e9;for(var s in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,s)&&this.trees[s]===t){var a=e[s];n=Math.min(a.x,n),i=Math.max(a.x,i),r=Math.min(a.y,r),o=Math.max(a.y,o)}return{min_x:n,max_x:i,min_y:r,max_y:o}}},{key:"hasSameParent",value:function(e,t){var n=this.parentReference[e.id],i=this.parentReference[t.id];if(void 0===n||void 0===i)return!1;for(var r=0;r<n.length;r++)for(var o=0;o<i.length;o++)if(n[r]==i[o])return!0;return!1}},{key:"inSameSubNetwork",value:function(e,t){return this.trees[e.id]===this.trees[t.id]}},{key:"getLevels",value:function(){return _N(this.distributionOrdering)}},{key:"addToOrdering",value:function(e,t){void 0===this.distributionOrdering[t]&&(this.distributionOrdering[t]=[]);var n=!1,i=this.distributionOrdering[t];for(var r in i)if(i[r]===e){n=!0;break}n||(this.distributionOrdering[t].push(e),this.distributionIndex[e.id]=this.distributionOrdering[t].length-1)}}]),e}(),TX=function(){function e(t){YF(this,e),this.body=t,this._resetRNG(Math.random()+":"+CN()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},yC(this.options,this.defaultOptions),this.bindEventListeners()}return QF(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("_dataChanged",(function(){e.setupHierarchicalLayout()})),this.body.emitter.on("_dataLoaded",(function(){e.layoutNetwork()})),this.body.emitter.on("_resetHierarchicalLayout",(function(){e.setupHierarchicalLayout()})),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",(function(){if(!0===e.options.hierarchical.enabled){var t=e.direction.curveType();e.body.emitter.emit("_forceDisableDynamicCurves",t,!1)}}))}},{key:"setOptions",value:function(e,t){if(void 0!==e){var n=this.options.hierarchical,i=n.enabled;if(MR(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),JR(this.options,e,"hierarchical"),void 0!==e.randomSeed&&this._resetRNG(e.randomSeed),!0===n.enabled)return!0===i&&this.body.emitter.emit("refresh",!0),"RL"===n.direction||"DU"===n.direction?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(t);if(!0===i)return this.body.emitter.emit("refresh"),zR(t,this.optionsBackup)}return t}},{key:"_resetRNG",value:function(e){this.initialRandomSeed=e,this._rng=wR(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(e){if(!0===this.options.hierarchical.enabled){var t=this.optionsBackup.physics;void 0===e.physics||!0===e.physics?(e.physics={enabled:void 0===t.enabled||t.enabled,solver:"hierarchicalRepulsion"},t.enabled=void 0===t.enabled||t.enabled,t.solver=t.solver||"barnesHut"):"object"===eN(e.physics)?(t.enabled=void 0===e.physics.enabled||e.physics.enabled,t.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):!1!==e.physics&&(t.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});var n=this.direction.curveType();if(void 0===e.edges)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(void 0===e.edges.smooth)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if("boolean"==typeof e.edges.smooth)this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:n};else{var i=e.edges.smooth;void 0!==i.type&&"dynamic"!==i.type&&(n=i.type),this.optionsBackup.edges={smooth:{enabled:void 0===i.enabled||i.enabled,type:void 0===i.type?"dynamic":i.type,roundness:void 0===i.roundness?.5:i.roundness,forceDirection:void 0!==i.forceDirection&&i.forceDirection}},e.edges.smooth={enabled:void 0===i.enabled||i.enabled,type:n,roundness:void 0===i.roundness?.5:i.roundness,forceDirection:void 0!==i.forceDirection&&i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return e}},{key:"positionInitially",value:function(e){if(!0!==this.options.hierarchical.enabled){this._resetRNG(this.initialRandomSeed);for(var t=e.length+50,n=0;n<e.length;n++){var i=e[n],r=2*Math.PI*this._rng();void 0===i.x&&(i.x=t*Math.cos(r)),void 0===i.y&&(i.y=t*Math.sin(r))}}}},{key:"layoutNetwork",value:function(){if(!0!==this.options.hierarchical.enabled&&!0===this.options.improvedLayout){for(var e=this.body.nodeIndices,t=0,n=0;n<e.length;n++){!0===this.body.nodes[e[n]].predefinedPosition&&(t+=1)}if(t<.5*e.length){var i=0,r=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>r){for(var s=e.length;e.length>r&&i<=10;){i+=1;var a=e.length;if(i%3==0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o),a==e.length&&i%3!=0)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*s)})}i>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();for(var c=0;c<e.length;c++){var l=this.body.nodes[e[c]];!1===l.predefinedPosition&&(l.x+=70*(.5-this._rng()),l.y+=70*(.5-this._rng()))}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var e=GG.getRangeCore(this.body.nodes,this.body.nodeIndices),t=GG.findCenter(e),n=0;n<this.body.nodeIndices.length;n++){var i=this.body.nodes[this.body.nodeIndices[n]];i.x-=t.x,i.y-=t.y}}},{key:"_declusterAll",value:function(){for(var e=!0;!0===e;){e=!1;for(var t=0;t<this.body.nodeIndices.length;t++)!0===this.body.nodes[this.body.nodeIndices[t]].isCluster&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[t],{},!1));!0===e&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===this.options.hierarchical.enabled&&this.body.nodeIndices.length>0){var e,t,n=!1,i=!1;for(t in this.lastNodeOnLevel={},this.hierarchical=new SX,this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&(void 0!==(e=this.body.nodes[t]).options.level?(n=!0,this.hierarchical.levels[t]=e.options.level):i=!0);if(!0===i&&!0===n)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(!0===i){var r=this.options.hierarchical.sortMethod;"hubsize"===r?this._determineLevelsByHubsize():"directed"===r?this._determineLevelsDirected():"custom"===r&&this._determineLevelsCustomCallback()}for(var o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);var s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var e=this,t=!1,n={},i=function(t,n){var i=e.hierarchical.trees;for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&i[r]===t&&e.direction.shift(r,n)},r=function(){for(var t=[],n=0;n<e.hierarchical.numTrees();n++)t.push(e.direction.getTreeSize(n));return t},o=function t(n,i){if(!i[n.id]&&(i[n.id]=!0,e.hierarchical.childrenReference[n.id])){var r=e.hierarchical.childrenReference[n.id];if(r.length>0)for(var o=0;o<r.length;o++)t(e.body.nodes[r[o]],i)}},s=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e9,i=1e9,r=1e9,o=1e9,s=-1e9;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var c=e.body.nodes[a],l=e.hierarchical.levels[c.id],h=e.direction.getPosition(c),u=e._getSpaceAroundNode(c,t),d=QP(u,2),f=d[0],p=d[1];i=Math.min(f,i),r=Math.min(p,r),l<=n&&(o=Math.min(h,o),s=Math.max(h,s))}return[o,s,i,r]},a=function(t,n){var i=e.hierarchical.getMaxLevel(t.id),r=e.hierarchical.getMaxLevel(n.id);return Math.min(i,r)},c=function(t,n,i){for(var r=e.hierarchical,o=0;o<n.length;o++){var s=n[o],a=r.distributionOrdering[s];if(a.length>1)for(var c=0;c<a.length-1;c++){var l=a[c],h=a[c+1];r.hasSameParent(l,h)&&r.inSameSubNetwork(l,h)&&t(l,h,i)}}},l=function(n,i){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=e.direction.getPosition(n),l=e.direction.getPosition(i),h=Math.abs(l-c),u=e.options.hierarchical.nodeSpacing;if(h>u){var d={},f={};o(n,d),o(i,f);var p=a(n,i),v=s(d,p),y=s(f,p),g=v[1],m=y[0],b=y[2],_=Math.abs(g-m);if(_>u){var w=g-m+u;w<-b+u&&(w=-b+u),w<0&&(e._shiftBlock(i.id,w),t=!0,!0===r&&e._centerParent(i))}}},h=function(i,r){for(var a=r.id,c=r.edges,l=e.hierarchical.levels[r.id],h=e.options.hierarchical.levelSeparation*e.options.hierarchical.levelSeparation,u={},d=[],f=0;f<c.length;f++){var p=c[f];if(p.toId!=p.fromId){var v=p.toId==a?p.from:p.to;u[c[f].id]=v,e.hierarchical.levels[v.id]<l&&d.push(p)}}var y=function(t,n){for(var i=0,r=0;r<n.length;r++)if(void 0!==u[n[r].id]){var o=e.direction.getPosition(u[n[r].id])-t;i+=o/Math.sqrt(o*o+h)}return i},g=function(t,n){for(var i=0,r=0;r<n.length;r++)if(void 0!==u[n[r].id]){var o=e.direction.getPosition(u[n[r].id])-t;i-=h*Math.pow(o*o+h,-1.5)}return i},m=function(t,n){for(var i=e.direction.getPosition(r),o={},s=0;s<t;s++){var a=y(i,n),c=g(i,n);if(void 0!==o[i-=Math.max(-40,Math.min(40,Math.round(a/c)))])break;o[i]=s}return i},b=m(i,d);!function(i){var a=e.direction.getPosition(r);if(void 0===n[r.id]){var c={};o(r,c),n[r.id]=c}var l=s(n[r.id]),h=l[2],u=l[3],d=i-a,f=0;d>0?f=Math.min(d,u-e.options.hierarchical.nodeSpacing):d<0&&(f=-Math.min(-d,h-e.options.hierarchical.nodeSpacing)),0!=f&&(e._shiftBlock(r.id,f),t=!0)}(b),function(n){var i=e.direction.getPosition(r),o=QP(e._getSpaceAroundNode(r),2),s=o[0],a=o[1],c=n-i,l=i;c>0?l=Math.min(i+(a-e.options.hierarchical.nodeSpacing),n):c<0&&(l=Math.max(i-(s-e.options.hierarchical.nodeSpacing),n)),l!==i&&(e.direction.setPosition(r,l),t=!0)}(b=m(i,c))};!0===this.options.hierarchical.blockShifting&&(function(n){var i=e.hierarchical.getLevels();i=VN(i).call(i);for(var r=0;r<n&&(t=!1,c(l,i,!0),!0===t);r++);}(5),function(){for(var t in e.body.nodes)Object.prototype.hasOwnProperty.call(e.body.nodes,t)&&e._centerParent(e.body.nodes[t])}()),!0===this.options.hierarchical.edgeMinimization&&function(n){var i=e.hierarchical.getLevels();i=VN(i).call(i);for(var r=0;r<n;r++){t=!1;for(var o=0;o<i.length;o++)for(var s=i[o],a=e.hierarchical.distributionOrdering[s],c=0;c<a.length;c++)h(1e3,a[c]);if(!0!==t)break}}(20),!0===this.options.hierarchical.parentCentralization&&function(){var t=e.hierarchical.getLevels();t=VN(t).call(t);for(var n=0;n<t.length;n++)for(var i=t[n],r=e.hierarchical.distributionOrdering[i],o=0;o<r.length;o++)e._centerParent(r[o])}(),function(){for(var t=r(),n=0,o=0;o<t.length-1;o++){n+=t[o].max-t[o+1].min+e.options.hierarchical.treeSpacing,i(o+1,n)}}()}},{key:"_getSpaceAroundNode",value:function(e,t){var n=!0;void 0===t&&(n=!1);var i=this.hierarchical.levels[e.id];if(void 0!==i){var r=this.hierarchical.distributionIndex[e.id],o=this.direction.getPosition(e),s=this.hierarchical.distributionOrdering[i],a=1e9,c=1e9;if(0!==r){var l=s[r-1];if(!0===n&&void 0===t[l.id]||!1===n)a=o-this.direction.getPosition(l)}if(r!=s.length-1){var h=s[r+1];if(!0===n&&void 0===t[h.id]||!1===n){var u=this.direction.getPosition(h);c=Math.min(c,u-o)}}return[a,c]}return[0,0]}},{key:"_centerParent",value:function(e){if(this.hierarchical.parentReference[e.id])for(var t=this.hierarchical.parentReference[e.id],n=0;n<t.length;n++){var i=t[n],r=this.body.nodes[i],o=this.hierarchical.childrenReference[i];if(void 0!==o){var s=this._getCenterPosition(o),a=this.direction.getPosition(r),c=QP(this._getSpaceAroundNode(r),2),l=c[0],h=c[1],u=a-s;(u<0&&Math.abs(u)<h-this.options.hierarchical.nodeSpacing||u>0&&Math.abs(u)<l-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(r,s)}}}},{key:"_placeNodesByHierarchy",value:function(e){for(var t in this.positionedNodes={},e)if(Object.prototype.hasOwnProperty.call(e,t)){var n,i=_N(e[t]);i=this._indexArrayToNodes(i),GV(n=this.direction).call(n,i);for(var r=0,o=0;o<i.length;o++){var s=i[o];if(void 0===this.positionedNodes[s.id]){var a=this.options.hierarchical.nodeSpacing,c=a*r;r>0&&(c=this.direction.getPosition(i[o-1])+a),this.direction.setPosition(s,c,t),this._validatePositionAndContinue(s,t,c),r++}}}}},{key:"_placeBranchNodes",value:function(e,t){var n,i=this.hierarchical.childrenReference[e];if(void 0!==i){for(var r=[],o=0;o<i.length;o++)r.push(this.body.nodes[i[o]]);GV(n=this.direction).call(n,r);for(var s=0;s<r.length;s++){var a=r[s],c=this.hierarchical.levels[a.id];if(!(c>t&&void 0===this.positionedNodes[a.id]))return;var l=this.options.hierarchical.nodeSpacing,h=void 0;h=0===s?this.direction.getPosition(this.body.nodes[e]):this.direction.getPosition(r[s-1])+l,this.direction.setPosition(a,h,c),this._validatePositionAndContinue(a,c,h)}var u=this._getCenterPosition(r);this.direction.setPosition(this.body.nodes[e],u,t)}}},{key:"_validatePositionAndContinue",value:function(e,t,n){if(this.hierarchical.isTree){if(void 0!==this.lastNodeOnLevel[t]){var i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[t]]);if(n-i<this.options.hierarchical.nodeSpacing){var r=i+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[t],e.id);this._shiftBlock(o.withChild,r)}}this.lastNodeOnLevel[t]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,t)}}},{key:"_indexArrayToNodes",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(this.body.nodes[e[n]]);return t}},{key:"_getDistribution",value:function(){var e,t,n={};for(e in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,e)){t=this.body.nodes[e];var i=void 0===this.hierarchical.levels[e]?0:this.hierarchical.levels[e];this.direction.fix(t,i),void 0===n[i]&&(n[i]={}),n[i][e]=t}return n}},{key:"_getActiveEdges",value:function(e){var t=this,n=[];return UR(e.edges,(function(e){var i;-1!==ND(i=t.body.edgeIndices).call(i,e.id)&&n.push(e)})),n}},{key:"_getHubSizes",value:function(){var e=this,t={};UR(this.body.nodeIndices,(function(n){var i=e.body.nodes[n],r=e._getActiveEdges(i).length;t[r]=!0}));var n=[];return UR(t,(function(e){n.push(Number(e))})),GV(hX).call(hX,n,(function(e,t){return t-e})),n}},{key:"_determineLevelsByHubsize",value:function(){for(var e=this,t=function(t,n){e.hierarchical.levelDownstream(t,n)},n=this._getHubSizes(),i=function(i){var r=n[i];if(0===r)return"break";UR(e.body.nodeIndices,(function(n){var i=e.body.nodes[n];r===e._getActiveEdges(i).length&&e._crawlNetwork(t,n)}))},r=0;r<n.length;++r){if("break"===i(r))break}}},{key:"_determineLevelsCustomCallback",value:function(){var e=this;this._crawlNetwork((function(t,n,i){var r=e.hierarchical.levels[t.id];void 0===r&&(r=e.hierarchical.levels[t.id]=1e5);var o=(GG.cloneOptions(t,"node"),GG.cloneOptions(n,"node"),void GG.cloneOptions(i,"edge"));e.hierarchical.levels[n.id]=r+o})),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var e,t=this,n=cX(e=this.body.nodeIndices).call(e,(function(e,n){return e.set(n,t.body.nodes[n]),e}),new w$);"roots"===this.options.hierarchical.shakeTowards?this.hierarchical.levels=function(e){return CX((function(t){var n,i;return wX(n=VM(i=t.edges).call(i,(function(t){return e.has(t.toId)}))).call(n,(function(e){return e.from===t}))}),(function(e,t){return t<e}),"to",e)}(n):this.hierarchical.levels=function(e){return CX((function(t){var n,i;return wX(n=VM(i=t.edges).call(i,(function(t){return e.has(t.toId)}))).call(n,(function(e){return e.to===t}))}),(function(e,t){return t>e}),"from",e)}(n),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var e=this;this._crawlNetwork((function(t,n){e.hierarchical.levels[n.id]>e.hierarchical.levels[t.id]&&e.hierarchical.addRelation(t.id,n.id)})),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1?arguments[1]:void 0,i={},r=function n(r,o){if(void 0===i[r.id]){var s;e.hierarchical.setTreeIndex(r,o),i[r.id]=!0;for(var a=e._getActiveEdges(r),c=0;c<a.length;c++){var l=a[c];!0===l.connected&&(s=l.toId==r.id?l.from:l.to,r.id!=s.id&&(t(r,s,l),n(s,o)))}}};if(void 0===n)for(var o=0,s=0;s<this.body.nodeIndices.length;s++){var a=this.body.nodeIndices[s];if(void 0===i[a]){var c=this.body.nodes[a];r(c,o),o+=1}}else{var l=this.body.nodes[n];if(void 0===l)return void console.error("Node not found:",n);r(l)}}},{key:"_shiftBlock",value:function(e,t){var n=this,i={};!function e(r){if(!i[r]){i[r]=!0,n.direction.shift(r,t);var o=n.hierarchical.childrenReference[r];if(void 0!==o)for(var s=0;s<o.length;s++)e(o[s])}}(e)}},{key:"_findCommonParent",value:function(e,t){var n=this,i={};return function e(t,i){var r=n.hierarchical.parentReference[i];if(void 0!==r)for(var o=0;o<r.length;o++){var s=r[o];t[s]=!0,e(t,s)}}(i,e),function e(t,i){var r=n.hierarchical.parentReference[i];if(void 0!==r)for(var o=0;o<r.length;o++){var s=r[o];if(void 0!==t[s])return{foundParent:s,withChild:i};var a=e(t,s);if(null!==a.foundParent)return a}return{foundParent:null,withChild:i}}(i,t)}},{key:"setDirectionStrategy",value:function(){var e="UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction;this.direction=e?new fX(this):new pX(this)}},{key:"_getCenterPosition",value:function(e){for(var t=1e9,n=-1e9,i=0;i<e.length;i++){var r=void 0;if(void 0!==e[i].id)r=e[i];else{var o=e[i];r=this.body.nodes[o]}var s=this.direction.getPosition(r);t=Math.min(t,s),n=Math.max(n,s)}return.5*(t+n)}}]),e}();function OX(e,t){var n=void 0!==nN&&oA(e)||e["@@iterator"];if(!n){if(hN(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return IX(e,t);var i=lN(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return UI(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return IX(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function IX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var AX=function(){function e(t,n,i,r){var o,s,a=this;YF(this,e),this.body=t,this.canvas=n,this.selectionHandler=i,this.interactionHandler=r,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},yC(this.options,this.defaultOptions),this.body.emitter.on("destroy",(function(){a._clean()})),this.body.emitter.on("_dataChanged",BC(o=this._restore).call(o,this)),this.body.emitter.on("_resetData",BC(s=this._restore).call(s,this))}return QF(e,[{key:"_restore",value:function(){!1!==this.inMode&&(!0===this.options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(e,t,n){void 0!==t&&(void 0!==t.locale?this.options.locale=t.locale:this.options.locale=n.locale,void 0!==t.locales?this.options.locales=t.locales:this.options.locales=n.locales),void 0!==e&&("boolean"==typeof e?this.options.enabled=e:(this.options.enabled=!0,zR(this.options,e)),!0===this.options.initiallyActive&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===this.editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},!0===this.guiEnabled){var e,t;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var n=this.selectionHandler.getSelectedNodeCount(),i=this.selectionHandler.getSelectedEdgeCount(),r=n+i,o=this.options.locales[this.options.locale],s=!1;!1!==this.options.addNode&&(this._createAddNodeButton(o),s=!0),!1!==this.options.addEdge&&(!0===s?this._createSeperator(1):s=!0,this._createAddEdgeButton(o)),1===n&&"function"==typeof this.options.editNode?(!0===s?this._createSeperator(2):s=!0,this._createEditNodeButton(o)):1===i&&0===n&&!1!==this.options.editEdge&&(!0===s?this._createSeperator(3):s=!0,this._createEditEdgeButton(o)),0!==r&&(n>0&&!1!==this.options.deleteNode||0===n&&!1!==this.options.deleteEdge)&&(!0===s&&this._createSeperator(4),this._createDeleteButton(o)),this._bindElementEvents(this.closeDiv,BC(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",BC(t=this.showManipulatorToolbar).call(t,this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var e;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addNode",!0===this.guiEnabled){var t,n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,BC(t=this.toggleEditMode).call(t,this))}this._temporaryBindEvent("click",BC(e=this._performAddNode).call(e,this))}},{key:"editNode",value:function(){var e=this;!0!==this.editMode&&this.enableEditMode(),this._clean();var t=this.selectionHandler.getSelectedNodes()[0];if(void 0!==t){if(this.inMode="editNode","function"!=typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(!0!==t.isCluster){var n=zR({},t.options,!1);if(n.x=t.x,n.y=t.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(n,(function(t){null!=t&&"editNode"===e.inMode&&e.body.data.nodes.getDataSet().update(t),e.showManipulatorToolbar()}))}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var e,t,n,i,r;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addEdge",!0===this.guiEnabled){var o,s=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(s),this._createSeperator(),this._createDescription(s.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,BC(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",BC(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",BC(t=this._finishConnect).call(t,this)),this._temporaryBindUI("onDrag",BC(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",BC(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",BC(r=this._dragStartEdge).call(r,this)),this._temporaryBindUI("onHold",(function(){}))}},{key:"editEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="editEdge","object"!==eN(this.options.editEdge)||"function"!=typeof this.options.editEdge.editWithoutDrag||(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],void 0===this.edgeBeingEditedId)){if(!0===this.guiEnabled){var e,t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,BC(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],void 0!==this.edgeBeingEditedId){var n,i,r,o,s=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(s.from.x,s.from.y),c=this._getNewTargetNode(s.to.x,s.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(c.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[c.id]=c,this.body.nodeIndices.push(c.id),this._temporaryBindUI("onTouch",BC(n=this._controlNodeTouch).call(n,this)),this._temporaryBindUI("onTap",(function(){})),this._temporaryBindUI("onHold",(function(){})),this._temporaryBindUI("onDragStart",BC(i=this._controlNodeDragStart).call(i,this)),this._temporaryBindUI("onDrag",BC(r=this._controlNodeDrag).call(r,this)),this._temporaryBindUI("onDragEnd",BC(o=this._controlNodeDragEnd).call(o,this)),this._temporaryBindUI("onMouseMove",(function(){})),this._temporaryBindEvent("beforeDrawing",(function(e){var t=s.edgeType.findBorderPositions(e);!1===a.selected&&(a.x=t.from.x,a.y=t.from.y),!1===c.selected&&(c.x=t.to.x,c.y=t.to.y)})),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}else{var l=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(l.from.id,l.to.id)}}},{key:"deleteSelected",value:function(){var e=this;!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="delete";var t=this.selectionHandler.getSelectedNodeIds(),n=this.selectionHandler.getSelectedEdgeIds(),i=void 0;if(t.length>0){for(var r=0;r<t.length;r++)if(!0===this.body.nodes[t[r]].isCluster)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"==typeof this.options.deleteNode&&(i=this.options.deleteNode)}else n.length>0&&"function"==typeof this.options.deleteEdge&&(i=this.options.deleteEdge);if("function"==typeof i){var o={nodes:t,edges:n};if(2!==i.length)throw new Error("The function for delete does not support two arguments (data, callback)");i(o,(function(t){null!=t&&"delete"===e.inMode?(e.body.data.edges.getDataSet().remove(t.edges),e.body.data.nodes.getDataSet().remove(t.nodes),e.body.emitter.emit("startSimulation"),e.showManipulatorToolbar()):(e.body.emitter.emit("startSimulation"),e.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().remove(n),this.body.data.nodes.getDataSet().remove(t),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===this.options.enabled?(this.guiEnabled=!0,this._createWrappers(),!1===this.editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){var e,t;(void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",!0===this.editMode?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",!0===this.editMode?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv)&&(this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",null!==(e=null===(t=this.options.locales[this.options.locale])||void 0===t?void 0:t.close)&&void 0!==e?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(e,t){var n=zR({},this.options.controlNodeStyle);n.id="targetNode"+WG(),n.hidden=!1,n.physics=!1,n.x=e,n.y=t;var i=this.body.functions.createNode(n);return i.shape.boundingBox={left:e,right:e,top:t,bottom:t},i}},{key:"_createEditButton",value:function(){var e;this._clean(),this.manipulationDOM={},AR(this.editModeDiv);var t=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",t.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,BC(e=this.toggleEditMode).call(e,this))}},{key:"_clean",value:function(){this.inMode=!1,!0===this.guiEnabled&&(AR(this.editModeDiv),AR(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanupDOMEventListeners",value:function(){var e,t,n=OX(fM(e=this._domEventListenerCleanupQueue).call(e,0));try{for(n.s();!(t=n.n()).done;){(0,t.value)()}}catch(e){n.e(e)}finally{n.f()}}},{key:"_removeManipulationDOM",value:function(){this._clean(),AR(this.manipulationDiv),AR(this.editModeDiv),AR(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}},{key:"_createAddNodeButton",value:function(e){var t,n=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,BC(t=this.addNodeMode).call(t,this))}},{key:"_createAddEdgeButton",value:function(e){var t,n=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,BC(t=this.addEdgeMode).call(t,this))}},{key:"_createEditNodeButton",value:function(e){var t,n=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,BC(t=this.editNode).call(t,this))}},{key:"_createEditEdgeButton",value:function(e){var t,n=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,BC(t=this.editEdgeMode).call(t,this))}},{key:"_createDeleteButton",value:function(e){var t,n;n=this.options.rtl?"vis-delete-rtl":"vis-delete";var i=this._createButton("delete",n,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,BC(t=this.deleteSelected).call(t,this))}},{key:"_createBackButton",value:function(e){var t,n=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,BC(t=this.showManipulatorToolbar).call(t,this))}},{key:"_createButton",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+t,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=i,this.manipulationDOM[e+"Label"].innerText=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}},{key:"_createDescription",value:function(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}},{key:"_temporaryBindEvent",value:function(e,t){this.temporaryEventFunctions.push({event:e,boundFunction:t}),this.body.emitter.on(e,t)}},{key:"_temporaryBindUI",value:function(e,t){if(void 0===this.body.eventListeners[e])throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+az(_N(this.body.eventListeners)));this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=t}},{key:"_unbindTemporaryUIs",value:function(){for(var e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var e=0;e<this.temporaryEventFunctions.length;e++){var t=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(t,n)}this.temporaryEventFunctions=[]}},{key:"_bindElementEvents",value:function(e,t){var n=new fj(e,{});JG(n,t),this._domEventListenerCleanupQueue.push((function(){n.destroy()}));var i=function(e){var n=e.keyCode,i=e.key;"Enter"!==i&&" "!==i&&13!==n&&32!==n||t()};e.addEventListener("keyup",i,!1),this._domEventListenerCleanupQueue.push((function(){e.removeEventListener("keyup",i,!1)}))}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var e=0;e<this.temporaryIds.edges.length;e++){var t;this.body.edges[this.temporaryIds.edges[e]].disconnect(),delete this.body.edges[this.temporaryIds.edges[e]];var n,i=ND(t=this.body.edgeIndices).call(t,this.temporaryIds.edges[e]);if(-1!==i)fM(n=this.body.edgeIndices).call(n,i,1)}for(var r=0;r<this.temporaryIds.nodes.length;r++){var o;delete this.body.nodes[this.temporaryIds.nodes[r]];var s,a=ND(o=this.body.nodeIndices).call(o,this.temporaryIds.nodes[r]);if(-1!==a)fM(s=this.body.nodeIndices).call(s,a,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=yC({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var e=this.lastTouch,t=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],r=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var o=n.isOverlappingWith(t),s=i.isOverlappingWith(t);!0===o?(this.selectedControlNode=n,r.edgeType.from=n):!0===s&&(this.selectedControlNode=i,r.edgeType.to=i),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(e){this.body.emitter.emit("disablePhysics");var t=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(t);void 0!==this.selectedControlNode?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(e){var t=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(t),i=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var r=this.selectionHandler._getAllNodesOverlappingWith(n),o=void 0,s=r.length-1;s>=0;s--)if(r[s]!==this.selectedControlNode.id){o=this.body.nodes[r[s]];break}if(void 0!==o&&void 0!==this.selectedControlNode)if(!0===o.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,i.to.id):this._performEditEdge(i.from.id,o.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(e){if((new Date).valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=yC({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;var t=this.lastTouch,n=this.selectionHandler.getNodeAt(t);if(void 0!==n)if(!0===n.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);var r=this.body.functions.createEdge({id:"connectionEdge"+WG(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[r.id]=r,this.body.edgeIndices.push(r.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(r.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(e){var t=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(t),i=void 0;void 0!==this.temporaryIds.edges[0]&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var r=this.selectionHandler._getAllNodesOverlappingWith(n),o=void 0,s=r.length-1;s>=0;s--){var a;if(-1===ND(a=this.temporaryIds.nodes).call(a,r[s])){o=this.body.nodes[r[s]];break}}if(e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,t),void 0!==this.temporaryIds.nodes[0]){var c=this.body.nodes[this.temporaryIds.nodes[0]];c.x=this.canvas._XconvertDOMtoCanvas(t.x),c.y=this.canvas._YconvertDOMtoCanvas(t.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}},{key:"_finishConnect",value:function(e){var t=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(t),i=void 0;void 0!==this.temporaryIds.edges[0]&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var r=this.selectionHandler._getAllNodesOverlappingWith(n),o=void 0,s=r.length-1;s>=0;s--){var a;if(-1===ND(a=this.temporaryIds.nodes).call(a,r[s])){o=this.body.nodes[r[s]];break}}this._cleanupTemporaryNodesAndEdges(),void 0!==o&&(!0===o.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[i]&&void 0!==this.body.nodes[o.id]&&this._performAddEdge(i,o.id)),e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,t),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(e){var t=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,t,void 0,!0)}},{key:"_performAddNode",value:function(e){var t=this,n={id:WG(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if("function"==typeof this.options.addNode){if(2!==this.options.addNode.length)throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(n,(function(e){null!=e&&"addNode"===t.inMode&&t.body.data.nodes.getDataSet().add(e),t.showManipulatorToolbar()}))}else this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(e,t){var n=this,i={from:e,to:t};if("function"==typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(i,(function(e){null!=e&&"addEdge"===n.inMode&&(n.body.data.edges.getDataSet().add(e),n.selectionHandler.unselectAll(),n.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(e,t){var n=this,i={id:this.edgeBeingEditedId,from:e,to:t,label:this.body.data.edges.get(this.edgeBeingEditedId).label},r=this.options.editEdge;if("object"===eN(r)&&(r=r.editWithoutDrag),"function"==typeof r){if(2!==r.length)throw new Error("The function for edit does not support two arguments (data, callback)");r(i,(function(e){null==e||"editEdge"!==n.inMode?(n.body.edges[i.id].updateEdgeType(),n.body.emitter.emit("_redraw"),n.showManipulatorToolbar()):(n.body.data.edges.getDataSet().update(e),n.selectionHandler.unselectAll(),n.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().update(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),e}(),LX="string",FX="boolean",PX="number",NX="array",MX="object",DX=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],zX={borderWidth:{number:PX},borderWidthSelected:{number:PX,undefined:"undefined"},brokenImage:{string:LX,undefined:"undefined"},chosen:{label:{boolean:FX,function:"function"},node:{boolean:FX,function:"function"},__type__:{object:MX,boolean:FX}},color:{border:{string:LX},background:{string:LX},highlight:{border:{string:LX},background:{string:LX},__type__:{object:MX,string:LX}},hover:{border:{string:LX},background:{string:LX},__type__:{object:MX,string:LX}},__type__:{object:MX,string:LX}},opacity:{number:PX,undefined:"undefined"},fixed:{x:{boolean:FX},y:{boolean:FX},__type__:{object:MX,boolean:FX}},font:{align:{string:LX},color:{string:LX},size:{number:PX},face:{string:LX},background:{string:LX},strokeWidth:{number:PX},strokeColor:{string:LX},vadjust:{number:PX},multi:{boolean:FX,string:LX},bold:{color:{string:LX},size:{number:PX},face:{string:LX},mod:{string:LX},vadjust:{number:PX},__type__:{object:MX,string:LX}},boldital:{color:{string:LX},size:{number:PX},face:{string:LX},mod:{string:LX},vadjust:{number:PX},__type__:{object:MX,string:LX}},ital:{color:{string:LX},size:{number:PX},face:{string:LX},mod:{string:LX},vadjust:{number:PX},__type__:{object:MX,string:LX}},mono:{color:{string:LX},size:{number:PX},face:{string:LX},mod:{string:LX},vadjust:{number:PX},__type__:{object:MX,string:LX}},__type__:{object:MX,string:LX}},group:{string:LX,number:PX,undefined:"undefined"},heightConstraint:{minimum:{number:PX},valign:{string:LX},__type__:{object:MX,boolean:FX,number:PX}},hidden:{boolean:FX},icon:{face:{string:LX},code:{string:LX},size:{number:PX},color:{string:LX},weight:{string:LX,number:PX},__type__:{object:MX}},id:{string:LX,number:PX},image:{selected:{string:LX,undefined:"undefined"},unselected:{string:LX,undefined:"undefined"},__type__:{object:MX,string:LX}},imagePadding:{top:{number:PX},right:{number:PX},bottom:{number:PX},left:{number:PX},__type__:{object:MX,number:PX}},label:{string:LX,undefined:"undefined"},labelHighlightBold:{boolean:FX},level:{number:PX,undefined:"undefined"},margin:{top:{number:PX},right:{number:PX},bottom:{number:PX},left:{number:PX},__type__:{object:MX,number:PX}},mass:{number:PX},physics:{boolean:FX},scaling:{min:{number:PX},max:{number:PX},label:{enabled:{boolean:FX},min:{number:PX},max:{number:PX},maxVisible:{number:PX},drawThreshold:{number:PX},__type__:{object:MX,boolean:FX}},customScalingFunction:{function:"function"},__type__:{object:MX}},shadow:{enabled:{boolean:FX},color:{string:LX},size:{number:PX},x:{number:PX},y:{number:PX},__type__:{object:MX,boolean:FX}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:FX,array:NX},borderRadius:{number:PX},interpolation:{boolean:FX},useImageSize:{boolean:FX},useBorderWithImage:{boolean:FX},coordinateOrigin:{string:["center","top-left"]},__type__:{object:MX}},size:{number:PX},title:{string:LX,dom:"dom",undefined:"undefined"},value:{number:PX,undefined:"undefined"},widthConstraint:{minimum:{number:PX},maximum:{number:PX},__type__:{object:MX,boolean:FX,number:PX}},x:{number:PX},y:{number:PX},__type__:{object:MX}},BX={configure:{enabled:{boolean:FX},filter:{boolean:FX,string:LX,array:NX,function:"function"},container:{dom:"dom"},showButton:{boolean:FX},__type__:{object:MX,boolean:FX,string:LX,array:NX,function:"function"}},edges:{arrows:{to:{enabled:{boolean:FX},scaleFactor:{number:PX},type:{string:DX},imageHeight:{number:PX},imageWidth:{number:PX},src:{string:LX},__type__:{object:MX,boolean:FX}},middle:{enabled:{boolean:FX},scaleFactor:{number:PX},type:{string:DX},imageWidth:{number:PX},imageHeight:{number:PX},src:{string:LX},__type__:{object:MX,boolean:FX}},from:{enabled:{boolean:FX},scaleFactor:{number:PX},type:{string:DX},imageWidth:{number:PX},imageHeight:{number:PX},src:{string:LX},__type__:{object:MX,boolean:FX}},__type__:{string:["from","to","middle"],object:MX}},endPointOffset:{from:{number:PX},to:{number:PX},__type__:{object:MX,number:PX}},arrowStrikethrough:{boolean:FX},background:{enabled:{boolean:FX},color:{string:LX},size:{number:PX},dashes:{boolean:FX,array:NX},__type__:{object:MX,boolean:FX}},chosen:{label:{boolean:FX,function:"function"},edge:{boolean:FX,function:"function"},__type__:{object:MX,boolean:FX}},color:{color:{string:LX},highlight:{string:LX},hover:{string:LX},inherit:{string:["from","to","both"],boolean:FX},opacity:{number:PX},__type__:{object:MX,string:LX}},dashes:{boolean:FX,array:NX},font:{color:{string:LX},size:{number:PX},face:{string:LX},background:{string:LX},strokeWidth:{number:PX},strokeColor:{string:LX},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:PX},multi:{boolean:FX,string:LX},bold:{color:{string:LX},size:{number:PX},face:{string:LX},mod:{string:LX},vadjust:{number:PX},__type__:{object:MX,string:LX}},boldital:{color:{string:LX},size:{number:PX},face:{string:LX},mod:{string:LX},vadjust:{number:PX},__type__:{object:MX,string:LX}},ital:{color:{string:LX},size:{number:PX},face:{string:LX},mod:{string:LX},vadjust:{number:PX},__type__:{object:MX,string:LX}},mono:{color:{string:LX},size:{number:PX},face:{string:LX},mod:{string:LX},vadjust:{number:PX},__type__:{object:MX,string:LX}},__type__:{object:MX,string:LX}},hidden:{boolean:FX},hoverWidth:{function:"function",number:PX},label:{string:LX,undefined:"undefined"},labelHighlightBold:{boolean:FX},length:{number:PX,undefined:"undefined"},physics:{boolean:FX},scaling:{min:{number:PX},max:{number:PX},label:{enabled:{boolean:FX},min:{number:PX},max:{number:PX},maxVisible:{number:PX},drawThreshold:{number:PX},__type__:{object:MX,boolean:FX}},customScalingFunction:{function:"function"},__type__:{object:MX}},selectionWidth:{function:"function",number:PX},selfReferenceSize:{number:PX},selfReference:{size:{number:PX},angle:{number:PX},renderBehindTheNode:{boolean:FX},__type__:{object:MX}},shadow:{enabled:{boolean:FX},color:{string:LX},size:{number:PX},x:{number:PX},y:{number:PX},__type__:{object:MX,boolean:FX}},smooth:{enabled:{boolean:FX},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:PX},forceDirection:{string:["horizontal","vertical","none"],boolean:FX},__type__:{object:MX,boolean:FX}},title:{string:LX,undefined:"undefined"},width:{number:PX},widthConstraint:{maximum:{number:PX},__type__:{object:MX,boolean:FX,number:PX}},value:{number:PX,undefined:"undefined"},__type__:{object:MX}},groups:{useDefaultGroups:{boolean:FX},__any__:zX,__type__:{object:MX}},interaction:{dragNodes:{boolean:FX},dragView:{boolean:FX},hideEdgesOnDrag:{boolean:FX},hideEdgesOnZoom:{boolean:FX},hideNodesOnDrag:{boolean:FX},hover:{boolean:FX},keyboard:{enabled:{boolean:FX},speed:{x:{number:PX},y:{number:PX},zoom:{number:PX},__type__:{object:MX}},bindToWindow:{boolean:FX},autoFocus:{boolean:FX},__type__:{object:MX,boolean:FX}},multiselect:{boolean:FX},navigationButtons:{boolean:FX},selectable:{boolean:FX},selectConnectedEdges:{boolean:FX},hoverConnectedEdges:{boolean:FX},tooltipDelay:{number:PX},zoomView:{boolean:FX},zoomSpeed:{number:PX},__type__:{object:MX}},layout:{randomSeed:{undefined:"undefined",number:PX,string:LX},improvedLayout:{boolean:FX},clusterThreshold:{number:PX},hierarchical:{enabled:{boolean:FX},levelSeparation:{number:PX},nodeSpacing:{number:PX},treeSpacing:{number:PX},blockShifting:{boolean:FX},edgeMinimization:{boolean:FX},parentCentralization:{boolean:FX},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:MX,boolean:FX}},__type__:{object:MX}},manipulation:{enabled:{boolean:FX},initiallyActive:{boolean:FX},addNode:{boolean:FX,function:"function"},addEdge:{boolean:FX,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:MX,boolean:FX,function:"function"}},deleteNode:{boolean:FX,function:"function"},deleteEdge:{boolean:FX,function:"function"},controlNodeStyle:zX,__type__:{object:MX,boolean:FX}},nodes:zX,physics:{enabled:{boolean:FX},barnesHut:{theta:{number:PX},gravitationalConstant:{number:PX},centralGravity:{number:PX},springLength:{number:PX},springConstant:{number:PX},damping:{number:PX},avoidOverlap:{number:PX},__type__:{object:MX}},forceAtlas2Based:{theta:{number:PX},gravitationalConstant:{number:PX},centralGravity:{number:PX},springLength:{number:PX},springConstant:{number:PX},damping:{number:PX},avoidOverlap:{number:PX},__type__:{object:MX}},repulsion:{centralGravity:{number:PX},springLength:{number:PX},springConstant:{number:PX},nodeDistance:{number:PX},damping:{number:PX},__type__:{object:MX}},hierarchicalRepulsion:{centralGravity:{number:PX},springLength:{number:PX},springConstant:{number:PX},nodeDistance:{number:PX},damping:{number:PX},avoidOverlap:{number:PX},__type__:{object:MX}},maxVelocity:{number:PX},minVelocity:{number:PX},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:FX},iterations:{number:PX},updateInterval:{number:PX},onlyDynamicEdges:{boolean:FX},fit:{boolean:FX},__type__:{object:MX,boolean:FX}},timestep:{number:PX},adaptiveTimestep:{boolean:FX},wind:{x:{number:PX},y:{number:PX},__type__:{object:MX}},__type__:{object:MX,boolean:FX}},autoResize:{boolean:FX},clickToUse:{boolean:FX},locale:{string:LX},locales:{__any__:{any:"any"},__type__:{object:MX}},height:{string:LX},width:{string:LX},__type__:{object:MX}},RX={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},jX=function(e,t,n){var i;return!(!MM(e).call(e,"physics")||!MM(i=RX.physics.solver).call(i,t)||n.physics.solver===t||"wind"===t)},UX=function(){function e(){YF(this,e)}return QF(e,[{key:"getDistances",value:function(e,t,n){for(var i={},r=e.edges,o=0;o<t.length;o++){var s={};i[t[o]]=s;for(var a=0;a<t.length;a++)s[t[a]]=o==a?0:1e9}for(var c=0;c<n.length;c++){var l=r[n[c]];!0===l.connected&&void 0!==i[l.fromId]&&void 0!==i[l.toId]&&(i[l.fromId][l.toId]=1,i[l.toId][l.fromId]=1)}for(var h=t.length,u=0;u<h;u++)for(var d=t[u],f=i[d],p=0;p<h-1;p++)for(var v=t[p],y=i[v],g=p+1;g<h;g++){var m=t[g],b=i[m],_=Math.min(y[m],y[d]+f[m]);y[m]=_,b[v]=_}return i}}]),e}(),$X=function(){function e(t,n,i){YF(this,e),this.body=t,this.springLength=n,this.springConstant=i,this.distanceSolver=new UX}return QF(e,[{key:"setOptions",value:function(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}},{key:"solve",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.distanceSolver.getDistances(this.body,e,t);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();for(var r=.01,o=1,s=0,a=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),c=5,l=1e9,h=0,u=0,d=0,f=0,p=0;l>r&&s<a;){s+=1;var v=this._getHighestEnergyNode(n),y=QP(v,4);for(h=y[0],l=y[1],u=y[2],d=y[3],f=l,p=0;f>o&&p<c;){p+=1,this._moveNode(h,u,d);var g=this._getEnergy(h),m=QP(g,3);f=m[0],u=m[1],d=m[2]}}}},{key:"_getHighestEnergyNode",value:function(e){for(var t=this.body.nodeIndices,n=this.body.nodes,i=0,r=t[0],o=0,s=0,a=0;a<t.length;a++){var c=t[a];if(!0!==n[c].predefinedPosition||!0===n[c].isCluster&&!0===e||!0!==n[c].options.fixed.x||!0!==n[c].options.fixed.y){var l=QP(this._getEnergy(c),3),h=l[0],u=l[1],d=l[2];i<h&&(i=h,r=c,o=u,s=d)}}return[r,i,o,s]}},{key:"_getEnergy",value:function(e){var t=QP(this.E_sums[e],2),n=t[0],i=t[1];return[Math.sqrt(Math.pow(n,2)+Math.pow(i,2)),n,i]}},{key:"_moveNode",value:function(e,t,n){for(var i=this.body.nodeIndices,r=this.body.nodes,o=0,s=0,a=0,c=r[e].x,l=r[e].y,h=this.K_matrix[e],u=this.L_matrix[e],d=0;d<i.length;d++){var f=i[d];if(f!==e){var p=r[f].x,v=r[f].y,y=h[f],g=u[f],m=1/Math.pow(Math.pow(c-p,2)+Math.pow(l-v,2),1.5);o+=y*(1-g*Math.pow(l-v,2)*m),s+=y*(g*(c-p)*(l-v)*m),a+=y*(1-g*Math.pow(c-p,2)*m)}}var b=(t/o+n/s)/(s/o-a/s),_=-(s*b+t)/o;r[e].x+=_,r[e].y+=b,this._updateE_matrix(e)}},{key:"_createL_matrix",value:function(e){var t=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(var i=0;i<t.length;i++){this.L_matrix[t[i]]={};for(var r=0;r<t.length;r++)this.L_matrix[t[i]][t[r]]=n*e[t[i]][t[r]]}}},{key:"_createK_matrix",value:function(e){var t=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(var i=0;i<t.length;i++){this.K_matrix[t[i]]={};for(var r=0;r<t.length;r++)this.K_matrix[t[i]][t[r]]=n*Math.pow(e[t[i]][t[r]],-2)}}},{key:"_createE_matrix",value:function(){var e=this.body.nodeIndices,t=this.body.nodes;this.E_matrix={},this.E_sums={};for(var n=0;n<e.length;n++)this.E_matrix[e[n]]=[];for(var i=0;i<e.length;i++){for(var r=e[i],o=t[r].x,s=t[r].y,a=0,c=0,l=i;l<e.length;l++){var h=e[l];if(h!==r){var u=t[h].x,d=t[h].y,f=1/Math.sqrt(Math.pow(o-u,2)+Math.pow(s-d,2));this.E_matrix[r][l]=[this.K_matrix[r][h]*(o-u-this.L_matrix[r][h]*(o-u)*f),this.K_matrix[r][h]*(s-d-this.L_matrix[r][h]*(s-d)*f)],this.E_matrix[h][i]=this.E_matrix[r][l],a+=this.E_matrix[r][l][0],c+=this.E_matrix[r][l][1]}}this.E_sums[r]=[a,c]}}},{key:"_updateE_matrix",value:function(e){for(var t=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[e],r=this.K_matrix[e],o=this.L_matrix[e],s=n[e].x,a=n[e].y,c=0,l=0,h=0;h<t.length;h++){var u=t[h];if(u!==e){var d=i[h],f=d[0],p=d[1],v=n[u].x,y=n[u].y,g=1/Math.sqrt(Math.pow(s-v,2)+Math.pow(a-y,2)),m=r[u]*(s-v-o[u]*(s-v)*g),b=r[u]*(a-y-o[u]*(a-y)*g);i[h]=[m,b],c+=m,l+=b;var _=this.E_sums[u];_[0]+=m-f,_[1]+=b-p}}this.E_sums[e]=[c,l]}}]),e}();function HX(e,t,n){var i,r,o,s,a=this;if(!(this instanceof HX))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:Zj,clickToUse:!1},yC(this.options,this.defaultOptions),this.body={container:e,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:BC(i=this.on).call(i,this),off:BC(r=this.off).call(r,this),emit:BC(o=this.emit).call(o,this),once:BC(s=this.once).call(s,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new Qj((function(){return a.body.emitter.emit("_requestRedraw")})),this.groups=new x$,this.canvas=new tq(this.body),this.selectionHandler=new cV(this.body,this.canvas),this.interactionHandler=new cq(this.body,this.canvas,this.selectionHandler),this.view=new iq(this.body,this.canvas),this.renderer=new KG(this.body,this.canvas),this.physics=new zG(this.body),this.layoutEngine=new TX(this.body),this.clustering=new XG(this.body),this.manipulation=new AX(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new IW(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new CG(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new $X(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(n),this.setData(t)}qC(HX.prototype),HX.prototype.setOptions=function(e){var t=this;if(null===e&&(e=void 0),void 0!==e){!0===yj.validate(e,BX)&&console.error("%cErrors have been found in the supplied options object.",vj);if(MR(["locale","locales","clickToUse"],this.options,e),void 0!==e.locale&&(e.locale=function(e,t){try{var n=QP(t.split(/[-_ /]/,2),2),i=n[0],r=n[1],o=null!=i?i.toLowerCase():null,s=null!=r?r.toUpperCase():null;if(o&&s){var a,c=o+"-"+s;if(Object.prototype.hasOwnProperty.call(e,c))return c;console.warn(cN(a="Unknown variant ".concat(s," of language ")).call(a,o,"."))}if(o){var l=o;if(Object.prototype.hasOwnProperty.call(e,l))return l;console.warn("Unknown language ".concat(o))}return console.warn("Unknown locale ".concat(t,", falling back to English.")),"en"}catch(e){return console.error(e),console.warn("Unexpected error while normalizing locale ".concat(t,", falling back to English.")),"en"}}(e.locales||this.options.locales,e.locale)),e=this.layoutEngine.setOptions(e.layout,e),this.canvas.setOptions(e),this.groups.setOptions(e.groups),this.nodesHandler.setOptions(e.nodes),this.edgesHandler.setOptions(e.edges),this.physics.setOptions(e.physics),this.manipulation.setOptions(e.manipulation,e,this.options),this.interactionHandler.setOptions(e.interaction),this.renderer.setOptions(e.interaction),this.selectionHandler.setOptions(e.interaction),void 0!==e.groups&&this.body.emitter.emit("refreshNodes"),"configure"in e&&(this.configurator||(this.configurator=new dj(this,this.body.container,RX,this.canvas.pixelRatio,jX)),this.configurator.setOptions(e.configure)),this.configurator&&!0===this.configurator.options.enabled){var n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};zR(n.nodes,this.nodesHandler.options),zR(n.edges,this.edgesHandler.options),zR(n.layout,this.layoutEngine.options),zR(n.interaction,this.selectionHandler.options),zR(n.interaction,this.renderer.options),zR(n.interaction,this.interactionHandler.options),zR(n.manipulation,this.manipulation.options),zR(n.physics,this.physics.options),zR(n.global,this.canvas.options),zR(n.global,this.options),this.configurator.setModuleOptions(n)}void 0!==e.clickToUse?!0===e.clickToUse?void 0===this.activator&&(this.activator=new uj(this.canvas.frame),this.activator.on("change",(function(){t.body.emitter.emit("activate")}))):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},HX.prototype._updateVisibleIndices=function(){var e=this.body.nodes,t=this.body.edges;for(var n in this.body.nodeIndices=[],this.body.edgeIndices=[],e)Object.prototype.hasOwnProperty.call(e,n)&&(this.clustering._isClusteredNode(n)||!1!==e[n].options.hidden||this.body.nodeIndices.push(e[n].id));for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i],o=e[r.fromId],s=e[r.toId],a=void 0!==o&&void 0!==s;!this.clustering._isClusteredEdge(i)&&!1===r.options.hidden&&a&&!1===o.options.hidden&&!1===s.options.hidden&&this.body.edgeIndices.push(r.id)}},HX.prototype.bindEventListeners=function(){var e=this;this.body.emitter.on("_dataChanged",(function(){e.edgesHandler._updateState(),e.body.emitter.emit("_dataUpdated")})),this.body.emitter.on("_dataUpdated",(function(){e.clustering._updateState(),e._updateVisibleIndices(),e._updateValueRange(e.body.nodes),e._updateValueRange(e.body.edges),e.body.emitter.emit("startSimulation"),e.body.emitter.emit("_requestRedraw")}))},HX.prototype.setData=function(e){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),e&&e.dot&&(e.nodes||e.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(e&&e.options),e&&e.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var t=Xj(e.dot);this.setData(t)}else if(e&&e.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var n=Yj(e.gephi);this.setData(n)}else this.nodesHandler.setData(e&&e.nodes,!0),this.edgesHandler.setData(e&&e.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},HX.prototype.destroy=function(){for(var e in this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images,this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&delete this.body.nodes[e];for(var t in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,t)&&delete this.body.edges[t];AR(this.body.container)},HX.prototype._updateValueRange=function(e){var t,n=void 0,i=void 0,r=0;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=e[t].getValue();void 0!==o&&(n=void 0===n?o:Math.min(o,n),i=void 0===i?o:Math.max(o,i),r+=o)}if(void 0!==n&&void 0!==i)for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&e[t].setValueRange(n,i,r)},HX.prototype.isActive=function(){return!this.activator||this.activator.active},HX.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},HX.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},HX.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},HX.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},HX.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},HX.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},HX.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},HX.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},HX.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},HX.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},HX.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)},HX.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)},HX.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)},HX.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)},HX.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)},HX.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},HX.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},HX.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},HX.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},HX.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},HX.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},HX.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},HX.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},HX.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},HX.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},HX.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},HX.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)},HX.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},HX.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},HX.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},HX.prototype.getConnectedNodes=function(e){return void 0!==this.body.nodes[e]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},HX.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},HX.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},HX.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},HX.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},HX.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},HX.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},HX.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)},HX.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)},HX.prototype.getNodeAt=function(){var e=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==e&&void 0!==e.id?e.id:e},HX.prototype.getEdgeAt=function(){var e=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==e&&void 0!==e.id?e.id:e},HX.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},HX.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},HX.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()},HX.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},HX.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},HX.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},HX.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},HX.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},HX.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},HX.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},HX.prototype.getOptionsFromConfigurator=function(){var e={};return this.configurator&&(e=this.configurator.getOptions.apply(this.configurator)),e};const WX=JSON.parse("{\"ctype.h\":\"#pragma once\\nint isalnum(int chr);\\nint isalpha(int chr);\\nint iscntrl(int chr);\\nint isdigit(int chr);\\nint islower(int chr);\\nint isupper(int chr);\\nint isgraph(int chr);\\nint isprint(int chr);\\nint ispunct(int chr);\\nint isspace(int chr);\\nint isxdigit(int chr);\\nint tolower(int chr);\\nint toupper(int chr);\\n\",\"custom/alloc.c\":\"#include <stdlib.h>\\n#define PAGE_SIZE 65536\\n#define ALLOC_OFFSET (sizeof(struct node))\\n#define BLOCK_START(b) ((char*) (b) + ALLOC_OFFSET)\\nstatic struct node {\\nstruct node *prev;\\nstruct node *next;\\nsize_t size;\\nint padding;  \\n} alloc_list;\\nstatic void merge_blocks(struct node* node) {\\nstruct node* last = NULL;\\nwhile(node && node->next) {\\nsize_t end = (size_t) node + ALLOC_OFFSET + node->size;\\nstruct node* next = node->next;\\nif (end == (size_t) next) {\\nnode->size += ALLOC_OFFSET + next->size;\\nnode->next = next->next;\\nif (node->next->prev) node->next->prev = node;\\nnext->prev = NULL;\\nnext->next = NULL;\\nnext->size = 0;\\n} else {\\nnode = next;\\n}\\n}\\n}\\nvoid* malloc(size_t size) {\\nif(size > 0) {\\nsize = (size + 31) & ~31;  \\nstruct node *block = &alloc_list, *last = block;\\nwhile (block) {\\nif (block->size >= size) {\\nif (block->size - size >= 48) {\\nstruct node *new_block = (struct node*) (BLOCK_START(block) + size);\\nnew_block->size = block->size - size - ALLOC_OFFSET;\\nnew_block->prev = block;\\nnew_block->next = block->next;\\nblock->size = size;\\nif (block->next) block->next->prev = new_block;\\nblock->next = new_block;\\n}\\nstruct node *prev = block->prev, *next = block->next;\\nif (prev) prev->next = next;\\nif (next) next->prev = prev;\\nblock->next = (struct node *) -1;\\nblock->prev = (struct node *) 7;\\nreturn BLOCK_START(block);\\n}\\nlast = block;\\nblock = block->next;\\n}\\nint pages = 1 + ((size + ALLOC_OFFSET) / PAGE_SIZE);\\nint result = __wasm_i32__(1, pages, 0x40, 0);  \\nif (result < 0) {\\nreturn NULL;\\n} else {\\nlast->next = (struct node*) (result * PAGE_SIZE);\\nlast->next->size = (pages * PAGE_SIZE) - ALLOC_OFFSET;\\nlast->next->prev = last;\\nmerge_blocks(last);\\nreturn malloc(size);\\n}\\n}\\nreturn NULL;\\n}\\nvoid free(void* ptr) {\\nif (ptr) {\\nstruct node* block = (struct node*) ((char*)ptr - ALLOC_OFFSET);\\nif ((int) block->next != -1 || (int) block->prev != 7) {\\nreturn;\\n}\\n__wasm__(3, ptr, 0, block->size, 0xFC, 0x0B, 0x00);  \\nstruct node* list = &alloc_list;\\nwhile (list->next && list->next < block) {\\nlist = list->next;\\n}\\nblock->prev = list;\\nblock->next = list->next;\\nif (list->next && list->next->prev) list->next->prev = block;\\nlist->next = block;\\nmerge_blocks(&alloc_list);\\n}\\n}\\nvoid* realloc(void* ptr, size_t size) {\\nif (ptr) {\\nstruct node* block = (struct node*) ((char*)ptr - ALLOC_OFFSET);\\nif ((int) block->next != -1 || (int) block->prev != 7) {\\nreturn NULL;\\n}\\nif (block->size > size) {\\nreturn ptr;\\n}\\nvoid* new_ptr = malloc(size);\\n__wasm__(3, new_ptr, ptr, block->size, 0xFC, 0x0A, 0x00, 0x00);  \\nfree(ptr);\\nreturn new_ptr;\\n}\\nreturn NULL;\\n}\\nvoid* calloc(size_t nobj, size_t size) {\\nif (nobj && size) {\\nsize *= nobj;\\nvoid* ptr = malloc(size);\\nif (ptr) {\\n__wasm__(3, ptr, 0, size, 0xFC, 0x0B, 0x00);  \\n}\\nreturn ptr;\\n}\\nreturn NULL;\\n}\\n\",\"custom/ctype.c\":\"#include <ctype.h>\\nint isalnum(int chr) {\\nreturn isalpha(chr) || isdigit(chr);\\n}\\nint isalpha(int chr) {\\nreturn islower(chr) || isupper(chr);\\n}\\nint iscntrl(int chr) {\\nreturn chr < 0x20 || chr == 0x7f;\\n}\\nint isdigit(int chr) {\\nreturn chr >= '0' && chr <= '9';\\n}\\nint islower(int chr) {\\nreturn chr >= 'a' && chr <= 'z';\\n}\\nint isupper(int chr) {\\nreturn chr >= 'A' && chr <= 'Z';\\n}\\nint isgraph(int chr) {\\nreturn chr >= ' ' && chr <= '~';\\n}\\nint isprint(int chr) {\\nreturn chr > ' ' && chr <= '~';\\n}\\nint ispunct(int chr) {\\nreturn chr >= 'a' && chr <= 'z';\\n}\\nint isspace(int chr) {\\nreturn chr == ' ' || (chr >= '\\\\t' && chr <= '\\\\r');\\n}\\nint isxdigit(int chr) {\\nreturn isdigit(chr) || (chr >= 'a' && chr <= 'f') || (chr >= 'A' && chr <= 'F');\\n}\\nint tolower(int chr) {\\nreturn isupper(chr) ? chr + 32 : chr;\\n}\\nint toupper(int chr) {\\nreturn islower(chr) ? chr - 32 : chr;\\n}\\n\",\"custom/math.c\":\"#include <math.h>\\n#include <wasm/f64.h>\\ndouble sqrt(double d) {\\nreturn f64_sqrt(d);\\n}\\ndouble ceil(double d) {\\nreturn f64_ceil(d);\\n}\\ndouble fabs(double d) {\\nreturn f64_abs(d);\\n}\\ndouble floor(double d) {\\nreturn f64_floor(d);\\n}\\ndouble fmax(double d1, double d2) {\\nreturn f64_max(d1, d2);\\n}\\ndouble fmin(double d1, double d2) {\\nreturn f64_min(d1, d2);\\n}\\ndouble trunc(double d) {\\nreturn f64_trunc(d);\\n}\\ndouble copysign(double d1, double d2) {\\nreturn f64_copysign(d1, d2);\\n}\\ndouble round(double d) {\\nreturn f64_nearest(d);\\n}\\ndouble exp(double d) {\\ndouble sum = 1 + d, factorial = 1, power = d;\\nfor (int k = 2; k <= 5; k++) {\\npower *= d;\\nfactorial *= k;\\nsum += power / factorial;\\n}\\nreturn sum;\\n}\\n\",\"custom/stdio.c\":\"#include <stdio.h>\\n#ifndef FILES\\nint putchar(int chr) {\\n__put_char(chr);\\nreturn chr;\\n}\\nint puts(const char *s) {\\nchar *x = s;\\nwhile (*x) {\\n__put_char(*x);\\nx++;\\n}\\n__put_char('\\\\n');\\nreturn 0;\\n}\\n#else\\n#include <stdlib.h>\\n#include <string.h>\\n#include <stdbool.h>\\n#define __fhandle_stdin 0\\n#define __fhandle_stdout 1\\n#define __fhandle_stderr 2\\n#define __fhandle_fname 3\\nstatic FILE __stdin = {__fhandle_stdin, -1, false, false};\\nFILE* stdin = &__stdin;\\nstatic FILE __stdout = {__fhandle_stdout, -1, false, false};\\nFILE* stdout = &__stdout;\\nstatic FILE __stderr = {__fhandle_stderr, -1, false, false};\\nFILE* stderr = &__stderr;\\n#define __fhandle_flag_str 1\\nstatic void store_fname(const char *s) {\\nchar *x = s;\\nwhile (*x) {\\n__put_char(__fhandle_fname, *x);\\nx++;\\n}\\n__put_char(__fhandle_fname, 0);\\n}\\nFILE *fopen(const char *filename, const char *mode) {\\nreturn freopen(filename, mode, NULL);\\n}\\nFILE *freopen(const char *filename, const char *mode, FILE* stream) {\\nstore_fname(filename);\\nif (!__exists() && strchr(mode, 'r')) {\\nreturn NULL;\\n}\\nif (stream == NULL) {\\nstream = malloc(sizeof(struct __stdio_file));\\n}\\nstore_fname(filename);\\nstream->handle = __get_fhandle();\\nstream->unget = -1;\\nstream->len = 0;\\nstream->flags = 0;\\nstream->error = false;\\nstream->eof = false;\\nif (strchr(mode, 'a')) {\\nfseek(stream, 0, SEEK_END);\\n}\\nreturn stream;\\n}\\nvoid __str2file(FILE *stream, const char *data) {\\nstream->handle = (int) data;\\nstream->unget = -1;\\nstream->len = 0;\\nstream->flags = __fhandle_flag_str;\\nstream->error = false;\\nstream->eof = false;\\n}\\nint fflush(FILE* stream) {\\nreturn 0;  \\n}\\nint fclose(FILE* stream) {\\nfree(stream);\\nreturn 0;\\n}\\nint remove(const char *filename) {\\nreturn rename(filename, \\\"\\\");\\n}\\nint rename(const char *oldname, const char *newname) {\\nstore_fname(oldname);\\nstore_fname(newname);\\nreturn __move();\\n}\\nstatic char __tmpnam[L_tmpnam];\\nstatic int __tmpcount;\\nchar *tmpnam(char *s) {\\nif (s == NULL) s = __tmpnam;\\nsnprintf(s, L_tmpnam, \\\"$tmp/%d\\\", ++__tmpcount);\\nreturn s;\\n}\\nFILE *tmpfile(void) {\\nreturn fopen(tmpnam(NULL), \\\"wb+\\\");\\n}\\nint setvbuf(FILE *stream, char *buf, int mode, size_t size) {\\nreturn -1;  \\n}\\nvoid setbuf(FILE *stream, char *buf) {\\n}\\nint fgetc(FILE *stream) {\\nint c;\\nif (stream->unget >= 0) {\\nc = (unsigned char) stream->unget;\\nstream->unget = -1;\\n} else if (stream->flags & __fhandle_flag_str) {\\nchar* s = (char*) stream->handle;\\nc = *(s++);\\nif (c) {\\nstream->handle = (int) s;\\n} else {\\nstream->eof = true;\\nc = EOF;\\n}\\nstream->error = false;\\nstream->len++;\\n} else {\\nc = __get_char(stream->handle);\\nstream->eof = c == EOF;\\nstream->error = c < 0 && c != EOF;\\nstream->len++;\\n}\\nreturn c;\\n}\\nchar *fgets(char *s, int n, FILE *stream) {\\nint i = 0;\\nwhile (i < n - 1) {\\nint c = fgetc(stream);\\nif (c < 0) return NULL;\\ns[i++] = c;\\nif (c == '\\\\n') break;\\n}\\ns[i] = 0;\\nreturn s;\\n}\\nint fputc(int c, FILE *stream) {\\nif (stream->flags & __fhandle_flag_str) return EOF;\\nint result = __put_char(stream->handle, c);\\nif (result >= 0) return c;\\nreturn result;\\n}\\nint fputs(const char *s, FILE *stream) {\\nif (stream->flags & __fhandle_flag_str) return EOF;\\nchar *x = s;\\nwhile (*x) {\\nif (__put_char(stream->handle, *x) < 0) return EOF;\\nx++;\\n}\\nreturn 0;\\n}\\nint getchar(void) {\\nreturn fgetc(stdin);\\n}\\nchar *gets(char *s) {\\nwhile (true) {\\nint c = fgetc(stdin);\\nif (c == '\\\\n') {\\n*s = 0;\\nreturn s;\\n} else if (c < 0) {\\nbreak;\\n} else {\\n*s = c;\\n}\\ns++;\\n}\\nreturn NULL;\\n}\\nint putchar(int c) {\\nreturn fputc(c, stdout);\\n}\\nint puts(const char *s) {\\nif (fputs(s, stdout) < 0) return EOF;\\nif (fputc('\\\\n', stdout) < 0) return EOF;\\nreturn 0;\\n}\\nint ungetc(int c, FILE *stream) {\\nif (c < 0 || stream->unget >= 0) return EOF;\\nstream->unget = c;\\nreturn c;\\n}\\nsize_t fread(void *ptr, size_t size, size_t nobj, FILE *stream) {\\nint n;\\nfor (n = 0; n < nobj; n++) {\\nfor (int i = 0; i < size; i++) {\\nint c = fgetc(stream);\\nif (c < 0) return n;\\n((char*) ptr)[(n * size) + i] = c;\\n}\\n}\\nreturn n;\\n}\\nsize_t fwrite(const void *ptr, size_t size, size_t nobj, FILE* stream) {\\nint n;\\nfor (n = 0; n < nobj; n++) {\\nfor (int i = 0; i < size; i++) {\\nif (fputc(((char*) ptr)[(n * size) + i], stream) < 0) {\\nreturn n;\\n}\\n}\\n}\\nreturn n;\\n}\\nint fseek(FILE *stream, long offset, int origin) {\\nif (stream->flags & __fhandle_flag_str) return -1;\\nlong pos;\\nif (origin == SEEK_SET) {\\npos = offset;\\n} else if (origin == SEEK_CUR) {\\npos = __get_pos(stream->handle) + offset;\\n} else if (origin == SEEK_END) {\\npos = __get_len(stream->handle) + offset;\\n} else {\\nreturn -1;\\n}\\nreturn fsetpos(stream, &pos);\\n}\\nlong ftell(FILE *stream) {\\nif (stream->flags & __fhandle_flag_str) return -1;\\nlong pos = __get_pos(stream->handle);\\nif (pos < 0) return -1;\\nreturn pos;\\n}\\nvoid rewind(FILE *stream) {\\nfseek(stream, 0L, SEEK_SET);\\nclearerr(stream);\\n}\\nint fgetpos(FILE *stream, fpos_t *ptr) {\\nif (stream->flags & __fhandle_flag_str) return -1;\\nlong pos = __get_pos(stream->handle);\\nif (pos < 0) return -1;\\n*ptr = pos;\\nreturn 0;\\n}\\nint fsetpos(FILE *stream, const fpos_t *ptr) {\\nif (stream->flags & __fhandle_flag_str || __set_pos(stream->handle, *ptr) != 0) {\\nreturn -1;\\n}\\nreturn 0;\\n}\\nvoid clearerr(FILE *stream) {\\nstream->eof = false;\\nstream->error = false;\\n}\\nint feof(FILE *stream) {\\nreturn stream->eof;\\n}\\nint ferror(FILE *stream) {\\nreturn stream->error;\\n}\\nvoid perror(const char *s) {\\nfputs(s, stderr);\\nfputs(\\\": error\\\\n\\\", stderr);\\n}\\nint fscanf(FILE *stream, const char *fmt, ...) {\\nva_list va;\\nva_start(va, fmt);\\nint result = vfscanf(stream, fmt, va);\\nva_end(va);\\nreturn result;\\n}\\nint scanf(const char *fmt, ...) {\\nva_list va;\\nva_start(va, fmt);\\nint result = vfscanf(stdin, fmt, va);\\nva_end(va);\\nreturn result;\\n}\\nint sscanf(char *s, const char *fmt, ...) {\\nFILE f;\\n__str2file(&f, s);\\nva_list va;\\nva_start(va, fmt);\\nint result = vfscanf(&f, fmt, va);\\nva_end(va);\\nreturn result;\\n}\\n#endif\\n\",\"custom/stdlib.c\":\"#include <stdlib.h>\\nvoid abort() {\\n__wasm__(0, 0x00);\\n}\\nvoid exit(int code) {\\n__wasm__(0, 0x00);\\n}\\nint atexit(void (*fcn)(void)) {\\nreturn 1;\\n}\\nint system(const char *s) {\\nreturn s == NULL ? 0 : 1;\\n}\\nchar *getenv(const char *name) {\\nreturn NULL;\\n}\\ndouble atof(const char *s) {\\nreturn strtod(s, (char**) NULL);\\n}\\nint atoi(const char *s) {\\nreturn (int) strtol(s, (char**) NULL, 10);\\n}\\nint atol(const char *s) {\\nreturn strtol(s, (char**) NULL, 10);\\n}\\nint abs(int n) {\\nreturn n >= 0 ? n : -n;\\n}\\nint labs(long n) {\\nreturn n >= 0 ? n : -n;\\n}\\ndiv_t div(int num, int denom) {\\ndiv_t result;\\nresult.quot = num / denom;\\nresult.rem = num % denom;\\nreturn result;\\n}\\nldiv_t ldiv(long num, long denom) {\\nldiv_t result;\\nresult.quot = num / denom;\\nresult.rem = num % denom;\\nreturn result;\\n}\\n\",\"custom/string.c\":\"#include <string.h>\\nchar* strcpy(char* destination, const char* source) {\\nmemcpy(destination, source, strlen(source) + 1);  \\nreturn destination;\\n}\\nchar* strncpy(char* destination, const char* source, size_t n) {\\nconst size_t len = strnlen(source, n);\\nif (len < n) {\\nmemcpy(destination, source, len);\\nmemset(destination + len, 0, n - len);\\n} else {\\nmemcpy(destination, source, n);\\n}\\nreturn destination;\\n}\\nvoid* memcpy(void* destination, const void* source, size_t n) {\\n__wasm__(3, destination, source, n, 0xFC, 0x0A, 0, 0);  \\nreturn destination;\\n}\\nvoid* memset(void* destination, int c, size_t n) {\\n__wasm__(3, destination, c, n, 0xFC, 0x0B, 0);  \\nreturn destination;\\n}\\n\",\"custom/time.c\":\"#include <time.h>\\nclock_t clock() {\\nreturn __time();\\n}\\n\",\"errno.h\":\"extern int errno;\\n#define EDOM 10\\n#define ERANGE 11\\n#define EILSEQ 12\\n\",\"float.h\":\"#pragma once\\n#define FLT_RADIX 2\\n#define FLT_ROUNDS 1\\n#define FLT_DIG 6\\n#define FLT_EPSILON 1.192092896e-07F\\n#define FLT_MANT_DIG 24\\n#define FLT_MAX 3.402823466e+38F\\n#define FLT_MAX_EXP 128\\n#define FLT_MIN 1.175494351e-38F\\n#define FLT_MIN_EXP (-125)\\n#define DBL_DIG 15\\n#define DBL_EPSILON 2.2204460492503131e-016\\n#define DBL_MANT_DIG 53\\n#define DBL_MAX 1.7976931348623158e+308\\n#define DBL_MAX_EXP 1024\\n#define DBL_MIN 2.2250738585072014e-308\\n#define DBL_MIN_EXP (-1021)\\n#define LDBL_DIG 15\\n#define LDBL_EPSILON 2.2204460492503131e-016\\n#define LDBL_MANT_DIG 53\\n#define LDBL_MAX 1.7976931348623158e+308\\n#define LDBL_MAX_EXP 1024\\n#define LDBL_MIN 2.2250738585072014e-308\\n#define LDBL_MIN_EXP (-1021)\\n\",\"libraries/avrlibc/LICENSE\":\"The contents of avr-libc are licensed with a Modified BSD License.\\n\\nAll of this is supposed to be Free Software, Open Source, DFSG-free,\\nGPL-compatible, and OK to use in both free and proprietary applications.\\n\\nSee the license information in the individual source files for details.\\n\\nAdditions and corrections to this file are welcome.\\n\\n*******************************************************************************\\nPortions of avr-libc are Copyright (c) 1999-2010\\nKeith Gudger,\\nBjoern Haase,\\nSteinar Haugen,\\nPeter Jansen,\\nReinhard Jessich,\\nMagnus Johansson,\\nArtur Lipowski,\\nMarek Michalkiewicz,\\nColin O'Flynn,\\nBob Paddock,\\nReiner Patommel,\\nMichael Rickman,\\nTheodore A. Roth,\\nJuergen Schilling,\\nPhilip Soeberg,\\nAnatoly Sokolov,\\nNils Kristian Strom,\\nMichael Stumpf,\\nStefan Swanepoel,\\nEric B. Weddington,\\nJoerg Wunsch,\\nDmitry Xmelkov,\\nThe Regents of the University of California.\\nAll rights reserved.\\n\\n   Redistribution and use in source and binary forms, with or without\\n   modification, are permitted provided that the following conditions are met:\\n\\n   * Redistributions of source code must retain the above copyright\\n     notice, this list of conditions and the following disclaimer.\\n\\n   * Redistributions in binary form must reproduce the above copyright\\n     notice, this list of conditions and the following disclaimer in\\n     the documentation and/or other materials provided with the\\n     distribution.\\n\\n   * Neither the name of the copyright holders nor the names of\\n     contributors may be used to endorse or promote products derived\\n     from this software without specific prior written permission.\\n\\n   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \\\"AS IS\\\"\\n   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\\n   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\\n   ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\\n   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\\n   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\\n   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\\n   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\\n   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\\n   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\\n   POSSIBILITY OF SUCH DAMAGE.\\n\\n*******************************************************************************\\n\",\"libraries/avrlibc/src/bsearch.c\":\"#include <stddef.h>\\n#include <stdlib.h>\\nvoid *\\nbsearch(const void *key, const void *base0, size_t nmemb,\\nsize_t size, int (*compar)(const void *, const void *))\\n{\\nconst char *base = base0;\\nsize_t lim;\\nint cmp;\\nconst void *p;\\nfor (lim = nmemb; lim != 0; lim >>= 1) {\\np = base + (lim >> 1) * size;\\ncmp = (*compar)(key, p);\\nif (cmp == 0)\\nreturn ((void *)p);\\nif (cmp > 0) {\\t \\nbase = (char *)p + size;\\nlim--;\\n}\\t\\t \\n}\\nreturn (NULL);\\n}\",\"libraries/avrlibc/src/qsort.c\":\"#include <stdlib.h>\\ntypedef int cmp_t(const void *, const void *);\\nstatic char *med3(char *, char *, char *, cmp_t *);\\nstatic void swapfunc(char *, char *, int);\\n#define min(a, b)\\t((a) < (b) ? (a) : (b))\\n#define swapcode(TYPE, parmi, parmj, n) { \\t\\t\\\\\\nint i = (n) / sizeof (TYPE); \\t\\t\\t\\\\\\nTYPE *pi = (TYPE *) (parmi); \\t\\t\\t\\\\\\nTYPE *pj = (TYPE *) (parmj); \\t\\t\\t\\\\\\ndo { \\t\\t\\t\\t  \\t\\t\\\\\\nTYPE\\tt = *pi;\\t\\t\\t\\\\\\n*pi++ = *pj;\\t\\t\\t\\t\\\\\\n*pj++ = t;\\t\\t\\t\\t\\\\\\n} while (--i > 0);\\t\\t\\t\\t\\\\\\n}\\nstatic void\\nswapfunc(char *a, char *b, int n)\\n{\\nswapcode(char, a, b, n)\\n}\\n#define swap(a, b) swapfunc(a, b, es)\\n#define vecswap(a, b, n) \\tif ((n) > 0) swapfunc(a, b, n)\\nstatic char *\\nmed3(char *a, char *b, char *c, cmp_t *cmp)\\n{\\nreturn cmp(a, b) < 0 ?\\n(cmp(b, c) < 0 ? b : (cmp(a, c) < 0 ? c : a ))\\n:(cmp(b, c) > 0 ? b : (cmp(a, c) < 0 ? a : c ));\\n}\\nvoid\\nqsort(void *a, size_t n, size_t es, cmp_t *cmp)\\n{\\nchar *pa, *pb, *pc, *pd, *pl, *pm, *pn;\\nint d, r, swap_cnt;\\nloop:\\nswap_cnt = 0;\\nif (n < 7) {\\nfor (pm = (char *)a + es; pm < (char *)a + n * es; pm += es)\\nfor (pl = pm; pl > (char *)a && cmp(pl - es, pl) > 0;\\npl -= es)\\nswap(pl, pl - es);\\nreturn;\\n}\\npm = (char *)a + (n / 2) * es;\\nif (n > 7) {\\npl = a;\\npn = (char *)a + (n - 1) * es;\\nif (n > 40) {\\nd = (n / 8) * es;\\npl = med3(pl, pl + d, pl + 2 * d, cmp);\\npm = med3(pm - d, pm, pm + d, cmp);\\npn = med3(pn - 2 * d, pn - d, pn, cmp);\\n}\\npm = med3(pl, pm, pn, cmp);\\n}\\nswap(a, pm);\\npa = pb = (char *)a + es;\\npc = pd = (char *)a + (n - 1) * es;\\nfor (;;) {\\nwhile (pb <= pc && (r = cmp(pb, a)) <= 0) {\\nif (r == 0) {\\nswap_cnt = 1;\\nswap(pa, pb);\\npa += es;\\n}\\npb += es;\\n}\\nwhile (pb <= pc && (r = cmp(pc, a)) >= 0) {\\nif (r == 0) {\\nswap_cnt = 1;\\nswap(pc, pd);\\npd -= es;\\n}\\npc -= es;\\n}\\nif (pb > pc)\\nbreak;\\nswap(pb, pc);\\nswap_cnt = 1;\\npb += es;\\npc -= es;\\n}\\nif (swap_cnt == 0) {   \\nfor (pm = (char *)a + es; pm < (char *)a + n * es; pm += es)\\nfor (pl = pm; pl > (char *)a && cmp(pl - es, pl) > 0;\\npl -= es)\\nswap(pl, pl - es);\\nreturn;\\n}\\npn = (char *)a + n * es;\\nr = (int) min(pa - (char *)a, pb - pa);\\nvecswap(a, pb - r, r);\\nr = (int) min(pd - pc, pn - pd - es);\\nvecswap(pb, pn - r, r);\\nif ((r = (int) (pb - pa)) > es)\\nqsort(a, r / es, es, cmp);\\nif ((r = (int) (pd - pc)) > es) {\\na = pn - r;\\nn = r / es;\\ngoto loop;\\n}\\n}\\n\",\"libraries/avrlibc/src/strtod.c\":\"#include <ctype.h>\\n#include <limits.h>\\n#include <math.h>         \\n#include <stdlib.h>\\n#include <strings.h>\\nstatic const double pwr_p10 [6] = {\\n1e+1, 1e+2, 1e+4, 1e+8, 1e+16, 1e+32\\n};\\nstatic const double pwr_m10 [6] = {\\n1e-1, 1e-2, 1e-4, 1e-8, 1e-16, 1e-32\\n};\\ndouble\\nstrtod (const char * nptr, char ** endptr)\\n{\\nunion {\\nunsigned long u32;\\ndouble flt;\\n} x;\\nunsigned char c;\\nint exp;\\nunsigned char flag;\\n#define FL_MINUS    0x01     \\n#define FL_ANY      0x02     \\n#define FL_OVFL     0x04     \\n#define FL_DOT      0x08     \\n#define FL_MEXP     0x10     \\nif (endptr)\\n*endptr = (char *)nptr;\\ndo {\\nc = *nptr++;\\n} while (isspace (c));\\nflag = 0;\\nif (c == '-') {\\nflag = FL_MINUS;\\nc = *nptr++;\\n} else if (c == '+') {\\nc = *nptr++;\\n}\\nif (!strncasecmp (nptr - 1, \\\"inf\\\", 3)) {\\nnptr += 2;\\nif (!strncasecmp (nptr, \\\"inity\\\", 5))\\nnptr += 5;\\nif (endptr)\\n*endptr = (char *)nptr;\\nreturn flag & FL_MINUS ? -INFINITY : +INFINITY;\\n}\\nif (!strncasecmp (nptr - 1, \\\"nan\\\", 3)) {\\nif (endptr)\\n*endptr = (char *)nptr + 2;\\nreturn NAN;\\n}\\nx.u32 = 0;\\nexp = 0;\\nwhile (1) {\\nc -= '0';\\nif (c <= 9) {\\nflag |= FL_ANY;\\nif (flag & FL_OVFL) {\\nif (!(flag & FL_DOT))\\nexp += 1;\\n} else {\\nif (flag & FL_DOT)\\nexp -= 1;\\nx.u32 = x.u32 * 10 + c;\\nif (x.u32 >= (ULONG_MAX - 9) / 10)\\nflag |= FL_OVFL;\\n}\\n} else if (c == (('.'-'0') & 0xff)  &&  !(flag & FL_DOT)) {\\nflag |= FL_DOT;\\n} else {\\nbreak;\\n}\\nc = *nptr++;\\n}\\nif (c == (('e'-'0') & 0xff) || c == (('E'-'0') & 0xff)) {\\nint i;\\nc = *nptr++;\\ni = 2;\\nif (c == '-') {\\nflag |= FL_MEXP;\\nc = *nptr++;\\n} else if (c == '+') {\\nc = *nptr++;\\n} else {\\ni = 1;\\n}\\nc -= '0';\\nif (c > 9) {\\nnptr -= i;\\n} else {\\ni = 0;\\ndo {\\nif (i < 3200)\\ni = (((i << 2) + i) << 1) + c;     \\nc = *nptr++ - '0';\\n} while (c <= 9);\\nif (flag & FL_MEXP)\\ni = -i;\\nexp += i;\\n}\\n}\\nif ((flag & FL_ANY) && endptr)\\n*endptr = (char *)nptr - 1;\\nx.flt = (double) (x.u32);         \\nif ((flag & FL_MINUS) && (flag & FL_ANY))\\nx.flt = -x.flt;\\nif (x.flt != 0) {\\nint pwr;\\nif (exp < 0) {\\nnptr = (void *)(pwr_m10 + 5);\\nexp = -exp;\\n} else {\\nnptr = (void *)(pwr_p10 + 5);\\n}\\nfor (pwr = 32; pwr; pwr >>= 1) {\\nfor (; exp >= pwr; exp -= pwr) {\\nx.flt *= *((double *)nptr);\\n}\\nnptr -= sizeof(double);\\n}\\n}\\nreturn x.flt;\\n}\",\"libraries/avrlibc/src/strtol.c\":\"#include <limits.h>\\n#include <ctype.h>\\n#include <errno.h>\\n#include <stdlib.h>\\nlong\\nstrtol(const char *nptr, char **endptr, int base)\\n{\\nunsigned long acc;\\nunsigned char c;\\nunsigned long cutoff;\\nsigned char any;\\nunsigned char flag = 0;\\n#define FL_NEG\\t0x01\\t\\t \\n#define FL_0X\\t0x02\\t\\t \\nif (endptr)\\n*endptr = (char *)nptr;\\nif (base != 0 && (base < 2 || base > 36))\\nreturn 0;\\ndo {\\nc = *nptr++;\\n} while (isspace(c));\\nif (c == '-') {\\nflag = FL_NEG;\\nc = *nptr++;\\n} else if (c == '+')\\nc = *nptr++;\\nif ((base == 0 || base == 16) &&\\nc == '0' && (*nptr == 'x' || *nptr == 'X')) {\\nc = nptr[1];\\nnptr += 2;\\nbase = 16;\\nflag |= FL_0X;\\n}\\nif (base == 0)\\nbase = c == '0' ? 8 : 10;\\n#if  LONG_MIN != -LONG_MAX - 1\\n#  error \\\"This implementation of strtol() does not work on this platform.\\\"\\n#endif\\nswitch (base) {\\ncase 10:\\ncutoff = ((unsigned long)LONG_MAX + 1) / 10;\\nbreak;\\ncase 16:\\ncutoff = ((unsigned long)LONG_MAX + 1) / 16;\\nbreak;\\ncase 8:\\ncutoff = ((unsigned long)LONG_MAX + 1) / 8;\\nbreak;\\ncase 2:\\ncutoff = ((unsigned long)LONG_MAX + 1) / 2;\\nbreak;\\ndefault:\\ncutoff = ((unsigned long)LONG_MAX + 1) / base;\\n}\\nfor (acc = 0, any = 0;; c = *nptr++) {\\nif (c >= '0' && c <= '9')\\nc -= '0';\\nelse if (c >= 'A' && c <= 'Z')\\nc -= 'A' - 10;\\nelse if (c >= 'a' && c <= 'z')\\nc -= 'a' - 10;\\nelse\\nbreak;\\nif (c >= base)\\nbreak;\\nif (any < 0)\\ncontinue;\\nif (acc > cutoff) {\\nany = -1;\\ncontinue;\\n}\\nacc = acc * base + c;\\nif (acc > (unsigned long)LONG_MAX + 1)\\nany = -1;\\nelse\\nany = 1;\\n}\\nif (endptr) {\\nif (any)\\n*endptr = (char *)nptr - 1;\\nelse if (flag & FL_0X)\\n*endptr = (char *)nptr - 2;\\n}\\nif (any < 0) {\\nacc = (flag & FL_NEG) ? LONG_MIN : LONG_MAX;\\nerrno = ERANGE;\\n} else if (flag & FL_NEG) {\\nacc = -acc;\\n} else if ((signed long)acc < 0) {\\nacc = LONG_MAX;\\nerrno = ERANGE;\\n}\\nreturn (acc);\\n}\",\"libraries/avrlibc/src/strtoul.c\":\"#include <limits.h>\\n#include <ctype.h>\\n#include <errno.h>\\n#include <stdlib.h>\\nunsigned long\\nstrtoul(const char *nptr, char **endptr, int base)\\n{\\nunsigned long acc;\\nunsigned char c;\\nunsigned long cutoff;\\nsigned char any;\\nunsigned char flag = 0;\\n#define FL_NEG\\t0x01\\t\\t \\n#define FL_0X\\t0x02\\t\\t \\nif (endptr)\\n*endptr = (char *)nptr;\\nif (base != 0 && (base < 2 || base > 36))\\nreturn 0;\\ndo {\\nc = *nptr++;\\n} while (isspace(c));\\nif (c == '-') {\\nflag = FL_NEG;\\nc = *nptr++;\\n} else if (c == '+')\\nc = *nptr++;\\nif ((base == 0 || base == 16) &&\\nc == '0' && (*nptr == 'x' || *nptr == 'X')) {\\nc = nptr[1];\\nnptr += 2;\\nbase = 16;\\nflag |= FL_0X;\\n}\\nif (base == 0)\\nbase = c == '0' ? 8 : 10;\\nswitch (base) {\\ncase 16:    cutoff = ULONG_MAX / 16;  break;\\ncase 10:    cutoff = ULONG_MAX / 10;  break;\\ncase 8:     cutoff = ULONG_MAX / 8;   break;\\ndefault:    cutoff = ULONG_MAX / base;\\n}\\nfor (acc = 0, any = 0;; c = *nptr++) {\\nif (c >= '0' && c <= '9')\\nc -= '0';\\nelse if (c >= 'A' && c <= 'Z')\\nc -= 'A' - 10;\\nelse if (c >= 'a' && c <= 'z')\\nc -= 'a' - 10;\\nelse\\nbreak;\\nif (c >= base)\\nbreak;\\nif (any < 0)\\ncontinue;\\nif (acc > cutoff) {\\nany = -1;\\ncontinue;\\n}\\nacc = acc * base + c;\\nany = (c > acc) ? -1 : 1;\\n}\\nif (endptr) {\\nif (any)\\n*endptr = (char *)nptr - 1;\\nelse if (flag & FL_0X)\\n*endptr = (char *)nptr - 2;\\n}\\nif (flag & FL_NEG)\\nacc = -acc;\\nif (any < 0) {\\nacc = ULONG_MAX;\\nerrno = ERANGE;\\n}\\nreturn (acc);\\n}\",\"libraries/avrlibc/src/vfscanf.c\":\"#ifdef FILES\\n#include <ctype.h>\\n#include <limits.h>\\n#include <math.h>\\n#include <stdarg.h>\\n#include <stddef.h>\\n#include <stdio.h>\\n#include <stdlib.h>\\n#include <string.h>\\n#define FL_STAR        0x01     \\n#define FL_WIDTH       0x02     \\n#define FL_LONG        0x04     \\n#define FL_CHAR        0x08     \\n#define FL_OCT         0x10     \\n#define FL_DEC         0x20     \\n#define FL_HEX         0x40     \\n#define FL_MINUS       0x80     \\n#define FL_SHORT       0x100\\nstatic void putval(char *addr, long val, unsigned char flags) {\\nif (!(flags & FL_STAR)) {\\nif (flags & FL_CHAR)\\n*(char *) addr = (char) val;\\nelse if (flags & FL_LONG)\\n*(long *) addr = (long) val;\\nelse if (flags & FL_SHORT)\\n*(short *) addr = (short) val;\\nelse\\n*(int *) addr = (int) val;\\n}\\n}\\nstatic unsigned char conv_int(FILE *stream, int width, void *addr, unsigned char flags) {\\nunsigned long val;\\nint i;\\ni = getc(stream);             \\nswitch ((unsigned char) i) {\\ncase '-':\\nflags |= FL_MINUS;\\ncase '+':\\nif (!--width || (i = getc(stream)) < 0)\\ngoto err;\\n}\\n{\\nval = 0;\\nflags &= ~FL_WIDTH;\\nif (!(flags & (FL_DEC | FL_OCT)) && (unsigned char) i == '0') {\\nif (!--width || (i = getc(stream)) < 0)\\ngoto putval;\\nflags |= FL_WIDTH;\\nif ((unsigned char) (i) == 'x' || (unsigned char) (i) == 'X') {\\nflags |= FL_HEX;\\nif (!--width || (i = getc(stream)) < 0)\\ngoto putval;\\n} else {\\nif (!(flags & FL_HEX))\\nflags |= FL_OCT;\\n}\\n}\\ndo {\\nunsigned char c = i;\\nc -= '0';\\nif (flags & FL_OCT) {\\nif (c > 7) {\\nungetc(i, stream);\\nbreak;\\n}\\nval = val * 8 + c;\\n} else if (flags & FL_HEX) {\\nif (c > 9) {\\nc &= ~('A' ^ 'a');\\nc += '0' - 'A';\\nif (c > 5) {\\nungetc(i, stream);\\nbreak;\\n}\\nc += 10;\\n}\\nval = val * 16 + c;\\n} else {\\nif (c > 9) {\\nungetc(i, stream);\\nbreak;\\n}\\nval = val * 10 + c;\\n}\\nflags |= FL_WIDTH;\\nif (!--width) goto putval;\\n} while ((i = getc(stream)) >= 0);\\nif (!(flags & FL_WIDTH))\\ngoto err;\\nputval:\\nif (flags & FL_MINUS) val = -(long) val;\\nputval(addr, val, flags);\\nreturn 1;\\n}\\nerr:\\nreturn 0;\\n}\\nstatic const char *conv_brk(FILE *stream, int width, char *addr, const char *fmt) {\\nunsigned char msk[32];\\nunsigned char fnegate;\\nunsigned char frange;\\nunsigned char cabove;\\nint i;\\nmemset(msk, 0, sizeof(msk));\\nfnegate = 0;\\nfrange = 0;\\ncabove = 0;             \\nfor (i = 0;; i++) {\\nunsigned char c = *(fmt++);\\nif (c == 0) {\\nreturn 0;\\n} else if (c == '^' && !i) {\\nfnegate = 1;\\ncontinue;\\n} else if (i > fnegate) {\\nif (c == ']') break;\\nif (c == '-' && !frange) {\\nfrange = 1;\\ncontinue;\\n}\\n}\\nif (!frange) cabove = c;\\nfor (;;) {\\nmsk[c >> 3] |= 1 << (c & 7);\\nif (c == cabove) break;\\nif (c < cabove)\\nc++;\\nelse\\nc--;\\n}\\nfrange = 0;\\n}\\nif (frange)\\nmsk['-' / 8] |= 1 << ('-' & 7);\\nif (fnegate) {\\nunsigned char *p = msk;\\ndo {\\nunsigned char c = *p;\\n*p++ = ~c;\\n} while (p != msk + sizeof(msk));\\n}\\nfnegate = 1;\\ndo {\\ni = getc(stream);\\nif (i < 0) break;\\nif (!((msk[(unsigned char) i >> 3] >> (i & 7)) & 1)) {\\nungetc(i, stream);\\nbreak;\\n}\\nif (addr) *addr++ = i;\\nfnegate = 0;\\n} while (--width);\\nif (fnegate) {\\nreturn 0;\\n} else {\\nif (addr) *addr = 0;\\nreturn fmt;\\n}\\n}\\nstatic const double pwr_p10[6] = {\\n1e+1, 1e+2, 1e+4, 1e+8, 1e+16, 1e+32\\n};\\nstatic const double pwr_m10[6] = {\\n1e-1, 1e-2, 1e-4, 1e-8, 1e-16, 1e-32\\n};\\nstatic const char pstr_nfinity[] = \\\"nfinity\\\";\\nstatic const char pstr_an[] = \\\"an\\\";\\nstatic unsigned char conv_flt(FILE *stream, int width, double *addr) {\\nunion {\\nunsigned long u32;\\ndouble flt;\\n} x;\\nint i;\\nconst char *p = 0;\\nint exp;\\nunsigned char flag;\\n#define FL_MINUS   0x80     \\n#define FL_ANY     0x02     \\n#define FL_OVFL    0x04     \\n#define FL_DOT     0x08     \\n#define FL_MEXP    0x10     \\ni = getc(stream);         \\nflag = 0;\\nswitch ((unsigned char) i) {\\ncase '-':\\nflag = FL_MINUS;\\ncase '+':\\nif (!--width || (i = getc(stream)) < 0)\\ngoto err;\\n}\\nswitch (tolower(i)) {\\ncase 'n':\\np = pstr_an;\\ncase 'i':\\nif (!p) p = pstr_nfinity;\\nunsigned char c;\\nwhile ((c = *(p++)) != 0) {\\nif (!--width || (i = getc(stream)) < 0 || (!((unsigned char) tolower(i) == c || !(ungetc(i, stream), 1)))) {\\nif (p == pstr_nfinity + 3) break;\\ngoto err;\\n}\\n}\\nx.flt = (p == pstr_an + 3) ? NAN : INFINITY;\\nbreak;\\ndefault:\\nexp = 0;\\nx.u32 = 0;\\ndo {\\nunsigned char c = i - '0';\\nif (c <= 9) {\\nflag |= FL_ANY;\\nif (flag & FL_OVFL) {\\nif (!(flag & FL_DOT))\\nexp += 1;\\n} else {\\nif (flag & FL_DOT)\\nexp -= 1;\\nx.u32 = x.u32 * 10 + c;\\nif (x.u32 >= (ULONG_MAX - 9) / 10)\\nflag |= FL_OVFL;\\n}\\n} else if (c == (('.' - '0') & 0xff) && !(flag & FL_DOT)) {\\nflag |= FL_DOT;\\n} else {\\nbreak;\\n}\\n} while (--width && (i = getc(stream)) >= 0);\\nif (!(flag & FL_ANY))\\ngoto err;\\nif ((unsigned char) i == 'e' || (unsigned char) i == 'E') {\\nint expacc;\\nif (!--width || (i = getc(stream)) < 0) goto err;\\nswitch ((unsigned char) i) {\\ncase '-':\\nflag |= FL_MEXP;\\ncase '+':\\nif (!--width) goto err;\\ni = getc(stream);         \\n}\\nif (!isdigit(i)) goto err;\\nexpacc = 0;\\ndo {\\nexpacc = expacc * 10 + (i - '0');\\n} while (--width && isdigit(i = getc(stream)));\\nif (flag & FL_MEXP)\\nexpacc = -expacc;\\nexp += expacc;\\n}\\nif (width && i >= 0) ungetc(i, stream);\\nx.flt = (double) (x.u32);\\nif (exp < 0) {\\np = (void *) (pwr_m10 + 5);\\nexp = -exp;\\n} else {\\np = (void *) (pwr_p10 + 5);\\n}\\nfor (width = 32; width; width >>= 1) {\\nfor (; (unsigned) exp >= width; exp -= width) {\\nx.flt *= *((double *)p);\\n}\\np = p - sizeof(double);\\n}\\n}  \\nif (flag & FL_MINUS)\\nx.flt = -x.flt;\\nif (addr) *addr = x.flt;\\nreturn 1;\\nerr:\\nreturn 0;\\n}\\nstatic int skip_spaces(FILE *stream) {\\nint i;\\ndo {\\nif ((i = getc(stream)) < 0)\\nreturn i;\\n} while (isspace(i));\\nungetc(i, stream);\\nreturn i;\\n}\\nint vfscanf(FILE *stream, const char *fmt, va_list ap) {\\nint nconvs;\\nunsigned char c;\\nint width;\\nchar *addr;\\nunsigned char flags;\\nint i;\\nnconvs = 0;\\nstream->len = 0;\\nwhile ((c = *(fmt++)) != 0) {\\nif (isspace(c)) {\\nskip_spaces(stream);\\n} else if (c != '%' || (c = *(fmt++)) == '%') {\\nif ((i = getc(stream)) < 0)\\ngoto eof;\\nif ((unsigned char) i != c) {\\nungetc(i, stream);\\nbreak;\\n}\\n} else {\\nflags = 0;\\nif (c == '*') {\\nflags = FL_STAR;\\nc = *(fmt++);\\n}\\nwidth = 0;\\nwhile ((c -= '0') < 10) {\\nflags |= FL_WIDTH;\\nwidth = width * 10 + c;\\nc = *(fmt++);\\n}\\nc += '0';\\nif (flags & FL_WIDTH) {\\nif (!width) break;\\n} else {\\nwidth = ~0;\\n}\\nswitch (c) {\\ncase 'h':\\nflags |= FL_SHORT;\\nif ((c = *(fmt++)) != 'h')\\nbreak;\\nflags |= FL_CHAR;\\nc = *(fmt++);\\nbreak;\\ncase 'l':\\nflags |= FL_LONG;\\nif ((c = *fmt++) != 'l')\\nbreak;\\nc = *(fmt++);\\n}\\nif (!c || !strchr(\\\"cdinopsuxX[efgEFG\\\", c))\\nbreak;\\naddr = (flags & FL_STAR) ? 0 : va_arg (ap, char *);\\nif (c == 'n') {\\nputval(addr, (unsigned) (stream->len), flags);\\ncontinue;\\n}\\nif (c == 'c') {\\nif (!(flags & FL_WIDTH)) width = 1;\\ndo {\\nif ((i = getc(stream)) < 0)\\ngoto eof;\\nif (addr) *(addr++) = i;\\n} while (--width);\\nc = 1;             \\n} else if (c == '[') {\\nfmt = conv_brk(stream, width, addr, fmt);\\nc = (fmt != 0);\\n} else {\\nif (skip_spaces(stream) < 0)\\ngoto eof;\\nswitch (c) {\\ncase 's':\\ndo {\\nif ((i = getc(stream)) < 0)\\nbreak;\\nif (isspace(i)) {\\nungetc(i, stream);\\nbreak;\\n}\\nif (addr) *(addr++) = i;\\n} while (--width);\\nif (addr) *(addr) = 0;\\nc = 1;         \\nbreak;\\ncase 'p':\\ncase 'x':\\ncase 'X':\\nflags |= FL_HEX;\\nc = conv_int(stream, width, (void *) addr, flags);\\nbreak;\\ncase 'd':\\ncase 'u':\\nflags |= FL_DEC;\\nc = conv_int(stream, width, (void *) addr, flags);\\nbreak;\\ncase 'o':\\nflags |= FL_OCT;\\nc = conv_int(stream, width, (void *) addr, flags);\\nbreak;\\ncase 'i':\\nc = conv_int(stream, width, (void *) addr, flags);\\nbreak;\\ndefault:         \\nif (flags & FL_LONG) {\\nc = conv_flt(stream, width, (void *) addr);\\n} else if (addr) {\\ndouble d;\\nc = conv_flt(stream, width, &d);\\n*((float*) addr) = d;\\n} else {\\nc = conv_flt(stream, width, 0);\\n}\\n}\\n}  \\nif (!c) {\\nif (feof(stream) || ferror(stream))\\ngoto eof;\\nbreak;\\n}\\nif (!(flags & FL_STAR)) nconvs += 1;\\n}  \\n}  \\nreturn nconvs;\\neof:\\nreturn nconvs ? nconvs : EOF;\\n}\\n#endif\\n\",\"libraries/musl/README.md\":\"Original: https://musl.libc.org/\\n\\nVersion used: `v1.2.1`\\n\\nLicense (for files used): MIT\\n\\n\",\"libraries/musl/src/string/memchr.c\":\"#include <string.h>\\n#include <stdint.h>\\n#include <limits.h>\\n#define SS (sizeof(size_t))\\n#define ALIGN (sizeof(size_t)-1)\\n#define ONES ((size_t)-1/UCHAR_MAX)\\n#define HIGHS (ONES * (UCHAR_MAX/2+1))\\n#define HASZERO(x) ((x)-ONES & ~(x) & HIGHS)\\nvoid *memchr(const void *src, int c, size_t n)\\n{\\nconst unsigned char *s = src;\\nc = (unsigned char)c;\\nfor (; n && *s != c; s++, n--);\\nreturn n ? (void *)s : (void *)0;\\n}\\n\",\"libraries/musl/src/string/memcmp.c\":\"#include <string.h>\\nint memcmp(const void *vl, const void *vr, size_t n)\\n{\\nconst unsigned char *l=vl, *r=vr;\\nfor (; n && *l == *r; n--, l++, r++);\\nreturn n ? *l-*r : 0;\\n}\\n\",\"libraries/musl/src/string/memmove.c\":\"#include <string.h>\\n#include <stdint.h>\\nvoid *memmove(void *dest, const void *src, size_t n)\\n{\\nchar *d = dest;\\nconst char *s = src;\\nif (d==s) return d;\\nif ((uintptr_t)s-(uintptr_t)d-n <= -2*n) return memcpy(d, s, n);\\nif (d<s) {\\nfor (; n; n--) *d++ = *s++;\\n} else {\\nwhile (n) n--, d[n] = s[n];\\n}\\nreturn dest;\\n}\\n\",\"libraries/musl/src/string/strcasecmp.c\":\"#include <strings.h>\\n#include <ctype.h>\\nint strcasecmp(const char *_l, const char *_r)\\n{\\nconst unsigned char *l=(void *)_l, *r=(void *)_r;\\nfor (; *l && *r && (*l == *r || tolower(*l) == tolower(*r)); l++, r++);\\nreturn tolower(*l) - tolower(*r);\\n}\",\"libraries/musl/src/string/strcat.c\":\"#include <string.h>\\nchar *strcat(char *dest, const char *src)\\n{\\nstrcpy(dest + strlen(dest), src);\\nreturn dest;\\n}\\n\",\"libraries/musl/src/string/strchr.c\":\"#include <string.h>\\nchar *__strchrnul(const char *s, int c);\\nchar *strchr(const char *s, int c)\\n{\\nchar *r = __strchrnul(s, c);\\nreturn *(unsigned char *)r == (unsigned char)c ? r : (char *)0;\\n}\\n\",\"libraries/musl/src/string/strchrnul.c\":\"#include <string.h>\\n#include <stdint.h>\\n#include <limits.h>\\n#define ALIGN (sizeof(size_t))\\n#define ONES ((size_t)-1/UCHAR_MAX)\\n#define HIGHS (ONES * (UCHAR_MAX/2+1))\\n#define HASZERO(x) ((x)-ONES & ~(x) & HIGHS)\\nchar *__strchrnul(const char *s, int c)\\n{\\nc = (unsigned char)c;\\nif (!c) return (char *)s + strlen(s);\\nfor (; *s && *(unsigned char *)s != c; s++);\\nreturn (char *)s;\\n}\\n\",\"libraries/musl/src/string/strcmp.c\":\"#include <string.h>\\nint strcmp(const char *l, const char *r)\\n{\\nfor (; *l==*r && *l; l++, r++);\\nreturn *(unsigned char *)l - *(unsigned char *)r;\\n}\\n\",\"libraries/musl/src/string/strcspn.c\":\"#include <string.h>\\n#define BITOP(a,b,op) \\\\\\n((a)[(size_t)(b)/(8*sizeof *(a))] op (size_t)1<<((size_t)(b)%(8*sizeof *(a))))\\nchar *__strchrnul(const char *s, int c);\\nsize_t strcspn(const char *s, const char *c)\\n{\\nconst char *a = s;\\nsize_t byteset[8];  \\nif (!c[0] || !c[1]) return (size_t) (__strchrnul(s, *c)-a);\\nmemset(byteset, 0, sizeof byteset);\\nfor (; *c && BITOP(byteset, *(unsigned char *)c, |=); c++);\\nfor (; *s && !BITOP(byteset, *(unsigned char *)s, &); s++);\\nreturn (size_t) (s-a);\\n}\\n\",\"libraries/musl/src/string/strlen.c\":\"#include <string.h>\\n#include <stdint.h>\\n#include <limits.h>\\n#define ALIGN (sizeof(size_t))\\n#define ONES ((size_t)-1/UCHAR_MAX)\\n#define HIGHS (ONES * (UCHAR_MAX/2+1))\\n#define HASZERO(x) ((x)-ONES & ~(x) & HIGHS)\\nsize_t strlen(const char *s)\\n{\\nconst char *a = s;\\nfor (; *s; s++);\\nreturn (size_t) (s-a);\\n}\\n\",\"libraries/musl/src/string/strncasecmp.c\":\"#include <strings.h>\\n#include <ctype.h>\\nint strncasecmp(const char *_l, const char *_r, size_t n)\\n{\\nconst unsigned char *l=(void *)_l, *r=(void *)_r;\\nif (!n--) return 0;\\nfor (; *l && *r && n && (*l == *r || tolower(*l) == tolower(*r)); l++, r++, n--);\\nreturn tolower(*l) - tolower(*r);\\n}\",\"libraries/musl/src/string/strncat.c\":\"#include <string.h>\\nchar *strncat(char *d, const char *s, size_t n)\\n{\\nchar *a = d;\\nd += strlen(d);\\nwhile (n && *s) n--, *d++ = *s++;\\n*d++ = 0;\\nreturn a;\\n}\\n\",\"libraries/musl/src/string/strncmp.c\":\"#include <string.h>\\nint strncmp(const char *_l, const char *_r, size_t n)\\n{\\nconst unsigned char *l=(void *)_l, *r=(void *)_r;\\nif (!n--) return 0;\\nfor (; *l && *r && n && *l == *r ; l++, r++, n--);\\nreturn *l - *r;\\n}\\n\",\"libraries/musl/src/string/strnlen.c\":\"#include <string.h>\\nsize_t strnlen(const char *s, size_t n)\\n{\\nconst char *p = memchr(s, 0, n);\\nreturn p ? (size_t) (p-s) : n;\\n}\\n\",\"libraries/musl/src/string/strpbrk.c\":\"#include <string.h>\\nchar *strpbrk(const char *s, const char *b)\\n{\\ns += strcspn(s, b);\\nreturn *s ? (char *)s : (char *) 0;\\n}\\n\",\"libraries/musl/src/string/strrchr.c\":\"#include <string.h>\\nvoid *__memrchr(const void *m, int c, size_t n)\\n{\\nconst unsigned char *s = m;\\nc = (unsigned char)c;\\nwhile (n--) if (s[n]==c) return (void *)(s+n);\\nreturn 0;\\n}\\nchar *strrchr(const char *s, int c)\\n{\\nreturn __memrchr(s, c, strlen(s) + 1);\\n}\\n\",\"libraries/musl/src/string/strspn.c\":\"#include <string.h>\\n#define BITOP(a,b,op) \\\\\\n((a)[(size_t)(b)/(8*sizeof *(a))] op (size_t)1<<((size_t)(b)%(8*sizeof *(a))))\\nsize_t strspn(const char *s, const char *c)\\n{\\nconst char *a = s;\\nsize_t byteset[8] = { 0 };\\nif (!c[0]) return 0;\\nif (!c[1]) {\\nfor (; *s == *c; s++);\\nreturn (size_t) (s-a);\\n}\\nfor (; *c && BITOP(byteset, *(unsigned char *)c, |=); c++);\\nfor (; *s && BITOP(byteset, *(unsigned char *)s, &); s++);\\nreturn (size_t) (s-a);\\n}\\n\",\"libraries/musl/src/string/strstr.c\":\"#include <string.h>\\n#include <stdint.h>\\nstatic char *twobyte_strstr(const unsigned char *h, const unsigned char *n)\\n{\\nuint16_t nw = n[0]<<8 | n[1], hw = h[0]<<8 | h[1];\\nfor (h++; *h && hw != nw; hw = hw<<8 | *++h);\\nreturn *h ? (char *)h-1 : (char *) 0;\\n}\\nstatic char *threebyte_strstr(const unsigned char *h, const unsigned char *n)\\n{\\nuint32_t nw = (uint32_t)n[0]<<24 | n[1]<<16 | n[2]<<8;\\nuint32_t hw = (uint32_t)h[0]<<24 | h[1]<<16 | h[2]<<8;\\nfor (h+=2; *h && hw != nw; hw = (hw|*++h)<<8);\\nreturn *h ? (char *)h-2 : (char *) 0;\\n}\\nstatic char *fourbyte_strstr(const unsigned char *h, const unsigned char *n)\\n{\\nuint32_t nw = (uint32_t)n[0]<<24 | n[1]<<16 | n[2]<<8 | n[3];\\nuint32_t hw = (uint32_t)h[0]<<24 | h[1]<<16 | h[2]<<8 | h[3];\\nfor (h+=3; *h && hw != nw; hw = hw<<8 | *++h);\\nreturn *h ? (char *)h-3 : (char *) 0;\\n}\\n#define MAX(a,b) ((a)>(b)?(a):(b))\\n#define MIN(a,b) ((a)<(b)?(a):(b))\\n#define BITOP(a,b,op) \\\\\\n((a)[(size_t)(b)/(8*sizeof *(a))] op (size_t)1<<((size_t)(b)%(8*sizeof *(a))))\\nstatic char *twoway_strstr(const unsigned char *h, const unsigned char *n)\\n{\\nconst unsigned char *z;\\nsize_t l, ip, jp, k, p, ms, p0, mem, mem0;\\nsize_t byteset[8] = { 0 };\\nsize_t shift[256];\\nfor (l=0; n[l] && h[l]; l++)\\nBITOP(byteset, n[l], |=), shift[n[l]] = l+1;\\nif (n[l]) return 0;  \\nip = -1; jp = 0; k = p = 1;\\nwhile (jp+k<l) {\\nif (n[ip+k] == n[jp+k]) {\\nif (k == p) {\\njp += p;\\nk = 1;\\n} else k++;\\n} else if (n[ip+k] > n[jp+k]) {\\njp += k;\\nk = 1;\\np = jp - ip;\\n} else {\\nip = jp++;\\nk = p = 1;\\n}\\n}\\nms = ip;\\np0 = p;\\nip = -1; jp = 0; k = p = 1;\\nwhile (jp+k<l) {\\nif (n[ip+k] == n[jp+k]) {\\nif (k == p) {\\njp += p;\\nk = 1;\\n} else k++;\\n} else if (n[ip+k] < n[jp+k]) {\\njp += k;\\nk = 1;\\np = jp - ip;\\n} else {\\nip = jp++;\\nk = p = 1;\\n}\\n}\\nif (ip+1 > ms+1) ms = ip;\\nelse p = p0;\\nif (memcmp(n, n+p, ms+1)) {\\nmem0 = 0;\\np = MAX(ms, l-ms-1) + 1;\\n} else mem0 = l-p;\\nmem = 0;\\nz = h;\\nfor (;;) {\\nif (z-h < l) {\\nsize_t grow = l | 63;\\nconst unsigned char *z2 = memchr(z, 0, grow);\\nif (z2) {\\nz = z2;\\nif (z-h < l) return 0;\\n} else z += grow;\\n}\\nif (BITOP(byteset, h[l-1], &)) {\\nk = l-shift[h[l-1]];\\nif (k) {\\nif (k < mem) k = mem;\\nh += k;\\nmem = 0;\\ncontinue;\\n}\\n} else {\\nh += l;\\nmem = 0;\\ncontinue;\\n}\\nfor (k=MAX(ms+1,mem); n[k] && n[k] == h[k]; k++);\\nif (n[k]) {\\nh += k-ms;\\nmem = 0;\\ncontinue;\\n}\\nfor (k=ms+1; k>mem && n[k-1] == h[k-1]; k--);\\nif (k <= mem) return (char *)h;\\nh += p;\\nmem = mem0;\\n}\\nreturn 0;\\n}\\nchar *strstr(const char *h, const char *n)\\n{\\nif (!n[0]) return (char *)h;\\nh = strchr(h, *n);\\nif (!h || !n[1]) return (char *)h;\\nif (!h[1]) return 0;\\nif (!n[2]) return twobyte_strstr((void *)h, (void *)n);\\nif (!h[2]) return 0;\\nif (!n[3]) return threebyte_strstr((void *)h, (void *)n);\\nif (!h[3]) return 0;\\nif (!n[4]) return fourbyte_strstr((void *)h, (void *)n);\\nreturn twoway_strstr((void *)h, (void *)n);\\n}\\n\",\"libraries/musl/src/string/strtok.c\":\"#include <string.h>\\nchar *strtok(char *s, const char *sep)\\n{\\nstatic char *p;\\nif (!s && !(s = p)) return NULL;\\ns += strspn(s, sep);\\nif (!*s) return p = 0;\\np = s + strcspn(s, sep);\\nif (*p) *p++ = 0;\\nelse p = 0;\\nreturn s;\\n}\\n\",\"libraries/printf/LICENSE\":\"The MIT License (MIT)\\n\\nCopyright (c) 2014 Marco Paland\\n\\nPermission is hereby granted, free of charge, to any person obtaining a copy\\nof this software and associated documentation files (the \\\"Software\\\"), to deal\\nin the Software without restriction, including without limitation the rights\\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\\ncopies of the Software, and to permit persons to whom the Software is\\nfurnished to do so, subject to the following conditions:\\n\\nThe above copyright notice and this permission notice shall be included in all\\ncopies or substantial portions of the Software.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\\nSOFTWARE.\\n\",\"libraries/printf/README.md\":\"Original: https://github.com/mpaland/printf\\n\\nCommit used: `d3b984684bb8a8bdc48cc7a1abecb93ce59bbe3e`\\n\\nLicense: MIT\\n\\nFiles:\\n- `printf.c` custom fprintf implementation added to the end of the file, but otherwise unmodified\\n- `printf.h` custom\\n\\n\",\"libraries/printf/printf.c\":\"#include <stdbool.h>\\n#include <stdint.h>\\n#include \\\"printf.h\\\"\\n#ifdef PRINTF_INCLUDE_CONFIG_H\\n#include \\\"printf_config.h\\\"\\n#endif\\n#ifndef PRINTF_NTOA_BUFFER_SIZE\\n#define PRINTF_NTOA_BUFFER_SIZE    32U\\n#endif\\n#ifndef PRINTF_FTOA_BUFFER_SIZE\\n#define PRINTF_FTOA_BUFFER_SIZE    32U\\n#endif\\n#ifndef PRINTF_DISABLE_SUPPORT_FLOAT\\n#define PRINTF_SUPPORT_FLOAT\\n#endif\\n#ifndef PRINTF_DISABLE_SUPPORT_EXPONENTIAL\\n#define PRINTF_SUPPORT_EXPONENTIAL\\n#endif\\n#ifndef PRINTF_DEFAULT_FLOAT_PRECISION\\n#define PRINTF_DEFAULT_FLOAT_PRECISION  6U\\n#endif\\n#ifndef PRINTF_MAX_FLOAT\\n#define PRINTF_MAX_FLOAT  1e9\\n#endif\\n#ifndef PRINTF_DISABLE_SUPPORT_LONG_LONG\\n#define PRINTF_SUPPORT_LONG_LONG\\n#endif\\n#ifndef PRINTF_DISABLE_SUPPORT_PTRDIFF_T\\n#define PRINTF_SUPPORT_PTRDIFF_T\\n#endif\\n#define FLAGS_ZEROPAD   (1U <<  0U)\\n#define FLAGS_LEFT      (1U <<  1U)\\n#define FLAGS_PLUS      (1U <<  2U)\\n#define FLAGS_SPACE     (1U <<  3U)\\n#define FLAGS_HASH      (1U <<  4U)\\n#define FLAGS_UPPERCASE (1U <<  5U)\\n#define FLAGS_CHAR      (1U <<  6U)\\n#define FLAGS_SHORT     (1U <<  7U)\\n#define FLAGS_LONG      (1U <<  8U)\\n#define FLAGS_LONG_LONG (1U <<  9U)\\n#define FLAGS_PRECISION (1U << 10U)\\n#define FLAGS_ADAPT_EXP (1U << 11U)\\n#if defined(PRINTF_SUPPORT_FLOAT)\\n#include <float.h>\\n#endif\\ntypedef void (*out_fct_type)(char character, void* buffer, size_t idx, size_t maxlen);\\ntypedef struct {\\nvoid  (*fct)(char character, void* arg);\\nvoid* arg;\\n} out_fct_wrap_type;\\nstatic inline void _out_buffer(char character, void* buffer, size_t idx, size_t maxlen)\\n{\\nif (idx < maxlen) {\\n((char*)buffer)[idx] = character;\\n}\\n}\\nstatic inline void _out_null(char character, void* buffer, size_t idx, size_t maxlen)\\n{\\n(void)character; (void)buffer; (void)idx; (void)maxlen;\\n}\\nstatic inline void _out_char(char character, void* buffer, size_t idx, size_t maxlen)\\n{\\n(void)buffer; (void)idx; (void)maxlen;\\nif (character) {\\n_putchar(character);\\n}\\n}\\nstatic inline void _out_fct(char character, void* buffer, size_t idx, size_t maxlen)\\n{\\n(void)idx; (void)maxlen;\\nif (character) {\\n((out_fct_wrap_type*)buffer)->fct(character, ((out_fct_wrap_type*)buffer)->arg);\\n}\\n}\\nstatic inline unsigned int _strnlen_s(const char* str, size_t maxsize)\\n{\\nconst char* s;\\nfor (s = str; *s && maxsize--; ++s);\\nreturn (unsigned int)(s - str);\\n}\\nstatic inline bool _is_digit(char ch)\\n{\\nreturn (ch >= '0') && (ch <= '9');\\n}\\nstatic unsigned int _atoi(const char** str)\\n{\\nunsigned int i = 0U;\\nwhile (_is_digit(**str)) {\\ni = i * 10U + (unsigned int)(*((*str)++) - '0');\\n}\\nreturn i;\\n}\\nstatic size_t _out_rev(out_fct_type out, char* buffer, size_t idx, size_t maxlen, const char* buf, size_t len, unsigned int width, unsigned int flags)\\n{\\nconst size_t start_idx = idx;\\nif (!(flags & FLAGS_LEFT) && !(flags & FLAGS_ZEROPAD)) {\\nfor (size_t i = len; i < width; i++) {\\nout(' ', buffer, idx++, maxlen);\\n}\\n}\\nwhile (len) {\\nout(buf[--len], buffer, idx++, maxlen);\\n}\\nif (flags & FLAGS_LEFT) {\\nwhile (idx - start_idx < width) {\\nout(' ', buffer, idx++, maxlen);\\n}\\n}\\nreturn idx;\\n}\\nstatic size_t _ntoa_format(out_fct_type out, char* buffer, size_t idx, size_t maxlen, char* buf, size_t len, bool negative, unsigned int base, unsigned int prec, unsigned int width, unsigned int flags)\\n{\\nif (!(flags & FLAGS_LEFT)) {\\nif (width && (flags & FLAGS_ZEROPAD) && (negative || (flags & (FLAGS_PLUS | FLAGS_SPACE)))) {\\nwidth--;\\n}\\nwhile ((len < prec) && (len < PRINTF_NTOA_BUFFER_SIZE)) {\\nbuf[len++] = '0';\\n}\\nwhile ((flags & FLAGS_ZEROPAD) && (len < width) && (len < PRINTF_NTOA_BUFFER_SIZE)) {\\nbuf[len++] = '0';\\n}\\n}\\nif (flags & FLAGS_HASH) {\\nif (!(flags & FLAGS_PRECISION) && len && ((len == prec) || (len == width))) {\\nlen--;\\nif (len && (base == 16U)) {\\nlen--;\\n}\\n}\\nif ((base == 16U) && !(flags & FLAGS_UPPERCASE) && (len < PRINTF_NTOA_BUFFER_SIZE)) {\\nbuf[len++] = 'x';\\n}\\nelse if ((base == 16U) && (flags & FLAGS_UPPERCASE) && (len < PRINTF_NTOA_BUFFER_SIZE)) {\\nbuf[len++] = 'X';\\n}\\nelse if ((base == 2U) && (len < PRINTF_NTOA_BUFFER_SIZE)) {\\nbuf[len++] = 'b';\\n}\\nif (len < PRINTF_NTOA_BUFFER_SIZE) {\\nbuf[len++] = '0';\\n}\\n}\\nif (len < PRINTF_NTOA_BUFFER_SIZE) {\\nif (negative) {\\nbuf[len++] = '-';\\n}\\nelse if (flags & FLAGS_PLUS) {\\nbuf[len++] = '+';   \\n}\\nelse if (flags & FLAGS_SPACE) {\\nbuf[len++] = ' ';\\n}\\n}\\nreturn _out_rev(out, buffer, idx, maxlen, buf, len, width, flags);\\n}\\nstatic size_t _ntoa_long(out_fct_type out, char* buffer, size_t idx, size_t maxlen, unsigned long value, bool negative, unsigned long base, unsigned int prec, unsigned int width, unsigned int flags)\\n{\\nchar buf[PRINTF_NTOA_BUFFER_SIZE];\\nsize_t len = 0U;\\nif (!value) {\\nflags &= ~FLAGS_HASH;\\n}\\nif (!(flags & FLAGS_PRECISION) || value) {\\ndo {\\nconst char digit = (char)(value % base);\\nbuf[len++] = digit < 10 ? '0' + digit : (flags & FLAGS_UPPERCASE ? 'A' : 'a') + digit - 10;\\nvalue /= base;\\n} while (value && (len < PRINTF_NTOA_BUFFER_SIZE));\\n}\\nreturn _ntoa_format(out, buffer, idx, maxlen, buf, len, negative, (unsigned int)base, prec, width, flags);\\n}\\n#if defined(PRINTF_SUPPORT_LONG_LONG)\\nstatic size_t _ntoa_long_long(out_fct_type out, char* buffer, size_t idx, size_t maxlen, unsigned long long value, bool negative, unsigned long long base, unsigned int prec, unsigned int width, unsigned int flags)\\n{\\nchar buf[PRINTF_NTOA_BUFFER_SIZE];\\nsize_t len = 0U;\\nif (!value) {\\nflags &= ~FLAGS_HASH;\\n}\\nif (!(flags & FLAGS_PRECISION) || value) {\\ndo {\\nconst char digit = (char)(value % base);\\nbuf[len++] = digit < 10 ? '0' + digit : (flags & FLAGS_UPPERCASE ? 'A' : 'a') + digit - 10;\\nvalue /= base;\\n} while (value && (len < PRINTF_NTOA_BUFFER_SIZE));\\n}\\nreturn _ntoa_format(out, buffer, idx, maxlen, buf, len, negative, (unsigned int)base, prec, width, flags);\\n}\\n#endif   \\n#if defined(PRINTF_SUPPORT_FLOAT)\\n#if defined(PRINTF_SUPPORT_EXPONENTIAL)\\nstatic size_t _etoa(out_fct_type out, char* buffer, size_t idx, size_t maxlen, double value, unsigned int prec, unsigned int width, unsigned int flags);\\n#endif\\nstatic size_t _ftoa(out_fct_type out, char* buffer, size_t idx, size_t maxlen, double value, unsigned int prec, unsigned int width, unsigned int flags)\\n{\\nchar buf[PRINTF_FTOA_BUFFER_SIZE];\\nsize_t len  = 0U;\\ndouble diff = 0.0;\\nstatic const double pow10[] = { 1, 10, 100, 1000, 10000, 100000, 1000000, 10000000, 100000000, 1000000000 };\\nif (value != value)\\nreturn _out_rev(out, buffer, idx, maxlen, \\\"nan\\\", 3, width, flags);\\nif (value < -DBL_MAX)\\nreturn _out_rev(out, buffer, idx, maxlen, \\\"fni-\\\", 4, width, flags);\\nif (value > DBL_MAX)\\nreturn _out_rev(out, buffer, idx, maxlen, (flags & FLAGS_PLUS) ? \\\"fni+\\\" : \\\"fni\\\", (flags & FLAGS_PLUS) ? 4U : 3U, width, flags);\\nif ((value > PRINTF_MAX_FLOAT) || (value < -PRINTF_MAX_FLOAT)) {\\n#if defined(PRINTF_SUPPORT_EXPONENTIAL)\\nreturn _etoa(out, buffer, idx, maxlen, value, prec, width, flags);\\n#else\\nreturn 0U;\\n#endif\\n}\\nbool negative = false;\\nif (value < 0) {\\nnegative = true;\\nvalue = 0 - value;\\n}\\nif (!(flags & FLAGS_PRECISION)) {\\nprec = PRINTF_DEFAULT_FLOAT_PRECISION;\\n}\\nwhile ((len < PRINTF_FTOA_BUFFER_SIZE) && (prec > 9U)) {\\nbuf[len++] = '0';\\nprec--;\\n}\\nint whole = (int)value;\\ndouble tmp = (value - whole) * pow10[prec];\\nunsigned long frac = (unsigned long)tmp;\\ndiff = tmp - frac;\\nif (diff > 0.5) {\\n++frac;\\nif (frac >= pow10[prec]) {\\nfrac = 0;\\n++whole;\\n}\\n}\\nelse if (diff < 0.5) {\\n}\\nelse if ((frac == 0U) || (frac & 1U)) {\\n++frac;\\n}\\nif (prec == 0U) {\\ndiff = value - (double)whole;\\nif ((!(diff < 0.5) || (diff > 0.5)) && (whole & 1)) {\\n++whole;\\n}\\n}\\nelse {\\nunsigned int count = prec;\\nwhile (len < PRINTF_FTOA_BUFFER_SIZE) {\\n--count;\\nbuf[len++] = (char)(48U + (frac % 10U));\\nif (!(frac /= 10U)) {\\nbreak;\\n}\\n}\\nwhile ((len < PRINTF_FTOA_BUFFER_SIZE) && (count-- > 0U)) {\\nbuf[len++] = '0';\\n}\\nif (len < PRINTF_FTOA_BUFFER_SIZE) {\\nbuf[len++] = '.';\\n}\\n}\\nwhile (len < PRINTF_FTOA_BUFFER_SIZE) {\\nbuf[len++] = (char)(48 + (whole % 10));\\nif (!(whole /= 10)) {\\nbreak;\\n}\\n}\\nif (!(flags & FLAGS_LEFT) && (flags & FLAGS_ZEROPAD)) {\\nif (width && (negative || (flags & (FLAGS_PLUS | FLAGS_SPACE)))) {\\nwidth--;\\n}\\nwhile ((len < width) && (len < PRINTF_FTOA_BUFFER_SIZE)) {\\nbuf[len++] = '0';\\n}\\n}\\nif (len < PRINTF_FTOA_BUFFER_SIZE) {\\nif (negative) {\\nbuf[len++] = '-';\\n}\\nelse if (flags & FLAGS_PLUS) {\\nbuf[len++] = '+';   \\n}\\nelse if (flags & FLAGS_SPACE) {\\nbuf[len++] = ' ';\\n}\\n}\\nreturn _out_rev(out, buffer, idx, maxlen, buf, len, width, flags);\\n}\\n#if defined(PRINTF_SUPPORT_EXPONENTIAL)\\nstatic size_t _etoa(out_fct_type out, char* buffer, size_t idx, size_t maxlen, double value, unsigned int prec, unsigned int width, unsigned int flags)\\n{\\nif ((value != value) || (value > DBL_MAX) || (value < -DBL_MAX)) {\\nreturn _ftoa(out, buffer, idx, maxlen, value, prec, width, flags);\\n}\\nconst bool negative = value < 0;\\nif (negative) {\\nvalue = -value;\\n}\\nif (!(flags & FLAGS_PRECISION)) {\\nprec = PRINTF_DEFAULT_FLOAT_PRECISION;\\n}\\nunion {\\nuint64_t U;\\ndouble   F;\\n} conv;\\nconv.F = value;\\nint exp2 = (int)((conv.U >> 52U) & 0x07FFU) - 1023;            \\nconv.U = (conv.U & ((1ULL << 52U) - 1U)) | (1023ULL << 52U);   \\nint expval = (int)(0.1760912590558 + exp2 * 0.301029995663981 + (conv.F - 1.5) * 0.289529654602168);\\nexp2 = (int)(expval * 3.321928094887362 + 0.5);\\nconst double z  = expval * 2.302585092994046 - exp2 * 0.6931471805599453;\\nconst double z2 = z * z;\\nconv.U = (uint64_t)(exp2 + 1023) << 52U;\\nconv.F *= 1 + 2 * z / (2 - z + (z2 / (6 + (z2 / (10 + z2 / 14)))));\\nif (value < conv.F) {\\nexpval--;\\nconv.F /= 10;\\n}\\nunsigned int minwidth = ((expval < 100) && (expval > -100)) ? 4U : 5U;\\nif (flags & FLAGS_ADAPT_EXP) {\\nif ((value >= 1e-4) && (value < 1e6)) {\\nif ((int)prec > expval) {\\nprec = (unsigned)((int)prec - expval - 1);\\n}\\nelse {\\nprec = 0;\\n}\\nflags |= FLAGS_PRECISION;    \\nminwidth = 0U;\\nexpval   = 0;\\n}\\nelse {\\nif ((prec > 0) && (flags & FLAGS_PRECISION)) {\\n--prec;\\n}\\n}\\n}\\nunsigned int fwidth = width;\\nif (width > minwidth) {\\nfwidth -= minwidth;\\n} else {\\nfwidth = 0U;\\n}\\nif ((flags & FLAGS_LEFT) && minwidth) {\\nfwidth = 0U;\\n}\\nif (expval) {\\nvalue /= conv.F;\\n}\\nconst size_t start_idx = idx;\\nidx = _ftoa(out, buffer, idx, maxlen, negative ? -value : value, prec, fwidth, flags & ~FLAGS_ADAPT_EXP);\\nif (minwidth) {\\nout((flags & FLAGS_UPPERCASE) ? 'E' : 'e', buffer, idx++, maxlen);\\nidx = _ntoa_long(out, buffer, idx, maxlen, (expval < 0) ? -expval : expval, expval < 0, 10, 0, minwidth-1, FLAGS_ZEROPAD | FLAGS_PLUS);\\nif (flags & FLAGS_LEFT) {\\nwhile (idx - start_idx < width) out(' ', buffer, idx++, maxlen);\\n}\\n}\\nreturn idx;\\n}\\n#endif   \\n#endif   \\nstatic int _vsnprintf(out_fct_type out, char* buffer, const size_t maxlen, const char* format, va_list va)\\n{\\nunsigned int flags, width, precision, n;\\nsize_t idx = 0U;\\nif (!buffer) {\\nout = _out_null;\\n}\\nwhile (*format)\\n{\\nif (*format != '%') {\\nout(*format, buffer, idx++, maxlen);\\nformat++;\\ncontinue;\\n}\\nelse {\\nformat++;\\n}\\nflags = 0U;\\ndo {\\nswitch (*format) {\\ncase '0': flags |= FLAGS_ZEROPAD; format++; n = 1U; break;\\ncase '-': flags |= FLAGS_LEFT;    format++; n = 1U; break;\\ncase '+': flags |= FLAGS_PLUS;    format++; n = 1U; break;\\ncase ' ': flags |= FLAGS_SPACE;   format++; n = 1U; break;\\ncase '#': flags |= FLAGS_HASH;    format++; n = 1U; break;\\ndefault :                                   n = 0U; break;\\n}\\n} while (n);\\nwidth = 0U;\\nif (_is_digit(*format)) {\\nwidth = _atoi(&format);\\n}\\nelse if (*format == '*') {\\nconst int w = va_arg(va, int);\\nif (w < 0) {\\nflags |= FLAGS_LEFT;     \\nwidth = (unsigned int)-w;\\n}\\nelse {\\nwidth = (unsigned int)w;\\n}\\nformat++;\\n}\\nprecision = 0U;\\nif (*format == '.') {\\nflags |= FLAGS_PRECISION;\\nformat++;\\nif (_is_digit(*format)) {\\nprecision = _atoi(&format);\\n}\\nelse if (*format == '*') {\\nconst int prec = (int)va_arg(va, int);\\nprecision = prec > 0 ? (unsigned int)prec : 0U;\\nformat++;\\n}\\n}\\nswitch (*format) {\\ncase 'l' :\\nflags |= FLAGS_LONG;\\nformat++;\\nif (*format == 'l') {\\nflags |= FLAGS_LONG_LONG;\\nformat++;\\n}\\nbreak;\\ncase 'h' :\\nflags |= FLAGS_SHORT;\\nformat++;\\nif (*format == 'h') {\\nflags |= FLAGS_CHAR;\\nformat++;\\n}\\nbreak;\\n#if defined(PRINTF_SUPPORT_PTRDIFF_T)\\ncase 't' :\\nflags |= (sizeof(ptrdiff_t) == sizeof(long) ? FLAGS_LONG : FLAGS_LONG_LONG);\\nformat++;\\nbreak;\\n#endif\\ncase 'j' :\\nflags |= (sizeof(intmax_t) == sizeof(long) ? FLAGS_LONG : FLAGS_LONG_LONG);\\nformat++;\\nbreak;\\ncase 'z' :\\nflags |= (sizeof(size_t) == sizeof(long) ? FLAGS_LONG : FLAGS_LONG_LONG);\\nformat++;\\nbreak;\\ndefault :\\nbreak;\\n}\\nswitch (*format) {\\ncase 'd' :\\ncase 'i' :\\ncase 'u' :\\ncase 'x' :\\ncase 'X' :\\ncase 'o' :\\ncase 'b' : {\\nunsigned int base;\\nif (*format == 'x' || *format == 'X') {\\nbase = 16U;\\n}\\nelse if (*format == 'o') {\\nbase =  8U;\\n}\\nelse if (*format == 'b') {\\nbase =  2U;\\n}\\nelse {\\nbase = 10U;\\nflags &= ~FLAGS_HASH;    \\n}\\nif (*format == 'X') {\\nflags |= FLAGS_UPPERCASE;\\n}\\nif ((*format != 'i') && (*format != 'd')) {\\nflags &= ~(FLAGS_PLUS | FLAGS_SPACE);\\n}\\nif (flags & FLAGS_PRECISION) {\\nflags &= ~FLAGS_ZEROPAD;\\n}\\nif ((*format == 'i') || (*format == 'd')) {\\nif (flags & FLAGS_LONG_LONG) {\\n#if defined(PRINTF_SUPPORT_LONG_LONG)\\nconst long long value = va_arg(va, long long);\\nidx = _ntoa_long_long(out, buffer, idx, maxlen, (unsigned long long)(value > 0 ? value : 0 - value), value < 0, base, precision, width, flags);\\n#endif\\n}\\nelse if (flags & FLAGS_LONG) {\\nconst long value = va_arg(va, long);\\nidx = _ntoa_long(out, buffer, idx, maxlen, (unsigned long)(value > 0 ? value : 0 - value), value < 0, base, precision, width, flags);\\n}\\nelse {\\nconst int value = (flags & FLAGS_CHAR) ? (char)va_arg(va, int) : (flags & FLAGS_SHORT) ? (short int)va_arg(va, int) : va_arg(va, int);\\nidx = _ntoa_long(out, buffer, idx, maxlen, (unsigned int)(value > 0 ? value : 0 - value), value < 0, base, precision, width, flags);\\n}\\n}\\nelse {\\nif (flags & FLAGS_LONG_LONG) {\\n#if defined(PRINTF_SUPPORT_LONG_LONG)\\nidx = _ntoa_long_long(out, buffer, idx, maxlen, va_arg(va, unsigned long long), false, base, precision, width, flags);\\n#endif\\n}\\nelse if (flags & FLAGS_LONG) {\\nidx = _ntoa_long(out, buffer, idx, maxlen, va_arg(va, unsigned long), false, base, precision, width, flags);\\n}\\nelse {\\nconst unsigned int value = (flags & FLAGS_CHAR) ? (unsigned char)va_arg(va, unsigned int) : (flags & FLAGS_SHORT) ? (unsigned short int)va_arg(va, unsigned int) : va_arg(va, unsigned int);\\nidx = _ntoa_long(out, buffer, idx, maxlen, value, false, base, precision, width, flags);\\n}\\n}\\nformat++;\\nbreak;\\n}\\n#if defined(PRINTF_SUPPORT_FLOAT)\\ncase 'f' :\\ncase 'F' :\\nif (*format == 'F') flags |= FLAGS_UPPERCASE;\\nidx = _ftoa(out, buffer, idx, maxlen, va_arg(va, double), precision, width, flags);\\nformat++;\\nbreak;\\n#if defined(PRINTF_SUPPORT_EXPONENTIAL)\\ncase 'e':\\ncase 'E':\\ncase 'g':\\ncase 'G':\\nif ((*format == 'g')||(*format == 'G')) flags |= FLAGS_ADAPT_EXP;\\nif ((*format == 'E')||(*format == 'G')) flags |= FLAGS_UPPERCASE;\\nidx = _etoa(out, buffer, idx, maxlen, va_arg(va, double), precision, width, flags);\\nformat++;\\nbreak;\\n#endif   \\n#endif   \\ncase 'c' : {\\nunsigned int l = 1U;\\nif (!(flags & FLAGS_LEFT)) {\\nwhile (l++ < width) {\\nout(' ', buffer, idx++, maxlen);\\n}\\n}\\nout((char)va_arg(va, int), buffer, idx++, maxlen);\\nif (flags & FLAGS_LEFT) {\\nwhile (l++ < width) {\\nout(' ', buffer, idx++, maxlen);\\n}\\n}\\nformat++;\\nbreak;\\n}\\ncase 's' : {\\nconst char* p = va_arg(va, char*);\\nunsigned int l = _strnlen_s(p, precision ? precision : (size_t)-1);\\nif (flags & FLAGS_PRECISION) {\\nl = (l < precision ? l : precision);\\n}\\nif (!(flags & FLAGS_LEFT)) {\\nwhile (l++ < width) {\\nout(' ', buffer, idx++, maxlen);\\n}\\n}\\nwhile ((*p != 0) && (!(flags & FLAGS_PRECISION) || precision--)) {\\nout(*(p++), buffer, idx++, maxlen);\\n}\\nif (flags & FLAGS_LEFT) {\\nwhile (l++ < width) {\\nout(' ', buffer, idx++, maxlen);\\n}\\n}\\nformat++;\\nbreak;\\n}\\ncase 'p' : {\\nwidth = sizeof(void*) * 2U;\\nflags |= FLAGS_ZEROPAD | FLAGS_UPPERCASE;\\n#if defined(PRINTF_SUPPORT_LONG_LONG)\\nconst bool is_ll = sizeof(uintptr_t) == sizeof(long long);\\nif (is_ll) {\\nidx = _ntoa_long_long(out, buffer, idx, maxlen, (uintptr_t)va_arg(va, void*), false, 16U, precision, width, flags);\\n}\\nelse {\\n#endif\\nidx = _ntoa_long(out, buffer, idx, maxlen, (unsigned long)((uintptr_t)va_arg(va, void*)), false, 16U, precision, width, flags);\\n#if defined(PRINTF_SUPPORT_LONG_LONG)\\n}\\n#endif\\nformat++;\\nbreak;\\n}\\ncase '%' :\\nout('%', buffer, idx++, maxlen);\\nformat++;\\nbreak;\\ndefault :\\nout(*format, buffer, idx++, maxlen);\\nformat++;\\nbreak;\\n}\\n}\\nout((char)0, buffer, idx < maxlen ? idx : maxlen - 1U, maxlen);\\nreturn (int)idx;\\n}\\nint printf_(const char* format, ...)\\n{\\nva_list va;\\nva_start(va, format);\\nchar buffer[1];\\nconst int ret = _vsnprintf(_out_char, buffer, (size_t)-1, format, va);\\nva_end(va);\\nreturn ret;\\n}\\nint sprintf_(char* buffer, const char* format, ...)\\n{\\nva_list va;\\nva_start(va, format);\\nconst int ret = _vsnprintf(_out_buffer, buffer, (size_t)-1, format, va);\\nva_end(va);\\nreturn ret;\\n}\\nint snprintf_(char* buffer, size_t count, const char* format, ...)\\n{\\nva_list va;\\nva_start(va, format);\\nconst int ret = _vsnprintf(_out_buffer, buffer, count, format, va);\\nva_end(va);\\nreturn ret;\\n}\\nint vprintf_(const char* format, va_list va)\\n{\\nchar buffer[1];\\nreturn _vsnprintf(_out_char, buffer, (size_t)-1, format, va);\\n}\\nint vsnprintf_(char* buffer, size_t count, const char* format, va_list va)\\n{\\nreturn _vsnprintf(_out_buffer, buffer, count, format, va);\\n}\\nint fctprintf(void (*out)(char character, void* arg), void* arg, const char* format, ...)\\n{\\nva_list va;\\nva_start(va, format);\\nconst out_fct_wrap_type out_fct_wrap = { out, arg };\\nconst int ret = _vsnprintf(_out_fct, (char*)(uintptr_t)&out_fct_wrap, (size_t)-1, format, va);\\nva_end(va);\\nreturn ret;\\n}\\n#include <stdio.h>\\n#ifdef FILES\\nstatic void _fprintf_out(char character, void* arg) {\\nfputc(character, (FILE*) arg);\\n}\\nint fprintf(FILE *stream, const char *format, ...) {\\nva_list va;\\nva_start(va, format);\\nconst out_fct_wrap_type out_fct_wrap = { _fprintf_out, stream};\\nconst int ret = _vsnprintf(_out_fct, (char*)(uintptr_t)&out_fct_wrap, (size_t)-1, format, va);\\nva_end(va);\\nreturn ret;\\n}\\n#endif\\n\",\"libraries/printf/printf.h\":\"#include <stdio.h>\\n#define _putchar putchar\\n#define printf_ printf\\n#define sprintf_ sprintf\\n#define snprintf_ snprintf\\n#define vprintf_ vprintf\\n#define vsnprintf_ vsnprintf\\n\",\"limits.h\":\"#pragma once\\n#define CHAR_BIT 8\\n#define CHAR_MAX 255\\n#define CHAR_MIN 0\\n#define INT_MAX 2147483647\\n#define INT_MIN -2147483648\\n#define LONG_MAX 9223372036854775807\\n#define LONG_MIN -9223372036854775808\\n#define LLONG_MAX 9223372036854775807\\n#define LLONG_MIN -9223372036854775808\\n#define SCHAR_MAX 127\\n#define SCHAR_MIN -128\\n#define SHRT_MAX 32767\\n#define SHRT_MIN -32768\\n#define UCHAR_MAX 255\\n#define USHRT_MAX 65535\\n#define UINT_MAX 4294967295\\n#define ULONG_MAX 18446744073709551615\\n#define ULLONG_MAX 18446744073709551615\\n\",\"math.h\":\"#pragma once\\ndouble sqrt(double);\\ndouble ceil(double);\\ndouble fabs(double);\\ndouble floor(double);\\ndouble fmax(double, double);\\ndouble fmin(double, double);\\ndouble trunc(double);\\ndouble copysign(double, double);\\ndouble round(double);  \\ndouble exp(double);\\n#define INFINITY (1./0)\\n#define NAN (0./0)\\n\",\"stdarg.h\":\"#pragma once\\ntypedef char *va_list;\\n#define va_start(ap, parmN) ( ap = (char*) __wasm_ssp__() )\\n#define va_arg(ap, T) ( ap -= 8, *((T*) __wasm_rload__((T *) ap)) )\\n#define va_copy(dst, src) ( dst = src )\\n#define va_end(ap) \\\"va_end\\\"\\n\",\"stdbool.h\":\"#pragma once\\n#define __bool_true_false_are_defined 1\\n#define bool _Bool\\n#define false 0\\n#define true 1\\n\",\"stddef.h\":\"#pragma once\\n#define NULL ((void *) 0)\\n#define offsetof(st, m) ((size_t)&(((st *)0)->m))\\n#ifndef __type_size\\n#define __type_size\\ntypedef unsigned int size_t;\\n#endif\\n#ifndef __type_ptrdiff\\n#define __type_ptrdiff\\ntypedef signed long ptrdiff_t;\\n#endif\\n\",\"stdint.h\":\"#pragma once\\n#ifndef __type_int8\\n#define __type_int8\\ntypedef signed char int8_t;\\n#define INT8_MAX 127\\n#define INT8_MIN -128\\n#endif\\n#ifndef __type_uint8\\n#define __type_uint8\\ntypedef unsigned char uint8_t;\\n#define UINT8_MAX 255\\n#endif\\n#ifndef __type_int16\\n#define __type_int16\\ntypedef signed short int16_t;\\n#define INT16_MAX 32767\\n#define INT16_MIN -32768\\n#endif\\n#ifndef __type_uint16\\n#define __type_uint16\\ntypedef unsigned short uint16_t;\\n#define UINT16_MAX 65535\\n#endif\\n#ifndef __type_int32\\n#define __type_int32\\ntypedef signed int int32_t;\\n#define INT32_MAX 2147483647\\n#define INT32_MIN -2147483648\\n#endif\\n#ifndef __type_uint32\\n#define __type_uint32\\ntypedef unsigned int uint32_t;\\n#define UINT32_MAX 4294967295\\n#endif\\n#ifndef __type_int64\\n#define __type_int64\\ntypedef signed long int64_t;\\n#define INT64_MAX 9223372036854775807\\n#define INT64_MIN -9223372036854775808\\n#endif\\n#ifndef __type_uint64\\n#define __type_uint64\\ntypedef unsigned long uint64_t;\\n#define UINT64_MAX 18446744073709551615\\n#endif\\n#ifndef __type_int_least8\\n#define __type_int_least8\\ntypedef signed char int_least8_t;\\n#define INT_LEAST8_MAX 127\\n#define INT_LEAST8_MIN -128\\n#endif\\n#ifndef __type_uint_least8\\n#define __type_uint_least8\\ntypedef unsigned char uint_least8_t;\\n#define UINT_LEAST8_MAX 255\\n#endif\\n#ifndef __type_int_least16\\n#define __type_int_least16\\ntypedef signed short int_least16_t;\\n#define INT_LEAST16_MAX 32767\\n#define INT_LEAST16_MIN -32768\\n#endif\\n#ifndef __type_uint_least16\\n#define __type_uint_least16\\ntypedef unsigned short uint_least16_t;\\n#define UINT_LEAST16_MAX 65535\\n#endif\\n#ifndef __type_int_least32\\n#define __type_int_least32\\ntypedef signed int int_least32_t;\\n#define INT_LEAST32_MAX 2147483647\\n#define INT_LEAST32_MIN -2147483648\\n#endif\\n#ifndef __type_uint_least32\\n#define __type_uint_least32\\ntypedef unsigned int uint_least32_t;\\n#define UINT_LEAST32_MAX 4294967295\\n#endif\\n#ifndef __type_int_least64\\n#define __type_int_least64\\ntypedef signed long int_least64_t;\\n#define INT_LEAST64_MAX 9223372036854775807\\n#define INT_LEAST64_MIN -9223372036854775808\\n#endif\\n#ifndef __type_uint_least64\\n#define __type_uint_least64\\ntypedef unsigned long uint_least64_t;\\n#define UINT_LEAST64_MAX 18446744073709551615\\n#endif\\n#ifndef __type_int_fast8\\n#define __type_int_fast8\\ntypedef signed int int_fast8_t;\\n#define INT_FAST8_MAX 2147483647\\n#define INT_FAST8_MIN -2147483648\\n#endif\\n#ifndef __type_uint_fast8\\n#define __type_uint_fast8\\ntypedef unsigned int uint_fast8_t;\\n#define UINT_FAST8_MAX 4294967295\\n#endif\\n#ifndef __type_int_fast16\\n#define __type_int_fast16\\ntypedef signed int int_fast16_t;\\n#define INT_FAST16_MAX 2147483647\\n#define INT_FAST16_MIN -2147483648\\n#endif\\n#ifndef __type_uint_fast16\\n#define __type_uint_fast16\\ntypedef unsigned int uint_fast16_t;\\n#define UINT_FAST16_MAX 4294967295\\n#endif\\n#ifndef __type_int_fast32\\n#define __type_int_fast32\\ntypedef signed int int_fast32_t;\\n#define INT_FAST32_MAX 2147483647\\n#define INT_FAST32_MIN -2147483648\\n#endif\\n#ifndef __type_uint_fast32\\n#define __type_uint_fast32\\ntypedef unsigned int uint_fast32_t;\\n#define UINT_FAST32_MAX 4294967295\\n#endif\\n#ifndef __type_int_fast64\\n#define __type_int_fast64\\ntypedef signed long int_fast64_t;\\n#define INT_FAST64_MAX 9223372036854775807\\n#define INT_FAST64_MIN -9223372036854775808\\n#endif\\n#ifndef __type_uint_fast64\\n#define __type_uint_fast64\\ntypedef unsigned long uint_fast64_t;\\n#define UINT_FAST64_MAX 18446744073709551615\\n#endif\\n#ifndef __type_intptr\\n#define __type_intptr\\ntypedef signed int intptr_t;\\n#define INTPTR_MAX 2147483647\\n#define INTPTR_MIN -2147483648\\n#endif\\n#ifndef __type_uintptr\\n#define __type_uintptr\\ntypedef unsigned int uintptr_t;\\n#define UINTPTR_MAX 4294967295\\n#endif\\n#ifndef __type_intmax\\n#define __type_intmax\\ntypedef signed int intmax_t;\\n#define INTMAX_MAX 9223372036854775807\\n#define INTMAX_MIN -9223372036854775808\\n#endif\\n#ifndef __type_uintmax\\n#define __type_uintmax\\ntypedef unsigned int uintmax_t;\\n#define UINTMAX_MAX 18446744073709551615\\n#endif\\n\",\"stdio.h\":\"#pragma once\\n#include <stddef.h>\\n#include <stdarg.h>\\nint printf(const char* format, ...);\\nint sprintf(char* buffer, const char* format, ...);\\nint snprintf(char* buffer, size_t count, const char* format, ...);\\nint vsnprintf(char* buffer, size_t count, const char* format, va_list va);\\nint vprintf(const char* format, va_list va);\\nint fctprintf(void (*out)(char character, void* arg), void* arg, const char* format, ...);\\nint putchar(int chr);\\nint puts(const char *s);\\n#ifndef FILES\\nimport void __put_char(char);\\n#else\\nimport int __get_char(int handle);\\nimport int __put_char(int handle, int c);\\nimport long __get_pos(int handle);\\nimport long __get_len(int handle);\\nimport int __set_pos(int handle, long pos);\\nimport int __exists();\\nimport int __move();\\nimport int __get_fhandle();\\ntypedef struct __stdio_file {\\nint handle, unget, len, flags;\\n_Bool error, eof;\\n} FILE;\\ntypedef long fpos_t;\\nFILE *fopen(const char *filename, const char *mode);\\nFILE *freopen(const char *filename, const char *mode, FILE* stream);\\nint fflush(FILE* stream);\\nint fclose(FILE* stream);\\nint remove(const char *filename);\\nint rename(const char *oldname, const char *newname);\\nchar *tmpnam(char *s);\\nFILE *tmpfile(void);\\nint setvbuf(FILE *stream, char *buf, int mode, size_t size);\\nvoid setbuf(FILE *stream, char *buf);\\nint fprintf(FILE *stream, const char *format, ...);\\nint vfscanf(FILE *stream, const char *fmt, va_list ap);\\nint fscanf(FILE *stream, const char *fmt, ...);\\nint sscanf(char *s, const char *fmt, ...);\\nint scanf(const char *fmt, ...);\\nint fgetc(FILE *stream);\\nchar *fgets(char *s, int n, FILE *stream);\\nint fputc(int c, FILE *stream);\\nint fputs(const char *s, FILE *stream);\\n#define getc(s) fgetc(s)\\nint getchar(void);\\nchar *gets(char *s);\\n#define putc(c, s) fputc(c, s)\\nint putchar(int c);\\nint puts(const char *s);\\nint ungetc(int c, FILE *stream);\\nsize_t fread(void *ptr, size_t size, size_t nobj, FILE *stream);\\nsize_t fwrite(const void *ptr, size_t size, size_t nobj, FILE* stream);\\nint fseek(FILE *stream, long offset, int origin);\\nlong ftell(FILE *stream);\\nvoid rewind(FILE *stream);\\nint fgetpos(FILE *stream, fpos_t *ptr);\\nint fsetpos(FILE *stream, const fpos_t *ptr);\\nvoid clearerr(FILE *stream);\\nint feof(FILE *stream);\\nint ferror(FILE *stream);\\nvoid perror(const char *s);\\n#define EOF -1\\n#define BUFSIZ 16\\n#define FILENAME_MAX 2048\\n#define FOPEN_MAX 1073741824\\n#define _IONBF 0\\n#define _IOLBF 1\\n#define _IOFBF 2\\n#define L_tmpnam 32\\n#define SEEK_SET 0\\n#define SEEK_CUR 1\\n#define SEEK_END 2\\n#define TMP_MAX 1073741824\\nextern FILE *stdin, *stdout, *stderr;\\n#endif\\n\",\"stdlib.h\":\"#pragma once\\n#include <stddef.h>\\n#include <stdarg.h>\\nvoid* malloc(size_t size);\\nvoid free(void* ptr);\\nvoid* realloc(void* ptr, size_t size);\\nvoid* calloc(size_t nobj, size_t size);\\nvoid abort(void);\\nvoid exit(int code);\\nint atexit(void (*fcn)(void));\\nint system(const char *s);\\nchar *getenv(const char *name);\\ndouble strtod(const char *s, char **endp);\\nlong strtol(const char *s, char **endp, int base);\\nunsigned long strtoul(const char *s, char **endp, int base);\\nvoid *bsearch(const void * key, const void * base, size_t nmemb, size_t size, int (*cmp)(const void *, const void *));\\nvoid qsort(void * base, size_t nmemb, size_t size, int (*cmp)(const void *, const void *));\\ntypedef struct __sdiv_t{\\nint quot, rem;\\n} div_t;\\ntypedef struct __ldiv_t {\\nlong quot, rem;\\n} ldiv_t;\\ndouble atof(const char *s);\\nint atoi(const char *s);\\nint atol(const char *s);\\nint abs(int n);\\nint labs(long n);\\ndiv_t div(int num, int denom);\\nldiv_t ldiv(long num, long denom);\\n\",\"string.h\":\"#pragma once\\n#include <stddef.h>\\nchar* strcpy(char* s1, const char* s2);\\nchar* strncpy(char* s1, const char* s2, size_t n);\\nchar* strcat(char* s1, const char* s2);\\nchar* strncat(char* s1, const char* s2, size_t n);\\nint strcmp(const char* s1, const char* s2);\\nint strncmp(const char* s1, const char* s2, size_t n);\\nchar* strchr(const char* s, int c);\\nchar* strrchr(const char* s, int c);\\nsize_t strspn(const char* s1, const char* s2);\\nsize_t strcspn(const char* s1, const char* s2);\\nchar* strpbrk(const char* s1, const char* s2);\\nchar* strstr(const char* s1, const char* s2);\\nsize_t strlen(const char* s);\\nsize_t strnlen(const char* s, size_t n);\\nchar* strtok(char* s1, const char* s2);\\nvoid* memcpy(void* s1, const void* s2, size_t n);\\nvoid* memmove(void* s1, const void* s2, size_t n);\\nint memcmp(const void* s1, const void* s2, size_t n);\\nvoid* memchr(const void* s, int c, size_t n);\\nvoid* memset(void* s, int c, size_t n);\\n\",\"strings.h\":\"#pragma once\\n#include <stddef.h>\\n#include <string.h>\\nint strcasecmp(const char *l, const char *r);\\nint strncasecmp(const char *_l, const char *_r, size_t n);\",\"time.h\":\"#pragma once\\n#include <stddef.h>\\nimport double __time();\\ntypedef double clock_t;\\nclock_t clock();\\n#define CLOCKS_PER_SEC 1000\\n\",\"wasm/f32.h\":\"#pragma once\\n#define f32_abs(x)          (__wasm_f32__(1, (float) x, 0x8B))\\n#define f32_neg(x)          (__wasm_f32__(1, (float) x, 0x8C))\\n#define f32_ceil(x)         (__wasm_f32__(1, (float) x, 0x8D))\\n#define f32_floor(x)        (__wasm_f32__(1, (float) x, 0x8E))\\n#define f32_trunc(x)        (__wasm_f32__(1, (float) x, 0x8F))\\n#define f32_nearest(x)      (__wasm_f32__(1, (float) x, 0x90))\\n#define f32_sqrt(x)         (__wasm_f32__(1, (float) x, 0x91))\\n#define f32_min(x,y)        (__wasm_f32__(2, (float) x, (float) y, 0x96))\\n#define f32_max(x,y)        (__wasm_f32__(2, (float) x, (float) y, 0x97))\\n#define f32_copysign(x,y)   (__wasm_f32__(2, (float) x, (float) y, 0x98))\\n\",\"wasm/f64.h\":\"#pragma once\\n#define f64_abs(x)          (__wasm_f64__(1, (double) x, 0x99))\\n#define f64_neg(x)          (__wasm_f64__(1, (double) x, 0x9A))\\n#define f64_ceil(x)         (__wasm_f64__(1, (double) x, 0x9B))\\n#define f64_floor(x)        (__wasm_f64__(1, (double) x, 0x9C))\\n#define f64_trunc(x)        (__wasm_f64__(1, (double) x, 0x9D))\\n#define f64_nearest(x)      (__wasm_f64__(1, (double) x, 0x9E))\\n#define f64_sqrt(x)         (__wasm_f64__(1, (double) x, 0x9F))\\n#define f64_min(x,y)        (__wasm_f64__(2, (double) x, (double) y, 0xA4))\\n#define f64_max(x,y)        (__wasm_f64__(2, (double) x, (double) y, 0xA5))\\n#define f64_copysign(x,y)   (__wasm_f64__(2, (double) x, (double) y, 0xA6))\\n\"}"),GX=new Map(Object.entries(WX)),qX=(()=>{const e=new Map;for(const[t,n]of GX.entries())t.endsWith(".h")&&e.set(t,n);return e})(),VX={generation_try_constant_expr:!0,generation_zero_shadow_stack:!1,generation_switch_br_table:!1,peephole_local_tee:!0,peephole_i32_constants_ops:!0,peephole_constants_add_mul:!0,peephole_add_0:!0,peephole_combine_adds:!0,peephole_load_offset:!0,peephole_constant_if:!0,peephole_unused_blocks:!0,partial_redundancy_elimination:!0,copy_propagation:!0,live_range_splitting:!0,dead_code_elimination:!0,reallocate_locals:!0,unused_locals:!0,peephole_2nd_pass:!0,inlining:!1};let XX=VX;function YX(){return{...XX}}function ZX(e){const t=new ArrayBuffer(4);return new DataView(t).setFloat32(0,e,!0),[...new Uint8Array(t)]}function KX(e){const t=new ArrayBuffer(8);return new DataView(t).setFloat64(0,e,!0),[...new Uint8Array(t)]}function QX(e){if(e>2n**32n-1n||e<0n)throw new Error(`Value ${e} outside of range for u32`);return function(e){const t=[];for(;;){const n=Number(0x7fn&e);if(0n===(e>>=7n))return t.push(n),t;t.push(128|n)}}(e)}function JX(e){if("number"==typeof e&&(e=BigInt(e)),e<2n**32n&&e>2n**31n-1n)e-=2n**32n;else if(e>2n**31n-1n||e<-(2n**31n))throw new Error(`Value ${e} outside of range for 32bit uninterpreted int`);return iY(e)}function eY(e){if(e<2n**64n&&e>2n**63n-1n)e-=2n**64n;else if(e>2n**63n-1n||e<-(2n**63n))throw new Error(`Value ${e} outside of range for 64bit uninterpreted int`);return iY(e)}function tY(e,t){if(t===rY)return[65,...JX(e)];if(t===oY&&"bigint"==typeof e)return[66,...eY(e)];if(t===sY&&"number"==typeof e)return[67,...ZX(e)];if(t===aY&&"number"==typeof e)return[68,...KX(e)];throw new Error(`Invalid value type (${t.toString(16)}) or initial value (${e})`)}function nY(e){const t=[];for(let n=0,i=0,r=0;r<e.length;){if(n=e.charCodeAt(r++),n>=55296&&n<=56319){if(r===e.length){t.push(239,191,189);break}if(i=e.charCodeAt(r),!(i>=56320&&i<=57343)){t.push(239,191,189);continue}if(n=1024*(n-55296)+i-56320+65536,r+=1,n>65535){t.push(240|n>>>18,128|n>>>12&63,128|n>>>6&63,128|63&n);continue}}n<=127?t.push(0|n):n<=2047?t.push(192|n>>>6,128|63&n):t.push(224|n>>>12,128|n>>>6&63,128|63&n)}return t.unshift(...QX(BigInt(t.length))),t}function iY(e){const t=[];for(;;){const n=Number(0x7fn&e);if(0n===(e>>=7n)&&0==(64&n)||-1n===e&&0!=(64&n))return t.push(n),t;t.push(128|n)}}const rY=127,oY=126,sY=125,aY=124;function cY(e){return uY(e.map((e=>[e])))}function lY(e){return[96,...cY(e[0]),...cY(e[1])]}function hY(e){return void 0===e[1]?[0,...QX(e[0])]:[1,...QX(e[0]),...QX(e[1])]}function uY(e){return[...QX(BigInt(e.length)),...e.flat()]}function dY(e,t,n,i,r=[],o=[]){const s={name:e,type:"zeroArg",immediate:{},encoded:t,parameters:n,result:i,reads:r,writes:o,copy(){return()=>this}};return()=>()=>s}function fY(e,t,n){return()=>i=>{const{parameters:r,result:o,reads:s,writes:a}=n(i);return{name:e,type:"zeroArg",immediate:{},encoded:t,parameters:r,result:o,reads:s,writes:a,copy(){return()=>this}}}}function pY(e,t,n,i,r){return o=>()=>({name:e,type:"constant",immediate:{value:i(o)},encoded:[...t,...n(o)],parameters:[],result:r,reads:[],writes:[],copy(){return()=>this}})}function vY(e,t,n,i){return(r,o)=>{"number"==typeof r&&(r=BigInt(r)),"number"==typeof o&&(o=BigInt(o));const s=[...t,...QX(r),...QX(o)],a={align:r,offset:o};return()=>({name:e,encoded:s,type:"memory",immediate:a,parameters:"load"===n?[rY]:[rY,i],result:"load"===n?i:null,reads:"load"===n?["memory"]:[],writes:"load"===n?[]:["memory"],copy(){return()=>this}})}}function yY(e,t){let n;return n="number"==typeof e?BigInt(e):"bigint"==typeof e?e:e.getIndex(t),n}function gY(e,t,n,i){return(r,...o)=>s=>{const a=yY(r,s.depth),c=[...t,...QX(a),...n],{parameters:l,result:h,reads:u,writes:d}=i({value:a,extra:o,...s});return{name:e,encoded:c,type:"index",immediate:{value:a},parameters:l,result:h,reads:u,writes:d,copy(){return()=>this}}}}function mY(e){return null===e?[64]:[e]}function bY(e,t){const n=(i,r,o)=>s=>{o&&o(s);const a={name:t,type:"structured",parameters:[],result:i,get encoded(){return[e,...mY(i),...c.encoded]},get immediate(){return{type:i,expression:c,expression2:void 0}},get reads(){return c.reads},get writes(){return c.writes},copy:()=>e=>{const t=n(i,[])(e);return c.copyInto(t.immediate.expression),t}},c=new WExpression(a,s.depth+1,s.builder);return c.push(...r),a};return n}class WExpression{constructor(e,t,n){this.parent=e,this.depth=t,this.builder=n,this._stack=[],this._instructions=[]}push(...e){for(const t of e)this._instructions.push(this.createInstr(t,this._stack))}get(e){return e<0&&(e+=this.instructions.length),this._instructions[e]}pop(){const e=this._instructions.pop();if(e)return e.result&&this._stack.pop(),this._stack.push(...e.parameters),e}replace(e,t,...n){if(e<0||t<e||e>this._instructions.length)throw new Error("Invalid replacement indices");const i=[],r=this._instructions.slice(0,e);r.forEach((e=>this.stackManipulation(e,i))),n.forEach((e=>r.push(this.createInstr(e,i))));try{for(let e,n=t;n<this._instructions.length;n++)this.stackManipulation(e=this._instructions[n],i),r.push(e);if(this._stack.length!==i.length||this._stack.some(((e,t)=>e!==i[t])))throw new Error("Stack different");this._instructions=r}catch(e){throw new Error(`Invalid replacement due to: \n\n${e.stack}\n`)}}copyInto(e){for(const t of this.instructions)e.push(t.copy())}*instructionsRecursive(){for(const e of this.instructions)yield e,"structured"===e.type&&(yield*e.immediate.expression.instructionsRecursive(),e.immediate.expression2&&(yield*e.immediate.expression2.instructionsRecursive()))}stackManipulation(e,t){for(let n=e.parameters.length-1;n>=0;n--)if(e.parameters[n]!==t.pop())throw new Error(`Stack does not match Wasm instruction (${e.name}) parameters\nPrevious instructions: ${this._instructions.map((e=>e.name)).reverse().join(", ")}`);e.result&&t.push(e.result)}createInstr(e,t){return"function"==typeof e&&(e=e({depth:this.depth,builder:this.builder,stack:t})),this.stackManipulation(e,t),e}get instructions(){return this._instructions}get stack(){return this._stack}get encoded(){const e=this._instructions.flatMap((e=>e.encoded));return e.push(11),e}get reads(){const e=this._instructions.flatMap((e=>e.reads));return[...new Set(e)]}get writes(){const e=this._instructions.flatMap((e=>e.writes));return[...new Set(e)]}}const _Y={unreachable:dY("unreachable",[0],[],null),nop:dY("nop",[1],[],null),block:bY(2,"block"),loop:bY(3,"loop"),if:function(e,t){const n=(i,r,o,s)=>a=>{s&&s(a);const c={name:"if",type:"structured",parameters:[rY],result:i,get encoded(){const n=[e,...mY(i),...l.encoded];return h&&(n.pop(),n.push(t,...h.encoded)),n},get immediate(){return{type:i,expression:l,expression2:h}},get reads(){return h?[...new Set([...l.reads,...h.reads])]:l.reads},get writes(){return h?[...new Set([...l.writes,...h.writes])]:l.writes},copy:()=>e=>{const t=n(i,[],h?[]:void 0)(e);return l.copyInto(t.immediate.expression),h&&h.copyInto(t.immediate.expression2),t}},l=new WExpression(c,a.depth+1,a.builder);let h;return l.push(...r),o&&(h=new WExpression(c,a.depth+1,a.builder),h.push(...o)),c};return n}(4,5),br:gY("br",[12],[],(({extra:e})=>({parameters:e,result:null,reads:[],writes:["jump"]}))),br_if:gY("br_if",[13],[],(()=>({parameters:[],result:null,reads:[],writes:["jump"]}))),br_table:(wY=14,(e,t)=>n=>{const i=yY(e,n.depth),r=t.map((e=>yY(e,n.depth)));return{name:"br_table",encoded:[wY,...uY(r.map(QX)),...QX(i)],type:"table",immediate:{defaultValue:i,valueTable:r},parameters:[rY],result:null,reads:[],writes:["jump"],copy(){return()=>this}}}),return:fY("return",[15],(({builder:e})=>({parameters:e.type[1],result:null,reads:[],writes:["jump"]}))),call:gY("call",[16],[],(({builder:e,value:t})=>{const n=e.fn.parent._functionLookup(t);return{parameters:n.type[0],result:n.type[1][0]??null,reads:[],writes:["jump","memory"]}})),call_indirect:gY("call_indirect",[17],[0],(({builder:e,value:t})=>{const n=e.fn.parent._typeLookup(t);return{parameters:[...n[0],rY],result:n[1][0]??null,reads:[],writes:["jump","memory"]}})),drop:fY("drop",[26],(({stack:e})=>{if(e.length<=0)throw new Error("Drop on empty stack");return{parameters:[e[e.length-1]],result:null,reads:[],writes:[]}})),local:{get:gY("local.get",[32],[],(({builder:e,value:t})=>{const n=e.getLocal(t);return{parameters:[],result:n.type,reads:[n],writes:[]}})),set:gY("local.set",[33],[],(({builder:e,value:t})=>{const n=e.getLocal(t);return{parameters:[n.type],result:null,reads:[],writes:[n]}})),tee:gY("local.tee",[34],[],(({builder:e,value:t})=>{const n=e.getLocal(t);return{parameters:[n.type],result:n.type,reads:[],writes:[n]}}))},global:{get:gY("global.get",[35],[],(({builder:e,value:t})=>{const n=e.fn.parent._globalLookup(t);return{parameters:[],result:n.type,reads:[n],writes:[]}})),set:gY("global.set",[36],[],(({builder:e,value:t})=>{const n=e.fn.parent._globalLookup(t);return{parameters:[n.type],result:null,reads:[],writes:[n]}}))},memory:{size:dY("memory.size",[63,0],[],rY,["memory"],[]),grow:dY("memory.grow",[64,0],[rY],rY,["memory"],["memory"]),copy:dY("memory.copy",[252,10,0,0],[rY,rY,rY],null,["memory"],["memory"]),fill:dY("memory.fill",[252,11,0],[rY,rY,rY],null,[],["memory"])},i32:{load:vY("i32.load",[40],"load",rY),load8_s:vY("i32.load8_s",[44],"load",rY),load8_u:vY("i32.load8_u",[45],"load",rY),load16_s:vY("i32.load16_s",[46],"load",rY),load16_u:vY("i32.load16_u",[47],"load",rY),store:vY("i32.store",[54],"store",rY),store8:vY("i32.store8",[58],"store",rY),store16:vY("i32.store16",[59],"store",rY),const:pY("i32.const",[65],JX,BigInt,rY),eqz:dY("i32.eqz",[69],[rY],rY),eq:dY("i32.eq",[70],[rY,rY],rY),ne:dY("i32.ne",[71],[rY,rY],rY),lt_s:dY("i32.lt_s",[72],[rY,rY],rY),lt_u:dY("i32.lt_u",[73],[rY,rY],rY),gt_s:dY("i32.gt_s",[74],[rY,rY],rY),gt_u:dY("i32.gt_u",[75],[rY,rY],rY),le_s:dY("i32.le_s",[76],[rY,rY],rY),le_u:dY("i32.le_u",[77],[rY,rY],rY),ge_s:dY("i32.ge_s",[78],[rY,rY],rY),ge_u:dY("i32.ge_u",[79],[rY,rY],rY),clz:dY("i32.clz",[103],[rY],rY),ctz:dY("i32.ctz",[104],[rY],rY),popcnt:dY("i32.popcnt",[105],[rY],rY),add:dY("i32.add",[106],[rY,rY],rY),sub:dY("i32.sub",[107],[rY,rY],rY),mul:dY("i32.mul",[108],[rY,rY],rY),div_s:dY("i32.div_s",[109],[rY,rY],rY),div_u:dY("i32.div_u",[110],[rY,rY],rY),rem_s:dY("i32.rem_s",[111],[rY,rY],rY),rem_u:dY("i32.rem_u",[112],[rY,rY],rY),and:dY("i32.and",[113],[rY,rY],rY),or:dY("i32.or",[114],[rY,rY],rY),xor:dY("i32.xor",[115],[rY,rY],rY),shl:dY("i32.shl",[116],[rY,rY],rY),shr_s:dY("i32.shr_s",[117],[rY,rY],rY),shr_u:dY("i32.shr_u",[118],[rY,rY],rY),rotl:dY("i32.rotl",[119],[rY,rY],rY),rotr:dY("i32.rotr",[120],[rY,rY],rY),wrap_i64:dY("i32.wrap_i64",[167],[oY],rY),trunc_f32_s:dY("i32.trunc_f32_s",[168],[sY],rY),trunc_f32_u:dY("i32.trunc_f32_u",[169],[sY],rY),trunc_f64_s:dY("i32.trunc_f64_s",[170],[aY],rY),trunc_f64_u:dY("i32.trunc_f64_u",[171],[aY],rY),reinterpret_f32:dY("i32.reinterpret_f32",[188],[sY],rY),extend8_s:dY("i32.extend8_s",[192],[rY],rY),extend16_s:dY("i32.extend16_s",[193],[rY],rY),trunc_sat_f32_s:dY("i32.trunc_sat_f32_s",[252,0],[sY],rY),trunc_sat_f32_u:dY("i32.trunc_sat_f32_u",[252,1],[sY],rY),trunc_sat_f64_s:dY("i32.trunc_sat_f64_s",[252,2],[aY],rY),trunc_sat_f64_u:dY("i32.trunc_sat_f64_u",[252,3],[aY],rY)},i64:{load:vY("i64.load",[41],"load",oY),load8_s:vY("i64.load8_s",[48],"load",oY),load8_u:vY("i64.load8_u",[49],"load",oY),load16_s:vY("i64.load16_s",[50],"load",oY),load16_u:vY("i64.load16_u",[51],"load",oY),load32_s:vY("i64.load32_s",[52],"load",oY),load32_u:vY("i64.load32_u",[53],"load",oY),store:vY("i64.store",[55],"store",oY),store8:vY("i64.store8",[60],"store",oY),store16:vY("i64.store16",[61],"store",oY),store32:vY("i64.store32",[62],"store",oY),const:pY("i64.const",[66],eY,BigInt,oY),eqz:dY("i64.eqz",[80],[oY],rY),eq:dY("i64.eq",[81],[oY,oY],rY),ne:dY("i64.ne",[82],[oY,oY],rY),lt_s:dY("i64.lt_s",[83],[oY,oY],rY),lt_u:dY("i64.lt_u",[84],[oY,oY],rY),gt_s:dY("i64.gt_s",[85],[oY,oY],rY),gt_u:dY("i64.gt_u",[86],[oY,oY],rY),le_s:dY("i64.le_s",[87],[oY,oY],rY),le_u:dY("i64.le_u",[88],[oY,oY],rY),ge_s:dY("i64.ge_s",[89],[oY,oY],rY),ge_u:dY("i64.ge_u",[90],[oY,oY],rY),clz:dY("i64.clz",[121],[oY],oY),ctz:dY("i64.ctz",[122],[oY],oY),popcnt:dY("i64.popcnt",[123],[oY],oY),add:dY("i64.add",[124],[oY,oY],oY),sub:dY("i64.sub",[125],[oY,oY],oY),mul:dY("i64.mul",[126],[oY,oY],oY),div_s:dY("i64.div_s",[127],[oY,oY],oY),div_u:dY("i64.div_u",[128],[oY,oY],oY),rem_s:dY("i64.rem_s",[129],[oY,oY],oY),rem_u:dY("i64.rem_u",[130],[oY,oY],oY),and:dY("i64.and",[131],[oY,oY],oY),or:dY("i64.or",[132],[oY,oY],oY),xor:dY("i64.xor",[133],[oY,oY],oY),shl:dY("i64.shl",[134],[oY,oY],oY),shr_s:dY("i64.shr_s",[135],[oY,oY],oY),shr_u:dY("i64.shr_u",[136],[oY,oY],oY),rotl:dY("i64.rotl",[137],[oY,oY],oY),rotr:dY("i64.rotr",[138],[oY,oY],oY),extend_i32_s:dY("i64.extend_i32_s",[172],[rY],oY),extend_i32_u:dY("i64.extend_i32_u",[173],[rY],oY),trunc_f32_s:dY("i64.trunc_f32_s",[174],[sY],oY),trunc_f32_u:dY("i64.trunc_f32_u",[175],[sY],oY),trunc_f64_s:dY("i64.trunc_f64_s",[176],[aY],oY),trunc_f64_u:dY("i64.trunc_f64_u",[177],[aY],oY),reinterpret_f64:dY("i64.reinterpret_f64",[189],[aY],oY),extend8_s:dY("i64.extend8_s",[194],[oY],oY),extend16_s:dY("i64.extend16_s",[195],[oY],oY),extend32_s:dY("i64.extend32_s",[196],[oY],oY),trunc_sat_f32_s:dY("i32.trunc_sat_f32_s",[252,4],[sY],oY),trunc_sat_f32_u:dY("i32.trunc_sat_f32_u",[252,5],[sY],oY),trunc_sat_f64_s:dY("i32.trunc_sat_f64_s",[252,6],[aY],oY),trunc_sat_f64_u:dY("i32.trunc_sat_f64_u",[252,7],[aY],oY)},f32:{load:vY("f32.load",[42],"load",sY),store:vY("f32.store",[56],"store",sY),const:pY("f32.const",[67],ZX,Number,sY),eq:dY("f32.eq",[91],[sY,sY],rY),ne:dY("f32.ne",[92],[sY,sY],rY),lt:dY("f32.lt",[93],[sY,sY],rY),gt:dY("f32.gt",[94],[sY,sY],rY),le:dY("f32.le",[95],[sY,sY],rY),ge:dY("f32.ge",[96],[sY,sY],rY),abs:dY("f32.abs",[139],[sY],sY),neg:dY("f32.neg",[140],[sY],sY),ceil:dY("f32.ceil",[141],[sY],sY),floor:dY("f32.floor",[142],[sY],sY),trunc:dY("f32.trunc",[143],[sY],sY),nearest:dY("f32.nearest",[144],[sY],sY),sqrt:dY("f32.sqrt",[145],[sY],sY),add:dY("f32.add",[146],[sY,sY],sY),sub:dY("f32.sub",[147],[sY,sY],sY),mul:dY("f32.mul",[148],[sY,sY],sY),div:dY("f32.div",[149],[sY,sY],sY),min:dY("f32.min",[150],[sY,sY],sY),max:dY("f32.max",[151],[sY,sY],sY),copysign:dY("f32.copysign",[152],[sY,sY],sY),convert_i32_s:dY("f32.convert_i32_s",[178],[rY],sY),convert_i32_u:dY("f32.convert_i32_u",[179],[rY],sY),convert_i64_s:dY("f32.convert_i64_s",[180],[oY],sY),convert_i64_u:dY("f32.convert_i64_u",[181],[oY],sY),demote_f64:dY("f32.demote_f64",[182],[aY],sY),reinterpret_i32:dY("f32.reinterpret_i32",[190],[rY],sY)},f64:{load:vY("f64.load",[43],"load",aY),store:vY("f64.store",[57],"store",aY),const:pY("f64.const",[68],KX,Number,aY),eq:dY("f64.eq",[97],[aY,aY],rY),ne:dY("f64.ne",[98],[aY,aY],rY),lt:dY("f64.lt",[99],[aY,aY],rY),gt:dY("f64.gt",[100],[aY,aY],rY),le:dY("f64.le",[101],[aY,aY],rY),ge:dY("f64.ge",[102],[aY,aY],rY),abs:dY("f64.abs",[153],[aY],aY),neg:dY("f64.neg",[154],[aY],aY),ceil:dY("f64.ceil",[155],[aY],aY),floor:dY("f64.floor",[156],[aY],aY),trunc:dY("f64.trunc",[157],[aY],aY),nearest:dY("f64.nearest",[158],[aY],aY),sqrt:dY("f64.sqrt",[159],[aY],aY),add:dY("f64.add",[160],[aY,aY],aY),sub:dY("f64.sub",[161],[aY,aY],aY),mul:dY("f64.mul",[162],[aY,aY],aY),div:dY("f64.div",[163],[aY,aY],aY),min:dY("f64.min",[164],[aY,aY],aY),max:dY("f64.max",[165],[aY,aY],aY),copysign:dY("f64.copysign",[166],[aY,aY],aY),convert_i32_s:dY("f64.convert_i32_s",[183],[rY],aY),convert_i32_u:dY("f64.convert_i32_u",[184],[rY],aY),convert_i64_s:dY("f64.convert_i64_s",[185],[oY],aY),convert_i64_u:dY("f64.convert_i64_u",[186],[oY],aY),promote_f32:dY("f64.promote_f32",[187],[sY],aY),reinterpret_i64:dY("f64.reinterpret_i64",[191],[oY],aY)}};var wY;function xY(e,t=new Set){const[n,i]=function(e){const t=e.instructions.map((e=>({instr:e,produces:void 0,consumes:[]}))),n=[],i=[];for(const e of t){for(let t=0;t<e.instr.parameters.length;t++){const t=i.pop();t.consumedBy=e,e.consumes.push(t)}null!==e.instr.result&&(e.produces={type:e.instr.result,producedBy:e,index:n.length},i.push(e.produces),n.push(e.produces))}for(const e of i)e.needed=!0;return[t,n]}(e);for(const e of n)e.instr.writes.some((e=>!(e instanceof WLocal)))&&kY(e);EY(i);for(let e=n.length-1;e>=0;e--){const r=n[e],o=r.instr;if(!r.needed)for(const e of o.writes)if(e instanceof WLocal&&t.has(e)){kY(r),EY(i);break}if(r.needed){if("structured"===o.type){if("loop"===o.name)for(const e of o.reads)e instanceof WLocal&&t.add(e);if(xY(o.immediate.expression,t),o.immediate.expression2&&xY(o.immediate.expression2,t),"loop"===o.name)continue}for(const e of o.reads)e instanceof WLocal&&t.add(e)}}if(n.some((e=>!e.needed))){const t=[];for(const e of n)(e.needed||"unreachable"===e.instr.name)&&(t.push(e.instr),e.produces&&!e.produces.needed&&t.push(_Y.drop()));e.replace(0,e.instructions.length,...t)}}function kY(e){e.needed=!0;for(const t of e.consumes)t.needed=!0}function EY(e){let t=1;for(;t;){t=0;for(const n of e.filter((e=>e.needed&&!e.producedBy.needed)))kY(n.producedBy),t++}}const CY=[];function SY(e,t,n,i=0){for(let r=0;r<=e.instructions.length-n;r++){const o=t(e.instructions.slice(r,r+n),i);void 0!==o&&e.replace(r,r+n,...o)}for(const r of e.instructions)"structured"===r.type&&(SY(r.immediate.expression,t,n,i+1),r.immediate.expression2&&SY(r.immediate.expression2,t,n,i+1))}function TY(e,t,n=0){const i=t.map((e=>e[1])).reduce(((e,t)=>Math.max(e,t)),1);for(const i of e.instructions)"structured"===i.type&&(TY(i.immediate.expression,t,n+1),i.immediate.expression2&&TY(i.immediate.expression2,t,n+1));for(let r=0;r<e.instructions.length;r++)for(const[o,s]of t){if(r+s>e.instructions.length)continue;const t=o(e.instructions.slice(r,r+s),n);if(void 0!==t){e.replace(r,r+s,...t),r-=i,r<-1&&(r=-1);break}}}function OY(e,t){return t&2n**e-1n}function IY(e,t=-1n){if("index"===e.type&&e.name.startsWith("br"))return e.immediate.value===t;if("table"===e.type&&"br_table"===e.name)return e.immediate.defaultValue===t||e.immediate.valueTable.some((e=>e===t));if("structured"!==e.type)return!1;const{expression:n,expression2:i}=e.immediate;return!!n.instructions.some((e=>IY(e,t+1n)))||void 0!==i&&i.instructions.some((e=>IY(e,t+1n)))}function AY(e){const t={type:"entry",instr:void 0,flowPrevious:[],flowNext:[]},n={type:"exit",instr:void 0,flowPrevious:[],flowNext:[]},i=[t,n],r=[];!function e(t,o,s){const a=t.instructions,c=[];for(const[e,n]of a.entries())c.push({instr:n,instrIndex:e,expr:t,type:"instr",flowPrevious:[],flowNext:[]});i.push(...c),c.push(s);for(let t=0;t<a.length;t++){const i=a[t],o=c[t],s=c[t+1];if("structured"===i.type&&"if"===i.name){r.unshift(s);const t=e(i.immediate.expression,o,s),n=i.immediate.expression2&&e(i.immediate.expression2,o,s);if(r.shift(),t&&n)continue}else if("structured"===i.type){r.unshift("loop"===i.name?o:s);const t=e(i.immediate.expression,o,s);if(r.shift(),t)continue}else if("index"===i.type&&i.name.startsWith("br")){const e=r[Number(i.immediate.value)];if(!e)throw new Error("No such target for br?");if(o.flowNext.push(e),"br_if"!==i.name)continue}else{if("table"===i.type&&"br_table"===i.name){for(const e of[i.immediate.defaultValue,...i.immediate.valueTable]){const t=r[Number(e)];if(!t)throw new Error("No such target for br_table?");o.flowNext.push(t)}continue}if("return"===i.name){o.flowNext.push(n);continue}}o.flowNext.push(c[t+1])}const l=c.find((e=>"instr"===e.type));return l&&o.flowNext.push(l),!!l}(e,t,n);for(const e of i)for(const t of e.flowNext)t.flowPrevious.push(e);return{entry:t,exit:n,all:i.filter((e=>"instr"===e.type))}}function LY(e,t){const{entry:n,exit:i,all:r}=AY(e),o=[];for(const e of r)if(1!==e.flowPrevious.length||1!==e.flowNext.length||t(e.instr))o.push(e);else{const t=e.flowPrevious[0],n=e.flowNext[0];t.flowNext[t.flowNext.indexOf(e)]=n,n.flowPrevious[n.flowPrevious.indexOf(e)]=t}return{entry:n,exit:i,all:o}}function FY(e,t,n,i,r,o,s){const a=("forwards"===i?e.entry.flowNext:e.exit.flowPrevious).filter((e=>e.instr));let c;for(;void 0!==(c=a.shift());){let e="union"===r?0n:-1n;for(const t of"forwards"===i?c.flowPrevious:c.flowNext){const i=n.get(t)??0n;"union"===r?e|=i:e&=i}if(s&&(e=s(c,e)),t&&t.set(c,e),e=o(c,e),e!==n.get(c)){n.set(c,e);for(const e of"forwards"===i?c.flowNext:c.flowPrevious)e.instr&&a.push(e)}}}function PY(e,t){SY(e,(([e])=>{if("index"!==e.type||!e.name.startsWith("local."))return;const n=t[Number(e.immediate.value)];return"local.get"===e.name?[_Y.local.get(n)]:"local.set"===e.name?[_Y.local.set(n)]:"local.tee"===e.name?[_Y.local.tee(n)]:void 0}),1)}CY.push({name:"[local.set, local.get] => [local.tee]",enabled:e=>e.peephole_local_tee,run:([e,t])=>{if("local.set"===e.name&&"local.get"===t.name){const n=e.writes[0];if(!(n instanceof WLocal)||t.reads[0]!==n)return;return[_Y.local.tee(n)]}if("local.tee"===e.name&&"drop"===t.name){const t=e.writes[0];if(!(t instanceof WLocal))return;return[_Y.local.set(t)]}},peepholeSize:2}),CY.push({name:"?.const 0, ?.add",enabled:e=>e.peephole_add_0,run:([e,t])=>{if("constant"===e.type&&0==e.immediate.value)return t.name.endsWith(".add")?[]:void 0},peepholeSize:2}),CY.push({name:"i32.const, i32.const, i32.[op]",enabled:e=>e.peephole_i32_constants_ops,run:([e,t,n])=>{if("constant"!==e.type||"constant"!==t.type||!n.name.startsWith("i32."))return;if(e.result!==rY||t.result!==rY)return;const i=Number(e.immediate.value),r=Number(t.immediate.value),o=(BigInt(i)+2n**32n)%2n**32n,s=(BigInt(r)+2n**32n)%2n**32n;switch(n.name){case"i32.eq":return[_Y.i32.const(i===r?1:0)];case"i32.ne":return[_Y.i32.const(i!==r?1:0)];case"i32.lt_s":return[_Y.i32.const(i<r?1:0)];case"i32.lt_u":return[_Y.i32.const(o<s?1:0)];case"i32.gt_s":return[_Y.i32.const(i>r?1:0)];case"i32.gt_u":return[_Y.i32.const(o>s?1:0)];case"i32.le_s":return[_Y.i32.const(i<=r?1:0)];case"i32.le_u":return[_Y.i32.const(o<=s?1:0)];case"i32.ge_s":return[_Y.i32.const(i>=r?1:0)];case"i32.ge_u":return[_Y.i32.const(o>=s?1:0)];case"i32.add":return[_Y.i32.const(i+r|0)];case"i32.sub":return[_Y.i32.const(i-r|0)];case"i32.mul":return[_Y.i32.const(o*s&2n**32n-1n)];case"i32.div_s":if(0===r)return;return[_Y.i32.const(i/r|0)];case"i32.div_u":if(0===r)return;return[_Y.i32.const(o/s)];case"i32.rem_s":if(0===r)return;return[_Y.i32.const(i%r)];case"i32.rem_u":if(0===r)return;return[_Y.i32.const(o%s)];case"i32.and":return[_Y.i32.const(i&r)];case"i32.or":return[_Y.i32.const(i|r)];case"i32.xor":return[_Y.i32.const(i^r)];case"i32.shl":return[_Y.i32.const(i<<r)];case"i32.shr_s":return[_Y.i32.const(i>>r)];case"i32.shr_u":return[_Y.i32.const(i>>>r)]}},peepholeSize:3}),CY.push({name:"i32.const, i32.eqz",enabled:e=>e.peephole_i32_constants_ops,run:([e,t])=>{if("constant"===e.type&&t.name.endsWith(".eqz"))return[_Y.i32.const(0==e.immediate.value?1:0)]},peepholeSize:2}),CY.push({name:"?.const, ?.const, ?.add/mul",enabled:e=>e.peephole_constants_add_mul,run:([e,t,n])=>{if("constant"!==e.type||"constant"!==t.type)return;let i;if(n.name.endsWith(".add")){if(e.result===sY)return[_Y.f32.const(Number(e.immediate.value)+Number(t.immediate.value))];if(e.result===aY)return[_Y.f64.const(Number(e.immediate.value)+Number(t.immediate.value))];i=BigInt(e.immediate.value)+BigInt(t.immediate.value)}else{if(!n.name.endsWith(".mul"))return;if(e.result===sY)return[_Y.f32.const(Number(e.immediate.value)*Number(t.immediate.value))];if(e.result===aY)return[_Y.f64.const(Number(e.immediate.value)*Number(t.immediate.value))];i=BigInt(e.immediate.value)*BigInt(t.immediate.value)}return e.result===rY?[_Y.i32.const(OY(32n,i))]:[_Y.i64.const(OY(64n,i))]},peepholeSize:3}),CY.push({name:"i32.const, i32.add, i32.const, i32.add",enabled:e=>e.peephole_combine_adds,run:([e,t,n,i])=>{if("constant"===e.type&&"constant"===n.type&&"i32.add"===t.name&&"i32.add"===i.name)return[_Y.i32.const(OY(32n,BigInt(e.immediate.value)+BigInt(n.immediate.value))),_Y.i32.add()]},peepholeSize:4}),CY.push({name:"..., i32.const, i32.add, *.load offset",enabled:e=>e.peephole_load_offset,run:([e,t,n])=>{if("constant"!==e.type||e.result!==rY)return;if("i32.add"!==t.name)return;if("memory"!==n.type||!n.name.includes(".load"))return;const i=n.immediate.offset+BigInt(e.immediate.value);if(!(i>127))if(n.result===rY){if("i32.load"===n.name)return[_Y.i32.load(n.immediate.align,i)];if("i32.load8_s"===n.name)return[_Y.i32.load8_s(n.immediate.align,i)];if("i32.load8_u"===n.name)return[_Y.i32.load8_u(n.immediate.align,i)];if("i32.load16_s"===n.name)return[_Y.i32.load16_s(n.immediate.align,i)];if("i32.load16_u"===n.name)return[_Y.i32.load16_u(n.immediate.align,i)]}else if(n.result===oY){if("i64.load"===n.name)return[_Y.i64.load(n.immediate.align,i)];if("i64.load8_s"===n.name)return[_Y.i64.load8_s(n.immediate.align,i)];if("i64.load16_s"===n.name)return[_Y.i64.load16_s(n.immediate.align,i)];if("i64.load16_u"===n.name)return[_Y.i64.load16_u(n.immediate.align,i)];if("i64.load32_s"===n.name)return[_Y.i64.load32_s(n.immediate.align,i)];if("i64.load32_u"===n.name)return[_Y.i64.load32_u(n.immediate.align,i)]}else{if(n.result===sY)return[_Y.f32.load(n.immediate.align,i)];if(n.result===aY)return[_Y.f64.load(n.immediate.align,i)]}},peepholeSize:3}),CY.push({name:"remove unused blocks and loops",enabled:e=>e.peephole_unused_blocks,run:([e])=>{var t;if("structured"===e.type&&"if"!==e.name&&!IY(e))return SY(t=e.immediate.expression,(([e],t)=>{if("index"===e.type){if(e.immediate.value<t)return;if("br"===e.name)return[_Y.br(e.immediate.value-1n,...e.parameters)];if("br_if"===e.name)return[_Y.br_if(e.immediate.value-1n)]}else if("table"===e.type&&"br_table"===e.name){const{defaultValue:n,valueTable:i}=e.immediate;return[_Y.br_table(n<t?n:n-1n,i.map((e=>e<t?e:e-1n)))]}}),1),t.instructions.slice()},peepholeSize:1}),CY.push({name:"remove constant ifs",enabled:e=>e.peephole_constant_if,run:([e,t])=>{if("constant"!==e.type||e.result!==rY)return;if("structured"!==t.type||"if"!==t.name)return;let n;if(0!=e.immediate.value)n=t.immediate.expression;else{if(!t.immediate.expression2)return[];n=t.immediate.expression2}return[_Y.block(t.immediate.type,n.instructions.slice())]},peepholeSize:2});class WGlobal{constructor(e,t,n,i,r){this.module=e,this.type=t,this.mutable=n,this.initialValue=i,this.exportName=r}getIndex(){return this.module._globalIndex(this)}toBytes(){return[...(e=[this.type,this.mutable],[e[0],e[1]?1:0]),...tY(this.initialValue,this.type),11];var e}}class InstrSplicer{constructor(){this.offsetsMap=new Map}splice(e,t,n,i){let r=this.offsetsMap.get(e.expr);r||this.offsetsMap.set(e.expr,r=[]);let o=e.instrIndex+(i??0);for(const{index:e,offset:t}of r)o>e&&(o+=t);e.expr.replace(o,o+t,...n);const s=n.length-t;s&&r.push({index:o,offset:s})}realIndex(e){const t=this.offsetsMap.get(e.expr);if(!t)return e.instrIndex;let n=e.instrIndex;for(const{index:e,offset:i}of t)n>e&&(n+=i);return n}}function NY(e,t){const n=function(e,t){const n=(1n<<BigInt(t.length))-1n,i=new Map;for(const r of e.all){let e=n;if("structured"!==r.instr.type)for(const n of r.instr.writes)if("memory"===n||n instanceof WGlobal||n instanceof WLocal)for(const[i,r]of t.entries())r.resources.has(n)&&(e&=~(1n<<BigInt(i)));i.set(r,e)}return e=>i.get(e)??n}(e,t),i=function(e,t){const n=new Map;for(const i of e.all){let e=0n;for(const[n,r]of t.entries())r.positions.find((({expr:e,end:t})=>e===i.expr&&t===i.instrIndex))&&(e|=1n<<BigInt(n));n.set(i,e)}return e=>n.get(e)??0n}(e,t),r=i,o=new Map,s=new Map;FY(e,o,s,"forwards","intersection",((e,t)=>i(e)|t&n(e)));const a=new Map,c=new Map;FY(e,a,c,"backwards","intersection",((e,t)=>r(e)|t&n(e)));const l=new Map,h=new Map;for(const t of e.all)l.set(t,(o.get(t)??0n)|(c.get(t)??0n)),h.set(t,(s.get(t)??0n)|(a.get(t)??0n));const u=new Map,d=new Map;FY(e,u,d,"forwards","union",((e,t)=>(i(e)|t&n(e))&(h.get(e)??0n)),((e,t)=>t&(l.get(e)??0n)));const f=new Map,p=new Map;FY(e,f,p,"backwards","union",((e,t)=>(r(e)|t&n(e))&(l.get(e)??0n)),((e,t)=>t&(h.get(e)??0n)));const v=new Map,y=new Map,g=new Map;for(const t of[e.entry,...e.all]){const e=i(t),n=u.get(t)??0n,o=f.get(t)??0n,s=e&~n&o;0n!==s&&v.set(t,s);const a=r(t)&n|e&o;0n!==a&&y.set(t,a);const c=d.get(t)??0n,l=[];for(const e of t.flowNext){if(!e.instr)continue;const t=~c&(u.get(e)??0n)&(p.get(e)??0n);0n!==t&&l.push([e,t])}l.length&&g.set(t,l)}return{INSERT:v,INSERT_EDGE:g,REPLACE:y}}let MY=0;class LocalRange{constructor(e){this.type=e,this.id=MY++}merge(e){return this===e?this.get():this.target?this.target.merge(e):e.id<this.id?(e.merge(this),this.get()):(this.target=e,e.get())}get(){return this.target?this.target.get():this}getNewLocal(){if(this.target)return this.target.getNewLocal();if(!this.newLocal)throw new Error("No new local assigned?");return this.newLocal}}class CError extends Error{constructor(e,t,n){super(e),this.node=t,this.node2=n,this.name="CError",t?.loc&&(this.message+="\n\n"+DY(t.loc),n?.loc&&(this.message+="\n\n"+DY(n.loc,"Secondary location")))}}function DY(e,t="Location"){const n=e.source.split("\n");if(e.first_line>=n.length)return`${t}: [UNKNOWN]`;let i=`${t}:\n`;const r=Math.ceil(Math.log10(e.last_line+4));function o(e){i+=`L${(e+1).toString().padStart(r,"0")}: ${n[e]}\n`}return e.first_line>1&&o(e.first_line-2),e.first_line>0&&o(e.first_line-1),o(e.first_line),i+=new Array(3+r+e.first_column).join(" "),e.first_line===e.last_line?i+=new Array(1+e.last_column-e.first_column).join("^"):i+="^",i+="\n",e.first_line+1<n.length&&o(e.first_line+1),e.first_line+2<n.length&&o(e.first_line+2),i}class CFuncType{constructor(e,t,n,i,r=!1){this.node=e,this.returnType=t,this.parameterTypes=n,this.parameterNames=i,this.variadic=r,this.typeName="function",this.bytes=0,this.alignment=1,this.incomplete=!1,t instanceof CVoid||WY(t),n.forEach((e=>WY(e)))}equals(e){return e instanceof CFuncType&&e.returnType.equals(this.returnType)&&e.parameterTypes.length===this.parameterTypes.length&&e.parameterTypes.every(((e,t)=>this.parameterTypes[t].equals(e)))&&e.variadic===this.variadic}get pointerGeneration(){return RY(new CPointer(this.node,this,!1,this),jY(this))}}class CPointer{constructor(e,t,n=!1,i){this.node=e,this.type=t,this.original=i,this.bytes=4,this.alignment=4,this.incomplete=!1,n&&(this.qualifier="const")}equals(e){return e instanceof CPointer&&e.qualifier===this.qualifier&&this.type.equals(e.type)}get pointerGeneration(){return this}get typeName(){return this.type.typeName+"*"+(this.qualifier?" "+this.qualifier:"")}}class CArray{constructor(e,t,n){this.node=e,this.type=t,this.length=n,WY(t),this.alignment=t.alignment}get bytes(){if(void 0===this.length)throw new Error("Tried to get size of incomplete type");return this.type.bytes*this.length}get incomplete(){return void 0===this.length}equals(e){return e instanceof CArray&&e.length===this.length&&this.type.equals(e.type)}get pointerGeneration(){return RY(new CPointer(this.node,this.type,!1,this),jY(this))}get typeName(){return this.length?this.type.typeName+"["+this.length+"]":this.type.typeName+"[]"}}class CCompoundMember{constructor(e,t,n){this.node=e,this.name=t,this.type=n}}class CStruct{constructor(e,t){this.node=e,this.name=t}get members(){if(void 0===this._members)throw new Error("Can't get members of an incomplete struct");return this._members}set members(e){if(void 0!==this._members)throw new Error("Can't redefine a struct's members");if(0===e.length)throw new Error("Struct must have one or more member");this._members=e}get bytes(){if(this.incomplete)throw new Error("Tried to get size of incomplete type");return this.members.reduce(((e,t)=>(e=Math.ceil(e/t.type.alignment)*t.type.alignment)+t.type.bytes),0)}get alignment(){return Math.max(...this.members.map((e=>e.type.alignment)))}get incomplete(){return void 0===this._members}equals(e){return e instanceof CStruct&&(void 0===this.name&&void 0===e.name?this.members.length===e.members.length&&this.members.every(((t,n)=>e.members[n].name===t.name&&e.members[n].type.equals(t.type))):e.name===this.name)}memberType(e){const t=this.members.find((t=>t.name===e));if(t)return t.type;throw new Error(`Struct does not contain member "${e}"`)}hasConstMember(){return void 0!==this.members.find((e=>jY(e.type)||(e.type instanceof CUnion||e.type instanceof CStruct)&&e.type.hasConstMember()))}get pointerGeneration(){return this}get typeName(){return this.name?"struct "+this.name:"struct {"+this.members.map((e=>e.type.typeName+" "+e.name+";")).join(" ")+"}"}}class CUnion{constructor(e,t){this.node=e,this.name=t}get members(){if(void 0===this._members)throw new Error("Can't get members of an incomplete union");return this._members}set members(e){if(void 0!==this._members)throw new Error("Can't redefine a union's members");if(0===e.length)throw new Error("Struct must have one or more member");this._members=e}get bytes(){if(this.incomplete)throw new Error("Tried to get size of incomplete type");return this.members.reduce(((e,t)=>Math.max(e,t.type.bytes)),0)}get alignment(){return Math.max(...this.members.map((e=>e.type.alignment)))}get incomplete(){return void 0===this._members}equals(e){return e instanceof CUnion&&(void 0===this.name&&void 0===e.name?this.members.length===e.members.length&&this.members.every(((t,n)=>e.members[n].name===t.name&&e.members[n].type.equals(t.type))):e.name===this.name)}memberType(e){const t=this.members.find((t=>t.name===e));if(t)return t.type;throw new Error(`Union does not contain member "${e}"`)}hasConstMember(){return void 0!==this.members.find((e=>jY(e.type)||(e.type instanceof CUnion||e.type instanceof CStruct)&&e.type.hasConstMember()))}get pointerGeneration(){return this}get typeName(){return this.name?"union "+this.name:"union {"+this.members.map((e=>e.type.typeName+" "+e.name+";")).join(" ")+"}"}}class CEnum{constructor(e,t){this.node=e,this.name=t,this.typeName="enum"}get values(){if(void 0===this._values)throw new Error("Can't get values of an incomplete enum");return this._values}set values(e){if(void 0!==this._values)throw new Error("Can't redefine an enum's values");if(0===e.length)throw new Error("Enum must have one or more value");this._values=e}get incomplete(){return void 0===this._values}equals(e){return void 0===this.name?this===e:e instanceof CEnum&&e.name===this.name}}class CVoid{constructor(){this.typeName="void",this.bytes=0,this.alignment=1,this.incomplete=!0,this.node=void 0}equals(e){return e instanceof CVoid}get pointerGeneration(){return this}}class CArithmetic{constructor(e,t,n){this.typeName=e,this.bytes=t,this.type=n,this.incomplete=!1,this.node=void 0,this.alignment=t}equals(e){return e instanceof CArithmetic&&e.typeName===this.typeName&&e.type===this.type&&e.bytes===this.bytes}get minValue(){if(CArithmetic.BOOL.equals(this))return 0;switch(this.type){case"float":return-1/0;case"unsigned":return 0;case"signed":return-(2n**(BigInt(8*this.bytes)-1n))}}get maxValue(){if(CArithmetic.BOOL.equals(this))return 1;switch(this.type){case"float":return 1/0;case"unsigned":return 2n**BigInt(8*this.bytes)-1n;case"signed":return 2n**(BigInt(8*this.bytes)-1n)-1n}}get pointerGeneration(){return this}}CArithmetic.Fp32=new CArithmetic("float",4,"float"),CArithmetic.Fp64=new CArithmetic("double",8,"float"),CArithmetic.U8=new CArithmetic("char",1,"unsigned"),CArithmetic.S8=new CArithmetic("signed char",1,"signed"),CArithmetic.U16=new CArithmetic("unsigned short",2,"unsigned"),CArithmetic.S16=new CArithmetic("short",2,"signed"),CArithmetic.U32=new CArithmetic("unsigned int",4,"unsigned"),CArithmetic.S32=new CArithmetic("int",4,"signed"),CArithmetic.U64=new CArithmetic("unsigned long",8,"unsigned"),CArithmetic.S64=new CArithmetic("long",8,"signed"),CArithmetic.BOOL=new CArithmetic("bool",4,"signed");const zY=CArithmetic.U32,BY=Symbol("const");function RY(e,t){if(void 0===t)return e;if(Object.prototype.hasOwnProperty.call(e,"qualifier"))throw new Error("Type already has a qualifier");const n=e;if(n[BY])return n[BY];const i=Object.setPrototypeOf({qualifier:t,_base:e},e);return n[BY]=i,i}function jY(e){return e?.qualifier}function UY(e){return"float"===e.type?e:e.bytes<CArithmetic.S32.bytes||e===CArithmetic.BOOL?CArithmetic.S32:e}function $Y(e,t){return e===CArithmetic.Fp64||t===CArithmetic.Fp64?CArithmetic.Fp64:e===CArithmetic.Fp32||t===CArithmetic.Fp32?CArithmetic.Fp32:(e=UY(e),t=UY(t),e===CArithmetic.U64||t===CArithmetic.U64?CArithmetic.U64:e===CArithmetic.S64||t===CArithmetic.S64?CArithmetic.S64:e===CArithmetic.U32||t===CArithmetic.U32?CArithmetic.U32:CArithmetic.S32)}function HY(e){const t=e.slice();function n(e){const n=t.indexOf(e);return n>-1&&(t.splice(n,1),!0)}function i(e){if(!(t.length>0))return e}return n("void")?i(new CVoid):n("double")?(n("long"),i(CArithmetic.Fp64)):n("float")?i(CArithmetic.Fp32):n("char")?n("signed")?i(CArithmetic.S8):(n("unsigned"),i(CArithmetic.U8)):n("short")?(n("int"),n("unsigned")?i(CArithmetic.U16):(n("signed"),i(CArithmetic.S16))):n("long")?(n("long"),n("int"),n("unsigned")?i(CArithmetic.U64):(n("signed"),i(CArithmetic.S64))):n("int")?n("unsigned")?i(CArithmetic.U32):(n("signed"),i(CArithmetic.S32)):n("unsigned")?i(CArithmetic.U32):n("signed")?i(CArithmetic.S32):n("bool")?i(CArithmetic.BOOL):void 0}function WY(e,t=e.node){if(e.incomplete)throw new class extends CError{constructor(){super(...arguments),this.name="IncompleteTypeError"}}("Invalid use of an incomplete type",t);return e}class ExpressionTypeError extends CError{constructor(e,t,n){super(n?`Expected ${t} but got ${n} instead!`:`Expected ${t}`,e),this.wantedType=t,this.actualType=n,this.name="ExpressionTypeError"}}function GY(e,t){if(t instanceof CArithmetic)return t;throw new ExpressionTypeError(e,"arithmetic",t.typeName)}function qY(e,t){const n=GY(e,t);switch(n.type){case"signed":case"unsigned":return n;default:throw new ExpressionTypeError(e,"integer",t.typeName)}}function VY(e,t){if(t instanceof CPointer)return t;throw new ExpressionTypeError(e,"pointer",t.typeName)}function XY(e,t){if(t instanceof CArithmetic)return t;if(t instanceof CPointer)return t;throw new ExpressionTypeError(e,"arithmetic or pointer",t.typeName)}function YY(e,t){if(t instanceof CPointer&&t.type instanceof CFuncType)throw new ExpressionTypeError(e,"non-function pointer","function pointer");return t}function ZY(e,t){if(e.lvalue===t)return e;throw new ExpressionTypeError(e.node,`lvalue=${t}`,`lvalue=${e.lvalue}`)}class CConstant{constructor(e,t,n){this.node=e,this.type=t,this.value=n,this.lvalue=!1}changeType(e){if(this.type.equals(e))return this;let t;if(e.equals(CArithmetic.BOOL))t=0==this.value?0:1;else if("float"===e.type)t=Number(this.value);else{if(this.value>e.maxValue||this.value<e.minValue)throw new ExpressionTypeError(this.node,`value which fits in ${e.typeName}`,this.value.toString());t=BigInt(this.value)}return new CConstant(this.node,e,t)}*identifiers(){}}class CIdentifier{constructor(e,t){this.node=e,this.value=t,this.lvalue=!(t.type instanceof CFuncType)}get type(){return this.value.type.pointerGeneration}*identifiers(){yield this}}class CStringLiteral{constructor(e,t){if(this.node=e,this.value=t,this.lvalue=!1,0===t.length||0n!==t[t.length-1])throw new ExpressionTypeError(e,"null terminated char[]","char[]");this.type=new CArray(e,CArithmetic.U8,t.length).pointerGeneration}*identifiers(){}}class CFunctionCall{constructor(e,t,n){if(this.node=e,this.body=t,this.args=n,this.lvalue=!1,this.fnType=function(e,t){if(t instanceof CFuncType)return t;if(t instanceof CPointer&&t.type instanceof CFuncType)return t.type;throw new ExpressionTypeError(e,"function",t.typeName)}(t.node,t.type),this.type=this.fnType.returnType.pointerGeneration,this.fnType.variadic&&this.fnType.parameterTypes.length>n.length)throw new ExpressionTypeError(e,`at least ${this.fnType.parameterTypes.length} argument(s) to variadic function`);if(!this.fnType.variadic&&this.fnType.parameterTypes.length!==n.length)throw new ExpressionTypeError(e,`${this.fnType.parameterTypes.length} argument(s)`,`${n.length}`);for(let e=0;e<this.fnType.parameterTypes.length;e++)CAssignment.checkAssignmentValid(n[e].node,this.fnType.parameterTypes[e],n[e])}*identifiers(){yield*this.body.identifiers();for(const e of this.args)yield*e.identifiers()}}class CMemberAccess{constructor(e,t,n){this.node=e,this.body=t,this.member=n;const i=t.type instanceof CPointer?t.type.original??t.type:t.type,r=VY(t.node,i);this.structUnion=function(e,t){if(WY(t),t instanceof CStruct)return t;if(t instanceof CUnion)return t;throw new ExpressionTypeError(e,"struct or union",t.typeName)}(t.node,r.type);const o=this.structUnion.memberType(n);this.type=o.pointerGeneration,this.lvalue=!(this.type instanceof CArray)}*identifiers(){yield*this.body.identifiers()}}class CIncrDecr{constructor(e,t,n,i){this.node=e,this.body=t,this.op=n,this.pos=i,this.lvalue=!1,ZY(t,!0);const r=t.type instanceof CPointer?t.type.original??t.type:t.type;this.type=YY(t.node,XY(t.node,r)),this.type instanceof CPointer&&WY(this.type.type)}*identifiers(){yield*this.body.identifiers()}}class CSizeof{constructor(e,t){if(this.node=e,this.lvalue=!1,this.type=zY,this.body=t instanceof CPointer?t.original??t:t,this.body.incomplete||0===this.body.bytes||this.body instanceof CFuncType)throw new ExpressionTypeError(e,"Complete non-function type",t.typeName)}*identifiers(){}}class CAddressOf{constructor(e,t){this.node=e,this.lvalue=!1;const n=t.type instanceof CPointer?t.type.original??t.type:t.type;t instanceof CIdentifier&&n instanceof CFuncType||ZY(t,!0),this.type=new CPointer(e,n),t instanceof CIdentifier&&(t.value.addressUsed=!0),this.body=t}*identifiers(){yield*this.body.identifiers()}}class CDereference{constructor(e,t){this.node=e,this.body=t,this.lvalue=!0,this.type=VY(e,t.type).type.pointerGeneration}*identifiers(){yield*this.body.identifiers()}}class CUnaryPlusMinus{constructor(e,t,n){this.node=e,this.body=t,this.op=n,this.lvalue=!1,this.bodyType=GY(t.node,t.type),this.type=UY(this.bodyType)}*identifiers(){yield*this.body.identifiers()}}class CBitwiseNot{constructor(e,t){this.node=e,this.body=t,this.lvalue=!1,this.bodyType=qY(t.node,t.type),this.type=this.bodyType.bytes<CArithmetic.S32.bytes?CArithmetic.S32:this.bodyType}*identifiers(){yield*this.body.identifiers()}}class CLogicalNot{constructor(e,t){this.node=e,this.body=t,this.lvalue=!1,this.type=CArithmetic.S32,XY(t.node,t.type)}*identifiers(){yield*this.body.identifiers()}}class CCast{constructor(e,t,n){this.node=e,this.body=n,this.lvalue=!1,this.type=t.pointerGeneration}*identifiers(){yield*this.body.identifiers()}}class CMulDiv{constructor(e,t,n,i){this.node=e,this.lhs=t,this.rhs=n,this.op=i,this.lvalue=!1,this.type=$Y(GY(t.node,t.type),GY(n.node,n.type))}*identifiers(){yield*this.lhs.identifiers(),yield*this.rhs.identifiers()}}class CMod{constructor(e,t,n){this.node=e,this.lhs=t,this.rhs=n,this.lvalue=!1,this.type=$Y(qY(t.node,t.type),qY(n.node,n.type))}*identifiers(){yield*this.lhs.identifiers(),yield*this.rhs.identifiers()}}class CAddSub{constructor(e,t,n,i){if(this.node=e,this.lhs=t,this.rhs=n,this.op=i,this.lvalue=!1,t.type instanceof CPointer&&n.type instanceof CPointer){if(!t.type.equals(n.type))throw new ExpressionTypeError(e,"both pointers to have the same type");WY(t.type.type),this.type=YY(t.node,t.type),YY(n.node,n.type)}else t.type instanceof CPointer?(qY(n.node,n.type),WY(t.type.type),this.type=YY(t.node,t.type)):n.type instanceof CPointer?(qY(t.node,t.type),WY(n.type.type),this.type=YY(n.node,n.type)):this.type=$Y(GY(t.node,t.type),GY(n.node,n.type))}*identifiers(){yield*this.lhs.identifiers(),yield*this.rhs.identifiers()}}class CShift{constructor(e,t,n,i){this.node=e,this.lhs=t,this.rhs=n,this.dir=i,this.lvalue=!1,this.type=UY(qY(t.node,t.type)),qY(n.node,n.type)}*identifiers(){yield*this.lhs.identifiers(),yield*this.rhs.identifiers()}}class CRelational{constructor(e,t,n,i){this.node=e,this.lhs=t,this.rhs=n,this.op=i,this.lvalue=!1,this.type=CArithmetic.BOOL,XY(t.node,t.type),XY(n.node,n.type),this.commonType=$Y(t.type instanceof CArithmetic?t.type:zY,n.type instanceof CArithmetic?n.type:zY)}*identifiers(){yield*this.lhs.identifiers(),yield*this.rhs.identifiers()}}class CEquality{constructor(e,t,n,i){this.node=e,this.lhs=t,this.rhs=n,this.op=i,this.lvalue=!1,this.type=CArithmetic.BOOL,XY(t.node,t.type),XY(n.node,n.type),this.commonType=$Y(t.type instanceof CArithmetic?t.type:zY,n.type instanceof CArithmetic?n.type:zY)}*identifiers(){yield*this.lhs.identifiers(),yield*this.rhs.identifiers()}}class CBitwiseAndOr{constructor(e,t,n,i){this.node=e,this.lhs=t,this.rhs=n,this.op=i,this.lvalue=!1,this.type=$Y(qY(t.node,t.type),qY(n.node,n.type))}*identifiers(){yield*this.lhs.identifiers(),yield*this.rhs.identifiers()}}class CLogicalAndOr{constructor(e,t,n,i){this.node=e,this.lhs=t,this.rhs=n,this.op=i,this.lvalue=!1,this.type=CArithmetic.BOOL,XY(t.node,t.type),XY(n.node,n.type)}*identifiers(){yield*this.lhs.identifiers(),yield*this.rhs.identifiers()}}class CConditional{constructor(e,t,n,i){if(this.node=e,this.test=t,this.trueValue=n,this.falseValue=i,this.lvalue=!1,XY(t.node,t.type),n.type instanceof CArithmetic&&i.type instanceof CArithmetic)this.type=$Y(n.type,i.type);else{if(!n.type.equals(i.type)){if(n.type instanceof CPointer&&i.type instanceof CPointer){if(n.type.type instanceof CVoid)return void(this.type=i.type);if(i.type.type instanceof CVoid)return void(this.type=n.type)}else if(n.type instanceof CPointer||i.type instanceof CPointer){const e=n.type instanceof CPointer?i:n;if(e instanceof CConstant&&0==e.value)return void(this.type=n.type instanceof CPointer?n.type:i.type)}throw new ExpressionTypeError(e,"both conditional branches to have the same type","different types")}this.type=n.type}}*identifiers(){yield*this.test.identifiers(),yield*this.trueValue.identifiers(),yield*this.falseValue.identifiers()}}class CAssignment{constructor(e,t,n,i,r=!1){this.node=e,this.lhs=t,this.rhs=n,this.assignmentType=i,this.initialAssignment=r,this.lvalue=!1;const o=t.type instanceof CPointer?t.type.original??t.type:t.type;if(ZY(t,!0),o instanceof CArray&&!r||o instanceof CFuncType||t.type.incomplete)throw new ExpressionTypeError(t.node,"assignable type");if("const"===jY(o)&&!r)throw new ExpressionTypeError(t.node,"non-const location");if((o instanceof CStruct||o instanceof CUnion)&&o.hasConstMember()&&!r)throw new ExpressionTypeError(t.node,"structure without a const member");if(this.type=o.pointerGeneration,i){if(n instanceof CInitializer)throw new ExpressionTypeError(e,"simple assignments with structure initializers");let r=n.type;switch(i){case"mul":r=new CMulDiv(e,t,n,"*").type;break;case"div":r=new CMulDiv(e,t,n,"/").type;break;case"mod":r=new CMod(e,t,n).type;break;case"add":r=new CAddSub(e,t,n,"+").type;break;case"sub":r=new CAddSub(e,t,n,"-").type;break;case"leftShift":r=new CShift(e,t,n,"left").type;break;case"rightShift":r=new CShift(e,t,n,"right").type;break;case"bitwiseAnd":r=new CBitwiseAndOr(e,t,n,"and").type;break;case"bitwiseOr":r=new CBitwiseAndOr(e,t,n,"or").type;break;case"bitwiseXor":r=new CBitwiseAndOr(e,t,n,"xor").type;break;default:throw new ExpressionTypeError(e,"valid assignment type")}CAssignment._checkAssignmentTypeValid(e,o,r)}else CAssignment.checkAssignmentValid(e,o,n)}*identifiers(){yield*this.lhs.identifiers(),yield*this.rhs.identifiers()}static checkAssignmentValid(e,t,n){t instanceof CPointer&&n instanceof CConstant&&0n===n.value||this._checkAssignmentTypeValid(e,t,n.type)}static _checkAssignmentTypeValid(e,t,n){if(!(t.equals(n)||t instanceof CArithmetic&&n instanceof CArithmetic)){if(t instanceof CPointer&&n instanceof CPointer){if(t.type instanceof CVoid||n.type instanceof CVoid)return;if(t.type.equals(n.type))return}if(!(t instanceof CPointer&&n instanceof CFuncType&&t.type.equals(n))){if(n instanceof CPointer&&n.original){if(t.equals(n.original))return;if(t instanceof CArray&&n.original instanceof CArray&&t.type.equals(n.type)&&(n.original.length??0)<(t.length??0))return}throw new ExpressionTypeError(e,t.typeName,n.typeName)}}}}class CComma{constructor(e,t,n){this.node=e,this.lhs=t,this.rhs=n,this.lvalue=!1,this.type=n.type}*identifiers(){yield*this.lhs.identifiers(),yield*this.rhs.identifiers()}}class CInitializer{constructor(e,t,n){this.node=e,this.body=t,this._memberTypes=[],this._type=n??new CArray(void 0,new CPointer(void 0,new CVoid),t.length)}get memberTypes(){return this._memberTypes}get type(){return this._type}set type(e){if(this._memberTypes=[],e instanceof CArray){if(this.body.length>(e.length??1/0))throw new ExpressionTypeError(this.node,`at most ${e.length} elements`,`${this.body.length} elements`);for(let t=0;t<this.body.length;t++)this.body[t]=CInitializer.typeCheck(e.type,this.body[t]),this._memberTypes.push(e.type)}else if(e instanceof CStruct){if(this.body.length>e.members.length)throw new ExpressionTypeError(this.node,`at most ${e.members.length} elements`,`${this.body.length} elements`);for(let t=0;t<this.body.length;t++)this.body[t]=CInitializer.typeCheck(e.members[t].type,this.body[t]),this._memberTypes.push(e.members[t].type)}else{if(!(e instanceof CUnion))throw new ExpressionTypeError(this.node,"Invalid type for initializer");if(this.body.length>1)throw new ExpressionTypeError(this.node,"one element matching first member in union",`${this.body.length} elements`);1===this.body.length&&(this.body[0]=CInitializer.typeCheck(e.members[0].type,this.body[0]),this._memberTypes.push(e.members[0].type))}this._type=e}*identifiers(){for(const e of this.body)yield*e.identifiers()}static typeCheck(e,t){return t instanceof CInitializer?t.type=e:(CAssignment.checkAssignmentValid(t.node,e,t),t instanceof CConstant&&e instanceof CArithmetic&&t.type!==e&&(t=t.changeType(e))),t}}class Scope{constructor(e,t,n=t?.func){this.node=e,this.parent=t,this.func=n,this.tags=new Map,this.identifiers=new Map,this.typedefs=new Map}_getTag(e){return this.tags.get(e)??this.parent?._getTag(e)}lookupTag(e,t,n){const i=this._getTag(e);if(t&&i&&t.prototype!==Object.getPrototypeOf(i))throw new ScopeError("`"+e+"` was already declared as a "+i.typeName,i.node,n);return i}addTag(e){if(!e.name)throw new Error("Cannot add nameless compound type to scope");if(this._getTag(e.name))throw new ScopeError("Compound type `"+e.name+"` is already defined!",e.node);this.tags.set(e.name,e)}_getId(e){return this.identifiers.get(e)??this.parent?._getId(e)}lookupIdentifier(e,t){const n=this._getId(e);if(!n)throw new ScopeError("Failed to find `"+e+"`",t);return n}addIdentifier(e){const t=this.identifiers.get(e.name);if(t)if(t.type.equals(e.type)&&t instanceof CFuncDeclaration&&e instanceof CFuncDefinition)"external"!==t.linkage&&"external"===e.linkage&&(e.linkage=t.linkage),t.definition=e;else{if(t.type.equals(e.type)&&e instanceof CFuncDeclaration)return void(t instanceof CFuncDeclaration&&(t.fnImport||(t.fnImport=e.fnImport)));if(!(t.type.equals(e.type)&&t instanceof CVarDeclaration&&e instanceof CVarDefinition)){if(t.type.equals(e.type)&&e instanceof CVarDeclaration){if("external"!==t.linkage&&t.linkage!==e.linkage)throw new ScopeError("Variable `"+e.name+"` is already defined with "+t.linkage+" linkage",t.node,e.node);return}throw new ScopeError("Identifier `"+e.name+"` is already defined in this scope!",t.node,e.node)}if("external"!==t.linkage&&t.linkage!==e.linkage)throw new ScopeError("Variable `"+e.name+"` is already defined with "+t.linkage+" linkage",t.node,e.node);t.definition=e}this.identifiers.set(e.name,e)}get declarations(){return[...this.identifiers.values()]}_getTypedef(e){return this.typedefs.get(e)??this.parent?._getTypedef(e)}lookupTypedef(e,t){const n=this._getTypedef(e);if(void 0===n)throw new ScopeError("typedef `"+e+"` not found in scope",t);return n}addTypedef(e,t,n){const i=this._getTypedef(e);if(i){if(i.equals(t))return;throw new ScopeError("typedef already defined with a different type",n)}this.typedefs.set(e,t)}}class ScopeError extends CError{constructor(){super(...arguments),this.name="ScopeError"}}class CCompoundStatement{constructor(e,t){this.node=e,this.parent=t,this.statements=[],this.scope=new Scope(e,t.scope,t instanceof CFuncDefinition?t:void 0)}}class CExpressionStatement{constructor(e,t,n){this.node=e,this.expression=t,this.parent=n}get scope(){return this.parent.scope}}class CNop{constructor(e,t){this.node=e,this.parent=t}get scope(){return this.parent.scope}}class CIf{constructor(e,t,n){this.node=e,this.test=t,this.parent=n,XY(t.node,t.type)}get scope(){return this.parent.scope}}class CForLoop{constructor(e,t){this.node=e,this.parent=t,this.scope=new Scope(e,t.scope)}}class CWhileLoop{constructor(e,t,n){this.node=e,this.test=t,this.parent=n,XY(t.node,t.type)}get scope(){return this.parent.scope}}class CDoLoop{constructor(e,t,n){this.node=e,this.test=t,this.parent=n,XY(t.node,t.type)}get scope(){return this.parent.scope}}class CGoto{constructor(e,t,n){this.node=e,this.target=t,this.parent=n}get scope(){return this.parent.scope}}class CSwitch{constructor(e,t,n){this.node=e,this.expression=t,this.parent=n,this.children=[]}get scope(){return this.parent.scope}}class CContinue{constructor(e,t,n){this.node=e,this.loop=t,this.parent=n}get scope(){return this.parent.scope}}class CBreak{constructor(e,t,n){this.node=e,this.target=t,this.parent=n}get scope(){return this.parent.scope}}class CReturn{constructor(e,t,n,i){if(this.node=e,this.func=t,this.value=n,this.parent=i,void 0===n){if(t.type.returnType.bytes>0)throw new ExpressionTypeError(e,"`return [expression]`","`return;`")}else t.type.returnType.equals(n.type)||CAssignment.checkAssignmentValid(e,t.type.returnType,n)}get scope(){return this.parent.scope}}class CLabelledStatement{constructor(e,t){this.node=e,this.label=t}}class CVarDeclaration{constructor(e,t,n,i,r){this.node=e,this.name=t,this.type=n,this.storage=i,this.linkage=r,this.declType="variable",this._addressUsed=!1}set addressUsed(e){var t;this._definition?(t=this._definition).addressUsed||(t.addressUsed=e):this._addressUsed||(this._addressUsed=e)}get addressUsed(){return this._definition?this._definition.addressUsed:this._addressUsed}set definition(e){if(void 0===e)throw new Error("Cannot set definition to undefined");e.addressUsed||(e.addressUsed=this._addressUsed),this._definition=e}get definition(){return this._definition}}class CVarDefinition{constructor(e,t,n,i,r){this.node=e,this.name=t,this.type=n,this.storage=i,this.linkage=r,this.declType="variable",this.addressUsed=!1,this.dependencies=new Map}}class CArgument{constructor(e,t,n,i){this.node=e,this.name=t,this.type=n,this.index=i,this.declType="variable",this.storage="argument",this.linkage="none",this.addressUsed=!1}}class CFuncDeclaration{constructor(e,t,n,i,r=!1){this.node=e,this.name=t,this.type=n,this.linkage=i,this.fnImport=r,this.declType="function"}}class CFuncImport{constructor(e){this.declaration=e,this.declType="import",this.node=e.node}getFunction(){return this.declaration}}class CFuncDefinition{constructor(e,t,n,i,r){this.node=e,this.name=t,this.type=n,this.linkage=i,this.translationUnit=r,this.declType="function",this.dependencies=new Map,this.hints={inline:!1},this.body=new CCompoundStatement(e.body,this)}get scope(){return this.translationUnit}equals(e){return e===this}getFunction(){return this}}const KY=Symbol("constant");function QY(e){e[KY]=!1}function JY(e,t){if(e[KY]??1){if(e instanceof CConstant)return{value:e.value,type:e.type};if(e instanceof CIdentifier&&e.value instanceof CVarDefinition&&"const"===e.value.type.qualifier&&e.value.staticValue instanceof CConstant)return JY(e.value.staticValue,t);if(e instanceof CSizeof)return tZ({value:e.body.bytes,type:zY});if(e instanceof CUnaryPlusMinus){const n=JY(e.body,t);return n?"+"===e.op?n:{value:-n.value,type:e.type}:QY(e)}if(e instanceof CBitwiseNot){const n=eZ(e.body,t);return n?tZ({value:~n.value,type:n.type}):QY(e)}if(e instanceof CLogicalNot){const n=JY(e.body,t);return n?{value:0==n.value?1n:0n,type:CArithmetic.S32}:QY(e)}if(e instanceof CCast&&(e.type instanceof CArithmetic||e.type instanceof CPointer)){const n=JY(e.body,t);return n?tZ({value:n.value,type:e.type}):QY(e)}if(e instanceof CMulDiv){const n=JY(e.lhs,t),i=JY(e.rhs,t);if(!n||!i)return QY(e);if("*"===e.op)return"float"===e.type.type?{value:Number(n.value)*Number(i.value),type:e.type}:tZ({value:BigInt(n.value)*BigInt(i.value),type:e.type});if(0!=i.value)return"float"===e.type.type?{value:Number(n.value)/Number(i.value),type:e.type}:tZ({value:BigInt(n.value)/BigInt(i.value),type:e.type})}else{if(e instanceof CMod){const n=eZ(e.lhs,t),i=eZ(e.rhs,t);return n&&i&&0n!==i.value?tZ({value:n.value%i.value,type:e.type}):QY(e)}if(e instanceof CAddSub&&e.type instanceof CArithmetic){const n=JY(e.lhs,t),i=JY(e.rhs,t);return n&&i?"+"===e.op?"float"===e.type.type?{value:Number(n.value)+Number(i.value),type:e.type}:tZ({value:BigInt(n.value)+BigInt(i.value),type:e.type}):"float"===e.type.type?{value:Number(n.value)-Number(i.value),type:e.type}:tZ({value:BigInt(n.value)-BigInt(i.value),type:e.type}):QY(e)}if(e instanceof CShift){const n=eZ(e.lhs,t),i=eZ(e.rhs,t);return n&&i?"left"===e.dir?tZ({value:n.value<<i.value,type:e.type}):tZ({value:n.value>>i.value,type:e.type}):QY(e)}if(e instanceof CRelational){const n=JY(e.lhs,t),i=JY(e.rhs,t);return n&&i?"LT"===e.op?{value:n.value<i.value?1n:0n,type:CArithmetic.S32}:"GT"===e.op?{value:n.value>i.value?1n:0n,type:CArithmetic.S32}:"LEq"===e.op?{value:n.value<=i.value?1n:0n,type:CArithmetic.S32}:{value:n.value>=i.value?1n:0n,type:CArithmetic.S32}:QY(e)}if(e instanceof CEquality){const n=JY(e.lhs,t),i=JY(e.rhs,t);return n&&i?"=="===e.op?{value:n.value==i.value?1n:0n,type:CArithmetic.S32}:{value:n.value!=i.value?1n:0n,type:CArithmetic.S32}:QY(e)}if(e instanceof CBitwiseAndOr){const n=eZ(e.lhs,t),i=eZ(e.rhs,t);return n&&i?"and"===e.op?tZ({value:n.value&i.value,type:e.type}):"or"===e.op?tZ({value:n.value|i.value,type:e.type}):tZ({value:n.value^i.value,type:e.type}):QY(e)}if(e instanceof CLogicalAndOr){const n=JY(e.lhs,t);if(!n)return QY(e);if("and"===e.op){if(0!=n.value){const n=JY(e.rhs,t);if(!n)return QY(e);if(0!=n.value)return{value:1n,type:CArithmetic.S32}}return{value:0n,type:CArithmetic.S32}}{if(0!=n.value)return{value:1n,type:CArithmetic.S32};const i=JY(e.rhs,t);return i?0!=i.value?{value:1n,type:CArithmetic.S32}:{value:0n,type:CArithmetic.S32}:QY(e)}}if(e instanceof CConditional&&(e.type instanceof CArithmetic||e.type instanceof CPointer)){const n=JY(e.test,t);if(!n)return QY(e);let i;return i=0!=n.value?JY(e.trueValue,t):JY(e.falseValue,t),i?tZ({value:i.value,type:e.type}):QY(e)}}if(void 0!==t){const n=t(e,(e=>JY(e,t)),QY);if(n)return n}QY(e)}}function eZ(e,t){const n=JY(e,t);if(n?.type instanceof CArithmetic&&"float"!==n.type.type)return{value:BigInt(n.value),type:n.type}}function tZ(e){if(e.type instanceof CArithmetic){if(CArithmetic.BOOL.equals(e.type))return{value:0==e.value?0n:1n,type:CArithmetic.BOOL};if("float"===e.type.type)return{value:"number"==typeof e.value?e.value:Number(e.value),type:e.type};{let t;t="number"==typeof e.value?isNaN(e.value)?0n:e.value>e.type.maxValue?BigInt(e.type.maxValue):e.value<e.type.minValue?BigInt(e.type.minValue):BigInt(Math.trunc(e.value)):e.value;const n=2n**BigInt(8*e.type.bytes)-1n;if("unsigned"===e.type.type)t&=n;else{const i=BigInt(e.type.minValue);t=(t-i&n)+i}return{value:t,type:e.type}}}return{value:tZ({value:e.value,type:CArithmetic.U32}).value,type:e.type}}const nZ=tZ;class GenError extends CError{constructor(e,t,n){super(void 0!==t?`In function '${t.fnName}': ${e}`:e,n),this.name="GenerationError"}}function iZ(e,t,n){if(t instanceof CInitializer){if(n&&!t.type.equals(n))throw new GenError("Static initializer type mismatch",void 0,t.node);return function(e,t){let n;if(t.type instanceof CArray){if(void 0===t.type.length)throw new GenError("Array length still unknown?",void 0,t.node);n=t.body.flatMap(((n,i)=>aZ(iZ(e,n,t.memberTypes[i]),t.memberTypes[i].bytes)))}else if(t.type instanceof CUnion)n=iZ(e,t.body[0],t.memberTypes[0]);else{if(!(t.type instanceof CStruct))throw new GenError("Invalid initializer",void 0,t.node);n=[];for(let i=0;i<t.body.length;i++){cZ(n,t.memberTypes[i].alignment);const r=iZ(e,t.body[i],t.memberTypes[i]);aZ(r,t.memberTypes[i].bytes),n.push(...r)}}return n}(e,t)}if(t instanceof CStringLiteral&&n instanceof CPointer)return function(e,t){const n=e.nextStaticAddr,i=sZ(t);return e.nextStaticAddr+=i.length,e.module.dataSegment(n,i),oZ(new CConstant(t.node,zY,BigInt(n)))}(e,t);if(t instanceof CStringLiteral)return sZ(t);{n&&!t.type.equals(n)&&(t=new CCast(t.node,n,t));const i=function(e,t){const n=JY(e,t);if(n)return n;throw new ExpressionTypeError(e.node,"constant expression")}(t,((t,n,i)=>{if(t instanceof CAddressOf&&t.body instanceof CIdentifier){let n;if(n="variable"===t.body.value.declType?wZ(t.body.value):e.indirectIndex(t.body.value),void 0!==n)return nZ({value:n,type:t.type})}else{if(t instanceof CAddressOf&&t.body instanceof CDereference){const e=n(t.body.body);return e?nZ({value:e.value,type:t.type}):i(t)}if(t instanceof CIdentifier&&"function"===t.value.declType){const n=e.indirectIndex(t.value);return nZ({value:n,type:new CPointer(t.node,t.type)})}if(t instanceof CIdentifier){const e=wZ(t.value);if(void 0!==e)return nZ({value:e,type:new CPointer(t.node,t.type)})}else{if(t instanceof CStringLiteral){const n=e.nextStaticAddr,i=sZ(t);return e.nextStaticAddr+=i.length,e.module.dataSegment(n,i),nZ({value:n,type:t.type})}if(t instanceof CAddSub&&t.type instanceof CPointer){const e=n(t.lhs),r=n(t.rhs);if(!e||!r)return i(t);const o=e.type instanceof CPointer?BigInt(e.value):BigInt(t.type.type.bytes)*BigInt(e.value),s=r.type instanceof CPointer?BigInt(r.value):BigInt(t.type.type.bytes)*BigInt(r.value);return nZ({value:o+s,type:t.type})}}}}));return oZ(i,t.node)}}function rZ(e,t){const n=new ArrayBuffer(e);return t(new DataView(n)),[...new Uint8Array(n)]}function oZ(e,t){if(CArithmetic.S64.equals(e.type))return rZ(8,(t=>t.setBigInt64(0,BigInt(e.value),!0)));if(CArithmetic.U64.equals(e.type))return rZ(8,(t=>t.setBigUint64(0,BigInt(e.value),!0)));if(CArithmetic.S32.equals(e.type))return rZ(4,(t=>t.setInt32(0,Number(e.value),!0)));if(CArithmetic.U32.equals(e.type)||e.type instanceof CPointer)return rZ(4,(t=>t.setUint32(0,Number(e.value),!0)));if(CArithmetic.S16.equals(e.type))return rZ(2,(t=>t.setInt16(0,Number(e.value),!0)));if(CArithmetic.U16.equals(e.type))return rZ(2,(t=>t.setUint16(0,Number(e.value),!0)));if(CArithmetic.S8.equals(e.type))return rZ(1,(t=>t.setInt8(0,Number(e.value))));if(CArithmetic.U8.equals(e.type))return rZ(1,(t=>t.setUint8(0,Number(e.value))));if(CArithmetic.Fp64.equals(e.type))return rZ(8,(t=>t.setFloat64(0,Number(e.value),!0)));if(CArithmetic.Fp32.equals(e.type))return rZ(4,(t=>t.setFloat32(0,Number(e.value),!0)));if(CArithmetic.BOOL.equals(e.type))return rZ(4,(t=>t.setInt32(0,0==e.value?0:1,!0)));throw new GenError("Unknown value type?",void 0,t)}function sZ(e){return e.value.map(Number)}function aZ(e,t){for(;e.length<t;)e.push(0);return e}function cZ(e,t){for(;e.length%t!=0;)e.push(0);return e}function lZ(e){return e instanceof CArithmetic?dZ(e):e}function hZ(e){if(e instanceof CArithmetic)return dZ(e);if(e instanceof CPointer)return rY;if(e instanceof CStruct||e instanceof CUnion)return rY;if(e instanceof CVoid)throw new Error("Void cannot be stored");throw new Error(e.typeName+" doesn't have a real type")}function uZ(e,t){if(e.equals(t))return[];if(e instanceof CArithmetic&&t instanceof CArithmetic)return function(e,t){if(CArithmetic.BOOL.equals(t))return CArithmetic.Fp64.equals(e)?[_Y.f64.const(0),_Y.f64.ne()]:CArithmetic.Fp32.equals(e)?[_Y.f32.const(0),_Y.f32.ne()]:8===e.bytes?[_Y.i64.const(0n),_Y.i64.ne()]:[_Y.i32.const(0),_Y.i32.ne()];if(CArithmetic.Fp64.equals(t)){if(CArithmetic.Fp32.equals(e))return[_Y.f64.promote_f32()];if("signed"===e.type&&8===e.bytes)return[_Y.f64.convert_i64_s()];if("unsigned"===e.type&&8===e.bytes)return[_Y.f64.convert_i64_u()];if("signed"===e.type&&e.bytes<=4)return[_Y.f64.convert_i32_s()];if("unsigned"===e.type&&e.bytes<=4)return[_Y.f64.convert_i32_u()]}else if(CArithmetic.Fp32.equals(t)){if(CArithmetic.Fp64.equals(e))return[_Y.f32.demote_f64()];if("signed"===e.type&&8===e.bytes)return[_Y.f32.convert_i64_s()];if("unsigned"===e.type&&8===e.bytes)return[_Y.f32.convert_i64_u()];if("signed"===e.type&&e.bytes<=4)return[_Y.f32.convert_i32_s()];if("unsigned"===e.type&&e.bytes<=4)return[_Y.f32.convert_i32_u()]}else if(CArithmetic.U64.equals(t)){if(CArithmetic.Fp64.equals(e))return[_Y.i64.trunc_sat_f64_u()];if(CArithmetic.Fp32.equals(e))return[_Y.i64.trunc_sat_f32_u()];if(CArithmetic.S64.equals(e))return[];if("signed"===e.type)return[_Y.i64.extend_i32_u()];if("unsigned"===e.type)return[_Y.i64.extend_i32_u()]}else if(CArithmetic.S64.equals(t)){if(CArithmetic.Fp64.equals(e))return[_Y.i64.trunc_f64_s()];if(CArithmetic.Fp32.equals(e))return[_Y.i64.trunc_f32_s()];if(CArithmetic.U64.equals(e))return[];if("signed"===e.type)return[_Y.i64.extend_i32_s()];if("unsigned"===e.type)return[_Y.i64.extend_i32_u()]}else{if(CArithmetic.U32.equals(t))return CArithmetic.Fp64.equals(e)?[_Y.i32.trunc_sat_f64_u()]:CArithmetic.Fp32.equals(e)?[_Y.i32.trunc_sat_f32_u()]:8===e.bytes?[_Y.i32.wrap_i64()]:[];if(CArithmetic.S32.equals(t))return CArithmetic.Fp64.equals(e)?[_Y.i32.trunc_sat_f64_s()]:CArithmetic.Fp32.equals(e)?[_Y.i32.trunc_sat_f32_s()]:8===e.bytes?[_Y.i32.wrap_i64()]:[];if("signed"===t.type&&t.bytes<4){if("float"!==e.type&&e.bytes<t.bytes)return[];if(CArithmetic.BOOL.equals(e))return[];const n=[_Y.i32.const(32-8*t.bytes),_Y.i32.shl(),_Y.i32.const(32-8*t.bytes),_Y.i32.shr_s()];return CArithmetic.Fp64.equals(e)&&n.unshift(_Y.i32.trunc_f64_s()),CArithmetic.Fp32.equals(e)&&n.unshift(_Y.i32.trunc_f32_s()),"float"!==e.type&&8===e.bytes&&n.unshift(_Y.i32.wrap_i64()),n}if("unsigned"===t.type&&t.bytes<4){if(CArithmetic.BOOL.equals(e))return[];const n=[_Y.i32.const(2**(8*t.bytes)-1),_Y.i32.and()];return CArithmetic.Fp64.equals(e)&&n.unshift(_Y.i32.trunc_sat_f64_u()),CArithmetic.Fp32.equals(e)&&n.unshift(_Y.i32.trunc_sat_f32_u()),"float"!==e.type&&8===e.bytes&&n.unshift(_Y.i32.wrap_i64()),n}}throw new Error("Invalid arithmetic type")}(e,t);if(e instanceof CArithmetic&&"float"!==e.type&&t instanceof CPointer)return e.bytes>4?[_Y.i32.wrap_i64()]:[];if(t instanceof CArithmetic&&"float"!==t.type&&e instanceof CPointer)return[];if(t instanceof CPointer&&e instanceof CPointer)return[];if(e instanceof CFuncType&&t instanceof CPointer&&e.equals(t.type))return[];throw new Error(`Cannot convert ${e.typeName} to ${t.typeName}`)}function dZ(e){if("float"===e.type)return 4===e.bytes?sY:aY;if(8===e.bytes)return oY;if(e.bytes<=4)return rY;throw new Error("Unknown type")}function fZ(e){return e instanceof CVoid||pZ(e)?[]:[hZ(e)]}function pZ(e){return e instanceof CStruct||e instanceof CUnion}function vZ(e,t){const n=Math.ceil(e.nextStaticAddr/t.type.alignment)*t.type.alignment;if(e.nextStaticAddr=n+t.type.bytes,kZ(t,{type:"static",address:n}),t.staticValue){const i=t.staticValue;return()=>e.module.dataSegment(n,iZ(e,i,t.type))}}function yZ(e,t){const n=[],i=[];for(const r of t.declarations)if(r instanceof CArgument&&(r.type instanceof CStruct||r.type instanceof CUnion?(e.shadowStackUsage=Math.ceil(e.shadowStackUsage/r.type.alignment)*r.type.alignment,kZ(r,{type:"shadow",shadowOffset:e.shadowStackUsage}),n.push(...TZ([_Y.local.get(e.builder.args[r.index])],[_Y.global.get(e.gen.shadowStackPtr),_Y.i32.const(e.shadowStackUsage),_Y.i32.add()],r.type.bytes)),e.shadowStackUsage+=r.type.bytes):r.addressUsed?(e.shadowStackUsage=Math.ceil(e.shadowStackUsage/r.type.alignment)*r.type.alignment,kZ(r,{type:"shadow",shadowOffset:e.shadowStackUsage}),n.push(_Y.global.get(e.gen.shadowStackPtr)),n.push(_Y.local.get(e.builder.args[r.index])),n.push(SZ(r.type,e.shadowStackUsage)),e.shadowStackUsage+=r.type.bytes):kZ(r,{type:"local",index:e.builder.args[r.index]})),r instanceof CVarDefinition)if("local"===r.storage)if(r.addressUsed||!(r.type instanceof CArithmetic||r.type instanceof CPointer))e.shadowStackUsage=Math.ceil(e.shadowStackUsage/r.type.alignment)*r.type.alignment,kZ(r,{type:"shadow",shadowOffset:e.shadowStackUsage}),e.shadowStackUsage+=r.type.bytes;else{const t=e.builder.getTempLocal(hZ(r.type));i.push(t),kZ(r,{type:"local",index:t})}else if("static"===r.storage&&void 0===EZ(r))throw new GenError("In function static variable is not setup");return[n,()=>i.forEach((t=>e.builder.freeTempLocal(t)))]}function gZ(e,t,n){const[i,r]=_Z(e,n);return t instanceof CStruct||t instanceof CUnion||t instanceof CPointer&&t.original instanceof CArray?bZ(e,n):("local"===r.type?i.push(_Y.local.get(r.index)):"static"===r.type?i.push(_Y.i32.const(0),CZ(t,r.address)):"shadow"===r.type?i.push(_Y.global.get(e.gen.shadowStackPtr),CZ(t,r.shadowOffset)):"pointer"===r.type&&i.push(CZ(t,0)),i)}function mZ(e,t,n,i,r){if(t instanceof CArray||t instanceof CStruct||t instanceof CUnion)throw new GenError("Cannot storageUpdate "+t.typeName,e,n.node);const[o,s]=_Z(e,n);return"local"===s.type?(o.push(_Y.local.get(s.index),...i),r?o.push(_Y.local.tee(s.index)):o.push(_Y.local.set(s.index)),o):("static"===s.type?(o.push(_Y.i32.const(0),_Y.i32.const(0),CZ(t,s.address),...i),r?o.push(...e.withTemporaryLocal(hZ(t),(e=>[_Y.local.tee(e),SZ(t,s.address),_Y.local.get(e)]))):o.push(SZ(t,s.address))):"shadow"===s.type?(o.push(_Y.global.get(e.gen.shadowStackPtr),_Y.global.get(e.gen.shadowStackPtr)),o.push(CZ(t,s.shadowOffset),...i),r?o.push(...e.withTemporaryLocal(hZ(t),(e=>[_Y.local.tee(e),SZ(t,s.shadowOffset),_Y.local.get(e)]))):o.push(SZ(t,s.shadowOffset))):"pointer"===s.type&&(o.push(...e.withTemporaryLocal(rY,(e=>[_Y.local.tee(e),_Y.local.get(e)]))),o.push(CZ(t,0),...i),r?o.push(...e.withTemporaryLocal(hZ(t),(e=>[_Y.local.tee(e),SZ(t,0),_Y.local.get(e)]))):o.push(SZ(t,0))),o)}function bZ(e,t){const[n,i]=_Z(e,t);if("local"===i.type)throw new GenError("Local with addressed access stored in local. This shouldn't happen!",e,t.node);return"static"===i.type?n.push(_Y.i32.const(i.address)):"shadow"===i.type&&n.push(_Y.global.get(e.gen.shadowStackPtr),_Y.i32.const(i.shadowOffset),_Y.i32.add()),n}function _Z(e,t){if(!t.lvalue)throw new GenError("Only lvalue expressions can have storage locations",e,t.node);if(t instanceof CIdentifier){let n=EZ(t.value);if(n)return[[],n];if(t.value instanceof CVarDeclaration){if(void 0===t.value.definition)throw new GenError("No variable definition found",e,t.node);if(n=EZ(t.value.definition),n)return[[],n]}}else{if(t instanceof CMemberAccess){const n=e.expression(t.body,!1);if(t.structUnion instanceof CStruct){let e=0;for(const n of t.structUnion.members){if(e=Math.ceil(e/n.type.alignment)*n.type.alignment,n.name===t.member)break;e+=n.type.bytes}return[[...n,_Y.i32.const(e),_Y.i32.add()],{type:"pointer"}]}return[n,{type:"pointer"}]}if(t instanceof CDereference)return[e.expression(t.body,!1),{type:"pointer"}]}throw new GenError("Invalid location expression",e,t.node)}function wZ(e){e instanceof CVarDeclaration&&e.definition&&(e=e.definition);const t=EZ(e);return"static"===t?.type?t.address:void 0}const xZ=Symbol("storage location");function kZ(e,t){e[xZ]=t}function EZ(e){return e[xZ]}function CZ(e,t){if(e instanceof CPointer)return _Y.i32.load(2,t);if(e instanceof CStruct||e instanceof CUnion||e instanceof CArray)throw new Error("Invalid "+e.typeName+" load");if(e instanceof CVoid||e instanceof CFuncType)throw new Error("Cannot load "+e.typeName);return"float"===e.type?8===e.bytes?_Y.f64.load(3,t):_Y.f32.load(2,t):8===e.bytes?_Y.i64.load(3,t):4===e.bytes?_Y.i32.load(2,t):"signed"===e.type?2===e.bytes?_Y.i32.load16_s(1,t):_Y.i32.load8_s(0,t):2===e.bytes?_Y.i32.load16_u(1,t):_Y.i32.load8_u(0,t)}function SZ(e,t){if(e instanceof CPointer)return _Y.i32.store(2,t);if(e instanceof CStruct||e instanceof CUnion||e instanceof CArray)throw new Error("Invalid "+e.typeName+" store");if(e instanceof CVoid||e instanceof CFuncType)throw new Error("Cannot store "+e.typeName);return"float"===e.type?8===e.bytes?_Y.f64.store(3,t):_Y.f32.store(2,t):8===e.bytes?_Y.i64.store(3,t):4===e.bytes?_Y.i32.store(2,t):2===e.bytes?_Y.i32.store16(1,t):_Y.i32.store8(0,t)}function TZ(e,t,n){return[...t,...e,_Y.i32.const(n),_Y.memory.copy()]}var OZ=n(428);const IZ=new Map;function AZ(e,t=[]){for(const n of e){t.push(n),AZ(n.children(),t),t.pop();for(const e of IZ.get(Object.getPrototypeOf(n).constructor)??[])e(n,t)}return e}class ParseTreeValidationError extends CError{constructor(e,t,n){super(e&&e.loc?`Line ${e.loc.first_line+1}: ${t}`:t,e,n),this.name="TreeValidationError"}}function LZ(e,t){const n=IZ.get(e);n?n.push(t):IZ.set(e,[t])}const FZ=e=>{if(e.qualifierList.length>1)throw new ParseTreeValidationError(e,"Invalid qualifiers.");!function(e,t){if(e.every((e=>"string"==typeof e))&&!HY(e))throw new ParseTreeValidationError(t,"Invalid specifiers - "+e.join(", "))}(e.specifierList,e)};function PZ(e,t){for(let n=t.length-1;n>=0;n--){if(!(t[n]instanceof OZ.Expression)||"sizeof"===t[n].type)return;if("constantExpr"===t[n].type)throw new ParseTreeValidationError(e,"Invalid constant expr.")}}LZ(OZ.SpecifierQualifiers,FZ),LZ(OZ.DeclarationSpecifiers,FZ),LZ(OZ.DeclarationSpecifiers,((e,t)=>{if(e.storageList.length>1)throw new ParseTreeValidationError(e,"Invalid storage class list.");if(e.fnSpecifierList.length>1)throw new ParseTreeValidationError(e,"Invalid fn specifier list.");if("typedef"===e.storageList[0]&&1!==t.length)throw new ParseTreeValidationError(e,"Nested typedefs are not allowed")})),LZ(OZ.UnaryExpression,((e,t)=>{switch(e.type){case"postfixIncrement":case"postfixDecrement":case"prefixIncrement":case"prefixDecrement":case"addressOf":case"dereference":PZ(e,t)}})),LZ(OZ.BinaryExpression,((e,t)=>{switch(e.type){case"comma":case"arraySubscript":PZ(e,t)}})),LZ(OZ.FunctionCallExpression,PZ),LZ(OZ.MemberAccessExpression,PZ);var NZ=n(347);const MZ=Object.fromEntries(["if","break","case","char","const","continue","default","do","double","else","enum","extern","float","for","inline","int","long","return","short","signed","sizeof","static","struct","switch","typedef","union","unsigned","void","while","_Bool","goto","auto","register","volatile","import"].map((e=>[e,e.toUpperCase()]))),DZ=[{type:e=>MZ[e]??"IDENTIFIER",regex:/[a-zA-Z_][a-zA-Z0-9_]*/},{type:e=>e,regex:new RegExp(["...","<<=",">>=","!=","%=","&&","&=","*=","++","+=","--","-=","->","/=","<<","<=","==",">=",">>","^=","|=","||","!","%","&","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","^","{","|","}","~"].map((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))).join("|"))},{type:"CONSTANT_FLOAT",regex:/(?:[0-9]+[Ee][+-]?[0-9]+|(?:[0-9]*\.[0-9]+|[0-9]+\.[0-9]*)(?:[Ee][+-]?[0-9]+)?)[fFlL]?|(?:[1-9][0-9]*|0)[fF]/},{type:"CONSTANT_HEX",regex:/0[xX][a-fA-F0-9]+(?:[uU][lL]{0,2}|[lL]{1,2}[uU]?|)/},{type:"CONSTANT_OCTAL",regex:/0[0-7]+(?:[uU][lL]{0,2}|[lL]{1,2}[uU]?|)/},{type:"CONSTANT_INT",regex:/(?:[1-9][0-9]*|0)(?:[uU][lL]{0,2}|[lL]{1,2}[uU]?|)/},{type:"CONSTANT_CHAR",regex:/'(?:[^\\\n']|\\(?:.|x[0-9a-fA-F]{1,2}|[0-7]{1,3}))'/,value:e=>e.slice(1,-1)},{type:"STRING_LITERAL",regex:/"(?:[^\\\n"]|\\(?:[^x0-7\n]|x[0-9a-fA-F]{1,2}|[0-7]{1,3}))*"/,value:e=>e.slice(1,-1)}];class Lexer{constructor(){this.source="",this.index=0,this.line=0,this.col=0}next(){for(;this.index<this.source.length&&(" "===this.source[this.index]||"\t"===this.source[this.index]||"\v"===this.source[this.index]||"\f"===this.source[this.index]||"\n"===this.source[this.index]);)"\n"===this.source[this.index]?(this.line++,this.col=1):this.col++,this.index++;const e={first_line:this.line,first_column:this.col,last_line:this.line,last_column:this.col+1,source:this.source};if(this.index===this.source.length)return{type:"EOF",value:"",text:"",loc:e};Lexer.regex.lastIndex=this.index;const t=Lexer.regex.exec(this.source);if(!t)throw new LexerError(e);const n=t[0];this.index+=n.length,this.col+=n.length,e.last_column=this.col;let i=0;for(;void 0===t[i+1];)i++;const r=DZ[i];return{type:"function"==typeof r.type?r.type(n):r.type,value:r.value?.(n)??n,text:n,loc:e}}reset(e){this.source=e,this.index=0,this.line=0,this.col=1}}Lexer.regex=new RegExp(DZ.map((e=>"("+e.regex.source+")")).join("|"),"ym");class LexerError extends CError{constructor(e){super("Unknown token",new class extends OZ.ParseNode{constructor(){super(...arguments),this.type="Unknown"}}(e)),this.name="LexerError"}}const zZ=new Lexer;const BZ=NZ;function RZ(e){try{return AZ(BZ.parse(e))}catch(e){throw e?.hash?.loc&&(e.message+="\n\n"+DY(e.hash?.loc)),e}}BZ.parser.lexer=new class WrappedLexer{constructor(){this.types=new Map}lex(){const e=zZ.next();return this.yytext=e.value,this.yylloc=e.loc,this.yylineno=e.loc.first_line,"IDENTIFIER"===e.type&&this.types.get(e.text)?"TYPE_NAME":e.type}setInput(e){this.yytext=void 0,this.yylloc=void 0,this.yylineno=void 0,this.types.clear(),zZ.reset(e)}externalDeclaration(e){if("typedef"===e.typeInfo.storageList[0])for(let t of e.list){for(;!(t instanceof OZ.IdentifierDeclarator);)t=t.body;this.types.set(t.id,!0)}}};const jZ=new class extends OZ.ParseNode{constructor(){super({first_line:0,first_column:0,last_line:0,last_column:0,source:""}),this.type="__internal__"}},UZ={wasm:new CFuncDeclaration(jZ,"__wasm__",new CFuncType(jZ,new CVoid,[CArithmetic.U32],void 0,!0),"internal"),wasm_i32:new CFuncDeclaration(jZ,"__wasm_i32__",new CFuncType(jZ,CArithmetic.U32,[CArithmetic.U32],void 0,!0),"internal"),wasm_i64:new CFuncDeclaration(jZ,"__wasm_i64__",new CFuncType(jZ,CArithmetic.U64,[CArithmetic.U32],void 0,!0),"internal"),wasm_f32:new CFuncDeclaration(jZ,"__wasm_f32__",new CFuncType(jZ,CArithmetic.Fp32,[CArithmetic.U32],void 0,!0),"internal"),wasm_f64:new CFuncDeclaration(jZ,"__wasm_f64__",new CFuncType(jZ,CArithmetic.Fp64,[CArithmetic.U32],void 0,!0),"internal"),wasm_ssp:new CFuncDeclaration(jZ,"__wasm_ssp__",new CFuncType(jZ,new CPointer(jZ,new CVoid,!0),[]),"internal"),wasm_rload:new CFuncDeclaration(jZ,"__wasm_rload__",new CFuncType(jZ,new CPointer(jZ,new CVoid,!0),[new CPointer(jZ,new CVoid,!0)]),"internal")},$Z=new Scope;function HZ(e,t,n){if(!(t.args[0]instanceof CConstant))throw new GenError("__wasm__ first argument should be integer constant specifying the number of parameters",e,t.args[0].node);const i=Number(t.args[0].value),r=t.args.slice(1,i+1),o=r.flatMap((t=>e.expression(t,!1))),s=t.args.slice(i+1).map((t=>{if(t instanceof CConstant)return Number(t.changeType(CArithmetic.U8).value);throw new GenError("__wasm__ instructions must be constants",e,t.node)}));return[...o,()=>({name:"arbitrary",type:"zeroArg",immediate:{},encoded:s,parameters:r.map((e=>hZ(e.type))),result:n,reads:[],writes:["arbitraryCode","memory"],copy(){return()=>this}})]}function WZ(e,t,n){return n?[]:[eK(dZ(t.type),"const",t.value)]}function GZ(e,t,n){const i=[];if(t.body instanceof CIdentifier&&(t.body.value instanceof CFuncDefinition||t.body.value instanceof CFuncDeclaration));else{if(!(t.body.type instanceof CFuncType||t.body.type instanceof CPointer&&t.body.type.type instanceof CFuncType))throw new GenError("Invalid fn call identifier",e,t.body.node);i.push(...YZ(e,t.body,t.body.type))}const r=function(e,t,n){if(t.body instanceof CIdentifier)switch(t.body.value){case UZ.wasm:return HZ(e,t,null);case UZ.wasm_i32:return HZ(e,t,rY);case UZ.wasm_i64:return HZ(e,t,oY);case UZ.wasm_f32:return HZ(e,t,sY);case UZ.wasm_f64:return HZ(e,t,aY);case UZ.wasm_ssp:return n?[]:[_Y.global.get(e.gen.shadowStackPtr)];case UZ.wasm_rload:if(t.args[0].type instanceof CPointer){const n=e.expression(t.args[0],!1),i=t.args[0].type.type;return(i instanceof CStruct||i instanceof CUnion)&&n.push(_Y.i32.load(2,0)),n}throw new GenError("__wasm_rload__ argument should be pointer");default:return}}(e,t,n);if(void 0!==r)return t.fnType.returnType.bytes>0&&n&&r.push(_Y.drop()),r;const o=t.fnType.parameterTypes.flatMap(((n,i)=>YZ(e,t.args[i],n)));let s;pZ(t.fnType.returnType)&&(s=[_Y.global.get(e.gen.shadowStackPtr),_Y.i32.const(e.shadowStackUsage),_Y.i32.add()],e.shadowStackUsage+=4*Math.ceil(t.fnType.returnType.bytes/4),o.push(...s)),i.length>0&&o.push(...i);let a=e.shadowStackUsage;if(t.fnType.variadic){const n=[];for(let i=t.fnType.parameterTypes.length;i<t.args.length;i++){let r=t.args[i].type;r instanceof CArithmetic&&(r="float"===r.type?CArithmetic.Fp64:UY(r)),n.unshift(hZ(r)),o.push(_Y.global.get(e.gen.shadowStackPtr),...YZ(e,t.args[i],r))}a+=16;for(const e of n)o.push(eK(e,"store",e===oY||e===aY?3:2,a)),a+=8}if(a>0&&o.push(_Y.global.get(e.gen.shadowStackPtr),_Y.i32.const(a),_Y.i32.add(),_Y.global.set(e.gen.shadowStackPtr)),i.length>0)o.push(_Y.call_indirect(e.gen.typeIndex(t.fnType)));else{const n=t.body.value;o.push(_Y.call(e.gen.functionIndex(n)))}return n&&fZ(t.fnType.returnType).length&&o.push(_Y.drop()),a>0&&o.push(_Y.global.get(e.gen.shadowStackPtr),_Y.i32.const(a),_Y.i32.sub(),_Y.global.set(e.gen.shadowStackPtr)),!n&&s&&o.push(...s),o}function qZ(e,t,n){const i=t.type instanceof CPointer?t.type.type.bytes:1,r=hZ(t.type);return"post"!==t.pos||n?mZ(e,t.body.type,t.body,[tK(r,i),eK(r,"++"===t.op?"add":"sub")],!n&&"pre"===t.pos):function(e,t,n,i){if(t instanceof CArray||t instanceof CStruct||t instanceof CUnion)throw new GenError("Cannot storageGetThenUpdate "+t.typeName,e,n.node);const[r,o]=_Z(e,n);return"local"===o.type?(r.push(_Y.local.get(o.index)),r.push(_Y.local.get(o.index),...i,_Y.local.set(o.index))):"static"===o.type?(r.push(_Y.i32.const(0),_Y.i32.const(0),CZ(t,o.address)),r.push(...e.withTemporaryLocal(hZ(t),(e=>[_Y.local.tee(e),...i,SZ(t,o.address),_Y.local.get(e)])))):"shadow"===o.type?(r.push(_Y.global.get(e.gen.shadowStackPtr),_Y.global.get(e.gen.shadowStackPtr)),r.push(CZ(t,o.shadowOffset)),r.push(...e.withTemporaryLocal(hZ(t),(e=>[_Y.local.tee(e),...i,SZ(t,o.shadowOffset),_Y.local.get(e)])))):"pointer"===o.type&&(r.push(...e.withTemporaryLocal(rY,(e=>[_Y.local.tee(e),_Y.local.get(e)]))),r.push(CZ(t,0)),r.push(...e.withTemporaryLocal(hZ(t),(e=>[_Y.local.tee(e),...i,SZ(t,0),_Y.local.get(e)])))),r}(e,t.body.type,t.body,[tK(r,i),eK(r,"++"===t.op?"add":"sub")])}function VZ(e,t,n){if(void 0===t.assignmentType||t.rhs instanceof CInitializer){if(t.rhs instanceof CInitializer){const i=[];if(t.rhs.type instanceof CArray)for(let n=0;n<t.rhs.body.length;n++){const r=t.rhs.body[n],o=new CAddSub(t.lhs.node,t.lhs,new CConstant(t.lhs.node,zY,BigInt(n)),"+"),s=new CDereference(t.lhs.node,o),a=new CAssignment(r.node,s,r,void 0,t.initialAssignment);i.push(...XZ(e,a,!0))}else if(t.rhs.type instanceof CUnion){const n=new CAddressOf(t.lhs.node,t.lhs),r=new CMemberAccess(t.rhs.node,n,t.rhs.type.members[0].name),o=new CAssignment(t.rhs.body[0].node,r,t.rhs.body[0],void 0,!0);i.push(...XZ(e,o,!0))}else{if(!(t.rhs.type instanceof CStruct))throw new GenError("Unknown initializer",e,t.node);{const n=new CAddressOf(t.lhs.node,t.lhs);for(let r=0;r<t.rhs.body.length;r++){const o=new CMemberAccess(t.rhs.node,n,t.rhs.type.members[r].name),s=new CAssignment(t.rhs.body[r].node,o,t.rhs.body[r],void 0,!0);i.push(...XZ(e,s,!0))}}}return n||i.push(...XZ(e,t.lhs,!1)),i}return function(e,t,n,i,r){const[o,s]=_Z(e,n),a=e.expression(i,!1);return a.push(...uZ(i.type,n.type)),t instanceof CStruct||t instanceof CUnion||t instanceof CArray?TZ(a,bZ(e,n),t.bytes):("local"===s.type?o.push(...a,r?_Y.local.tee(s.index):_Y.local.set(s.index)):"static"===s.type?(o.push(_Y.i32.const(0),...a),r?o.push(...e.withTemporaryLocal(hZ(t),(e=>[_Y.local.tee(e),SZ(t,s.address),_Y.local.get(e)]))):o.push(SZ(t,s.address))):"shadow"===s.type?(o.push(_Y.global.get(e.gen.shadowStackPtr),...a),r?o.push(...e.withTemporaryLocal(hZ(t),(e=>[_Y.local.tee(e),SZ(t,s.shadowOffset),_Y.local.get(e)]))):o.push(SZ(t,s.shadowOffset))):"pointer"===s.type&&(o.push(...a),r?o.push(...e.withTemporaryLocal(hZ(t),(e=>[_Y.local.tee(e),SZ(t,0),_Y.local.get(e)]))):o.push(SZ(t,0))),o)}(e,t.lhs.type,t.lhs,t.rhs,!n)}{let i;i="mul"===t.assignmentType?new CMulDiv(t.node,t.lhs,t.rhs,"*"):"div"===t.assignmentType?new CMulDiv(t.node,t.lhs,t.rhs,"/"):"mod"===t.assignmentType?new CMod(t.node,t.lhs,t.rhs):"add"===t.assignmentType?new CAddSub(t.node,t.lhs,t.rhs,"+"):"sub"===t.assignmentType?new CAddSub(t.node,t.lhs,t.rhs,"-"):"leftShift"===t.assignmentType?new CShift(t.node,t.lhs,t.rhs,"left"):"rightShift"===t.assignmentType?new CShift(t.node,t.lhs,t.rhs,"right"):"bitwiseAnd"===t.assignmentType?new CBitwiseAndOr(t.node,t.lhs,t.rhs,"and"):"bitwiseXor"===t.assignmentType?new CBitwiseAndOr(t.node,t.lhs,t.rhs,"xor"):new CBitwiseAndOr(t.node,t.lhs,t.rhs,"or");const r=XZ(e,i,!1),o=XZ(e,t.lhs,!1),s=r.slice(o.length);return s.push(...uZ(i.type,t.lhs.type)),mZ(e,t.lhs.type,t.lhs,s,!n)}}function XZ(e,t,n){if(!n&&t.type instanceof CArithmetic&&!(t instanceof CConstant)&&YX().generation_try_constant_expr){const e=JY(t);if(e)return WZ(0,new CConstant(t.node,t.type,e.value),!1)}return t instanceof CConstant?WZ(0,t,n):t instanceof CIdentifier?function(e,t,n){return n?[]:t.value instanceof CFuncDefinition||t.value instanceof CFuncDeclaration?[_Y.i32.const(e.gen.indirectIndex(t.value))]:gZ(e,t.type,t)}(e,t,n):t instanceof CStringLiteral?function(e,t,n){if(n)return[];const i=e.gen.nextStaticAddr;return e.gen.nextStaticAddr+=t.value.length,e.gen.module.dataSegment(i,t.value.map(Number)),[_Y.i32.const(i)]}(e,t,n):t instanceof CFunctionCall?GZ(e,t,n):t instanceof CMemberAccess?function(e,t,n){return n?XZ(e,t.body,!0):gZ(e,t.type,t)}(e,t,n):t instanceof CIncrDecr?qZ(e,t,n):t instanceof CAddressOf?function(e,t,n){return n?XZ(e,t.body,!0):t.body instanceof CIdentifier&&(t.body.value instanceof CFuncDefinition||t.body.value instanceof CFuncDeclaration)?[_Y.i32.const(e.gen.indirectIndex(t.body.value))]:bZ(e,t.body)}(e,t,n):t instanceof CDereference?function(e,t,n){return n?XZ(e,t.body,!0):t.type instanceof CPointer&&t.type.original instanceof CFuncType?XZ(e,t.body,!1):gZ(e,t.type,t)}(e,t,n):t instanceof CUnaryPlusMinus?function(e,t,n){if(n)return XZ(e,t.body,!0);const i=XZ(e,t.body,!1);if("-"===t.op){const e=lZ(t.body.type);e===sY||e===aY?i.push(QZ(e,"neg")):(i.unshift(tK(e,0)),i.push(eK(e,"sub")))}return i}(e,t,n):t instanceof CBitwiseNot?function(e,t,n){if(n)return XZ(e,t.body,!0);const i=dZ(t.type);return[...YZ(e,t.body,t.type),JZ(i,"const",-1n),JZ(i,"xor")]}(e,t,n):t instanceof CLogicalNot?function(e,t,n){if(n)return XZ(e,t.body,!0);const i=XZ(e,t.body,!1),r=hZ(t.body.type);return KZ(r)?[...i,JZ(r,"eqz")]:[...i,QZ(r,"const",0),QZ(r,"eq")]}(e,t,n):t instanceof CSizeof?function(e,t,n){return n?[]:[_Y.i32.const(t.body.bytes)]}(0,t,n):t instanceof CCast?function(e,t,n){return n?XZ(e,t.body,!0):[...XZ(e,t.body,!1),...uZ(t.body.type,t.type)]}(e,t,n):t instanceof CMulDiv?function(e,t,n){if(n)return[...XZ(e,t.lhs,!0),...XZ(e,t.rhs,!0)];const i=[...YZ(e,t.lhs,t.type),...YZ(e,t.rhs,t.type)],r=dZ(t.type);return KZ(r)?"*"===t.op?i.push(JZ(r,"mul")):i.push("signed"===t.type.type?JZ(r,"div_s"):JZ(r,"div_u")):i.push("*"===t.op?QZ(r,"mul"):QZ(r,"div")),i}(e,t,n):t instanceof CMod?function(e,t,n){if(n)return[...XZ(e,t.lhs,!0),...XZ(e,t.rhs,!0)];const i=dZ(t.type);return"signed"===t.type.type?[...YZ(e,t.lhs,t.type),...YZ(e,t.rhs,t.type),JZ(i,"rem_s")]:[...YZ(e,t.lhs,t.type),...YZ(e,t.rhs,t.type),JZ(i,"rem_u")]}(e,t,n):t instanceof CAddSub?function(e,t,n){if(n)return[...XZ(e,t.lhs,!0),...XZ(e,t.rhs,!0)];if(t.type instanceof CArithmetic){const i=YZ(e,t.lhs,t.type),r=YZ(e,t.rhs,t.type),o=dZ(t.type);return[...i,...r,"+"===t.op?eK(o,"add"):eK(o,"sub")]}{function s(n){if(n.type instanceof CPointer)return e.expression(n,!1);{const i=YZ(e,n,CArithmetic.U32),r=t.type.type.bytes;return r>1&&i.push(_Y.i32.const(r),_Y.i32.mul()),i}}return[...s(t.lhs),...s(t.rhs),"+"===t.op?_Y.i32.add():_Y.i32.sub()]}}(e,t,n):t instanceof CShift?function(e,t,n){if(n)return[...XZ(e,t.lhs,!0),...XZ(e,t.rhs,!0)];const i=dZ(t.type);return"left"===t.dir?[...YZ(e,t.lhs,t.type),...YZ(e,t.rhs,t.type),JZ(i,"shl")]:"signed"===t.type.type?[...YZ(e,t.lhs,t.type),...YZ(e,t.rhs,t.type),JZ(i,"shr_s")]:[...YZ(e,t.lhs,t.type),...YZ(e,t.rhs,t.type),JZ(i,"shr_u")]}(e,t,n):t instanceof CRelational?function(e,t,n){if(n)return[...XZ(e,t.lhs,!0),...XZ(e,t.rhs,!0)];const i=dZ(t.commonType);return KZ(i)?"signed"===t.commonType.type?[...YZ(e,t.lhs,t.commonType),...YZ(e,t.rhs,t.commonType),"LT"===t.op?JZ(i,"lt_s"):"GT"===t.op?JZ(i,"gt_s"):"LEq"===t.op?JZ(i,"le_s"):JZ(i,"ge_s")]:[...YZ(e,t.lhs,t.commonType),...YZ(e,t.rhs,t.commonType),"LT"===t.op?JZ(i,"lt_u"):"GT"===t.op?JZ(i,"gt_u"):"LEq"===t.op?JZ(i,"le_u"):JZ(i,"ge_u")]:[...YZ(e,t.lhs,t.commonType),...YZ(e,t.rhs,t.commonType),"LT"===t.op?QZ(i,"lt"):"GT"===t.op?QZ(i,"gt"):"LEq"===t.op?QZ(i,"le"):QZ(i,"ge")]}(e,t,n):t instanceof CEquality?function(e,t,n){return n?[...XZ(e,t.lhs,!0),...XZ(e,t.rhs,!0)]:[...YZ(e,t.lhs,t.commonType),...YZ(e,t.rhs,t.commonType),eK(dZ(t.commonType),"=="===t.op?"eq":"ne")]}(e,t,n):t instanceof CBitwiseAndOr?function(e,t,n){return n?[...XZ(e,t.lhs,!0),...XZ(e,t.rhs,!0)]:[...YZ(e,t.lhs,t.type),...YZ(e,t.rhs,t.type),JZ(dZ(t.type),t.op)]}(e,t,n):t instanceof CLogicalAndOr?function(e,t,n){return n?[...XZ(e,t.lhs,!0),...XZ(e,t.rhs,!0)]:"and"===t.op?[...ZZ(e,t.lhs),_Y.if(rY,ZZ(e,t.rhs,!1),[_Y.i32.const(0n)])]:[...ZZ(e,t.lhs),_Y.if(rY,[_Y.i32.const(1n)],ZZ(e,t.rhs,!1))]}(e,t,n):t instanceof CConditional?function(e,t,n){const i=ZZ(e,t.test);if(n){const n=XZ(e,t.trueValue,!0),r=XZ(e,t.falseValue,!0);return 0===n.length&&0===r.length?[]:[...i,_Y.if(null,n,r)]}return[...i,_Y.if(hZ(t.type),YZ(e,t.trueValue,t.type),YZ(e,t.falseValue,t.type))]}(e,t,n):t instanceof CAssignment?VZ(e,t,n):function(e,t,n){return[...XZ(e,t.lhs,!0),...XZ(e,t.rhs,n)]}(e,t,n)}function YZ(e,t,n,i=!1){return XZ(e,new CCast(t.node,n,t),i)}function ZZ(e,t,n=!0){const i=lZ(t.type);if(i===rY||i instanceof CPointer)return n||CArithmetic.BOOL.equals(t.type)?XZ(e,t,!1):[...XZ(e,t,!1),_Y.i32.const(0n),_Y.i32.ne()];if("number"!=typeof i)throw new GenError("Invalid condition",e,t.node);return[...XZ(e,t,!1),tK(i,0),eK(i,"ne")]}function KZ(e){return e===rY||e===oY}function QZ(e,t,...n){if("number"!=typeof e)throw new Error("Instructions can only operate on value types");if(e===sY)return _Y.f32[t](...n);if(e===aY)return _Y.f64[t](...n);throw new Error("Invalid value type for floating point instruction")}function JZ(e,t,...n){if("number"!=typeof e)throw new Error("Instructions can only operate on value types");if(e===rY)return _Y.i32[t](...n);if(e===oY)return _Y.i64[t](...n);throw new Error("Invalid value type for integer instruction")}function eK(e,t,...n){if("number"!=typeof e)throw new Error("Instructions can only operate on value types");if(e===rY)return _Y.i32[t](...n);if(e===oY)return _Y.i64[t](...n);if(e===sY)return _Y.f32[t](...n);if(e===aY)return _Y.f64[t](...n);throw new Error("Invalid value type?")}function tK(e,t){if("number"!=typeof e)throw new Error("Constants can only take value types");if(e!==(0|e))throw new Error("Invalid generic constant - not integer");if(e===rY)return _Y.i32.const(BigInt(t));if(e===oY)return _Y.i64.const(BigInt(t));if(e===sY)return _Y.f32.const(t);if(e===aY)return _Y.f64.const(t);throw new Error("Invalid value type?")}function nK(e){let t=e.instr.parameters.length;for(let n=e.instrIndex-1;n>=0;n--){const i=e.expr.instructions[n];if(i.result&&t--,0===t)return i;t+=i.parameters.length}}function iK(e){"local.tee"===e.instr.name?e.expr.replace(e.instrIndex,e.instrIndex+1,_Y.nop()):"local.set"===e.instr.name&&e.expr.replace(e.instrIndex,e.instrIndex+1,_Y.drop())}Object.values(UZ).forEach((e=>$Z.addIdentifier(e)));const rK=[];function oK(e){const t=YX(),n=e.body;e.instrCounts.push({name:"before opt",count:sK(n)});for(const i of rK)i.enabled(t)&&(i.run(n),e.instrCounts.push({name:i.name,count:sK(n)}))}function sK(e){let t=e.instructions.length;for(const n of e.instructions)"structured"===n.type&&(t+=sK(n.immediate.expression),n.immediate.expression2&&(t+=sK(n.immediate.expression2)));return t}function aK(e){const t=YX();TY(e,CY.filter((e=>e.enabled(t))).map((e=>[e.run,e.peepholeSize])))}rK.push({name:"Peephole optimisations",enabled:()=>!0,run:aK}),rK.push({name:"Partial redundancy elimination",enabled:e=>e.partial_redundancy_elimination,run:function(e){const t=AY(e);if(!t.all.length)return;const n=function(e){const t=[],n=[e];let i;for(;void 0!==(i=n.shift());){const{instructions:e}=i;e:for(const[r,o]of e.entries()){if("structured"===o.type){n.push(o.immediate.expression),o.immediate.expression2&&n.push(o.immediate.expression2);continue}if(o.parameters.length||o.writes.length||!o.result)continue;const s=[o.result],a=new Set(o.reads);for(let n=r+1;n<e.length;n++){const o=e[n];if(o.parameters.length>s.length||o.writes.length)continue e;s.splice(0,o.parameters.length),o.result&&s.unshift(o.result);for(const e of o.reads)a.add(e);if(1===s.length&&n-r>=2){const o={start:r,end:n,expr:i},c={positions:[o],resources:a,type:s[0],instructions:e.slice(r,n+1),bit:1n<<BigInt(t.length)},l=t.find((e=>{return n=c,(t=e).type===n.type&&t.instructions.length===n.instructions.length&&t.instructions.every(((e,t)=>{const i=e.encoded,r=n.instructions[t].encoded;return i.length===r.length&&i.every(((e,t)=>e===r[t]))}));var t,n}));l?l.positions.push(o):t.push(c)}}}}return t}(e);if(!n.length)return;const{INSERT:i,INSERT_EDGE:r,REPLACE:o}=NY(t,n);if(0===i.size&&0===r.size&&0===o.size)return;const s=function(e,{INSERT:t,INSERT_EDGE:n,REPLACE:i}){const r=[];for(const o of e){const e=[];for(const[n,i]of t.entries())i&o.bit&&(n.instr?e.push(n):e.push(...n.flowNext));const s=[];for(const[t,i]of n.entries())for(const[n,r]of i)r&o.bit&&(t.instr&&n.instr?s.push([t,n]):e.push(n));const a=[];for(const[e,t]of i.entries())t&o.bit&&a.push(e);if(e.length+s.length&&a.length){const t=a[0].expr.builder.addLocal(o.type),n=[...o.instructions,_Y.local.set(t)],i=[_Y.local.get(t)];r.push({expression:o,insertBefore:e,insertBetween:s,insertAfter:[],insertInstructions:n,replacementFlows:a,replacementInstructions:i,fnLengthChange:0})}}for(const e of r){for(const t of new Set(e.insertBetween.map((([e])=>e))))[...t.flowNext].every((n=>n.instr&&(e.insertBetween.find((([e,i])=>t===e&&n===i))||e.insertBefore.includes(n))))&&(e.insertBetween=e.insertBetween.filter((([e])=>t!==e)),e.insertBefore=e.insertBefore.filter((e=>-1===t.flowNext.indexOf(e))),"structured"===t.instr.type?e.insertBefore.push(t):e.insertAfter.push(t));const t=e.insertInstructions.length*(e.insertBefore.length+e.insertBetween.length+e.insertAfter.length),n=(e.expression.instructions.length-e.replacementInstructions.length)*e.replacementFlows.length;e.fnLengthChange=t-n}return r}(n,{INSERT:i,INSERT_EDGE:r,REPLACE:o});!function(e){e.sort(((e,t)=>{const n=e.fnLengthChange-t.fnLengthChange;return 0!==n?n:t.expression.instructions.length-e.expression.instructions.length}));const t=[];for(let n=0;n<e.length;n++){const i=e[n],r=i.expression.instructions.length,o=i.replacementFlows.map((e=>[e.expr,e.instrIndex-r,e.instrIndex]));o.some((([e,n,i])=>t.some((([t,r,o])=>e===t&&i>=r&&o>=n))))?(e.splice(n,1),n--):t.push(...o)}}(s);const a=new InstrSplicer;for(const e of s){const t=e.expression.instructions.length;for(const n of e.replacementFlows)a.splice(n,t,e.replacementInstructions,1-t);for(const t of e.insertBefore)a.splice(t,0,e.insertInstructions,0);for(const t of e.insertAfter)t.instr.name.startsWith("br")?a.splice(t,0,e.insertInstructions,0):a.splice(t,0,e.insertInstructions,1);for(const[t,n]of e.insertBetween)if(t.expr===n.expr&&t.instrIndex+1===n.instrIndex)a.splice(n,0,e.insertInstructions);else if(a.realIndex(t)+1===t.expr.instructions.length)a.splice(t,0,e.insertInstructions,t.instr.name.startsWith("br")?0:1);else if(t.instr.name.startsWith("br"))a.splice(t,0,e.insertInstructions);else if(n.expr.parent===t.instr&&0===n.instrIndex)a.splice(n,0,e.insertInstructions);else{if(!(t.expr.depth>n.expr.depth))throw new Error("Unknown PRE insertion");a.splice(t,0,e.insertInstructions,t.instr.name.startsWith("br")?0:1)}}}}),rK.push({name:"Dead code elimination",enabled:e=>e.dead_code_elimination,run:xY}),rK.push({name:"Copy propagation",enabled:e=>e.copy_propagation,run:function(e){const{definitions:t,reaching:n,localMasks:i}=function(e){const t=LY(e,(e=>e.name.startsWith("local."))),n=new Map,i=new Map,r=[],o=Array(e.builder.args.length+e.builder.locals.length).fill(0n);let s=0n;for(let t=0n;t<e.builder.args.length;t++){const e={local:t,type:"arg",possibleUses:[],definiteUses:[],bit:1n<<BigInt(r.length)};s|=e.bit,o[Number(t)]|=e.bit,r.push(e)}n.set(t.entry,s);for(const e of t.all)if("index"===e.instr.type&&("local.set"===e.instr.name||"local.tee"===e.instr.name)){const t={local:e.instr.immediate.value,type:e.instr.name,possibleUses:[],definiteUses:[],flow:e,bit:1n<<BigInt(r.length)};o[Number(t.local)]|=t.bit,i.set(e,t),r.push(t)}FY(t,null,n,"forwards","union",((e,t)=>{const n=i.get(e);return n&&(t&=~o[Number(n.local)],t|=n.bit),t}));for(const[e,t]of n.entries()){if(!e.instr||"index"!==e.instr.type||"local.get"!==e.instr.name)continue;const n=e.instr.immediate.value,i=[];for(let e=0,s=t&o[Number(n)];s;e++)1n&s&&i.push(r[e]),s>>=1n;1===i.length&&i[0].definiteUses.push(e),i.forEach((t=>t.possibleUses.push(e)))}return{definitions:r,reaching:n,localMasks:o}}(e);if(t.length)for(const e of t){if("arg"===e.type)continue;if(0===e.possibleUses.length){iK(e.flow);continue}if(0===e.definiteUses.length)continue;const t=nK(e.flow);if("constant"===t?.type){const n=eK(e.flow.instr.parameters[0],"const",t.immediate.value);for(const t of e.definiteUses)t.expr.replace(t.instrIndex,t.instrIndex+1,n)}else{if("index"!==t?.type||"local.get"!==t.name&&"local.tee"!==t.name)continue;{const r=[...e.flow.flowPrevious].find((t=>t.instr&&t.instrIndex===e.flow.instrIndex-1&&t.expr===e.flow.expr));if(!r)continue;const o=Number(t.immediate.value),s=(n.get(r)??0n)&i[o],a=_Y.local.get(o);let c=!0;for(const t of e.definiteUses)s===((n.get(t)??0n)&i[o])?t.expr.replace(t.instrIndex,t.instrIndex+1,a):c=!1;if(!c)continue}}e.definiteUses.length===e.possibleUses.length&&iK(e.flow)}}}),rK.push({name:"Local live range splitting",enabled:e=>e.live_range_splitting,run:function(e){const t=LY(e,(e=>e.name.startsWith("local."))),n=new Map,i=new Map,r=t.entry.flowNext.slice();let o;for(;void 0!==(o=r.shift());){const t=[];for(const e of o.flowPrevious)for(const[i,r]of(n.get(e)??[]).entries())r&&(void 0!==t[i]?t[i]=t[i].merge(r):t[i]=r.get());if(o.instr&&"index"===o.instr.type&&("local.set"===o.instr.name||"local.tee"===o.instr.name)){const n=Number(o.instr.immediate.value)-e.builder.args.length;if(n>=0){let e=i.get(o);e||i.set(o,e=new LocalRange(o.instr.parameters[0])),t[n]=e}}const s=n.get(o);if(!s||s.length!==t.length||s.some(((e,n)=>t[n]!==e))){n.set(o,t);for(const e of o.flowNext)r.push(e)}}const s=[...new Set([...i.values()].map((e=>e.get())))];if(!(s.length<=e.builder.locals.length)){e.builder.wipeLocals();for(const t of s)t.newLocal=e.builder.addLocal(t.type);for(const[t,i]of n.entries()){if(!t.instr||"index"!==t.instr.type)continue;const n=Number(t.instr.immediate.value)-e.builder.args.length;n<0||("local.get"===t.instr.name?t.expr.replace(t.instrIndex,t.instrIndex+1,_Y.local.get(i[n].getNewLocal())):"local.set"===t.instr.name?t.expr.replace(t.instrIndex,t.instrIndex+1,_Y.local.set(i[n].getNewLocal())):"local.tee"===t.instr.name&&t.expr.replace(t.instrIndex,t.instrIndex+1,_Y.local.tee(i[n].getNewLocal())))}}}}),rK.push({name:"Reallocate locals",enabled:e=>e.reallocate_locals,run:function(e){if(e.builder.locals.length<=1)return;const t=LY(e,(e=>e.name.startsWith("local."))),n=new Map,i=BigInt(e.builder.args.length);FY(t,null,n,"backwards","union",((e,t)=>{if(e.instr&&"index"===e.instr.type){const n=1n<<e.instr.immediate.value-i;if("local.get"===e.instr.name)return t|n;if("local.set"===e.instr.name||"local.tee"===e.instr.name)return t&~n}return t}));const r=e.builder.locals.map((({type:e},t)=>({local:t,type:e,clash:new Set})));for(let e of n.values()){if(0n===e)continue;const t=[];for(let n=0;e;n++)1n&e&&t.push(n),e>>=1n;if(!(t.length<=1))for(const e of t)for(const n of t)e!==n&&r[e].clash.add(n)}const o=[],s=r.map((({local:e,clash:t})=>({local:e,clash:new Set(t)})));for(;s.length;){s.sort(((e,t)=>e.clash.size-t.clash.size));const{local:e}=s.shift();o.push(e);for(const t of s)t.clash.delete(e)}e.builder.wipeLocals();const a=[],c=Array(r.length);for(;o.length;){const t=o.pop(),{type:n}=r[t],i=new Set;for(const e of r[t].clash)c[e]&&i.add(c[e]);let s;for(const e of a)if(e.type===n&&!i.has(e)){s=e;break}s||a.push(s=e.builder.addLocal(n)),c[t]=s}c.unshift(...e.builder.args),PY(e,c)}}),rK.push({name:"Dead code elimination 2nd pass",enabled:e=>e.dead_code_elimination,run:xY}),rK.push({name:"Remove unused locals",enabled:e=>e.unused_locals,run:e=>{const t=new Set;for(const n of[...e.writes,...e.reads])n instanceof WLocal&&!n.isArgument&&t.add(n);if(t.size===e.builder.locals.length)return;const n=e.builder.args.slice();n.push(...e.builder.locals);for(const n of e.builder.locals.slice())t.has(n)||e.builder.deleteLocal(n);PY(e,n)}}),rK.push({name:"Peephole optimisations 2nd pass",enabled:e=>e.peephole_2nd_pass,run:aK});class WImportedFunction{constructor(e,t,n,i){this.parent=e,this.type=t,this.module=n,this.name=i}getIndex(){return this.parent._funcIndex(this)}getTableIndex(){return this.parent._tableIndex(this)}}class WFunction{constructor(e,t,n){this.parent=e,this.type=t,this.exportName=n,this.hints={inline:!1},this.instrCounts=[]}getIndex(){return this.parent._funcIndex(this)}getTableIndex(){return this.parent._tableIndex(this)}define(e){if(void 0!==this._builder)throw new Error("Wasm function already defined");this._builder=new WFunctionBuilder(this,e),oK(this);const t=this._builder.expr;if(this.type[1].length>0){const e=t.get(-1);"return"===e.name?t.pop():0===t.stack.length&&"unreachable"!==e.name&&t.push(_Y.unreachable())}}toBytes(){if(void 0===this._builder)throw new Error("Wasm function body not defined");const e=[];let t=null,n=0n;for(const i of this.locals)i===t?n++:(t&&e.push([n,t]),t=i,n=1n);t&&e.push([n,t]);const i=uY(e.map((e=>[...QX(e[0]),e[1]])));return i.push(...this._builder.expr.encoded),i.unshift(...QX(BigInt(i.length))),i}get locals(){return this._builder?.locals?.map((e=>e.type))??[]}get body(){if(!this._builder)throw new Error("Wasm function body is not yet defined");return this._builder.expr}}class WFunctionBuilder{constructor(e,t){this.fn=e,this._locals=[],this._freeTempLocals=[],this._arguments=e.type[0].map((e=>new WLocal(this._localidx.bind(this),e,!0))),this.expr=new WExpression(null,0,this),this.expr.push(...t(this))}get locals(){return this._locals}addLocal(e){const t=new WLocal(this._localidx.bind(this),e,!1);return this._locals.push(t),t}getTempLocal(e){const t=this._freeTempLocals.findIndex((t=>t.type===e));return t<0?this.addLocal(e):this._freeTempLocals.splice(t,1)[0]}freeTempLocal(e){YX().reallocate_locals||this._freeTempLocals.push(e)}deleteLocal(e){const t=this._locals.indexOf(e);t>=0&&this._locals.splice(t,1)}wipeLocals(){this._locals.splice(0,this._locals.length)}get args(){return this._arguments}get self(){return{getIndex:this.fn.getIndex.bind(this.fn)}}get type(){return this.fn.type}getLocal(e){const t=Number(e);return e<this._arguments.length?this._arguments[t]:this._locals[t-this._arguments.length]}_localidx(e){let t=this._arguments.indexOf(e);if(t>=0)return BigInt(t);if(t=this._locals.indexOf(e),t>=0)return BigInt(this._arguments.length+t);throw"Local not found?"}}class WLocal{constructor(e,t,n){this.lookup=e,this.type=t,this.isArgument=n}getIndex(){return this.lookup(this)}}class ModuleBuilder{constructor(){this._functions=[],this._importedFunctions=[],this._functionTable=[],this._functionTypes=[],this._globals=[],this._dataSegments=[]}function(e,t,n,i){const r=new WFunction(this,[e,t],i);return this._functions.push(r),n&&r.define(n),r}importFunction(e,t,n,i){if(this._functions.length>0)throw new Error("Cannot define an imported functions after defining normal functions");const r=new WImportedFunction(this,[e,t],n,i);return this._importedFunctions.push(r),r}global(e,t,n,i){const r=new WGlobal(this,e,t,n,i);return this._globals.push(r),r}setupMemory(e,t){if(e<1||void 0!==t&&t<e)throw new Error("Invalid memory size");this._memory=void 0===t?[BigInt(e)]:[BigInt(e),BigInt(t)]}dataSegment(e,t){let n=0;for(;n<t.length&&0===t[n];)n++;for(t=t.slice(n),e+=n;t.length&&0===t[t.length-1];)t.pop();t.length&&this._dataSegments.push([e,t])}byteList(){const e=this._encodeImports(),t=this._functions.map((e=>QX(this._typeIndex(e.type)))),n=this._functions.map((e=>e.toBytes()));this.emitCallback&&this.emitCallback();const i=[];return this.startFunction&&(i.push(...QX(this.startFunction.getIndex())),i.unshift(8,...QX(BigInt(i.length)))),[0,97,115,109,1,0,0,0,...cK(1,this._functionTypes.map(lY)),...cK(2,e),...cK(3,t),...cK(4,this._encodeTable()),...cK(5,this._memory?[hY(this._memory)]:[]),...cK(6,this._globals.map((e=>e.toBytes()))),...cK(7,this._encodeExports()),...i,...cK(9,this._encodeElements()),...cK(10,n),...cK(11,this._encodeDataSegments())]}toBytes(){return new Uint8Array(this.byteList())}async execute(e){return(await WebAssembly.instantiate(this.toBytes(),e)).instance.exports}_encodeImports(){const e=[];for(const t of this._importedFunctions)e.push([...nY(t.module),...nY(t.name),0,...QX(this._typeIndex(t.type))]);return e}_encodeTable(){if(0===this._functionTable.length)return[];const e=BigInt(this._functionTable.length);return[[112,...hY([e,e])]]}_encodeExports(){const e=[];for(const t of this._functions)t.exportName&&e.push([...nY(t.exportName),0,...QX(t.getIndex())]);for(const t of this._globals)t.exportName&&e.push([...nY(t.exportName),3,...QX(t.getIndex())]);return this._memory&&e.push([...nY("__mem"),2,0]),e}_encodeElements(){return 0===this._functionTable.length?[]:[[0,...tY(0,rY),11,...uY(this._functionTable.map((e=>QX(e.getIndex()))))]]}_encodeDataSegments(){if(this._dataSegments.length>0&&void 0===this._memory)throw new Error("Cannot use data segments with memory disabled");this._dataSegments.sort(((e,t)=>e[0]-t[0]));let e=-1/0;for(let t=0;t<this._dataSegments.length;t++){const[n,i]=this._dataSegments[t];if(e+5>=n){const r=this._dataSegments[t-1][1];for(let t=e;t<n;t++)r.push(0);r.push(...i),this._dataSegments.splice(t,1),t--}e=n+i.length}return this._dataSegments.map((([e,t])=>[0,...tY(e,rY),11,...QX(BigInt(t.length)),...t]))}_funcIndex(e){let t;if(t=e instanceof WImportedFunction?this._importedFunctions.indexOf(e):this._functions.indexOf(e),t<0)throw new Error("Function not found?");return e instanceof WFunction&&(t+=this._importedFunctions.length),BigInt(t)}_tableIndex(e){let t=this._functionTable.indexOf(e);return t<0&&(t=this._functionTable.push(e)-1),BigInt(t)}_typeIndex(e){for(let t=0;t<this._functionTypes.length;t++){const n=this._functionTypes[t];if(n[0].length===e[0].length&&n[0].every(((t,n)=>t===e[0][n]))&&n[1].length===e[1].length&&n[1].every(((t,n)=>t===e[1][n])))return BigInt(t)}return BigInt(this._functionTypes.push(e)-1)}_globalIndex(e){const t=this._globals.indexOf(e);if(t<0)throw new Error("Global not found?");return BigInt(t)}get functions(){return this._functions}get functionImports(){return this._importedFunctions}_functionLookup(e){return e<this._importedFunctions.length?this._importedFunctions[Number(e)]:this._functions[Number(e)-this._importedFunctions.length]}_typeLookup(e){return this._functionTypes[Number(e)]}_globalLookup(e){return this._globals[Number(e)]}_inFunctionTable(e){return this._functionTable.indexOf(e)>=0}_removeFunction(e){const t=this._functions.indexOf(e);t>=0&&this._functions.splice(t,1)}}function cK(e,t){if(0===t.length)return[];const n=uY(t);return[e,...QX(BigInt(n.length)),...n]}function lK(e){const t=FnInfo.infoMap(e),n=new Set,i=new InstrSplicer;for(const e of t.values())for(const t of e.inliningCandidates()){const r=e.fn.type[0],o=[...r,...e.fn.locals].map((e=>t.expr.builder.addLocal(e))),s=e.fn.type[1][0]??null,a=[];for(let e=r.length-1;e>=0;e--)a.push(_Y.local.set(o[e]));a.push(_Y.block(s,[])),i.splice(t,1,a);const c=i.realIndex(t)+r.length,l=t.expr.instructions[c];if(!l||"structured"!==l.type||0!==l.immediate.expression.instructions.length)throw new Error("Failed to inline function");e.fn.body.copyInto(l.immediate.expression),PY(l.immediate.expression,o),SY(l.immediate.expression,(([e],t)=>{if("return"===e.name)return[s?_Y.br(t,s):_Y.br(t)]}),1),n.add(t.fn)}for(const e of n)oK(e);n.size&&function(e){const t=FnInfo.infoMap(e),n=[...e.functions,...e.functionImports].map((n=>{const i=t.get(n);if(0!==i?.usages.length||i.inTable||i.exported)return n;e._removeFunction(n)})),i=n.indexOf(void 0);if(-1===i)return;for(let e=i+1;e<n.length;e++){const i=n[e],r=t.get(i);if(i&&r)for(const e of r.usages)e.expr.replace(e.instrIndex,e.instrIndex+1,_Y.call(i))}}(e)}class FnInfo{constructor(e,t){this.fn=e,this.fnMap=t,this.usages=[],this.size=0,this.inTable=e.parent._inFunctionTable(e),this.exported=void 0!==e.exportName}analyze(){if(this.size>0)return;const e=[this.fn.body];let t;for(;void 0!==(t=e.shift());){this.size+=t.instructions.length;for(const[n,i]of t.instructions.entries())if("structured"===i.type)e.push(i.immediate.expression),i.immediate.expression2&&e.push(i.immediate.expression2);else if("index"===i.type&&"call"===i.name){const e=this.fn.parent._functionLookup(i.immediate.value),r=this.fnMap.get(e);r&&r.usages.push({fn:this.fn,fnInfo:r,expr:t,instrIndex:n})}}}inliningCandidates(){if(this.size>50||0===this.usages.length)return[];let e=this.size;return e+=5*Math.min(this.fn.body.builder.args.length-1,0),e+=5*this.fn.locals.length,this.fn.hints.inline&&(e-=20),e<=8||e<=16&&this.usages.length<=3&&!this.inTable&&!this.exported?this.usages.filter((({fn:e})=>e!==this.fn)):[]}static infoMap(e){const t=new Map;for(const n of e.functions)t.set(n,new FnInfo(n,t));for(const e of t.values())e.analyze();return t}}function hK(e,t){return t instanceof CCompoundStatement?function(e,t){const[n,i]=yZ(e,t.scope);if(void 0===t.scope.labelledStatement)n.push(...t.statements.flatMap((t=>hK(e,t))));else{const i=[],r=[];for(const e of t.statements)r.length>0||t.scope.labelledStatement.body===e?r.push(e):i.push(e);n.push(_Y.block(null,i.flatMap((t=>hK(e,t))),fK(t.scope.labelledStatement)),_Y.loop(null,r.flatMap((t=>hK(e,t)))))}return i(),n}(e,t):t instanceof CExpressionStatement?function(e,t){return e.expression(t.expression,!0)}(e,t):t instanceof CNop?[]:t instanceof CIf?function(e,t){const n=void 0===t.ifBody?[_Y.nop()]:hK(e,t.ifBody),i=void 0===t.elseBody?void 0:hK(e,t.elseBody);return[...ZZ(e,t.test),_Y.if(null,n,i)]}(e,t):t instanceof CForLoop?function(e,t){if(void 0===t.body)throw new GenError("Invalid for loop body",e,t.node);const[n,i]=yZ(e,t.scope);let r=[];Array.isArray(t.init)?r=t.init.flatMap((t=>e.expression(t.expression,!0))):void 0===t.init||t.init instanceof CNop||(r=e.expression(t.init.expression,!0));let o=[_Y.i32.const(1n)];void 0===t.test||t.test instanceof CNop||(o=ZZ(e,t.test.expression));let s=[];return void 0!==t.update&&(s=e.expression(t.update,!0)),n.push(...r,_Y.loop(null,[...o,_Y.if(null,[_Y.block(null,[...hK(e,t.body)],pK(t)),...s,_Y.br(1)],void 0,fK(t))])),i(),n}(e,t):t instanceof CWhileLoop?function(e,t){if(void 0===t.body)throw new GenError("Invalid while loop body",e,t.node);return[_Y.loop(null,[...ZZ(e,t.test),_Y.if(null,[...hK(e,t.body),_Y.br(1)],void 0,fK(t))],pK(t))]}(e,t):t instanceof CDoLoop?function(e,t){if(void 0===t.body)throw new GenError("Invalid while loop body",e,t.node);return[_Y.block(null,[_Y.loop(null,[...hK(e,t.body),...ZZ(e,t.test),_Y.br_if(0)],pK(t))],fK(t))]}(e,t):t instanceof CSwitch?function(e,t){const n=dZ(t.expression.type);return e.withTemporaryLocal(n,(i=>{const r=[...XZ(e,t.expression,!1),_Y.local.set(i)];let o=t.children.findIndex((e=>e.default));-1===o&&(o=t.children.length);const s=[];let a=2n**65n,c=-a,l=0;for(const e of t.children)for(const t of e.cases)t.value>c&&(c=BigInt(t.value)),t.value<a&&(a=BigInt(t.value)),l++;if(c-a<=Math.min(65536,8*l)&&YX().generation_switch_br_table){if(s.push(_Y.local.get(i)),a<0||a>16){const e=n===rY?_Y.i32:_Y.i64;s.push(e.const(a),e.sub())}else a=0n;n===oY&&s.push(_Y.i32.wrap_i64());const e=Array(Number(c-a)+1).fill(o);for(const[n,i]of t.children.entries())for(const t of i.cases)e[Number(t.value)-Number(a)]=n;s.push(_Y.br_table(o,e))}else{for(const[r,o]of t.children.entries())for(const a of o.cases){if(a.type instanceof CPointer)throw new GenError("Invalid switch case",e,t.node);const o=new CConstant(t.node,a.type,a.value);s.push(_Y.local.get(i),...YZ(e,o,t.expression.type),eK(n,"eq")),s.push(_Y.br_if(r))}s.push(_Y.br(o))}let h=_Y.block(null,s);for(let n=0;n<t.children.length;n++)h=_Y.block(null,[h,...e.statement(t.children[n].body)],n===t.children.length-1?fK(t):void 0);return[...r,h]}))}(e,t):t instanceof CGoto?function(e,t){return[_Y.br({getIndex(n){const i=t.target[uK];if(void 0===i)throw new GenError("Failed to find target depth",e,t.node);return BigInt(n-i)}})]}(e,t):t instanceof CContinue?function(e,t){return[_Y.br({getIndex(n){const i=t.loop[dK];if(void 0===i)throw new GenError("Failed to find continue depth",e,t.node);return BigInt(n-i)}})]}(e,t):t instanceof CBreak?function(e,t){return[_Y.br({getIndex(n){const i=t.target[uK];if(void 0===i)throw new GenError("Failed to find break depth",e,t.node);return BigInt(n-i)}})]}(e,t):function(e,t){return void 0===t.value?[_Y.return()]:pZ(t.func.type.returnType)?[...TZ(YZ(e,t.value,t.func.type.returnType),[_Y.local.get(t.func.type.parameterTypes.length)],t.value.type.bytes),_Y.return()]:[...YZ(e,t.value,t.func.type.returnType),_Y.return()]}(e,t)}const uK=Symbol("break depth"),dK=Symbol("continue depth");function fK(e){const t=e;return({depth:e})=>{t[uK]=e+1}}function pK(e){const t=e;return({depth:e})=>{t[dK]=e+1}}class generator_WGenerator{constructor(e){this.functions=new Map,this.nextStaticAddr=32,this.module=new ModuleBuilder;const t=[];for(const n of e.emitVariables){const e=vZ(this,n);e&&t.push(e)}for(const t of e.emitImports)this.importFunction(t);for(const t of e.emitExportedFunctions)this.function(t,t.name);for(const t of e.emitFunctions)this.function(t);for(const[e,t]of this.functions.entries())e instanceof CFuncDefinition&&t instanceof WFunction&&t.define((t=>this.functionBody(e,t)));for(const e of t)e();var n;n=this.module,YX().inlining&&lK(n),this.module.emitCallback=()=>{const e=1024*Math.ceil(this.nextStaticAddr/1024);if(this._shadowStackPtr){const t=e+1024;this._shadowStackPtr.initialValue=BigInt(t),this.module.setupMemory(Math.ceil((t+1048576)/65536))}else this.isMemoryUsed()&&this.module.setupMemory(Math.ceil(e/65536))}}get shadowStackPtr(){return this._shadowStackPtr||(this._shadowStackPtr=this.module.global(rY,!0,0n,"__sp")),this._shadowStackPtr}isMemoryUsed(){if(this._shadowStackPtr||this.nextStaticAddr>32)return!0;for(const e of this.module.functions)for(const t of e.body.instructionsRecursive())if("structured"!==t.type&&"call"!==t.name&&"call_indirect"!==t.name&&(t.reads.includes("memory")||t.writes.includes("memory")))return!0;return!1}function(e,t){pZ(e.type.returnType)&&(t=void 0),t&&!e.type.parameterTypes.every((e=>e instanceof CArithmetic))&&this.shadowStackPtr;const n=this.module.function(...generator_WGenerator.funcType(e.type),void 0,t);n.hints.inline=e.hints.inline,this.functions.set(e,n)}functionBody(e,t){const n=new WFnGenerator(this,t,e.name),i=n.statement(e.body);return n.shadowStackUsage>0&&YX().generation_zero_shadow_stack&&i.unshift(_Y.global.get(this.shadowStackPtr),_Y.i32.const(0),_Y.i32.const(n.shadowStackUsage),_Y.memory.fill()),i}importFunction(e){const t=this.module.importFunction(e.type.parameterTypes.map(hZ),fZ(e.type.returnType),"c2wasm",e.name);this.functions.set(e,t)}functionIndex(e){return e instanceof CFuncDeclaration&&void 0!==e.definition&&(e=e.definition.getFunction()),{getIndex:()=>{const t=this.functions.get(e);if(void 0===t)throw new GenError(`Function '${e.name}' not emitted`,void 0,e.node);return t.getIndex()}}}static funcType(e){const t=e.parameterTypes.map(hZ);return pZ(e.returnType)&&t.push(rY),[t,fZ(e.returnType)]}typeIndex(e){return this.module._typeIndex(generator_WGenerator.funcType(e))}indirectIndex(e){e instanceof CFuncDeclaration&&void 0!==e.definition&&(e=e.definition.getFunction());const t=this.functions.get(e);if(void 0===t)throw new GenError(`Function '${e.name}' not emitted`,void 0,e.node);return t.getTableIndex()}}class WFnGenerator{constructor(e,t,n){this.gen=e,this.builder=t,this.fnName=n,this.shadowStackUsage=0}statement(e){return hK(this,e)}expression(e,t){return XZ(this,e,t)}withTemporaryLocal(e,t){const n=this.builder.getTempLocal(e),i=t(n);return this.builder.freeTempLocal(n),i}}function vK(e,t){let n=function(e,t){const n=e.specifierList,i=1===n.length?n[0]:void 0;if(i instanceof OZ.StructUnionSpecifier){const e="struct"===i.structure?CStruct:CUnion;let n=new e(i,i.id);if(i.id){const r=t.lookupTag(i.id,e,i);r?n=r:t.addTag(n)}if(!i.declarations)return n;const r=[];for(const e of i.declarations){const n=vK(e,t);for(const i of e.list){const o=yK(n,i,t),s=gK(i);if(o.incomplete||0===o.bytes||o instanceof CFuncType)throw new ParseTreeValidationError(i,"Type must be complete");r.push(new CCompoundMember(e,s,o))}}return n.members=r,n.node=i,n}if(i instanceof OZ.EnumSpecifier){let e=new CEnum(i,i.id);if(i.id){const n=t.lookupTag(i.id,CEnum,i);n?e=n:t.addTag(e)}if(!i.body)return CArithmetic.S32;let n=0n;const r=[];for(const e of i.body){e.value&&(n=bK(e.value,t).value);const i=new CVarDefinition(e,e.id,RY(CArithmetic.S32,"const"),"static","internal");i.staticValue=new CConstant(e,CArithmetic.S32,n),t.addIdentifier(i),r.push({name:e.id,value:n++})}return e.values=r,e.node=i,CArithmetic.S32}if(n.every((e=>"string"==typeof e))){const e=HY(n);if(e)return e}else if(1===n.length&&n[0]instanceof OZ.CustomTypeSpecifier)return t.lookupTypedef(n[0].name);throw new ParseTreeValidationError(e,"Invalid specifier")}(e.typeInfo,t);return e.typeInfo.qualifierList.length&&(n=RY(n,e.typeInfo.qualifierList[0])),e.declarator&&(n=yK(n,e.declarator,t)),n}function yK(e,t,n){let i=t;for(;i&&!(i instanceof OZ.IdentifierDeclarator);)if(i instanceof OZ.PointerDeclarator||i instanceof OZ.AbstractPointerDeclarator){let t=i.pointer;for(;t;)e=new CPointer(t,e,t.qualifierList?.includes("const")),t=t.body;i=i.body}else if(i instanceof OZ.ArrayDeclarator||i instanceof OZ.AbstractArrayDeclarator){if(e=new CArray(i,e),i.length&&(e.length=Number(bK(i.length,n).value),e.length<=0))throw new ParseTreeValidationError(i.length,"Invalid array length");i=i.body}else{const t=[];let r;for(const e of i.args??[]){let i=vK(e,n);if(i instanceof CArray)i=new CPointer(i.node,i.type);else if(i instanceof CFuncType)throw new ParseTreeValidationError(e,"Functions cannot be parameters");if(t.push(i),e.declarator&&!e.declarator.abstractDeclarator&&(r??(r=[]),r.push(gK(e.declarator))),r&&r.length!==t.length)throw new ParseTreeValidationError(e,"Unexpected mix of abstract & non-abstract declarators")}1===t.length&&t[0]instanceof CVoid&&t.shift(),0===t.length&&(r=[]),e=new CFuncType(i,e,t,r,i.variadic),i=i.body}return e}function gK(e){for(;!(e instanceof OZ.IdentifierDeclarator);)e=e.body;return e.id}function mK(e,t){if(e instanceof OZ.ConstantExpression)return mK(e.expr,t);if(e instanceof OZ.Constant)return _K(e);if(e instanceof OZ.Identifier){const n=new CIdentifier(e,t.lookupIdentifier(e.name,e));return t.func&&t.func.dependencies.set(n.value,!0),n}if(e instanceof OZ.StringLiteral){const t=[],n=/[^\\\n"]|\\(?:[^x0-7\n]|x[0-9a-fA-F]{1,2}|[0-7]{1,3})/y;for(;n.lastIndex<e.value.length;){const i=n.exec(e.value);if(!i||0===n.lastIndex)throw new ParseTreeValidationError(e,"Invalid string literal");t.push(BigInt(wK(i[0],e).codePointAt(0)??0))}return t.push(0n),new CStringLiteral(e,t)}if(e instanceof OZ.UnaryExpression)return function(e,t){const n=mK(e.body,t);if("prefixIncrement"===e.type)return new CIncrDecr(e,n,"++","pre");if("prefixDecrement"===e.type)return new CIncrDecr(e,n,"--","pre");if("postfixIncrement"===e.type)return new CIncrDecr(e,n,"++","post");if("postfixDecrement"===e.type)return new CIncrDecr(e,n,"--","post");if("addressOf"===e.type)return new CAddressOf(e,n);if("dereference"===e.type)return new CDereference(e,n);if("unaryPlus"===e.type)return new CUnaryPlusMinus(e,n,"+");if("unaryMinus"===e.type)return new CUnaryPlusMinus(e,n,"-");if("bitwiseNot"===e.type)return new CBitwiseNot(e,n);if("logicalNot"===e.type)return new CLogicalNot(e,n);throw new ParseTreeValidationError(e,"Invalid unary expression")}(e,t);if(e instanceof OZ.BinaryExpression)return function(e,t){const n=mK(e.lhs,t),i=mK(e.rhs,t);if("mul"===e.type)return new CMulDiv(e,n,i,"*");if("div"===e.type)return new CMulDiv(e,n,i,"/");if("mod"===e.type)return new CMod(e,n,i);if("add"===e.type)return new CAddSub(e,n,i,"+");if("sub"===e.type)return new CAddSub(e,n,i,"-");if("bitwiseShiftLeft"===e.type)return new CShift(e,n,i,"left");if("bitwiseShiftRight"===e.type)return new CShift(e,n,i,"right");if("relationalLT"===e.type)return new CRelational(e,n,i,"LT");if("relationalGT"===e.type)return new CRelational(e,n,i,"GT");if("relationalLEq"===e.type)return new CRelational(e,n,i,"LEq");if("relationalGEq"===e.type)return new CRelational(e,n,i,"GEq");if("relationalEq"===e.type)return new CEquality(e,n,i,"==");if("relationalNEq"===e.type)return new CEquality(e,n,i,"!=");if("bitwiseAnd"===e.type)return new CBitwiseAndOr(e,n,i,"and");if("bitwiseXor"===e.type)return new CBitwiseAndOr(e,n,i,"xor");if("bitwiseOr"===e.type)return new CBitwiseAndOr(e,n,i,"or");if("logicalAnd"===e.type)return new CLogicalAndOr(e,n,i,"and");if("logicalOr"===e.type)return new CLogicalAndOr(e,n,i,"or");if("comma"===e.type)return new CComma(e,n,i);if("arraySubscript"===e.type)return new CDereference(e,new CAddSub(e,mK(e.lhs,t),mK(e.rhs,t),"+"));throw new ParseTreeValidationError(e,"Invalid binary expression")}(e,t);if(e instanceof OZ.SizeofExpression)return e.body instanceof OZ.Expression?new CSizeof(e,mK(e.body,t).type):new CSizeof(e,vK(e.body,t));if(e instanceof OZ.CastExpression)return new CCast(e,vK(e.targetType,t),mK(e.body,t));if(e instanceof OZ.FunctionCallExpression)return new CFunctionCall(e,mK(e.fn,t),(e.args??[]).map((e=>mK(e,t))));if(e instanceof OZ.MemberAccessExpression){let n=mK(e.lhs,t);return e.pointer||(n=new CAddressOf(e,n)),new CMemberAccess(e,n,e.rhs)}if(e instanceof OZ.ConditionalExpression)return new CConditional(e,mK(e.condition,t),mK(e.trueValue,t),mK(e.falseValue,t));if(e instanceof OZ.AssignmentExpression)return new CAssignment(e,mK(e.lhs,t),mK(e.rhs,t),e.assignType);throw new ParseTreeValidationError(e,"Invalid expression")}function bK(e,t){return function(e,t){const n=eZ(e,t);if(n)return n;throw new ExpressionTypeError(e.node,"constant integer expression")}(mK(e.expr,t))}function _K(e){let t,n=e.value;if("int"===e.valueType||"oct"===e.valueType||"hex"===e.valueType){let t,i,r=!1,o=!1;if(n=n.toLowerCase(),n.endsWith("u")&&(n=n.slice(0,-1),r=!0),n.endsWith("l")&&(n=n.slice(0,-1),o=!0,n.endsWith("l")&&(n=n.slice(0,-1))),!r&&n.endsWith("u")&&(n=n.slice(0,-1),r=!0),"oct"!==e.valueType)t=BigInt(n);else{t=0n;for(let e=0;e<n.length-1;e++)t+=BigInt(n[n.length-1-e])*8n**BigInt(e)}i="int"!==e.valueType||r||o?"int"===e.valueType||r||o?r&&o?[CArithmetic.U64]:o?[CArithmetic.S64,CArithmetic.U64]:[CArithmetic.U32,CArithmetic.U64]:[CArithmetic.S32,CArithmetic.U32,CArithmetic.S64,CArithmetic.U64]:[CArithmetic.S32,CArithmetic.S64,CArithmetic.U64];for(const n of i)if(t>=n.minValue&&t<=n.maxValue)return new CConstant(e,n,t);throw new ParseTreeValidationError(e,"Integer constant too large for its type")}if("float"===e.valueType)return n.endsWith("f")?(n=n.slice(0,-1),t=CArithmetic.Fp32):t=CArithmetic.Fp64,new CConstant(e,t,parseFloat(n));if("char"===e.valueType)return n=wK(n,e),new CConstant(e,CArithmetic.U8,BigInt(n.codePointAt(0)));throw new ParseTreeValidationError(e,"Invalid constant type?")}function wK(e,t){if(e.startsWith("\\")){if("\\n"===e)return"\n";if("\\t"===e)return"\t";if("\\v"===e)return"\v";if("\\b"===e)return"\b";if("\\r"===e)return"\r";if("\\f"===e)return"\f";if("\\a"===e)return"";if("\\\\"===e)return"\\";if("\\?"===e)return"?";if("\\'"===e)return"'";if('\\"'===e)return'"';let n;if(n=e.startsWith("\\x")?parseInt(e.slice(2),16):parseInt(e.slice(1),8),!isNaN(n)&&n>=0&&n<=255)return String.fromCharCode(n);throw new ParseTreeValidationError(t,"Invalid character escape")}const n=e.codePointAt(0);if(1!==e.length||void 0===n||n>255)throw new ParseTreeValidationError(t,"Invalid character");return e}function xK(e,t){const n=RZ(`int x = ${e};`);if(1!==n.length||"declaration"!==n[0].type||1!==n[0].list.length||"initDeclarator"!==n[0].list[0].type||Array.isArray(n[0].list[0].initializer))throw t.error("Invalid #if conditional: `"+e+"`");return kK(n[0].list[0].initializer,t)}function kK(e,t){if(e instanceof OZ.Constant&&"float"!==e.valueType)return BigInt(_K(e).value);if(e instanceof OZ.BinaryExpression)switch(e.type){case"add":return kK(e.lhs,t)+kK(e.rhs,t);case"sub":return kK(e.lhs,t)-kK(e.rhs,t);case"mul":return kK(e.lhs,t)*kK(e.rhs,t);case"div":return kK(e.lhs,t)/kK(e.rhs,t);case"bitwiseAnd":return kK(e.lhs,t)&kK(e.rhs,t);case"bitwiseOr":return kK(e.lhs,t)|kK(e.rhs,t);case"bitwiseXor":return kK(e.lhs,t)^kK(e.rhs,t);case"bitwiseShiftLeft":return kK(e.lhs,t)<<kK(e.rhs,t);case"bitwiseShiftRight":return kK(e.lhs,t)>>kK(e.rhs,t);case"relationalEq":return kK(e.lhs,t)===kK(e.rhs,t)?1n:0n;case"relationalNEq":return kK(e.lhs,t)!==kK(e.rhs,t)?1n:0n;case"relationalLT":return kK(e.lhs,t)<kK(e.rhs,t)?1n:0n;case"relationalLEq":return kK(e.lhs,t)<=kK(e.rhs,t)?1n:0n;case"relationalGT":return kK(e.lhs,t)>kK(e.rhs,t)?1n:0n;case"relationalGEq":return kK(e.lhs,t)>=kK(e.rhs,t)?1n:0n;case"logicalAnd":return 0n!==kK(e.lhs,t)&&0n!==kK(e.rhs,t)?1n:0n;case"logicalOr":return 0n!==kK(e.lhs,t)||0n!==kK(e.rhs,t)?1n:0n}else if(e instanceof OZ.UnaryExpression)switch(e.type){case"unaryPlus":return kK(e.body,t);case"unaryMinus":return-kK(e.body,t);case"logicalNot":return 0n===kK(e.body,t)?1n:0n}else if(e instanceof OZ.Identifier)return 0n;throw t.error("Invalid preprocessor expression")}const EK=/^[a-zA-Z_][a-zA-Z0-9_]*/,CK=/^(?:"(?:\\"|[^\n"])*"|[^ \t\v\f\na-zA-Z_]+)/,SK=/^[ \t\v\f]+/,TK=/\/\*[^]*?\*\/|\/\/.*?$/gm,OK=/defined(?:[ \t]*\([ \t]*([a-zA-Z_][a-zA-Z0-9_]*)[ \t]*\)|[ \t]+([a-zA-Z_][a-zA-Z0-9_]*))|(d?[^d]*)/gm;class Definition{constructor(e,t,n,i){this.preprocessor=e,this.identifier=t,this.replacement=n,this.parameters=i}expand(e){if(this.parameters.length>0)return this.expandWithParameters(e);return{output:this.replacement.map((e=>e.value)).join(""),line:e}}expandWithParameters(e){const t=e;if(0===(e=this.preprocessor.consume(e,SK).remainingLine).length||"("!==e[0])return{output:this.identifier,line:t};e=this.preprocessor.mustConsume(e,"(").remainingLine;const n=[];for(let t=0;t<this.parameters.length;t++){const i=this.consumeArgument(e);n.push(i.value.trim()),e=t!==this.parameters.length-1?this.preprocessor.mustConsume(i.remainingLine,",").remainingLine:this.preprocessor.mustConsume(i.remainingLine,")").remainingLine}let i="";for(const e of this.replacement){if("identifier"===e.type){const t=this.parameters.indexOf(e.value);if(t>=0){i+=this.preprocessor.expandDefinitions(n[t]);continue}}i+=e.value}return{output:i,line:e}}consumeArgument(e){const t={value:"",remainingLine:e};let n=!1,i=0;for(;t.remainingLine.length>0&&(n||0!==i||","!==t.remainingLine[0]&&")"!==t.remainingLine[0]);){const e=t.remainingLine[0];let r=1;n&&"\\"===e&&'"'===t.remainingLine[1]?r=2:n||"'"!==e?'"'===e?n=!n:"("!==e||n?")"!==e||n||i--:i++:r+=Math.max(t.remainingLine.indexOf("'",1),0),t.value+=t.remainingLine.substring(0,r),t.remainingLine=t.remainingLine.substring(r)}return t}equals(e){return e.identifier===this.identifier&&e.replacement.length===this.replacement.length&&e.replacement.every(((e,t)=>e.value===this.replacement[t].value))&&e.parameters.length===this.parameters.length&&e.parameters.every(((e,t)=>e===this.parameters[t]))}}class Preprocessor extends class PreprocessorBase{consumeAny(e){let t;if((t=this.consume(e,EK)).success)return t.type="identifier",t;if((t=this.consume(e,CK)).success)return t;if((t=this.consume(e,SK)).success)return t;throw this.error("Malformed input? Line does not match defined regular expressions.\n`"+e+"`")}mustConsume(e,t,n=t.toString()){const i=this.consume(e,t);if(i.success)return i;throw this.error(`Expected to find ${n} but found \`${e}\` instead`)}consume(e,t){if("string"==typeof t)return e.startsWith(t)?{success:!0,value:t,remainingLine:e.substring(t.length)}:{success:!1,remainingLine:e};const n=e.match(t);return null===n?{success:!1,remainingLine:e}:{success:!0,value:n[0],remainingLine:e.substring(n[0].length)}}}{constructor(e,t=!0,n){if(super(),this.filename=e,this.definitions=new Map,this.userFiles=new Map,this.libraryFiles=t?new Map(qX):new Map,this.definitions.set("__FILE__",new Definition(this,"__FILE__",[{value:`"${e}"`}],[])),this.definitions.set("__c2wasm__",new Definition(this,"__c2wasm__",[{value:"1"}],[])),n)for(const[e,t]of Object.entries(n))this.definitions.set(e,new Definition(this,e,[{value:t}],[]))}process(e,t=this.filename){const n=(e=(e=e.replace(/\r\n/g,"\n")).replace(TK," ")).replace(/\\\n/g,"").split("\n");let i="";for(;n.length>0;){let e=n.shift();if(e.startsWith("#")){let r;if(e=e.substring(1).trimStart(),(r=this.consume(e,"define")).success)this._define(r.remainingLine);else if((r=this.consume(e,"undef")).success)this._undef(r.remainingLine);else if((r=this.consume(e,"include")).success)i+=this._include(r.remainingLine)+"\n";else if((r=this.consume(e,"ifdef")).success)this._ifdef(r.remainingLine,!0,n);else if((r=this.consume(e,"ifndef")).success)this._ifdef(r.remainingLine,!1,n);else if((r=this.consume(e,"if")).success)i+=this._if(r.remainingLine,n);else if((r=this.consume(e,"pragma")).success){if("once"===this.mustConsume(r.remainingLine,SK,"whitespace").remainingLine.trim()){const e=`__pragma_once_${t}__`;if(this.definitions.has(e))return i;this.definitions.set(e,new Definition(this,e,[],[]))}}else{if((r=this.consume(e,"error")).success)throw this.error("#"+e);if(e.trim().length>1)throw this.error(`Unknown preprocessor directive "#${e}"`)}}else i+=this.expandDefinitions(e)+"\n"}return i}expandDefinitions(e,t=this.definitions){let n="";for(;e.length>0;){const i=this.consumeAny(e);if("identifier"===i?.type){const r=t.get(i.value);if(void 0!==r){const o=r.expand(i.remainingLine),s=new Map(t);s.delete(i.value);let a=o.output,c="";for(;a!==c;)c=a,a=this.expandDefinitions(a,s);n+=a,e=o.line;continue}}n+=i?.value,e=i.remainingLine}return n}error(e){return new class extends Error{constructor(){super(...arguments),this.name="PreprocessorError"}}(`In file '${this.filename}': ${e}`)}_include(e){if((e=this.mustConsume(e,SK,"whitespace").remainingLine.trim()).startsWith('"')&&e.endsWith('"'))return this._includeUser(e.substring(1,e.length-1));if(e.startsWith("<")&&e.endsWith(">"))return this._includeLib(e.substring(1,e.length-1));if((e=this.expandDefinitions(e)).startsWith('"')&&e.endsWith('"'))return this._includeUser(e.substring(1,e.length-1));if(e.startsWith("<")&&e.endsWith(">"))return this._includeLib(e.substring(1,e.length-1));throw this.error("Invalid #include")}_includeLib(e){const t=this.libraryFiles.get(e);if(void 0===t)throw this.error("Unknown path `"+e+"`");return this.process(t,`<${e}>`)}_includeUser(e){const t=this.filename.replace(/[^/\\]*$/,e);let n=this.userFiles.get(t);return void 0===n&&(n=this.userFiles.get(e),void 0===n)?this._includeLib(e):this.process(n,e)}_define(e){e=this.mustConsume(e,SK,"whitespace").remainingLine;const t=this.mustConsume(e,EK,"identifier"),n=[],i=[];if(t.remainingLine.trim().length>0){if("("===t.remainingLine[0]){for(e=this.mustConsume(t.remainingLine,"(").remainingLine;e.length>0;){e=this.consume(e,SK).remainingLine;const t=this.mustConsume(e,EK,"identifier");if(i.push(t.value),0===(e=this.consume(t.remainingLine,SK).remainingLine).length)throw this.error("Unexpected end of line");if(","!==e[0]){if(")"===e[0])break;throw this.error("Unexpected")}e=this.mustConsume(e,",").remainingLine}(e=this.mustConsume(e,")").remainingLine).length>0&&(e=this.mustConsume(e,SK,"whitespace").remainingLine)}else e=this.mustConsume(t.remainingLine,SK,"whitespace").remainingLine;for(;e.length>0;){const t=this.consumeAny(e);"identifier"===t.type&&i.includes(t.value)||(t.value=this.expandDefinitions(t.value)),n.push(t),e=t.remainingLine}}const r=new Definition(this,t.value,n,i),o=this.definitions.get(t.value);if(void 0!==o&&!r.equals(o))throw this.error("Duplicate defines must be the same");this.definitions.set(t.value,r)}_undef(e){e=this.mustConsume(e,SK,"whitespace").remainingLine;const t=this.mustConsume(e,EK,"identifier");if(0!==t.remainingLine.trim().length)throw this.error("Unexpected extra characters in undef");this.definitions.delete(t.value)}_ifdef(e,t,n){e=this.mustConsume(e,SK,"whitespace").remainingLine;const i=this.mustConsume(e,EK,"identifier");n.unshift(`#if ${t?"":"!"} defined ${i.value}`)}_if(e,t){const n=this.mustConsume(e,SK,"whitespace").remainingLine;let i=this._condition(n),r=i,o=1,s=!1;const a=[];for(let e=0;e<t.length;e++){const n=t[e].trimEnd();if(n.startsWith("#if"))o++;else if("#endif"===n){if(o--,0===o)return t.splice(0,e+1),this.process(a.join("\n"))}else{if("#else"===n&&1===o){if(s)throw this.error("more than one #else statement");s=!0,i=!r,r=!0;continue}if(n.startsWith("#elif")&&1===o){if(r)i=!1;else{const n=this.mustConsume(t[e].substring(5),SK,"whitespace").remainingLine;i=this._condition(n),r||(r=i)}continue}}i&&a.push(t[e])}throw this.error("no matching #endif found")}_condition(e){let t="";for(const n of e.matchAll(OK)){if(4!==n.length)throw this.error("invalid regex result when processing #if condition");const e=n[1]??n[2];t+=e?this.definitions.has(e)?" 1L ":" 0L ":n[3]}t=this.expandDefinitions(t);try{return 0n!==xK(t,this)}catch(t){throw this.error("Invalid condition `"+e+"`")}}}function IK(e,t,n){if("typedef"===e.typeInfo.storageList[0])return function(e,t){if(0===e.list.length)throw new ParseTreeValidationError(e,"typedef must define at least one identifier");const n=vK(e,t);for(const i of e.list){if(i instanceof OZ.InitDeclarator)throw new ParseTreeValidationError(e,"cannot initialize a typedef");const r=yK(n,i,t),o=gK(i);t.addTypedef(o,r,i)}}(e,t),[];const i=vK(e,t),r=[];for(let o of e.list){const s=gK(o);let a;o instanceof OZ.InitDeclarator&&(a=AK(o,o.initializer,t),o=o.body);const c=yK(i,o,t),l=a?.type instanceof CPointer?a.type.original??a.type:a?.type;if(l instanceof CArray&&c instanceof CArray&&c.incomplete&&(c.length=l.length),c.incomplete)throw new ExpressionTypeError(c.node??o,"complete type","incomplete type");if(c instanceof CFuncType){const n="static"===e.typeInfo.storageList[0]?"internal":"external",i="import"===e.typeInfo.fnSpecifierList[0];t.addIdentifier(new CFuncDeclaration(o,s,c,n,i))}else{if(e.typeInfo.fnSpecifierList.length>0)throw new ExpressionTypeError(o,"variable declaration with function specifier");let i,l,h;"static"===e.typeInfo.storageList[0]?(i="static",l=n?"none":"internal",h=n||void 0!==a?CVarDefinition:CVarDeclaration):"extern"===e.typeInfo.storageList[0]?(i="static",l="external",h=CVarDeclaration):(i=n?"local":"static",l=n?"none":"external",h=n||void 0!==a?CVarDefinition:CVarDeclaration);const u=new h(o,s,c,i,l);if(t.addIdentifier(u),a){if(u instanceof CVarDeclaration)throw new ExpressionTypeError(o,"declaration","declaration with initializer");if(a instanceof CInitializer&&(a.type=c),a instanceof CConstant&&c instanceof CArithmetic&&c!==a.type&&(a=a.changeType(c)),n&&"static"!==u.storage){const e=new CIdentifier(o,u);r.push(new CAssignment(o,e,a,void 0,!0))}else{u.staticValue=a,CAssignment.checkAssignmentValid(o,c,u.staticValue);for(const e of a.identifiers())u.dependencies.set(e.value,!0)}}}}return r}function AK(e,t,n){return Array.isArray(t)?new CInitializer(e,t.map((t=>AK(e,t,n)))):mK(t,n)}function LK(e,t){if("import"===e.typeInfo.fnSpecifierList[0])throw new ExpressionTypeError(e,"function definition to not be marked `import`");const n=vK(e,t);if(!(n instanceof CFuncType))throw new ParseTreeValidationError(e,"Unexpected declarator");const i=gK(e.declarator);let r;if("static"===e.typeInfo.storageList[0])r="internal";else{if("typedef"===e.typeInfo.storageList[0])throw new ParseTreeValidationError(e,"Invalid typedef");r="external"}const o=new CFuncDefinition(e,i,n,r,t);if(o.hints.inline="inline"===e.typeInfo.fnSpecifierList[0],t.addIdentifier(o),!n.parameterNames)throw new ParseTreeValidationError(e,"Expected parameter names");for(let t=0;t<n.parameterTypes.length;t++)o.body.scope.addIdentifier(new CArgument(e,n.parameterNames[t],n.parameterTypes[t],t));if(NK(e.body,o),!(n.returnType instanceof CVoid||FK(o.body)))throw new ParseTreeValidationError(e.body,"Non-void function may not return")}function FK(e){if(e instanceof CReturn)return!0;if(e instanceof CCompoundStatement){for(let t=0;t<e.statements.length;t++)if(FK(e.statements[t])){if(t+1<e.statements.length){if(e.statements[t+1]===e.scope.labelledStatement?.body)continue;throw new ParseTreeValidationError(e.statements[t+1].node,"Statement after return")}return!0}}else{if(e instanceof CIf)return FK(e.ifBody)&&FK(e.elseBody);if(e instanceof CDoLoop)return FK(e.body);if(e instanceof CSwitch)return e.children.every((e=>FK(e.body)))&&void 0!==e.children.find((e=>e.default))}return!1}function PK(e,t){if(e instanceof OZ.CompoundStatement)return NK(e,t);if(e instanceof OZ.ExpressionStatement)return new CExpressionStatement(e,mK(e.expression,t.scope),t);if(e instanceof OZ.IfStatement){const n=new CIf(e,mK(e.expression,t.scope),t);return n.ifBody=PK(e.ifBody,n),e.elseBody&&(n.elseBody=PK(e.elseBody,n)),n}if(e instanceof OZ.ForLoop){const n=new CForLoop(e,t);return e.init instanceof OZ.ExpressionStatement||e.init instanceof OZ.NoOp?n.init=PK(e.init,n):n.init=IK(e.init,n.scope,!0).map((e=>new CExpressionStatement(e.node,e,n))),n.test=PK(e.test,n),e.update&&(n.update=mK(e.update,n.scope)),n.body=PK(e.body,n),n}if(e instanceof OZ.WhileLoop){const n=new CWhileLoop(e,mK(e.test,t.scope),t);return n.body=PK(e.body,n),n}if(e instanceof OZ.DoWhileLoop){const n=new CDoLoop(e,mK(e.test,t.scope),t);return n.body=PK(e.body,n),n}if(e instanceof OZ.GotoStatement){let n=t;for(;n.scope.labelledStatement?.label!==e.target;){if(n.parent instanceof CFuncDefinition)throw new ParseTreeValidationError(e,"No properly structured control flow target for goto statement");n=n.parent}return new CGoto(e,n.scope.labelledStatement,t)}if(e instanceof OZ.ContinueStatement){let n=t;for(;!(n instanceof CForLoop||n instanceof CWhileLoop||n instanceof CDoLoop);){if(n.parent instanceof CFuncDefinition)throw new ParseTreeValidationError(e,"No target for continue statement");n=n.parent}return new CContinue(e,n,t)}if(e instanceof OZ.BreakStatement){let n=t;for(;!(n instanceof CForLoop||n instanceof CWhileLoop||n instanceof CDoLoop||n instanceof CSwitch);){if(n.parent instanceof CFuncDefinition)throw new ParseTreeValidationError(e,"No target for break statement");n=n.parent}return new CBreak(e,n,t)}if(e instanceof OZ.SwitchStatement){const n=new CSwitch(e,mK(e.expression,t.scope),t);return function(e,t,n){if(!(t.body instanceof OZ.CompoundStatement))throw new ParseTreeValidationError(t,"Expected switch statement to have a compound statement body");const i=t.body.body.slice();for(;i.length>0;){const r=i.shift();if(r instanceof OZ.CaseStatement||r instanceof OZ.DefaultStatement){let o;e.children.length>0&&0===e.children[e.children.length-1].body.statements.length?o=e.children[e.children.length-1]:(o={cases:[],default:!1,body:new CCompoundStatement(t,e)},e.children.push(o)),r instanceof OZ.CaseStatement?o.cases.push(bK(r.value,n)):o.default=!0,i.unshift(r.body)}else if(r){if(0===e.children.length)throw new ParseTreeValidationError(r,"Unexpected first statement inside a switch statement");MK(r,e.children[e.children.length-1].body)}}}(n,e,t.scope),n}if(e instanceof OZ.ReturnStatement){let n=t;for(;!(n instanceof CFuncDefinition);)n=n.parent;const i=e.value?mK(e.value,t.scope):void 0;return new CReturn(e,n,i,t)}if(e instanceof OZ.NoOp)return new CNop(e,t);if(e instanceof OZ.CaseStatement)throw new ParseTreeValidationError(e,"Unexpected case statement");if(e instanceof OZ.DefaultStatement)throw new ParseTreeValidationError(e,"Unexpected default statement");throw new ParseTreeValidationError(e,"Unknown statement type")}function NK(e,t){const n=t instanceof CFuncDefinition?t.body:new CCompoundStatement(e,t),i=e.body.filter((e=>e instanceof OZ.Statement&&void 0!==e.label));if(i.length>1)throw new ParseTreeValidationError(i[0],"Only one labelled statement is supported per block",i[1]);1===i.length&&(n.scope.labelledStatement=new CLabelledStatement(i[0],i[0].label));for(const t of e.body)MK(t,n);return n}function MK(e,t){if(e instanceof OZ.Declaration)for(const n of IK(e,t.scope,!0))t.statements.push(new CExpressionStatement(n.node,n,t));else{const n=PK(e,t);t.statements.push(n),void 0!==e.label&&t.scope.labelledStatement?.node===e&&(t.scope.labelledStatement.body=n)}}function DK(e){return function(e){const t=new Scope(void 0,$Z);for(const n of e)n instanceof OZ.FunctionDefinition?LK(n,t):IK(n,t,!1);return t}(RZ(e))}class linker_Linker{constructor(e,t=!0,n){this.files=e,this._emitExportedFunctions=[],this._emitFunctions=[],this._emitImports=[],this._emitVariables=[],this._linkables=new Map,this._linked=!1;for(const[i,r]of e.entries()){if(!i.endsWith(".c"))continue;const o=new Preprocessor(i,t,n);for(const[t,n]of e.entries())o.userFiles.set(t,n);const s=o.process(r);try{this.process_scope(DK(s))}catch(e){throw e.message=(e.message??"")+"\nIn file: "+i,e}}}link(...e){if(this._linked)throw new LinkingError("Already linked!");if(e&&e.some((e=>!e._linked)))throw new LinkingError("Cannot link against a not-linked Linker!");e:for(const t of this._linkables.values())if(void 0===t.definition){for(const n of e){const e=n._linkables.get(t.id);if(void 0!==e&&e.definition){if(t instanceof ExternalFunction&&e instanceof ExternalFunction)t.setDefinition(e.definition,n);else{if(!(t instanceof ExternalVariable&&e instanceof ExternalVariable))throw new LinkingError("Tried to link incompatible types",t.parseNode,e.parseNode);t.setDefinition(e.definition,n)}continue e}}if("variable"!==t.externalType){if("function"!==t.externalType||!t.declarationArray[0].fnImport)throw new LinkingError("Failed to find definition",t.parseNode);t.setDefinition(new CFuncImport(t.declarationArray[0]),this)}else{const e=new CVarDefinition(t.parseNode,t.id,t.type,"static","external");t.setDefinition(e,this)}}const t=new Map,n=[];for(const e of this._linkables.values()){if(void 0===e.definition)throw new LinkingError("Invalid state - declaration has no definition in emit",e.parseNode);e.definitionLinker===this&&(t.set(e.definition,!0),n.unshift(e.definition))}for(;n.length;){const e=n.shift();if(e instanceof CFuncImport)this._emitImports.push(e.declaration);else{"variable"===e.declType?"static"===e.storage&&this._emitVariables.push(e):"external"===e.linkage&&this._linkables.get(e.name)?.definitionLinker===this?this._emitExportedFunctions.push(e):this._emitFunctions.push(e);for(const i of e.dependencies.keys())if(i instanceof CFuncDeclaration||i instanceof CVarDeclaration)if("__internal__"===i.node.type);else{if(void 0===i.definition)throw new LinkingError("Invalid state - declaration doesn't have definition in emit",i.node);t.has(i.definition)||(t.set(i.definition,!0),n.push(i.definition))}else i instanceof CArgument||t.has(i)||(t.set(i,!0),n.push(i))}}this._linked=!0}get emitExportedFunctions(){return this._emitExportedFunctions}get emitFunctions(){return this._emitFunctions}get emitImports(){return this._emitImports}get emitVariables(){return this._emitVariables}process_scope(e){for(const t of e.declarations)if(t instanceof CFuncDeclaration)if("external"===t.linkage)this.externalFn(t).addDeclaration(t);else{if(!t.fnImport)throw new LinkingError("No definition of internally linked function",t.node);t.definition=new CFuncImport(t)}else t instanceof CFuncDefinition?("external"===t.linkage&&this.externalFn(t).setDefinition(t,this),this.process_fn_body(t.body)):t instanceof CVarDeclaration?"external"===t.linkage?this.externalVar(t).addDeclaration(t):t.definition=new CVarDefinition(t.node,t.name,t.type,t.storage,t.linkage):t instanceof CVarDefinition&&"external"===t.linkage&&this.externalVar(t).setDefinition(t,this)}process_fn_body(e){if(e instanceof CCompoundStatement){this.process_scope(e.scope);for(const t of e.statements)this.process_fn_body(t)}else if(e instanceof CForLoop)this.process_scope(e.scope),e.body&&this.process_fn_body(e.body);else if(e instanceof CIf)e.ifBody&&this.process_fn_body(e.ifBody);else if(e instanceof CWhileLoop||e instanceof CDoLoop)e.body&&this.process_fn_body(e.body);else if(e instanceof CSwitch)for(const t of e.children)this.process_fn_body(t.body)}externalFn(e){let t=this._linkables.get(e.name);if(void 0===t)this._linkables.set(e.name,t=new ExternalFunction(e.name,e.type));else{if(t instanceof ExternalVariable)throw new LinkingError("Tried to link function with variable",e.node,t.parseNode);if(!t.type.equals(e.type))throw new LinkingError("Tried to link functions with incompatible types",e.node,t.parseNode);if((!(e instanceof CFuncDefinition)&&e.fnImport)!==(!t.definition&&t.declarationArray[0].fnImport))throw new LinkingError("Tried to link mix of functions marked import",e.node,t.parseNode)}return t}externalVar(e){let t=this._linkables.get(e.name);if(void 0===t)this._linkables.set(e.name,t=new ExternalVariable(e.name,e.type));else{if(t instanceof ExternalFunction)throw new LinkingError("Tried to link variable with function",e.node,t.parseNode);if(!t.type.equals(e.type))throw new LinkingError("Tried to link variables with incompatible types",e.node,t.parseNode)}return t}}class Linkable{constructor(e,t){this.id=e,this.type=t,this.declarations=[]}addDeclaration(e){this.declarations.push(e),this._definition&&(e.definition=this._definition)}setDefinition(e,t){if(void 0!==this._definition)throw new LinkingError("Already defined!",e.node,this.parseNode);this._definition=e,this._defLinker=t,this.declarations.forEach((t=>{t.definition=e}))}get parseNode(){if(this._definition)return this._definition.node;if(this.declarations.length>0)return this.declarations[0].node;throw new LinkingError("Linkable without parse node? This shouldn't happen!")}get definition(){return this._definition}get definitionLinker(){if(!this._defLinker)throw new Error("Definition not set");return this._defLinker}get declarationArray(){return this.declarations}}class ExternalFunction extends Linkable{constructor(){super(...arguments),this.externalType="function"}}class ExternalVariable extends Linkable{constructor(){super(...arguments),this.externalType="variable"}}class LinkingError extends CError{constructor(){super(...arguments),this.name="LinkingError"}}new Map;if("undefined"==typeof window||!window.document)throw new Error("Must be ran in a web browser");const zK="\nlong testFn(int v) {\n  if (v < 0) return -1;\n  if (v > 100) return 0;\n  v *= 2;\n\n  int sum = 0;\n  for (int i = 0; i < v; i++) {\n    sum += i;\n  }\n  return sum;\n}\n\n".trimStart();let BK;const RK={nodes:{shape:"dot",size:8,color:"gray"},edges:{color:"gray",arrows:"to"},layout:{randomSeed:1}};let jK;window.document.write(`\n<style>\nhtml, body {\n    height: 100%;\n}\n\n* {\n    margin: 0;\n    box-sizing: border-box;\n}\n</style>\n\n<div style="display: flex; flex-direction: column; width: 100%; height: 100%">\n    <h1 style="margin: 4px;">c2wasm cfg</h1>\n    <textarea id="textInput" rows="20" style="width: 100%; resize: vertical">${zK}</textarea>\n    <pre id="errors"></pre>\n    <div style="flex: 1; position: relative">\n        <div style="position:absolute; width: 100%; height: 100%;" id="network"></div>\n    </div>\n</div>`);const UK=window.document.getElementById("textInput"),$K=window.document.getElementById("errors"),HK=document.getElementById("network"),WK=()=>{try{jK=function(e){const t=new Map;t.set("main.c",e);const n=new linker_Linker(t,!1);return n.link(),new generator_WGenerator(n).module}(UK.value),$K.innerText="",HK.style.visibility="visible"}catch(e){throw jK=void 0,$K.innerText=e.stack,HK.style.visibility="hidden",e}const e=jK.functions.find((e=>e.exportName));e&&function(e){const{all:t,entry:n,exit:i}=AY(e.body),r=[{id:0,label:"Start",color:"green",borderWidth:3},{id:1,label:"End",color:"red",borderWidth:3}],o=[],s=new Map;s.set(i,1);for(let e=0;e<t.length;){let n=e;for(;n<t.length&&1===t[n].flowNext.length;n++){const[e]=[...t[n].flowNext];if(e!==t[n+1]||e.flowPrevious.length>1)break}const i=[];for(;e<=Math.min(n,t.length-1);e++)i.push(t[e].instr.name),s.set(t[e],r.length);r.push({id:r.length,label:i.join("\n")})}for(const e of n.flowNext){const t=s.get(e);t&&o.push({from:0,to:t})}for(const e of t){const t=s.get(e)??-1;for(const n of e.flowNext){const e=s.get(n)??-1;t!==e&&o.push({from:t,to:e})}}const a={nodes:r,edges:o};BK?BK.setData(a):BK=new HX(HK,a,RK)}(e)};UK.addEventListener("input",WK),WK()})()})();
//# sourceMappingURL=cfg.js.map